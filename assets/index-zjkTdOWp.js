var sy=r=>{throw TypeError(r)};var vf=(r,e,t)=>e.has(r)||sy("Cannot "+t);var xt=(r,e,t)=>(vf(r,e,"read from private field"),t?t.call(r):e.get(r)),kn=(r,e,t)=>e.has(r)?sy("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(r):e.set(r,t),Ns=(r,e,t,s)=>(vf(r,e,"write to private field"),s?s.call(r,t):e.set(r,t),t),Rn=(r,e,t)=>(vf(r,e,"access private method"),t);var ny=(r,e,t,s)=>({set _(i){Ns(r,e,i,t)},get _(){return xt(r,e,s)}});(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}})();function kb(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var wf={exports:{}},Lo={};var iy;function uA(){if(iy)return Lo;iy=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(s,i,o){var c=null;if(o!==void 0&&(c=""+o),i.key!==void 0&&(c=""+i.key),"key"in i){o={};for(var u in i)u!=="key"&&(o[u]=i[u])}else o=i;return i=o.ref,{$$typeof:r,type:s,key:c,ref:i!==void 0?i:null,props:o}}return Lo.Fragment=e,Lo.jsx=t,Lo.jsxs=t,Lo}var ay;function hA(){return ay||(ay=1,wf.exports=uA()),wf.exports}var l=hA(),_f={exports:{}},Ee={};var ry;function fA(){if(ry)return Ee;ry=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),g=Symbol.for("react.activity"),x=Symbol.iterator;function b(B){return B===null||typeof B!="object"?null:(B=x&&B[x]||B["@@iterator"],typeof B=="function"?B:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_=Object.assign,S={};function A(B,$,K){this.props=B,this.context=$,this.refs=S,this.updater=K||w}A.prototype.isReactComponent={},A.prototype.setState=function(B,$){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,$,"setState")},A.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function L(){}L.prototype=A.prototype;function O(B,$,K){this.props=B,this.context=$,this.refs=S,this.updater=K||w}var D=O.prototype=new L;D.constructor=O,_(D,A.prototype),D.isPureReactComponent=!0;var I=Array.isArray;function C(){}var P={H:null,A:null,T:null,S:null},k=Object.prototype.hasOwnProperty;function N(B,$,K){var Q=K.ref;return{$$typeof:r,type:B,key:$,ref:Q!==void 0?Q:null,props:K}}function M(B,$){return N(B.type,$,B.props)}function H(B){return typeof B=="object"&&B!==null&&B.$$typeof===r}function F(B){var $={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(K){return $[K]})}var V=/\/+/g;function q(B,$){return typeof B=="object"&&B!==null&&B.key!=null?F(""+B.key):$.toString(36)}function z(B){switch(B.status){case"fulfilled":return B.value;case"rejected":throw B.reason;default:switch(typeof B.status=="string"?B.then(C,C):(B.status="pending",B.then(function($){B.status==="pending"&&(B.status="fulfilled",B.value=$)},function($){B.status==="pending"&&(B.status="rejected",B.reason=$)})),B.status){case"fulfilled":return B.value;case"rejected":throw B.reason}}throw B}function E(B,$,K,Q,Z){var de=typeof B;(de==="undefined"||de==="boolean")&&(B=null);var ue=!1;if(B===null)ue=!0;else switch(de){case"bigint":case"string":case"number":ue=!0;break;case"object":switch(B.$$typeof){case r:case e:ue=!0;break;case f:return ue=B._init,E(ue(B._payload),$,K,Q,Z)}}if(ue)return Z=Z(B),ue=Q===""?"."+q(B,0):Q,I(Z)?(K="",ue!=null&&(K=ue.replace(V,"$&/")+"/"),E(Z,$,K,"",function(Re){return Re})):Z!=null&&(H(Z)&&(Z=M(Z,K+(Z.key==null||B&&B.key===Z.key?"":(""+Z.key).replace(V,"$&/")+"/")+ue)),$.push(Z)),1;ue=0;var xe=Q===""?".":Q+":";if(I(B))for(var pe=0;pe<B.length;pe++)Q=B[pe],de=xe+q(Q,pe),ue+=E(Q,$,K,de,Z);else if(pe=b(B),typeof pe=="function")for(B=pe.call(B),pe=0;!(Q=B.next()).done;)Q=Q.value,de=xe+q(Q,pe++),ue+=E(Q,$,K,de,Z);else if(de==="object"){if(typeof B.then=="function")return E(z(B),$,K,Q,Z);throw $=String(B),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.")}return ue}function j(B,$,K){if(B==null)return B;var Q=[],Z=0;return E(B,Q,"","",function(de){return $.call(K,de,Z++)}),Q}function G(B){if(B._status===-1){var $=B._result;$=$(),$.then(function(K){(B._status===0||B._status===-1)&&(B._status=1,B._result=K)},function(K){(B._status===0||B._status===-1)&&(B._status=2,B._result=K)}),B._status===-1&&(B._status=0,B._result=$)}if(B._status===1)return B._result.default;throw B._result}var Y=typeof reportError=="function"?reportError:function(B){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var $=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof B=="object"&&B!==null&&typeof B.message=="string"?String(B.message):String(B),error:B});if(!window.dispatchEvent($))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",B);return}console.error(B)},ee={map:j,forEach:function(B,$,K){j(B,function(){$.apply(this,arguments)},K)},count:function(B){var $=0;return j(B,function(){$++}),$},toArray:function(B){return j(B,function($){return $})||[]},only:function(B){if(!H(B))throw Error("React.Children.only expected to receive a single React element child.");return B}};return Ee.Activity=g,Ee.Children=ee,Ee.Component=A,Ee.Fragment=t,Ee.Profiler=i,Ee.PureComponent=O,Ee.StrictMode=s,Ee.Suspense=h,Ee.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=P,Ee.__COMPILER_RUNTIME={__proto__:null,c:function(B){return P.H.useMemoCache(B)}},Ee.cache=function(B){return function(){return B.apply(null,arguments)}},Ee.cacheSignal=function(){return null},Ee.cloneElement=function(B,$,K){if(B==null)throw Error("The argument must be a React element, but you passed "+B+".");var Q=_({},B.props),Z=B.key;if($!=null)for(de in $.key!==void 0&&(Z=""+$.key),$)!k.call($,de)||de==="key"||de==="__self"||de==="__source"||de==="ref"&&$.ref===void 0||(Q[de]=$[de]);var de=arguments.length-2;if(de===1)Q.children=K;else if(1<de){for(var ue=Array(de),xe=0;xe<de;xe++)ue[xe]=arguments[xe+2];Q.children=ue}return N(B.type,Z,Q)},Ee.createContext=function(B){return B={$$typeof:c,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null},B.Provider=B,B.Consumer={$$typeof:o,_context:B},B},Ee.createElement=function(B,$,K){var Q,Z={},de=null;if($!=null)for(Q in $.key!==void 0&&(de=""+$.key),$)k.call($,Q)&&Q!=="key"&&Q!=="__self"&&Q!=="__source"&&(Z[Q]=$[Q]);var ue=arguments.length-2;if(ue===1)Z.children=K;else if(1<ue){for(var xe=Array(ue),pe=0;pe<ue;pe++)xe[pe]=arguments[pe+2];Z.children=xe}if(B&&B.defaultProps)for(Q in ue=B.defaultProps,ue)Z[Q]===void 0&&(Z[Q]=ue[Q]);return N(B,de,Z)},Ee.createRef=function(){return{current:null}},Ee.forwardRef=function(B){return{$$typeof:u,render:B}},Ee.isValidElement=H,Ee.lazy=function(B){return{$$typeof:f,_payload:{_status:-1,_result:B},_init:G}},Ee.memo=function(B,$){return{$$typeof:p,type:B,compare:$===void 0?null:$}},Ee.startTransition=function(B){var $=P.T,K={};P.T=K;try{var Q=B(),Z=P.S;Z!==null&&Z(K,Q),typeof Q=="object"&&Q!==null&&typeof Q.then=="function"&&Q.then(C,Y)}catch(de){Y(de)}finally{$!==null&&K.types!==null&&($.types=K.types),P.T=$}},Ee.unstable_useCacheRefresh=function(){return P.H.useCacheRefresh()},Ee.use=function(B){return P.H.use(B)},Ee.useActionState=function(B,$,K){return P.H.useActionState(B,$,K)},Ee.useCallback=function(B,$){return P.H.useCallback(B,$)},Ee.useContext=function(B){return P.H.useContext(B)},Ee.useDebugValue=function(){},Ee.useDeferredValue=function(B,$){return P.H.useDeferredValue(B,$)},Ee.useEffect=function(B,$){return P.H.useEffect(B,$)},Ee.useEffectEvent=function(B){return P.H.useEffectEvent(B)},Ee.useId=function(){return P.H.useId()},Ee.useImperativeHandle=function(B,$,K){return P.H.useImperativeHandle(B,$,K)},Ee.useInsertionEffect=function(B,$){return P.H.useInsertionEffect(B,$)},Ee.useLayoutEffect=function(B,$){return P.H.useLayoutEffect(B,$)},Ee.useMemo=function(B,$){return P.H.useMemo(B,$)},Ee.useOptimistic=function(B,$){return P.H.useOptimistic(B,$)},Ee.useReducer=function(B,$,K){return P.H.useReducer(B,$,K)},Ee.useRef=function(B){return P.H.useRef(B)},Ee.useState=function(B){return P.H.useState(B)},Ee.useSyncExternalStore=function(B,$,K){return P.H.useSyncExternalStore(B,$,K)},Ee.useTransition=function(){return P.H.useTransition()},Ee.version="19.2.3",Ee}var oy;function ym(){return oy||(oy=1,_f.exports=fA()),_f.exports}var R=ym();const Ve=kb(R);var Af={exports:{}},Oo={},Sf={exports:{}},Nf={};var ly;function mA(){return ly||(ly=1,(function(r){function e(E,j){var G=E.length;E.push(j);e:for(;0<G;){var Y=G-1>>>1,ee=E[Y];if(0<i(ee,j))E[Y]=j,E[G]=ee,G=Y;else break e}}function t(E){return E.length===0?null:E[0]}function s(E){if(E.length===0)return null;var j=E[0],G=E.pop();if(G!==j){E[0]=G;e:for(var Y=0,ee=E.length,B=ee>>>1;Y<B;){var $=2*(Y+1)-1,K=E[$],Q=$+1,Z=E[Q];if(0>i(K,G))Q<ee&&0>i(Z,K)?(E[Y]=Z,E[Q]=G,Y=Q):(E[Y]=K,E[$]=G,Y=$);else if(Q<ee&&0>i(Z,G))E[Y]=Z,E[Q]=G,Y=Q;else break e}}return j}function i(E,j){var G=E.sortIndex-j.sortIndex;return G!==0?G:E.id-j.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;r.unstable_now=function(){return o.now()}}else{var c=Date,u=c.now();r.unstable_now=function(){return c.now()-u}}var h=[],p=[],f=1,g=null,x=3,b=!1,w=!1,_=!1,S=!1,A=typeof setTimeout=="function"?setTimeout:null,L=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;function D(E){for(var j=t(p);j!==null;){if(j.callback===null)s(p);else if(j.startTime<=E)s(p),j.sortIndex=j.expirationTime,e(h,j);else break;j=t(p)}}function I(E){if(_=!1,D(E),!w)if(t(h)!==null)w=!0,C||(C=!0,F());else{var j=t(p);j!==null&&z(I,j.startTime-E)}}var C=!1,P=-1,k=5,N=-1;function M(){return S?!0:!(r.unstable_now()-N<k)}function H(){if(S=!1,C){var E=r.unstable_now();N=E;var j=!0;try{e:{w=!1,_&&(_=!1,L(P),P=-1),b=!0;var G=x;try{t:{for(D(E),g=t(h);g!==null&&!(g.expirationTime>E&&M());){var Y=g.callback;if(typeof Y=="function"){g.callback=null,x=g.priorityLevel;var ee=Y(g.expirationTime<=E);if(E=r.unstable_now(),typeof ee=="function"){g.callback=ee,D(E),j=!0;break t}g===t(h)&&s(h),D(E)}else s(h);g=t(h)}if(g!==null)j=!0;else{var B=t(p);B!==null&&z(I,B.startTime-E),j=!1}}break e}finally{g=null,x=G,b=!1}j=void 0}}finally{j?F():C=!1}}}var F;if(typeof O=="function")F=function(){O(H)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,q=V.port2;V.port1.onmessage=H,F=function(){q.postMessage(null)}}else F=function(){A(H,0)};function z(E,j){P=A(function(){E(r.unstable_now())},j)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(E){E.callback=null},r.unstable_forceFrameRate=function(E){0>E||125<E?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<E?Math.floor(1e3/E):5},r.unstable_getCurrentPriorityLevel=function(){return x},r.unstable_next=function(E){switch(x){case 1:case 2:case 3:var j=3;break;default:j=x}var G=x;x=j;try{return E()}finally{x=G}},r.unstable_requestPaint=function(){S=!0},r.unstable_runWithPriority=function(E,j){switch(E){case 1:case 2:case 3:case 4:case 5:break;default:E=3}var G=x;x=E;try{return j()}finally{x=G}},r.unstable_scheduleCallback=function(E,j,G){var Y=r.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?Y+G:Y):G=Y,E){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=G+ee,E={id:f++,callback:j,priorityLevel:E,startTime:G,expirationTime:ee,sortIndex:-1},G>Y?(E.sortIndex=G,e(p,E),t(h)===null&&E===t(p)&&(_?(L(P),P=-1):_=!0,z(I,G-Y))):(E.sortIndex=ee,e(h,E),w||b||(w=!0,C||(C=!0,F()))),E},r.unstable_shouldYield=M,r.unstable_wrapCallback=function(E){var j=x;return function(){var G=x;x=j;try{return E.apply(this,arguments)}finally{x=G}}}})(Nf)),Nf}var cy;function pA(){return cy||(cy=1,Sf.exports=mA()),Sf.exports}var Ef={exports:{}},os={};var dy;function gA(){if(dy)return os;dy=1;var r=ym();function e(h){var p="https://react.dev/errors/"+h;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)p+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+h+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var s={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},i=Symbol.for("react.portal");function o(h,p,f){var g=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:g==null?null:""+g,children:h,containerInfo:p,implementation:f}}var c=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(h,p){if(h==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return os.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,os.createPortal=function(h,p){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return o(h,p,null,f)},os.flushSync=function(h){var p=c.T,f=s.p;try{if(c.T=null,s.p=2,h)return h()}finally{c.T=p,s.p=f,s.d.f()}},os.preconnect=function(h,p){typeof h=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,s.d.C(h,p))},os.prefetchDNS=function(h){typeof h=="string"&&s.d.D(h)},os.preinit=function(h,p){if(typeof h=="string"&&p&&typeof p.as=="string"){var f=p.as,g=u(f,p.crossOrigin),x=typeof p.integrity=="string"?p.integrity:void 0,b=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;f==="style"?s.d.S(h,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:g,integrity:x,fetchPriority:b}):f==="script"&&s.d.X(h,{crossOrigin:g,integrity:x,fetchPriority:b,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},os.preinitModule=function(h,p){if(typeof h=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var f=u(p.as,p.crossOrigin);s.d.M(h,{crossOrigin:f,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&s.d.M(h)},os.preload=function(h,p){if(typeof h=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var f=p.as,g=u(f,p.crossOrigin);s.d.L(h,f,{crossOrigin:g,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},os.preloadModule=function(h,p){if(typeof h=="string")if(p){var f=u(p.as,p.crossOrigin);s.d.m(h,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:f,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else s.d.m(h)},os.requestFormReset=function(h){s.d.r(h)},os.unstable_batchedUpdates=function(h,p){return h(p)},os.useFormState=function(h,p,f){return c.H.useFormState(h,p,f)},os.useFormStatus=function(){return c.H.useHostTransitionStatus()},os.version="19.2.3",os}var uy;function xA(){if(uy)return Ef.exports;uy=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Ef.exports=gA(),Ef.exports}var hy;function yA(){if(hy)return Oo;hy=1;var r=pA(),e=ym(),t=xA();function s(n){var a="https://react.dev/errors/"+n;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)a+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+n+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function o(n){var a=n,d=n;if(n.alternate)for(;a.return;)a=a.return;else{n=a;do a=n,(a.flags&4098)!==0&&(d=a.return),n=a.return;while(n)}return a.tag===3?d:null}function c(n){if(n.tag===13){var a=n.memoizedState;if(a===null&&(n=n.alternate,n!==null&&(a=n.memoizedState)),a!==null)return a.dehydrated}return null}function u(n){if(n.tag===31){var a=n.memoizedState;if(a===null&&(n=n.alternate,n!==null&&(a=n.memoizedState)),a!==null)return a.dehydrated}return null}function h(n){if(o(n)!==n)throw Error(s(188))}function p(n){var a=n.alternate;if(!a){if(a=o(n),a===null)throw Error(s(188));return a!==n?null:n}for(var d=n,m=a;;){var y=d.return;if(y===null)break;var v=y.alternate;if(v===null){if(m=y.return,m!==null){d=m;continue}break}if(y.child===v.child){for(v=y.child;v;){if(v===d)return h(y),n;if(v===m)return h(y),a;v=v.sibling}throw Error(s(188))}if(d.return!==m.return)d=y,m=v;else{for(var T=!1,U=y.child;U;){if(U===d){T=!0,d=y,m=v;break}if(U===m){T=!0,m=y,d=v;break}U=U.sibling}if(!T){for(U=v.child;U;){if(U===d){T=!0,d=v,m=y;break}if(U===m){T=!0,m=v,d=y;break}U=U.sibling}if(!T)throw Error(s(189))}}if(d.alternate!==m)throw Error(s(190))}if(d.tag!==3)throw Error(s(188));return d.stateNode.current===d?n:a}function f(n){var a=n.tag;if(a===5||a===26||a===27||a===6)return n;for(n=n.child;n!==null;){if(a=f(n),a!==null)return a;n=n.sibling}return null}var g=Object.assign,x=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),L=Symbol.for("react.consumer"),O=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),C=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),k=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),M=Symbol.for("react.memo_cache_sentinel"),H=Symbol.iterator;function F(n){return n===null||typeof n!="object"?null:(n=H&&n[H]||n["@@iterator"],typeof n=="function"?n:null)}var V=Symbol.for("react.client.reference");function q(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===V?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case _:return"Fragment";case A:return"Profiler";case S:return"StrictMode";case I:return"Suspense";case C:return"SuspenseList";case N:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case w:return"Portal";case O:return n.displayName||"Context";case L:return(n._context.displayName||"Context")+".Consumer";case D:var a=n.render;return n=n.displayName,n||(n=a.displayName||a.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case P:return a=n.displayName||null,a!==null?a:q(n.type)||"Memo";case k:a=n._payload,n=n._init;try{return q(n(a))}catch{}}return null}var z=Array.isArray,E=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,j=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G={pending:!1,data:null,method:null,action:null},Y=[],ee=-1;function B(n){return{current:n}}function $(n){0>ee||(n.current=Y[ee],Y[ee]=null,ee--)}function K(n,a){ee++,Y[ee]=n.current,n.current=a}var Q=B(null),Z=B(null),de=B(null),ue=B(null);function xe(n,a){switch(K(de,a),K(Z,n),K(Q,null),a.nodeType){case 9:case 11:n=(n=a.documentElement)&&(n=n.namespaceURI)?Nx(n):0;break;default:if(n=a.tagName,a=a.namespaceURI)a=Nx(a),n=Ex(a,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}$(Q),K(Q,n)}function pe(){$(Q),$(Z),$(de)}function Re(n){n.memoizedState!==null&&K(ue,n);var a=Q.current,d=Ex(a,n.type);a!==d&&(K(Z,n),K(Q,d))}function ve(n){Z.current===n&&($(Q),$(Z)),ue.current===n&&($(ue),ko._currentValue=G)}var Xe,Ie;function Se(n){if(Xe===void 0)try{throw Error()}catch(d){var a=d.stack.trim().match(/\n( *(at )?)/);Xe=a&&a[1]||"",Ie=-1<d.stack.indexOf(`
    at`)?" (<anonymous>)":-1<d.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Xe+n+Ie}var Ae=!1;function ze(n,a){if(!n||Ae)return"";Ae=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var m={DetermineComponentFrameRoot:function(){try{if(a){var ce=function(){throw Error()};if(Object.defineProperty(ce.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ce,[])}catch(ae){var ne=ae}Reflect.construct(n,[],ce)}else{try{ce.call()}catch(ae){ne=ae}n.call(ce.prototype)}}else{try{throw Error()}catch(ae){ne=ae}(ce=n())&&typeof ce.catch=="function"&&ce.catch(function(){})}}catch(ae){if(ae&&ne&&typeof ae.stack=="string")return[ae.stack,ne.stack]}return[null,null]}};m.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(m.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(m.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var v=m.DetermineComponentFrameRoot(),T=v[0],U=v[1];if(T&&U){var X=T.split(`
`),se=U.split(`
`);for(y=m=0;m<X.length&&!X[m].includes("DetermineComponentFrameRoot");)m++;for(;y<se.length&&!se[y].includes("DetermineComponentFrameRoot");)y++;if(m===X.length||y===se.length)for(m=X.length-1,y=se.length-1;1<=m&&0<=y&&X[m]!==se[y];)y--;for(;1<=m&&0<=y;m--,y--)if(X[m]!==se[y]){if(m!==1||y!==1)do if(m--,y--,0>y||X[m]!==se[y]){var re=`
`+X[m].replace(" at new "," at ");return n.displayName&&re.includes("<anonymous>")&&(re=re.replace("<anonymous>",n.displayName)),re}while(1<=m&&0<=y);break}}}finally{Ae=!1,Error.prepareStackTrace=d}return(d=n?n.displayName||n.name:"")?Se(d):""}function Ne(n,a){switch(n.tag){case 26:case 27:case 5:return Se(n.type);case 16:return Se("Lazy");case 13:return n.child!==a&&a!==null?Se("Suspense Fallback"):Se("Suspense");case 19:return Se("SuspenseList");case 0:case 15:return ze(n.type,!1);case 11:return ze(n.type.render,!1);case 1:return ze(n.type,!0);case 31:return Se("Activity");default:return""}}function Ze(n){try{var a="",d=null;do a+=Ne(n,d),d=n,n=n.return;while(n);return a}catch(m){return`
Error generating stack: `+m.message+`
`+m.stack}}var wt=Object.prototype.hasOwnProperty,_t=r.unstable_scheduleCallback,ut=r.unstable_cancelCallback,Mt=r.unstable_shouldYield,mt=r.unstable_requestPaint,De=r.unstable_now,Xt=r.unstable_getCurrentPriorityLevel,Rs=r.unstable_ImmediatePriority,qn=r.unstable_UserBlockingPriority,Je=r.unstable_NormalPriority,is=r.unstable_LowPriority,rt=r.unstable_IdlePriority,Wt=r.log,xs=r.unstable_setDisableYieldValue,fs=null,pt=null;function as(n){if(typeof Wt=="function"&&xs(n),pt&&typeof pt.setStrictMode=="function")try{pt.setStrictMode(fs,n)}catch{}}var Kt=Math.clz32?Math.clz32:Nl,ou=Math.log,Hr=Math.LN2;function Nl(n){return n>>>=0,n===0?32:31-(ou(n)/Hr|0)|0}var Sn=256,Ea=262144,Ds=4194304;function rs(n){var a=n&42;if(a!==0)return a;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function ln(n,a,d){var m=n.pendingLanes;if(m===0)return 0;var y=0,v=n.suspendedLanes,T=n.pingedLanes;n=n.warmLanes;var U=m&134217727;return U!==0?(m=U&~v,m!==0?y=rs(m):(T&=U,T!==0?y=rs(T):d||(d=U&~n,d!==0&&(y=rs(d))))):(U=m&~v,U!==0?y=rs(U):T!==0?y=rs(T):d||(d=m&~n,d!==0&&(y=rs(d)))),y===0?0:a!==0&&a!==y&&(a&v)===0&&(v=y&-y,d=a&-a,v>=d||v===32&&(d&4194048)!==0)?a:y}function cn(n,a){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&a)===0}function El(n,a){switch(n){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Nn(){var n=Ds;return Ds<<=1,(Ds&62914560)===0&&(Ds=4194304),n}function dn(n){for(var a=[],d=0;31>d;d++)a.push(n);return a}function qr(n,a){n.pendingLanes|=a,a!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function Jw(n,a,d,m,y,v){var T=n.pendingLanes;n.pendingLanes=d,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=d,n.entangledLanes&=d,n.errorRecoveryDisabledLanes&=d,n.shellSuspendCounter=0;var U=n.entanglements,X=n.expirationTimes,se=n.hiddenUpdates;for(d=T&~d;0<d;){var re=31-Kt(d),ce=1<<re;U[re]=0,X[re]=-1;var ne=se[re];if(ne!==null)for(se[re]=null,re=0;re<ne.length;re++){var ae=ne[re];ae!==null&&(ae.lane&=-536870913)}d&=~ce}m!==0&&op(n,m,0),v!==0&&y===0&&n.tag!==0&&(n.suspendedLanes|=v&~(T&~a))}function op(n,a,d){n.pendingLanes|=a,n.suspendedLanes&=~a;var m=31-Kt(a);n.entangledLanes|=a,n.entanglements[m]=n.entanglements[m]|1073741824|d&261930}function lp(n,a){var d=n.entangledLanes|=a;for(n=n.entanglements;d;){var m=31-Kt(d),y=1<<m;y&a|n[m]&a&&(n[m]|=a),d&=~y}}function cp(n,a){var d=a&-a;return d=(d&42)!==0?1:lu(d),(d&(n.suspendedLanes|a))!==0?0:d}function lu(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function cu(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function dp(){var n=j.p;return n!==0?n:(n=window.event,n===void 0?32:Wx(n.type))}function up(n,a){var d=j.p;try{return j.p=n,a()}finally{j.p=d}}var gi=Math.random().toString(36).slice(2),Qt="__reactFiber$"+gi,ys="__reactProps$"+gi,ja="__reactContainer$"+gi,du="__reactEvents$"+gi,e1="__reactListeners$"+gi,t1="__reactHandles$"+gi,hp="__reactResources$"+gi,Vr="__reactMarker$"+gi;function uu(n){delete n[Qt],delete n[ys],delete n[du],delete n[e1],delete n[t1]}function Ca(n){var a=n[Qt];if(a)return a;for(var d=n.parentNode;d;){if(a=d[ja]||d[Qt]){if(d=a.alternate,a.child!==null||d!==null&&d.child!==null)for(n=Mx(n);n!==null;){if(d=n[Qt])return d;n=Mx(n)}return a}n=d,d=n.parentNode}return null}function Ta(n){if(n=n[Qt]||n[ja]){var a=n.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return n}return null}function Gr(n){var a=n.tag;if(a===5||a===26||a===27||a===6)return n.stateNode;throw Error(s(33))}function ka(n){var a=n[hp];return a||(a=n[hp]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function qt(n){n[Vr]=!0}var fp=new Set,mp={};function $i(n,a){Ra(n,a),Ra(n+"Capture",a)}function Ra(n,a){for(mp[n]=a,n=0;n<a.length;n++)fp.add(a[n])}var s1=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),pp={},gp={};function n1(n){return wt.call(gp,n)?!0:wt.call(pp,n)?!1:s1.test(n)?gp[n]=!0:(pp[n]=!0,!1)}function jl(n,a,d){if(n1(a))if(d===null)n.removeAttribute(a);else{switch(typeof d){case"undefined":case"function":case"symbol":n.removeAttribute(a);return;case"boolean":var m=a.toLowerCase().slice(0,5);if(m!=="data-"&&m!=="aria-"){n.removeAttribute(a);return}}n.setAttribute(a,""+d)}}function Cl(n,a,d){if(d===null)n.removeAttribute(a);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(a);return}n.setAttribute(a,""+d)}}function Vn(n,a,d,m){if(m===null)n.removeAttribute(d);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(d);return}n.setAttributeNS(a,d,""+m)}}function $s(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function xp(n){var a=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function i1(n,a,d){var m=Object.getOwnPropertyDescriptor(n.constructor.prototype,a);if(!n.hasOwnProperty(a)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var y=m.get,v=m.set;return Object.defineProperty(n,a,{configurable:!0,get:function(){return y.call(this)},set:function(T){d=""+T,v.call(this,T)}}),Object.defineProperty(n,a,{enumerable:m.enumerable}),{getValue:function(){return d},setValue:function(T){d=""+T},stopTracking:function(){n._valueTracker=null,delete n[a]}}}}function hu(n){if(!n._valueTracker){var a=xp(n)?"checked":"value";n._valueTracker=i1(n,a,""+n[a])}}function yp(n){if(!n)return!1;var a=n._valueTracker;if(!a)return!0;var d=a.getValue(),m="";return n&&(m=xp(n)?n.checked?"true":"false":n.value),n=m,n!==d?(a.setValue(n),!0):!1}function Tl(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var a1=/[\n"\\]/g;function Ys(n){return n.replace(a1,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function fu(n,a,d,m,y,v,T,U){n.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?n.type=T:n.removeAttribute("type"),a!=null?T==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+$s(a)):n.value!==""+$s(a)&&(n.value=""+$s(a)):T!=="submit"&&T!=="reset"||n.removeAttribute("value"),a!=null?mu(n,T,$s(a)):d!=null?mu(n,T,$s(d)):m!=null&&n.removeAttribute("value"),y==null&&v!=null&&(n.defaultChecked=!!v),y!=null&&(n.checked=y&&typeof y!="function"&&typeof y!="symbol"),U!=null&&typeof U!="function"&&typeof U!="symbol"&&typeof U!="boolean"?n.name=""+$s(U):n.removeAttribute("name")}function bp(n,a,d,m,y,v,T,U){if(v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(n.type=v),a!=null||d!=null){if(!(v!=="submit"&&v!=="reset"||a!=null)){hu(n);return}d=d!=null?""+$s(d):"",a=a!=null?""+$s(a):d,U||a===n.value||(n.value=a),n.defaultValue=a}m=m??y,m=typeof m!="function"&&typeof m!="symbol"&&!!m,n.checked=U?n.checked:!!m,n.defaultChecked=!!m,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(n.name=T),hu(n)}function mu(n,a,d){a==="number"&&Tl(n.ownerDocument)===n||n.defaultValue===""+d||(n.defaultValue=""+d)}function Da(n,a,d,m){if(n=n.options,a){a={};for(var y=0;y<d.length;y++)a["$"+d[y]]=!0;for(d=0;d<n.length;d++)y=a.hasOwnProperty("$"+n[d].value),n[d].selected!==y&&(n[d].selected=y),y&&m&&(n[d].defaultSelected=!0)}else{for(d=""+$s(d),a=null,y=0;y<n.length;y++){if(n[y].value===d){n[y].selected=!0,m&&(n[y].defaultSelected=!0);return}a!==null||n[y].disabled||(a=n[y])}a!==null&&(a.selected=!0)}}function vp(n,a,d){if(a!=null&&(a=""+$s(a),a!==n.value&&(n.value=a),d==null)){n.defaultValue!==a&&(n.defaultValue=a);return}n.defaultValue=d!=null?""+$s(d):""}function wp(n,a,d,m){if(a==null){if(m!=null){if(d!=null)throw Error(s(92));if(z(m)){if(1<m.length)throw Error(s(93));m=m[0]}d=m}d==null&&(d=""),a=d}d=$s(a),n.defaultValue=d,m=n.textContent,m===d&&m!==""&&m!==null&&(n.value=m),hu(n)}function Ma(n,a){if(a){var d=n.firstChild;if(d&&d===n.lastChild&&d.nodeType===3){d.nodeValue=a;return}}n.textContent=a}var r1=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function _p(n,a,d){var m=a.indexOf("--")===0;d==null||typeof d=="boolean"||d===""?m?n.setProperty(a,""):a==="float"?n.cssFloat="":n[a]="":m?n.setProperty(a,d):typeof d!="number"||d===0||r1.has(a)?a==="float"?n.cssFloat=d:n[a]=(""+d).trim():n[a]=d+"px"}function Ap(n,a,d){if(a!=null&&typeof a!="object")throw Error(s(62));if(n=n.style,d!=null){for(var m in d)!d.hasOwnProperty(m)||a!=null&&a.hasOwnProperty(m)||(m.indexOf("--")===0?n.setProperty(m,""):m==="float"?n.cssFloat="":n[m]="");for(var y in a)m=a[y],a.hasOwnProperty(y)&&d[y]!==m&&_p(n,y,m)}else for(var v in a)a.hasOwnProperty(v)&&_p(n,v,a[v])}function pu(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var o1=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),l1=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function kl(n){return l1.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function Gn(){}var gu=null;function xu(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var La=null,Oa=null;function Sp(n){var a=Ta(n);if(a&&(n=a.stateNode)){var d=n[ys]||null;e:switch(n=a.stateNode,a.type){case"input":if(fu(n,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name),a=d.name,d.type==="radio"&&a!=null){for(d=n;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll('input[name="'+Ys(""+a)+'"][type="radio"]'),a=0;a<d.length;a++){var m=d[a];if(m!==n&&m.form===n.form){var y=m[ys]||null;if(!y)throw Error(s(90));fu(m,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(a=0;a<d.length;a++)m=d[a],m.form===n.form&&yp(m)}break e;case"textarea":vp(n,d.value,d.defaultValue);break e;case"select":a=d.value,a!=null&&Da(n,!!d.multiple,a,!1)}}}var yu=!1;function Np(n,a,d){if(yu)return n(a,d);yu=!0;try{var m=n(a);return m}finally{if(yu=!1,(La!==null||Oa!==null)&&(xc(),La&&(a=La,n=Oa,Oa=La=null,Sp(a),n)))for(a=0;a<n.length;a++)Sp(n[a])}}function $r(n,a){var d=n.stateNode;if(d===null)return null;var m=d[ys]||null;if(m===null)return null;d=m[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(n=n.type,m=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!m;break e;default:n=!1}if(n)return null;if(d&&typeof d!="function")throw Error(s(231,a,typeof d));return d}var $n=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),bu=!1;if($n)try{var Yr={};Object.defineProperty(Yr,"passive",{get:function(){bu=!0}}),window.addEventListener("test",Yr,Yr),window.removeEventListener("test",Yr,Yr)}catch{bu=!1}var xi=null,vu=null,Rl=null;function Ep(){if(Rl)return Rl;var n,a=vu,d=a.length,m,y="value"in xi?xi.value:xi.textContent,v=y.length;for(n=0;n<d&&a[n]===y[n];n++);var T=d-n;for(m=1;m<=T&&a[d-m]===y[v-m];m++);return Rl=y.slice(n,1<m?1-m:void 0)}function Dl(n){var a=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&a===13&&(n=13)):n=a,n===10&&(n=13),32<=n||n===13?n:0}function Ml(){return!0}function jp(){return!1}function bs(n){function a(d,m,y,v,T){this._reactName=d,this._targetInst=y,this.type=m,this.nativeEvent=v,this.target=T,this.currentTarget=null;for(var U in n)n.hasOwnProperty(U)&&(d=n[U],this[U]=d?d(v):v[U]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?Ml:jp,this.isPropagationStopped=jp,this}return g(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=Ml)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=Ml)},persist:function(){},isPersistent:Ml}),a}var Yi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ll=bs(Yi),Xr=g({},Yi,{view:0,detail:0}),c1=bs(Xr),wu,_u,Wr,Ol=g({},Xr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Su,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Wr&&(Wr&&n.type==="mousemove"?(wu=n.screenX-Wr.screenX,_u=n.screenY-Wr.screenY):_u=wu=0,Wr=n),wu)},movementY:function(n){return"movementY"in n?n.movementY:_u}}),Cp=bs(Ol),d1=g({},Ol,{dataTransfer:0}),u1=bs(d1),h1=g({},Xr,{relatedTarget:0}),Au=bs(h1),f1=g({},Yi,{animationName:0,elapsedTime:0,pseudoElement:0}),m1=bs(f1),p1=g({},Yi,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),g1=bs(p1),x1=g({},Yi,{data:0}),Tp=bs(x1),y1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},b1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},v1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function w1(n){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(n):(n=v1[n])?!!a[n]:!1}function Su(){return w1}var _1=g({},Xr,{key:function(n){if(n.key){var a=y1[n.key]||n.key;if(a!=="Unidentified")return a}return n.type==="keypress"?(n=Dl(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?b1[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Su,charCode:function(n){return n.type==="keypress"?Dl(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Dl(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),A1=bs(_1),S1=g({},Ol,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),kp=bs(S1),N1=g({},Xr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Su}),E1=bs(N1),j1=g({},Yi,{propertyName:0,elapsedTime:0,pseudoElement:0}),C1=bs(j1),T1=g({},Ol,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),k1=bs(T1),R1=g({},Yi,{newState:0,oldState:0}),D1=bs(R1),M1=[9,13,27,32],Nu=$n&&"CompositionEvent"in window,Kr=null;$n&&"documentMode"in document&&(Kr=document.documentMode);var L1=$n&&"TextEvent"in window&&!Kr,Rp=$n&&(!Nu||Kr&&8<Kr&&11>=Kr),Dp=" ",Mp=!1;function Lp(n,a){switch(n){case"keyup":return M1.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Op(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Ba=!1;function O1(n,a){switch(n){case"compositionend":return Op(a);case"keypress":return a.which!==32?null:(Mp=!0,Dp);case"textInput":return n=a.data,n===Dp&&Mp?null:n;default:return null}}function B1(n,a){if(Ba)return n==="compositionend"||!Nu&&Lp(n,a)?(n=Ep(),Rl=vu=xi=null,Ba=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Rp&&a.locale!=="ko"?null:a.data;default:return null}}var P1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Bp(n){var a=n&&n.nodeName&&n.nodeName.toLowerCase();return a==="input"?!!P1[n.type]:a==="textarea"}function Pp(n,a,d,m){La?Oa?Oa.push(m):Oa=[m]:La=m,a=Sc(a,"onChange"),0<a.length&&(d=new Ll("onChange","change",null,d,m),n.push({event:d,listeners:a}))}var Qr=null,Zr=null;function F1(n){bx(n,0)}function Bl(n){var a=Gr(n);if(yp(a))return n}function Fp(n,a){if(n==="change")return a}var Up=!1;if($n){var Eu;if($n){var ju="oninput"in document;if(!ju){var Ip=document.createElement("div");Ip.setAttribute("oninput","return;"),ju=typeof Ip.oninput=="function"}Eu=ju}else Eu=!1;Up=Eu&&(!document.documentMode||9<document.documentMode)}function zp(){Qr&&(Qr.detachEvent("onpropertychange",Hp),Zr=Qr=null)}function Hp(n){if(n.propertyName==="value"&&Bl(Zr)){var a=[];Pp(a,Zr,n,xu(n)),Np(F1,a)}}function U1(n,a,d){n==="focusin"?(zp(),Qr=a,Zr=d,Qr.attachEvent("onpropertychange",Hp)):n==="focusout"&&zp()}function I1(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Bl(Zr)}function z1(n,a){if(n==="click")return Bl(a)}function H1(n,a){if(n==="input"||n==="change")return Bl(a)}function q1(n,a){return n===a&&(n!==0||1/n===1/a)||n!==n&&a!==a}var Ms=typeof Object.is=="function"?Object.is:q1;function Jr(n,a){if(Ms(n,a))return!0;if(typeof n!="object"||n===null||typeof a!="object"||a===null)return!1;var d=Object.keys(n),m=Object.keys(a);if(d.length!==m.length)return!1;for(m=0;m<d.length;m++){var y=d[m];if(!wt.call(a,y)||!Ms(n[y],a[y]))return!1}return!0}function qp(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Vp(n,a){var d=qp(n);n=0;for(var m;d;){if(d.nodeType===3){if(m=n+d.textContent.length,n<=a&&m>=a)return{node:d,offset:a-n};n=m}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=qp(d)}}function Gp(n,a){return n&&a?n===a?!0:n&&n.nodeType===3?!1:a&&a.nodeType===3?Gp(n,a.parentNode):"contains"in n?n.contains(a):n.compareDocumentPosition?!!(n.compareDocumentPosition(a)&16):!1:!1}function $p(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var a=Tl(n.document);a instanceof n.HTMLIFrameElement;){try{var d=typeof a.contentWindow.location.href=="string"}catch{d=!1}if(d)n=a.contentWindow;else break;a=Tl(n.document)}return a}function Cu(n){var a=n&&n.nodeName&&n.nodeName.toLowerCase();return a&&(a==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||a==="textarea"||n.contentEditable==="true")}var V1=$n&&"documentMode"in document&&11>=document.documentMode,Pa=null,Tu=null,eo=null,ku=!1;function Yp(n,a,d){var m=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;ku||Pa==null||Pa!==Tl(m)||(m=Pa,"selectionStart"in m&&Cu(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),eo&&Jr(eo,m)||(eo=m,m=Sc(Tu,"onSelect"),0<m.length&&(a=new Ll("onSelect","select",null,a,d),n.push({event:a,listeners:m}),a.target=Pa)))}function Xi(n,a){var d={};return d[n.toLowerCase()]=a.toLowerCase(),d["Webkit"+n]="webkit"+a,d["Moz"+n]="moz"+a,d}var Fa={animationend:Xi("Animation","AnimationEnd"),animationiteration:Xi("Animation","AnimationIteration"),animationstart:Xi("Animation","AnimationStart"),transitionrun:Xi("Transition","TransitionRun"),transitionstart:Xi("Transition","TransitionStart"),transitioncancel:Xi("Transition","TransitionCancel"),transitionend:Xi("Transition","TransitionEnd")},Ru={},Xp={};$n&&(Xp=document.createElement("div").style,"AnimationEvent"in window||(delete Fa.animationend.animation,delete Fa.animationiteration.animation,delete Fa.animationstart.animation),"TransitionEvent"in window||delete Fa.transitionend.transition);function Wi(n){if(Ru[n])return Ru[n];if(!Fa[n])return n;var a=Fa[n],d;for(d in a)if(a.hasOwnProperty(d)&&d in Xp)return Ru[n]=a[d];return n}var Wp=Wi("animationend"),Kp=Wi("animationiteration"),Qp=Wi("animationstart"),G1=Wi("transitionrun"),$1=Wi("transitionstart"),Y1=Wi("transitioncancel"),Zp=Wi("transitionend"),Jp=new Map,Du="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Du.push("scrollEnd");function un(n,a){Jp.set(n,a),$i(a,[n])}var Pl=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},Xs=[],Ua=0,Mu=0;function Fl(){for(var n=Ua,a=Mu=Ua=0;a<n;){var d=Xs[a];Xs[a++]=null;var m=Xs[a];Xs[a++]=null;var y=Xs[a];Xs[a++]=null;var v=Xs[a];if(Xs[a++]=null,m!==null&&y!==null){var T=m.pending;T===null?y.next=y:(y.next=T.next,T.next=y),m.pending=y}v!==0&&eg(d,y,v)}}function Ul(n,a,d,m){Xs[Ua++]=n,Xs[Ua++]=a,Xs[Ua++]=d,Xs[Ua++]=m,Mu|=m,n.lanes|=m,n=n.alternate,n!==null&&(n.lanes|=m)}function Lu(n,a,d,m){return Ul(n,a,d,m),Il(n)}function Ki(n,a){return Ul(n,null,null,a),Il(n)}function eg(n,a,d){n.lanes|=d;var m=n.alternate;m!==null&&(m.lanes|=d);for(var y=!1,v=n.return;v!==null;)v.childLanes|=d,m=v.alternate,m!==null&&(m.childLanes|=d),v.tag===22&&(n=v.stateNode,n===null||n._visibility&1||(y=!0)),n=v,v=v.return;return n.tag===3?(v=n.stateNode,y&&a!==null&&(y=31-Kt(d),n=v.hiddenUpdates,m=n[y],m===null?n[y]=[a]:m.push(a),a.lane=d|536870912),v):null}function Il(n){if(50<Ao)throw Ao=0,qh=null,Error(s(185));for(var a=n.return;a!==null;)n=a,a=n.return;return n.tag===3?n.stateNode:null}var Ia={};function X1(n,a,d,m){this.tag=n,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ls(n,a,d,m){return new X1(n,a,d,m)}function Ou(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Yn(n,a){var d=n.alternate;return d===null?(d=Ls(n.tag,a,n.key,n.mode),d.elementType=n.elementType,d.type=n.type,d.stateNode=n.stateNode,d.alternate=n,n.alternate=d):(d.pendingProps=a,d.type=n.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=n.flags&65011712,d.childLanes=n.childLanes,d.lanes=n.lanes,d.child=n.child,d.memoizedProps=n.memoizedProps,d.memoizedState=n.memoizedState,d.updateQueue=n.updateQueue,a=n.dependencies,d.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},d.sibling=n.sibling,d.index=n.index,d.ref=n.ref,d.refCleanup=n.refCleanup,d}function tg(n,a){n.flags&=65011714;var d=n.alternate;return d===null?(n.childLanes=0,n.lanes=a,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=d.childLanes,n.lanes=d.lanes,n.child=d.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=d.memoizedProps,n.memoizedState=d.memoizedState,n.updateQueue=d.updateQueue,n.type=d.type,a=d.dependencies,n.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),n}function zl(n,a,d,m,y,v){var T=0;if(m=n,typeof n=="function")Ou(n)&&(T=1);else if(typeof n=="string")T=J_(n,d,Q.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case N:return n=Ls(31,d,a,y),n.elementType=N,n.lanes=v,n;case _:return Qi(d.children,y,v,a);case S:T=8,y|=24;break;case A:return n=Ls(12,d,a,y|2),n.elementType=A,n.lanes=v,n;case I:return n=Ls(13,d,a,y),n.elementType=I,n.lanes=v,n;case C:return n=Ls(19,d,a,y),n.elementType=C,n.lanes=v,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case O:T=10;break e;case L:T=9;break e;case D:T=11;break e;case P:T=14;break e;case k:T=16,m=null;break e}T=29,d=Error(s(130,n===null?"null":typeof n,"")),m=null}return a=Ls(T,d,a,y),a.elementType=n,a.type=m,a.lanes=v,a}function Qi(n,a,d,m){return n=Ls(7,n,m,a),n.lanes=d,n}function Bu(n,a,d){return n=Ls(6,n,null,a),n.lanes=d,n}function sg(n){var a=Ls(18,null,null,0);return a.stateNode=n,a}function Pu(n,a,d){return a=Ls(4,n.children!==null?n.children:[],n.key,a),a.lanes=d,a.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},a}var ng=new WeakMap;function Ws(n,a){if(typeof n=="object"&&n!==null){var d=ng.get(n);return d!==void 0?d:(a={value:n,source:a,stack:Ze(a)},ng.set(n,a),a)}return{value:n,source:a,stack:Ze(a)}}var za=[],Ha=0,Hl=null,to=0,Ks=[],Qs=0,yi=null,En=1,jn="";function Xn(n,a){za[Ha++]=to,za[Ha++]=Hl,Hl=n,to=a}function ig(n,a,d){Ks[Qs++]=En,Ks[Qs++]=jn,Ks[Qs++]=yi,yi=n;var m=En;n=jn;var y=32-Kt(m)-1;m&=~(1<<y),d+=1;var v=32-Kt(a)+y;if(30<v){var T=y-y%5;v=(m&(1<<T)-1).toString(32),m>>=T,y-=T,En=1<<32-Kt(a)+y|d<<y|m,jn=v+n}else En=1<<v|d<<y|m,jn=n}function Fu(n){n.return!==null&&(Xn(n,1),ig(n,1,0))}function Uu(n){for(;n===Hl;)Hl=za[--Ha],za[Ha]=null,to=za[--Ha],za[Ha]=null;for(;n===yi;)yi=Ks[--Qs],Ks[Qs]=null,jn=Ks[--Qs],Ks[Qs]=null,En=Ks[--Qs],Ks[Qs]=null}function ag(n,a){Ks[Qs++]=En,Ks[Qs++]=jn,Ks[Qs++]=yi,En=a.id,jn=a.overflow,yi=n}var Zt=null,ht=null,He=!1,bi=null,Zs=!1,Iu=Error(s(519));function vi(n){var a=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw so(Ws(a,n)),Iu}function rg(n){var a=n.stateNode,d=n.type,m=n.memoizedProps;switch(a[Qt]=n,a[ys]=m,d){case"dialog":Be("cancel",a),Be("close",a);break;case"iframe":case"object":case"embed":Be("load",a);break;case"video":case"audio":for(d=0;d<No.length;d++)Be(No[d],a);break;case"source":Be("error",a);break;case"img":case"image":case"link":Be("error",a),Be("load",a);break;case"details":Be("toggle",a);break;case"input":Be("invalid",a),bp(a,m.value,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name,!0);break;case"select":Be("invalid",a);break;case"textarea":Be("invalid",a),wp(a,m.value,m.defaultValue,m.children)}d=m.children,typeof d!="string"&&typeof d!="number"&&typeof d!="bigint"||a.textContent===""+d||m.suppressHydrationWarning===!0||Ax(a.textContent,d)?(m.popover!=null&&(Be("beforetoggle",a),Be("toggle",a)),m.onScroll!=null&&Be("scroll",a),m.onScrollEnd!=null&&Be("scrollend",a),m.onClick!=null&&(a.onclick=Gn),a=!0):a=!1,a||vi(n,!0)}function og(n){for(Zt=n.return;Zt;)switch(Zt.tag){case 5:case 31:case 13:Zs=!1;return;case 27:case 3:Zs=!0;return;default:Zt=Zt.return}}function qa(n){if(n!==Zt)return!1;if(!He)return og(n),He=!0,!1;var a=n.tag,d;if((d=a!==3&&a!==27)&&((d=a===5)&&(d=n.type,d=!(d!=="form"&&d!=="button")||af(n.type,n.memoizedProps)),d=!d),d&&ht&&vi(n),og(n),a===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(317));ht=Dx(n)}else if(a===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(317));ht=Dx(n)}else a===27?(a=ht,Li(n.type)?(n=df,df=null,ht=n):ht=a):ht=Zt?en(n.stateNode.nextSibling):null;return!0}function Zi(){ht=Zt=null,He=!1}function zu(){var n=bi;return n!==null&&(As===null?As=n:As.push.apply(As,n),bi=null),n}function so(n){bi===null?bi=[n]:bi.push(n)}var Hu=B(null),Ji=null,Wn=null;function wi(n,a,d){K(Hu,a._currentValue),a._currentValue=d}function Kn(n){n._currentValue=Hu.current,$(Hu)}function qu(n,a,d){for(;n!==null;){var m=n.alternate;if((n.childLanes&a)!==a?(n.childLanes|=a,m!==null&&(m.childLanes|=a)):m!==null&&(m.childLanes&a)!==a&&(m.childLanes|=a),n===d)break;n=n.return}}function Vu(n,a,d,m){var y=n.child;for(y!==null&&(y.return=n);y!==null;){var v=y.dependencies;if(v!==null){var T=y.child;v=v.firstContext;e:for(;v!==null;){var U=v;v=y;for(var X=0;X<a.length;X++)if(U.context===a[X]){v.lanes|=d,U=v.alternate,U!==null&&(U.lanes|=d),qu(v.return,d,n),m||(T=null);break e}v=U.next}}else if(y.tag===18){if(T=y.return,T===null)throw Error(s(341));T.lanes|=d,v=T.alternate,v!==null&&(v.lanes|=d),qu(T,d,n),T=null}else T=y.child;if(T!==null)T.return=y;else for(T=y;T!==null;){if(T===n){T=null;break}if(y=T.sibling,y!==null){y.return=T.return,T=y;break}T=T.return}y=T}}function Va(n,a,d,m){n=null;for(var y=a,v=!1;y!==null;){if(!v){if((y.flags&524288)!==0)v=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var T=y.alternate;if(T===null)throw Error(s(387));if(T=T.memoizedProps,T!==null){var U=y.type;Ms(y.pendingProps.value,T.value)||(n!==null?n.push(U):n=[U])}}else if(y===ue.current){if(T=y.alternate,T===null)throw Error(s(387));T.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(n!==null?n.push(ko):n=[ko])}y=y.return}n!==null&&Vu(a,n,d,m),a.flags|=262144}function ql(n){for(n=n.firstContext;n!==null;){if(!Ms(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function ea(n){Ji=n,Wn=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Jt(n){return lg(Ji,n)}function Vl(n,a){return Ji===null&&ea(n),lg(n,a)}function lg(n,a){var d=a._currentValue;if(a={context:a,memoizedValue:d,next:null},Wn===null){if(n===null)throw Error(s(308));Wn=a,n.dependencies={lanes:0,firstContext:a},n.flags|=524288}else Wn=Wn.next=a;return d}var W1=typeof AbortController<"u"?AbortController:function(){var n=[],a=this.signal={aborted:!1,addEventListener:function(d,m){n.push(m)}};this.abort=function(){a.aborted=!0,n.forEach(function(d){return d()})}},K1=r.unstable_scheduleCallback,Q1=r.unstable_NormalPriority,Lt={$$typeof:O,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Gu(){return{controller:new W1,data:new Map,refCount:0}}function no(n){n.refCount--,n.refCount===0&&K1(Q1,function(){n.controller.abort()})}var io=null,$u=0,Ga=0,$a=null;function Z1(n,a){if(io===null){var d=io=[];$u=0,Ga=Wh(),$a={status:"pending",value:void 0,then:function(m){d.push(m)}}}return $u++,a.then(cg,cg),a}function cg(){if(--$u===0&&io!==null){$a!==null&&($a.status="fulfilled");var n=io;io=null,Ga=0,$a=null;for(var a=0;a<n.length;a++)(0,n[a])()}}function J1(n,a){var d=[],m={status:"pending",value:null,reason:null,then:function(y){d.push(y)}};return n.then(function(){m.status="fulfilled",m.value=a;for(var y=0;y<d.length;y++)(0,d[y])(a)},function(y){for(m.status="rejected",m.reason=y,y=0;y<d.length;y++)(0,d[y])(void 0)}),m}var dg=E.S;E.S=function(n,a){Y0=De(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&Z1(n,a),dg!==null&&dg(n,a)};var ta=B(null);function Yu(){var n=ta.current;return n!==null?n:ot.pooledCache}function Gl(n,a){a===null?K(ta,ta.current):K(ta,a.pool)}function ug(){var n=Yu();return n===null?null:{parent:Lt._currentValue,pool:n}}var Ya=Error(s(460)),Xu=Error(s(474)),$l=Error(s(542)),Yl={then:function(){}};function hg(n){return n=n.status,n==="fulfilled"||n==="rejected"}function fg(n,a,d){switch(d=n[d],d===void 0?n.push(a):d!==a&&(a.then(Gn,Gn),a=d),a.status){case"fulfilled":return a.value;case"rejected":throw n=a.reason,pg(n),n;default:if(typeof a.status=="string")a.then(Gn,Gn);else{if(n=ot,n!==null&&100<n.shellSuspendCounter)throw Error(s(482));n=a,n.status="pending",n.then(function(m){if(a.status==="pending"){var y=a;y.status="fulfilled",y.value=m}},function(m){if(a.status==="pending"){var y=a;y.status="rejected",y.reason=m}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw n=a.reason,pg(n),n}throw na=a,Ya}}function sa(n){try{var a=n._init;return a(n._payload)}catch(d){throw d!==null&&typeof d=="object"&&typeof d.then=="function"?(na=d,Ya):d}}var na=null;function mg(){if(na===null)throw Error(s(459));var n=na;return na=null,n}function pg(n){if(n===Ya||n===$l)throw Error(s(483))}var Xa=null,ao=0;function Xl(n){var a=ao;return ao+=1,Xa===null&&(Xa=[]),fg(Xa,n,a)}function ro(n,a){a=a.props.ref,n.ref=a!==void 0?a:null}function Wl(n,a){throw a.$$typeof===x?Error(s(525)):(n=Object.prototype.toString.call(a),Error(s(31,n==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":n)))}function gg(n){function a(J,W){if(n){var te=J.deletions;te===null?(J.deletions=[W],J.flags|=16):te.push(W)}}function d(J,W){if(!n)return null;for(;W!==null;)a(J,W),W=W.sibling;return null}function m(J){for(var W=new Map;J!==null;)J.key!==null?W.set(J.key,J):W.set(J.index,J),J=J.sibling;return W}function y(J,W){return J=Yn(J,W),J.index=0,J.sibling=null,J}function v(J,W,te){return J.index=te,n?(te=J.alternate,te!==null?(te=te.index,te<W?(J.flags|=67108866,W):te):(J.flags|=67108866,W)):(J.flags|=1048576,W)}function T(J){return n&&J.alternate===null&&(J.flags|=67108866),J}function U(J,W,te,le){return W===null||W.tag!==6?(W=Bu(te,J.mode,le),W.return=J,W):(W=y(W,te),W.return=J,W)}function X(J,W,te,le){var ye=te.type;return ye===_?re(J,W,te.props.children,le,te.key):W!==null&&(W.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===k&&sa(ye)===W.type)?(W=y(W,te.props),ro(W,te),W.return=J,W):(W=zl(te.type,te.key,te.props,null,J.mode,le),ro(W,te),W.return=J,W)}function se(J,W,te,le){return W===null||W.tag!==4||W.stateNode.containerInfo!==te.containerInfo||W.stateNode.implementation!==te.implementation?(W=Pu(te,J.mode,le),W.return=J,W):(W=y(W,te.children||[]),W.return=J,W)}function re(J,W,te,le,ye){return W===null||W.tag!==7?(W=Qi(te,J.mode,le,ye),W.return=J,W):(W=y(W,te),W.return=J,W)}function ce(J,W,te){if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return W=Bu(""+W,J.mode,te),W.return=J,W;if(typeof W=="object"&&W!==null){switch(W.$$typeof){case b:return te=zl(W.type,W.key,W.props,null,J.mode,te),ro(te,W),te.return=J,te;case w:return W=Pu(W,J.mode,te),W.return=J,W;case k:return W=sa(W),ce(J,W,te)}if(z(W)||F(W))return W=Qi(W,J.mode,te,null),W.return=J,W;if(typeof W.then=="function")return ce(J,Xl(W),te);if(W.$$typeof===O)return ce(J,Vl(J,W),te);Wl(J,W)}return null}function ne(J,W,te,le){var ye=W!==null?W.key:null;if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return ye!==null?null:U(J,W,""+te,le);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case b:return te.key===ye?X(J,W,te,le):null;case w:return te.key===ye?se(J,W,te,le):null;case k:return te=sa(te),ne(J,W,te,le)}if(z(te)||F(te))return ye!==null?null:re(J,W,te,le,null);if(typeof te.then=="function")return ne(J,W,Xl(te),le);if(te.$$typeof===O)return ne(J,W,Vl(J,te),le);Wl(J,te)}return null}function ae(J,W,te,le,ye){if(typeof le=="string"&&le!==""||typeof le=="number"||typeof le=="bigint")return J=J.get(te)||null,U(W,J,""+le,ye);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case b:return J=J.get(le.key===null?te:le.key)||null,X(W,J,le,ye);case w:return J=J.get(le.key===null?te:le.key)||null,se(W,J,le,ye);case k:return le=sa(le),ae(J,W,te,le,ye)}if(z(le)||F(le))return J=J.get(te)||null,re(W,J,le,ye,null);if(typeof le.then=="function")return ae(J,W,te,Xl(le),ye);if(le.$$typeof===O)return ae(J,W,te,Vl(W,le),ye);Wl(W,le)}return null}function me(J,W,te,le){for(var ye=null,We=null,ge=W,Me=W=0,Fe=null;ge!==null&&Me<te.length;Me++){ge.index>Me?(Fe=ge,ge=null):Fe=ge.sibling;var Ke=ne(J,ge,te[Me],le);if(Ke===null){ge===null&&(ge=Fe);break}n&&ge&&Ke.alternate===null&&a(J,ge),W=v(Ke,W,Me),We===null?ye=Ke:We.sibling=Ke,We=Ke,ge=Fe}if(Me===te.length)return d(J,ge),He&&Xn(J,Me),ye;if(ge===null){for(;Me<te.length;Me++)ge=ce(J,te[Me],le),ge!==null&&(W=v(ge,W,Me),We===null?ye=ge:We.sibling=ge,We=ge);return He&&Xn(J,Me),ye}for(ge=m(ge);Me<te.length;Me++)Fe=ae(ge,J,Me,te[Me],le),Fe!==null&&(n&&Fe.alternate!==null&&ge.delete(Fe.key===null?Me:Fe.key),W=v(Fe,W,Me),We===null?ye=Fe:We.sibling=Fe,We=Fe);return n&&ge.forEach(function(Ui){return a(J,Ui)}),He&&Xn(J,Me),ye}function we(J,W,te,le){if(te==null)throw Error(s(151));for(var ye=null,We=null,ge=W,Me=W=0,Fe=null,Ke=te.next();ge!==null&&!Ke.done;Me++,Ke=te.next()){ge.index>Me?(Fe=ge,ge=null):Fe=ge.sibling;var Ui=ne(J,ge,Ke.value,le);if(Ui===null){ge===null&&(ge=Fe);break}n&&ge&&Ui.alternate===null&&a(J,ge),W=v(Ui,W,Me),We===null?ye=Ui:We.sibling=Ui,We=Ui,ge=Fe}if(Ke.done)return d(J,ge),He&&Xn(J,Me),ye;if(ge===null){for(;!Ke.done;Me++,Ke=te.next())Ke=ce(J,Ke.value,le),Ke!==null&&(W=v(Ke,W,Me),We===null?ye=Ke:We.sibling=Ke,We=Ke);return He&&Xn(J,Me),ye}for(ge=m(ge);!Ke.done;Me++,Ke=te.next())Ke=ae(ge,J,Me,Ke.value,le),Ke!==null&&(n&&Ke.alternate!==null&&ge.delete(Ke.key===null?Me:Ke.key),W=v(Ke,W,Me),We===null?ye=Ke:We.sibling=Ke,We=Ke);return n&&ge.forEach(function(dA){return a(J,dA)}),He&&Xn(J,Me),ye}function it(J,W,te,le){if(typeof te=="object"&&te!==null&&te.type===_&&te.key===null&&(te=te.props.children),typeof te=="object"&&te!==null){switch(te.$$typeof){case b:e:{for(var ye=te.key;W!==null;){if(W.key===ye){if(ye=te.type,ye===_){if(W.tag===7){d(J,W.sibling),le=y(W,te.props.children),le.return=J,J=le;break e}}else if(W.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===k&&sa(ye)===W.type){d(J,W.sibling),le=y(W,te.props),ro(le,te),le.return=J,J=le;break e}d(J,W);break}else a(J,W);W=W.sibling}te.type===_?(le=Qi(te.props.children,J.mode,le,te.key),le.return=J,J=le):(le=zl(te.type,te.key,te.props,null,J.mode,le),ro(le,te),le.return=J,J=le)}return T(J);case w:e:{for(ye=te.key;W!==null;){if(W.key===ye)if(W.tag===4&&W.stateNode.containerInfo===te.containerInfo&&W.stateNode.implementation===te.implementation){d(J,W.sibling),le=y(W,te.children||[]),le.return=J,J=le;break e}else{d(J,W);break}else a(J,W);W=W.sibling}le=Pu(te,J.mode,le),le.return=J,J=le}return T(J);case k:return te=sa(te),it(J,W,te,le)}if(z(te))return me(J,W,te,le);if(F(te)){if(ye=F(te),typeof ye!="function")throw Error(s(150));return te=ye.call(te),we(J,W,te,le)}if(typeof te.then=="function")return it(J,W,Xl(te),le);if(te.$$typeof===O)return it(J,W,Vl(J,te),le);Wl(J,te)}return typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint"?(te=""+te,W!==null&&W.tag===6?(d(J,W.sibling),le=y(W,te),le.return=J,J=le):(d(J,W),le=Bu(te,J.mode,le),le.return=J,J=le),T(J)):d(J,W)}return function(J,W,te,le){try{ao=0;var ye=it(J,W,te,le);return Xa=null,ye}catch(ge){if(ge===Ya||ge===$l)throw ge;var We=Ls(29,ge,null,J.mode);return We.lanes=le,We.return=J,We}}}var ia=gg(!0),xg=gg(!1),_i=!1;function Wu(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ku(n,a){n=n.updateQueue,a.updateQueue===n&&(a.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Ai(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Si(n,a,d){var m=n.updateQueue;if(m===null)return null;if(m=m.shared,(Qe&2)!==0){var y=m.pending;return y===null?a.next=a:(a.next=y.next,y.next=a),m.pending=a,a=Il(n),eg(n,null,d),a}return Ul(n,m,a,d),Il(n)}function oo(n,a,d){if(a=a.updateQueue,a!==null&&(a=a.shared,(d&4194048)!==0)){var m=a.lanes;m&=n.pendingLanes,d|=m,a.lanes=d,lp(n,d)}}function Qu(n,a){var d=n.updateQueue,m=n.alternate;if(m!==null&&(m=m.updateQueue,d===m)){var y=null,v=null;if(d=d.firstBaseUpdate,d!==null){do{var T={lane:d.lane,tag:d.tag,payload:d.payload,callback:null,next:null};v===null?y=v=T:v=v.next=T,d=d.next}while(d!==null);v===null?y=v=a:v=v.next=a}else y=v=a;d={baseState:m.baseState,firstBaseUpdate:y,lastBaseUpdate:v,shared:m.shared,callbacks:m.callbacks},n.updateQueue=d;return}n=d.lastBaseUpdate,n===null?d.firstBaseUpdate=a:n.next=a,d.lastBaseUpdate=a}var Zu=!1;function lo(){if(Zu){var n=$a;if(n!==null)throw n}}function co(n,a,d,m){Zu=!1;var y=n.updateQueue;_i=!1;var v=y.firstBaseUpdate,T=y.lastBaseUpdate,U=y.shared.pending;if(U!==null){y.shared.pending=null;var X=U,se=X.next;X.next=null,T===null?v=se:T.next=se,T=X;var re=n.alternate;re!==null&&(re=re.updateQueue,U=re.lastBaseUpdate,U!==T&&(U===null?re.firstBaseUpdate=se:U.next=se,re.lastBaseUpdate=X))}if(v!==null){var ce=y.baseState;T=0,re=se=X=null,U=v;do{var ne=U.lane&-536870913,ae=ne!==U.lane;if(ae?(Pe&ne)===ne:(m&ne)===ne){ne!==0&&ne===Ga&&(Zu=!0),re!==null&&(re=re.next={lane:0,tag:U.tag,payload:U.payload,callback:null,next:null});e:{var me=n,we=U;ne=a;var it=d;switch(we.tag){case 1:if(me=we.payload,typeof me=="function"){ce=me.call(it,ce,ne);break e}ce=me;break e;case 3:me.flags=me.flags&-65537|128;case 0:if(me=we.payload,ne=typeof me=="function"?me.call(it,ce,ne):me,ne==null)break e;ce=g({},ce,ne);break e;case 2:_i=!0}}ne=U.callback,ne!==null&&(n.flags|=64,ae&&(n.flags|=8192),ae=y.callbacks,ae===null?y.callbacks=[ne]:ae.push(ne))}else ae={lane:ne,tag:U.tag,payload:U.payload,callback:U.callback,next:null},re===null?(se=re=ae,X=ce):re=re.next=ae,T|=ne;if(U=U.next,U===null){if(U=y.shared.pending,U===null)break;ae=U,U=ae.next,ae.next=null,y.lastBaseUpdate=ae,y.shared.pending=null}}while(!0);re===null&&(X=ce),y.baseState=X,y.firstBaseUpdate=se,y.lastBaseUpdate=re,v===null&&(y.shared.lanes=0),Ti|=T,n.lanes=T,n.memoizedState=ce}}function yg(n,a){if(typeof n!="function")throw Error(s(191,n));n.call(a)}function bg(n,a){var d=n.callbacks;if(d!==null)for(n.callbacks=null,n=0;n<d.length;n++)yg(d[n],a)}var Wa=B(null),Kl=B(0);function vg(n,a){n=ai,K(Kl,n),K(Wa,a),ai=n|a.baseLanes}function Ju(){K(Kl,ai),K(Wa,Wa.current)}function eh(){ai=Kl.current,$(Wa),$(Kl)}var Os=B(null),Js=null;function Ni(n){var a=n.alternate;K(Ct,Ct.current&1),K(Os,n),Js===null&&(a===null||Wa.current!==null||a.memoizedState!==null)&&(Js=n)}function th(n){K(Ct,Ct.current),K(Os,n),Js===null&&(Js=n)}function wg(n){n.tag===22?(K(Ct,Ct.current),K(Os,n),Js===null&&(Js=n)):Ei()}function Ei(){K(Ct,Ct.current),K(Os,Os.current)}function Bs(n){$(Os),Js===n&&(Js=null),$(Ct)}var Ct=B(0);function Ql(n){for(var a=n;a!==null;){if(a.tag===13){var d=a.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||lf(d)||cf(d)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===n)break;for(;a.sibling===null;){if(a.return===null||a.return===n)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Qn=0,Te=null,st=null,Ot=null,Zl=!1,Ka=!1,aa=!1,Jl=0,uo=0,Qa=null,e_=0;function Et(){throw Error(s(321))}function sh(n,a){if(a===null)return!1;for(var d=0;d<a.length&&d<n.length;d++)if(!Ms(n[d],a[d]))return!1;return!0}function nh(n,a,d,m,y,v){return Qn=v,Te=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,E.H=n===null||n.memoizedState===null?i0:yh,aa=!1,v=d(m,y),aa=!1,Ka&&(v=Ag(a,d,m,y)),_g(n),v}function _g(n){E.H=mo;var a=st!==null&&st.next!==null;if(Qn=0,Ot=st=Te=null,Zl=!1,uo=0,Qa=null,a)throw Error(s(300));n===null||Bt||(n=n.dependencies,n!==null&&ql(n)&&(Bt=!0))}function Ag(n,a,d,m){Te=n;var y=0;do{if(Ka&&(Qa=null),uo=0,Ka=!1,25<=y)throw Error(s(301));if(y+=1,Ot=st=null,n.updateQueue!=null){var v=n.updateQueue;v.lastEffect=null,v.events=null,v.stores=null,v.memoCache!=null&&(v.memoCache.index=0)}E.H=a0,v=a(d,m)}while(Ka);return v}function t_(){var n=E.H,a=n.useState()[0];return a=typeof a.then=="function"?ho(a):a,n=n.useState()[0],(st!==null?st.memoizedState:null)!==n&&(Te.flags|=1024),a}function ih(){var n=Jl!==0;return Jl=0,n}function ah(n,a,d){a.updateQueue=n.updateQueue,a.flags&=-2053,n.lanes&=~d}function rh(n){if(Zl){for(n=n.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}Zl=!1}Qn=0,Ot=st=Te=null,Ka=!1,uo=Jl=0,Qa=null}function ms(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ot===null?Te.memoizedState=Ot=n:Ot=Ot.next=n,Ot}function Tt(){if(st===null){var n=Te.alternate;n=n!==null?n.memoizedState:null}else n=st.next;var a=Ot===null?Te.memoizedState:Ot.next;if(a!==null)Ot=a,st=n;else{if(n===null)throw Te.alternate===null?Error(s(467)):Error(s(310));st=n,n={memoizedState:st.memoizedState,baseState:st.baseState,baseQueue:st.baseQueue,queue:st.queue,next:null},Ot===null?Te.memoizedState=Ot=n:Ot=Ot.next=n}return Ot}function ec(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ho(n){var a=uo;return uo+=1,Qa===null&&(Qa=[]),n=fg(Qa,n,a),a=Te,(Ot===null?a.memoizedState:Ot.next)===null&&(a=a.alternate,E.H=a===null||a.memoizedState===null?i0:yh),n}function tc(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return ho(n);if(n.$$typeof===O)return Jt(n)}throw Error(s(438,String(n)))}function oh(n){var a=null,d=Te.updateQueue;if(d!==null&&(a=d.memoCache),a==null){var m=Te.alternate;m!==null&&(m=m.updateQueue,m!==null&&(m=m.memoCache,m!=null&&(a={data:m.data.map(function(y){return y.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),d===null&&(d=ec(),Te.updateQueue=d),d.memoCache=a,d=a.data[a.index],d===void 0)for(d=a.data[a.index]=Array(n),m=0;m<n;m++)d[m]=M;return a.index++,d}function Zn(n,a){return typeof a=="function"?a(n):a}function sc(n){var a=Tt();return lh(a,st,n)}function lh(n,a,d){var m=n.queue;if(m===null)throw Error(s(311));m.lastRenderedReducer=d;var y=n.baseQueue,v=m.pending;if(v!==null){if(y!==null){var T=y.next;y.next=v.next,v.next=T}a.baseQueue=y=v,m.pending=null}if(v=n.baseState,y===null)n.memoizedState=v;else{a=y.next;var U=T=null,X=null,se=a,re=!1;do{var ce=se.lane&-536870913;if(ce!==se.lane?(Pe&ce)===ce:(Qn&ce)===ce){var ne=se.revertLane;if(ne===0)X!==null&&(X=X.next={lane:0,revertLane:0,gesture:null,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null}),ce===Ga&&(re=!0);else if((Qn&ne)===ne){se=se.next,ne===Ga&&(re=!0);continue}else ce={lane:0,revertLane:se.revertLane,gesture:null,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null},X===null?(U=X=ce,T=v):X=X.next=ce,Te.lanes|=ne,Ti|=ne;ce=se.action,aa&&d(v,ce),v=se.hasEagerState?se.eagerState:d(v,ce)}else ne={lane:ce,revertLane:se.revertLane,gesture:se.gesture,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null},X===null?(U=X=ne,T=v):X=X.next=ne,Te.lanes|=ce,Ti|=ce;se=se.next}while(se!==null&&se!==a);if(X===null?T=v:X.next=U,!Ms(v,n.memoizedState)&&(Bt=!0,re&&(d=$a,d!==null)))throw d;n.memoizedState=v,n.baseState=T,n.baseQueue=X,m.lastRenderedState=v}return y===null&&(m.lanes=0),[n.memoizedState,m.dispatch]}function ch(n){var a=Tt(),d=a.queue;if(d===null)throw Error(s(311));d.lastRenderedReducer=n;var m=d.dispatch,y=d.pending,v=a.memoizedState;if(y!==null){d.pending=null;var T=y=y.next;do v=n(v,T.action),T=T.next;while(T!==y);Ms(v,a.memoizedState)||(Bt=!0),a.memoizedState=v,a.baseQueue===null&&(a.baseState=v),d.lastRenderedState=v}return[v,m]}function Sg(n,a,d){var m=Te,y=Tt(),v=He;if(v){if(d===void 0)throw Error(s(407));d=d()}else d=a();var T=!Ms((st||y).memoizedState,d);if(T&&(y.memoizedState=d,Bt=!0),y=y.queue,hh(jg.bind(null,m,y,n),[n]),y.getSnapshot!==a||T||Ot!==null&&Ot.memoizedState.tag&1){if(m.flags|=2048,Za(9,{destroy:void 0},Eg.bind(null,m,y,d,a),null),ot===null)throw Error(s(349));v||(Qn&127)!==0||Ng(m,a,d)}return d}function Ng(n,a,d){n.flags|=16384,n={getSnapshot:a,value:d},a=Te.updateQueue,a===null?(a=ec(),Te.updateQueue=a,a.stores=[n]):(d=a.stores,d===null?a.stores=[n]:d.push(n))}function Eg(n,a,d,m){a.value=d,a.getSnapshot=m,Cg(a)&&Tg(n)}function jg(n,a,d){return d(function(){Cg(a)&&Tg(n)})}function Cg(n){var a=n.getSnapshot;n=n.value;try{var d=a();return!Ms(n,d)}catch{return!0}}function Tg(n){var a=Ki(n,2);a!==null&&Ss(a,n,2)}function dh(n){var a=ms();if(typeof n=="function"){var d=n;if(n=d(),aa){as(!0);try{d()}finally{as(!1)}}}return a.memoizedState=a.baseState=n,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zn,lastRenderedState:n},a}function kg(n,a,d,m){return n.baseState=d,lh(n,st,typeof m=="function"?m:Zn)}function s_(n,a,d,m,y){if(ac(n))throw Error(s(485));if(n=a.action,n!==null){var v={payload:y,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){v.listeners.push(T)}};E.T!==null?d(!0):v.isTransition=!1,m(v),d=a.pending,d===null?(v.next=a.pending=v,Rg(a,v)):(v.next=d.next,a.pending=d.next=v)}}function Rg(n,a){var d=a.action,m=a.payload,y=n.state;if(a.isTransition){var v=E.T,T={};E.T=T;try{var U=d(y,m),X=E.S;X!==null&&X(T,U),Dg(n,a,U)}catch(se){uh(n,a,se)}finally{v!==null&&T.types!==null&&(v.types=T.types),E.T=v}}else try{v=d(y,m),Dg(n,a,v)}catch(se){uh(n,a,se)}}function Dg(n,a,d){d!==null&&typeof d=="object"&&typeof d.then=="function"?d.then(function(m){Mg(n,a,m)},function(m){return uh(n,a,m)}):Mg(n,a,d)}function Mg(n,a,d){a.status="fulfilled",a.value=d,Lg(a),n.state=d,a=n.pending,a!==null&&(d=a.next,d===a?n.pending=null:(d=d.next,a.next=d,Rg(n,d)))}function uh(n,a,d){var m=n.pending;if(n.pending=null,m!==null){m=m.next;do a.status="rejected",a.reason=d,Lg(a),a=a.next;while(a!==m)}n.action=null}function Lg(n){n=n.listeners;for(var a=0;a<n.length;a++)(0,n[a])()}function Og(n,a){return a}function Bg(n,a){if(He){var d=ot.formState;if(d!==null){e:{var m=Te;if(He){if(ht){t:{for(var y=ht,v=Zs;y.nodeType!==8;){if(!v){y=null;break t}if(y=en(y.nextSibling),y===null){y=null;break t}}v=y.data,y=v==="F!"||v==="F"?y:null}if(y){ht=en(y.nextSibling),m=y.data==="F!";break e}}vi(m)}m=!1}m&&(a=d[0])}}return d=ms(),d.memoizedState=d.baseState=a,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Og,lastRenderedState:a},d.queue=m,d=t0.bind(null,Te,m),m.dispatch=d,m=dh(!1),v=xh.bind(null,Te,!1,m.queue),m=ms(),y={state:a,dispatch:null,action:n,pending:null},m.queue=y,d=s_.bind(null,Te,y,v,d),y.dispatch=d,m.memoizedState=n,[a,d,!1]}function Pg(n){var a=Tt();return Fg(a,st,n)}function Fg(n,a,d){if(a=lh(n,a,Og)[0],n=sc(Zn)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var m=ho(a)}catch(T){throw T===Ya?$l:T}else m=a;a=Tt();var y=a.queue,v=y.dispatch;return d!==a.memoizedState&&(Te.flags|=2048,Za(9,{destroy:void 0},n_.bind(null,y,d),null)),[m,v,n]}function n_(n,a){n.action=a}function Ug(n){var a=Tt(),d=st;if(d!==null)return Fg(a,d,n);Tt(),a=a.memoizedState,d=Tt();var m=d.queue.dispatch;return d.memoizedState=n,[a,m,!1]}function Za(n,a,d,m){return n={tag:n,create:d,deps:m,inst:a,next:null},a=Te.updateQueue,a===null&&(a=ec(),Te.updateQueue=a),d=a.lastEffect,d===null?a.lastEffect=n.next=n:(m=d.next,d.next=n,n.next=m,a.lastEffect=n),n}function Ig(){return Tt().memoizedState}function nc(n,a,d,m){var y=ms();Te.flags|=n,y.memoizedState=Za(1|a,{destroy:void 0},d,m===void 0?null:m)}function ic(n,a,d,m){var y=Tt();m=m===void 0?null:m;var v=y.memoizedState.inst;st!==null&&m!==null&&sh(m,st.memoizedState.deps)?y.memoizedState=Za(a,v,d,m):(Te.flags|=n,y.memoizedState=Za(1|a,v,d,m))}function zg(n,a){nc(8390656,8,n,a)}function hh(n,a){ic(2048,8,n,a)}function i_(n){Te.flags|=4;var a=Te.updateQueue;if(a===null)a=ec(),Te.updateQueue=a,a.events=[n];else{var d=a.events;d===null?a.events=[n]:d.push(n)}}function Hg(n){var a=Tt().memoizedState;return i_({ref:a,nextImpl:n}),function(){if((Qe&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}function qg(n,a){return ic(4,2,n,a)}function Vg(n,a){return ic(4,4,n,a)}function Gg(n,a){if(typeof a=="function"){n=n();var d=a(n);return function(){typeof d=="function"?d():a(null)}}if(a!=null)return n=n(),a.current=n,function(){a.current=null}}function $g(n,a,d){d=d!=null?d.concat([n]):null,ic(4,4,Gg.bind(null,a,n),d)}function fh(){}function Yg(n,a){var d=Tt();a=a===void 0?null:a;var m=d.memoizedState;return a!==null&&sh(a,m[1])?m[0]:(d.memoizedState=[n,a],n)}function Xg(n,a){var d=Tt();a=a===void 0?null:a;var m=d.memoizedState;if(a!==null&&sh(a,m[1]))return m[0];if(m=n(),aa){as(!0);try{n()}finally{as(!1)}}return d.memoizedState=[m,a],m}function mh(n,a,d){return d===void 0||(Qn&1073741824)!==0&&(Pe&261930)===0?n.memoizedState=a:(n.memoizedState=d,n=W0(),Te.lanes|=n,Ti|=n,d)}function Wg(n,a,d,m){return Ms(d,a)?d:Wa.current!==null?(n=mh(n,d,m),Ms(n,a)||(Bt=!0),n):(Qn&42)===0||(Qn&1073741824)!==0&&(Pe&261930)===0?(Bt=!0,n.memoizedState=d):(n=W0(),Te.lanes|=n,Ti|=n,a)}function Kg(n,a,d,m,y){var v=j.p;j.p=v!==0&&8>v?v:8;var T=E.T,U={};E.T=U,xh(n,!1,a,d);try{var X=y(),se=E.S;if(se!==null&&se(U,X),X!==null&&typeof X=="object"&&typeof X.then=="function"){var re=J1(X,m);fo(n,a,re,Us(n))}else fo(n,a,m,Us(n))}catch(ce){fo(n,a,{then:function(){},status:"rejected",reason:ce},Us())}finally{j.p=v,T!==null&&U.types!==null&&(T.types=U.types),E.T=T}}function a_(){}function ph(n,a,d,m){if(n.tag!==5)throw Error(s(476));var y=Qg(n).queue;Kg(n,y,a,G,d===null?a_:function(){return Zg(n),d(m)})}function Qg(n){var a=n.memoizedState;if(a!==null)return a;a={memoizedState:G,baseState:G,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zn,lastRenderedState:G},next:null};var d={};return a.next={memoizedState:d,baseState:d,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zn,lastRenderedState:d},next:null},n.memoizedState=a,n=n.alternate,n!==null&&(n.memoizedState=a),a}function Zg(n){var a=Qg(n);a.next===null&&(a=n.alternate.memoizedState),fo(n,a.next.queue,{},Us())}function gh(){return Jt(ko)}function Jg(){return Tt().memoizedState}function e0(){return Tt().memoizedState}function r_(n){for(var a=n.return;a!==null;){switch(a.tag){case 24:case 3:var d=Us();n=Ai(d);var m=Si(a,n,d);m!==null&&(Ss(m,a,d),oo(m,a,d)),a={cache:Gu()},n.payload=a;return}a=a.return}}function o_(n,a,d){var m=Us();d={lane:m,revertLane:0,gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},ac(n)?s0(a,d):(d=Lu(n,a,d,m),d!==null&&(Ss(d,n,m),n0(d,a,m)))}function t0(n,a,d){var m=Us();fo(n,a,d,m)}function fo(n,a,d,m){var y={lane:m,revertLane:0,gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null};if(ac(n))s0(a,y);else{var v=n.alternate;if(n.lanes===0&&(v===null||v.lanes===0)&&(v=a.lastRenderedReducer,v!==null))try{var T=a.lastRenderedState,U=v(T,d);if(y.hasEagerState=!0,y.eagerState=U,Ms(U,T))return Ul(n,a,y,0),ot===null&&Fl(),!1}catch{}if(d=Lu(n,a,y,m),d!==null)return Ss(d,n,m),n0(d,a,m),!0}return!1}function xh(n,a,d,m){if(m={lane:2,revertLane:Wh(),gesture:null,action:m,hasEagerState:!1,eagerState:null,next:null},ac(n)){if(a)throw Error(s(479))}else a=Lu(n,d,m,2),a!==null&&Ss(a,n,2)}function ac(n){var a=n.alternate;return n===Te||a!==null&&a===Te}function s0(n,a){Ka=Zl=!0;var d=n.pending;d===null?a.next=a:(a.next=d.next,d.next=a),n.pending=a}function n0(n,a,d){if((d&4194048)!==0){var m=a.lanes;m&=n.pendingLanes,d|=m,a.lanes=d,lp(n,d)}}var mo={readContext:Jt,use:tc,useCallback:Et,useContext:Et,useEffect:Et,useImperativeHandle:Et,useLayoutEffect:Et,useInsertionEffect:Et,useMemo:Et,useReducer:Et,useRef:Et,useState:Et,useDebugValue:Et,useDeferredValue:Et,useTransition:Et,useSyncExternalStore:Et,useId:Et,useHostTransitionStatus:Et,useFormState:Et,useActionState:Et,useOptimistic:Et,useMemoCache:Et,useCacheRefresh:Et};mo.useEffectEvent=Et;var i0={readContext:Jt,use:tc,useCallback:function(n,a){return ms().memoizedState=[n,a===void 0?null:a],n},useContext:Jt,useEffect:zg,useImperativeHandle:function(n,a,d){d=d!=null?d.concat([n]):null,nc(4194308,4,Gg.bind(null,a,n),d)},useLayoutEffect:function(n,a){return nc(4194308,4,n,a)},useInsertionEffect:function(n,a){nc(4,2,n,a)},useMemo:function(n,a){var d=ms();a=a===void 0?null:a;var m=n();if(aa){as(!0);try{n()}finally{as(!1)}}return d.memoizedState=[m,a],m},useReducer:function(n,a,d){var m=ms();if(d!==void 0){var y=d(a);if(aa){as(!0);try{d(a)}finally{as(!1)}}}else y=a;return m.memoizedState=m.baseState=y,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:y},m.queue=n,n=n.dispatch=o_.bind(null,Te,n),[m.memoizedState,n]},useRef:function(n){var a=ms();return n={current:n},a.memoizedState=n},useState:function(n){n=dh(n);var a=n.queue,d=t0.bind(null,Te,a);return a.dispatch=d,[n.memoizedState,d]},useDebugValue:fh,useDeferredValue:function(n,a){var d=ms();return mh(d,n,a)},useTransition:function(){var n=dh(!1);return n=Kg.bind(null,Te,n.queue,!0,!1),ms().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,a,d){var m=Te,y=ms();if(He){if(d===void 0)throw Error(s(407));d=d()}else{if(d=a(),ot===null)throw Error(s(349));(Pe&127)!==0||Ng(m,a,d)}y.memoizedState=d;var v={value:d,getSnapshot:a};return y.queue=v,zg(jg.bind(null,m,v,n),[n]),m.flags|=2048,Za(9,{destroy:void 0},Eg.bind(null,m,v,d,a),null),d},useId:function(){var n=ms(),a=ot.identifierPrefix;if(He){var d=jn,m=En;d=(m&~(1<<32-Kt(m)-1)).toString(32)+d,a="_"+a+"R_"+d,d=Jl++,0<d&&(a+="H"+d.toString(32)),a+="_"}else d=e_++,a="_"+a+"r_"+d.toString(32)+"_";return n.memoizedState=a},useHostTransitionStatus:gh,useFormState:Bg,useActionState:Bg,useOptimistic:function(n){var a=ms();a.memoizedState=a.baseState=n;var d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=d,a=xh.bind(null,Te,!0,d),d.dispatch=a,[n,a]},useMemoCache:oh,useCacheRefresh:function(){return ms().memoizedState=r_.bind(null,Te)},useEffectEvent:function(n){var a=ms(),d={impl:n};return a.memoizedState=d,function(){if((Qe&2)!==0)throw Error(s(440));return d.impl.apply(void 0,arguments)}}},yh={readContext:Jt,use:tc,useCallback:Yg,useContext:Jt,useEffect:hh,useImperativeHandle:$g,useInsertionEffect:qg,useLayoutEffect:Vg,useMemo:Xg,useReducer:sc,useRef:Ig,useState:function(){return sc(Zn)},useDebugValue:fh,useDeferredValue:function(n,a){var d=Tt();return Wg(d,st.memoizedState,n,a)},useTransition:function(){var n=sc(Zn)[0],a=Tt().memoizedState;return[typeof n=="boolean"?n:ho(n),a]},useSyncExternalStore:Sg,useId:Jg,useHostTransitionStatus:gh,useFormState:Pg,useActionState:Pg,useOptimistic:function(n,a){var d=Tt();return kg(d,st,n,a)},useMemoCache:oh,useCacheRefresh:e0};yh.useEffectEvent=Hg;var a0={readContext:Jt,use:tc,useCallback:Yg,useContext:Jt,useEffect:hh,useImperativeHandle:$g,useInsertionEffect:qg,useLayoutEffect:Vg,useMemo:Xg,useReducer:ch,useRef:Ig,useState:function(){return ch(Zn)},useDebugValue:fh,useDeferredValue:function(n,a){var d=Tt();return st===null?mh(d,n,a):Wg(d,st.memoizedState,n,a)},useTransition:function(){var n=ch(Zn)[0],a=Tt().memoizedState;return[typeof n=="boolean"?n:ho(n),a]},useSyncExternalStore:Sg,useId:Jg,useHostTransitionStatus:gh,useFormState:Ug,useActionState:Ug,useOptimistic:function(n,a){var d=Tt();return st!==null?kg(d,st,n,a):(d.baseState=n,[n,d.queue.dispatch])},useMemoCache:oh,useCacheRefresh:e0};a0.useEffectEvent=Hg;function bh(n,a,d,m){a=n.memoizedState,d=d(m,a),d=d==null?a:g({},a,d),n.memoizedState=d,n.lanes===0&&(n.updateQueue.baseState=d)}var vh={enqueueSetState:function(n,a,d){n=n._reactInternals;var m=Us(),y=Ai(m);y.payload=a,d!=null&&(y.callback=d),a=Si(n,y,m),a!==null&&(Ss(a,n,m),oo(a,n,m))},enqueueReplaceState:function(n,a,d){n=n._reactInternals;var m=Us(),y=Ai(m);y.tag=1,y.payload=a,d!=null&&(y.callback=d),a=Si(n,y,m),a!==null&&(Ss(a,n,m),oo(a,n,m))},enqueueForceUpdate:function(n,a){n=n._reactInternals;var d=Us(),m=Ai(d);m.tag=2,a!=null&&(m.callback=a),a=Si(n,m,d),a!==null&&(Ss(a,n,d),oo(a,n,d))}};function r0(n,a,d,m,y,v,T){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(m,v,T):a.prototype&&a.prototype.isPureReactComponent?!Jr(d,m)||!Jr(y,v):!0}function o0(n,a,d,m){n=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(d,m),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(d,m),a.state!==n&&vh.enqueueReplaceState(a,a.state,null)}function ra(n,a){var d=a;if("ref"in a){d={};for(var m in a)m!=="ref"&&(d[m]=a[m])}if(n=n.defaultProps){d===a&&(d=g({},d));for(var y in n)d[y]===void 0&&(d[y]=n[y])}return d}function l0(n){Pl(n)}function c0(n){console.error(n)}function d0(n){Pl(n)}function rc(n,a){try{var d=n.onUncaughtError;d(a.value,{componentStack:a.stack})}catch(m){setTimeout(function(){throw m})}}function u0(n,a,d){try{var m=n.onCaughtError;m(d.value,{componentStack:d.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function wh(n,a,d){return d=Ai(d),d.tag=3,d.payload={element:null},d.callback=function(){rc(n,a)},d}function h0(n){return n=Ai(n),n.tag=3,n}function f0(n,a,d,m){var y=d.type.getDerivedStateFromError;if(typeof y=="function"){var v=m.value;n.payload=function(){return y(v)},n.callback=function(){u0(a,d,m)}}var T=d.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(n.callback=function(){u0(a,d,m),typeof y!="function"&&(ki===null?ki=new Set([this]):ki.add(this));var U=m.stack;this.componentDidCatch(m.value,{componentStack:U!==null?U:""})})}function l_(n,a,d,m,y){if(d.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){if(a=d.alternate,a!==null&&Va(a,d,y,!0),d=Os.current,d!==null){switch(d.tag){case 31:case 13:return Js===null?yc():d.alternate===null&&jt===0&&(jt=3),d.flags&=-257,d.flags|=65536,d.lanes=y,m===Yl?d.flags|=16384:(a=d.updateQueue,a===null?d.updateQueue=new Set([m]):a.add(m),$h(n,m,y)),!1;case 22:return d.flags|=65536,m===Yl?d.flags|=16384:(a=d.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([m])},d.updateQueue=a):(d=a.retryQueue,d===null?a.retryQueue=new Set([m]):d.add(m)),$h(n,m,y)),!1}throw Error(s(435,d.tag))}return $h(n,m,y),yc(),!1}if(He)return a=Os.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=y,m!==Iu&&(n=Error(s(422),{cause:m}),so(Ws(n,d)))):(m!==Iu&&(a=Error(s(423),{cause:m}),so(Ws(a,d))),n=n.current.alternate,n.flags|=65536,y&=-y,n.lanes|=y,m=Ws(m,d),y=wh(n.stateNode,m,y),Qu(n,y),jt!==4&&(jt=2)),!1;var v=Error(s(520),{cause:m});if(v=Ws(v,d),_o===null?_o=[v]:_o.push(v),jt!==4&&(jt=2),a===null)return!0;m=Ws(m,d),d=a;do{switch(d.tag){case 3:return d.flags|=65536,n=y&-y,d.lanes|=n,n=wh(d.stateNode,m,n),Qu(d,n),!1;case 1:if(a=d.type,v=d.stateNode,(d.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(ki===null||!ki.has(v))))return d.flags|=65536,y&=-y,d.lanes|=y,y=h0(y),f0(y,n,d,m),Qu(d,y),!1}d=d.return}while(d!==null);return!1}var _h=Error(s(461)),Bt=!1;function es(n,a,d,m){a.child=n===null?xg(a,null,d,m):ia(a,n.child,d,m)}function m0(n,a,d,m,y){d=d.render;var v=a.ref;if("ref"in m){var T={};for(var U in m)U!=="ref"&&(T[U]=m[U])}else T=m;return ea(a),m=nh(n,a,d,T,v,y),U=ih(),n!==null&&!Bt?(ah(n,a,y),Jn(n,a,y)):(He&&U&&Fu(a),a.flags|=1,es(n,a,m,y),a.child)}function p0(n,a,d,m,y){if(n===null){var v=d.type;return typeof v=="function"&&!Ou(v)&&v.defaultProps===void 0&&d.compare===null?(a.tag=15,a.type=v,g0(n,a,v,m,y)):(n=zl(d.type,null,m,a,a.mode,y),n.ref=a.ref,n.return=a,a.child=n)}if(v=n.child,!kh(n,y)){var T=v.memoizedProps;if(d=d.compare,d=d!==null?d:Jr,d(T,m)&&n.ref===a.ref)return Jn(n,a,y)}return a.flags|=1,n=Yn(v,m),n.ref=a.ref,n.return=a,a.child=n}function g0(n,a,d,m,y){if(n!==null){var v=n.memoizedProps;if(Jr(v,m)&&n.ref===a.ref)if(Bt=!1,a.pendingProps=m=v,kh(n,y))(n.flags&131072)!==0&&(Bt=!0);else return a.lanes=n.lanes,Jn(n,a,y)}return Ah(n,a,d,m,y)}function x0(n,a,d,m){var y=m.children,v=n!==null?n.memoizedState:null;if(n===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),m.mode==="hidden"){if((a.flags&128)!==0){if(v=v!==null?v.baseLanes|d:d,n!==null){for(m=a.child=n.child,y=0;m!==null;)y=y|m.lanes|m.childLanes,m=m.sibling;m=y&~v}else m=0,a.child=null;return y0(n,a,v,d,m)}if((d&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},n!==null&&Gl(a,v!==null?v.cachePool:null),v!==null?vg(a,v):Ju(),wg(a);else return m=a.lanes=536870912,y0(n,a,v!==null?v.baseLanes|d:d,d,m)}else v!==null?(Gl(a,v.cachePool),vg(a,v),Ei(),a.memoizedState=null):(n!==null&&Gl(a,null),Ju(),Ei());return es(n,a,y,d),a.child}function po(n,a){return n!==null&&n.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function y0(n,a,d,m,y){var v=Yu();return v=v===null?null:{parent:Lt._currentValue,pool:v},a.memoizedState={baseLanes:d,cachePool:v},n!==null&&Gl(a,null),Ju(),wg(a),n!==null&&Va(n,a,m,!0),a.childLanes=y,null}function oc(n,a){return a=cc({mode:a.mode,children:a.children},n.mode),a.ref=n.ref,n.child=a,a.return=n,a}function b0(n,a,d){return ia(a,n.child,null,d),n=oc(a,a.pendingProps),n.flags|=2,Bs(a),a.memoizedState=null,n}function c_(n,a,d){var m=a.pendingProps,y=(a.flags&128)!==0;if(a.flags&=-129,n===null){if(He){if(m.mode==="hidden")return n=oc(a,m),a.lanes=536870912,po(null,n);if(th(a),(n=ht)?(n=Rx(n,Zs),n=n!==null&&n.data==="&"?n:null,n!==null&&(a.memoizedState={dehydrated:n,treeContext:yi!==null?{id:En,overflow:jn}:null,retryLane:536870912,hydrationErrors:null},d=sg(n),d.return=a,a.child=d,Zt=a,ht=null)):n=null,n===null)throw vi(a);return a.lanes=536870912,null}return oc(a,m)}var v=n.memoizedState;if(v!==null){var T=v.dehydrated;if(th(a),y)if(a.flags&256)a.flags&=-257,a=b0(n,a,d);else if(a.memoizedState!==null)a.child=n.child,a.flags|=128,a=null;else throw Error(s(558));else if(Bt||Va(n,a,d,!1),y=(d&n.childLanes)!==0,Bt||y){if(m=ot,m!==null&&(T=cp(m,d),T!==0&&T!==v.retryLane))throw v.retryLane=T,Ki(n,T),Ss(m,n,T),_h;yc(),a=b0(n,a,d)}else n=v.treeContext,ht=en(T.nextSibling),Zt=a,He=!0,bi=null,Zs=!1,n!==null&&ag(a,n),a=oc(a,m),a.flags|=4096;return a}return n=Yn(n.child,{mode:m.mode,children:m.children}),n.ref=a.ref,a.child=n,n.return=a,n}function lc(n,a){var d=a.ref;if(d===null)n!==null&&n.ref!==null&&(a.flags|=4194816);else{if(typeof d!="function"&&typeof d!="object")throw Error(s(284));(n===null||n.ref!==d)&&(a.flags|=4194816)}}function Ah(n,a,d,m,y){return ea(a),d=nh(n,a,d,m,void 0,y),m=ih(),n!==null&&!Bt?(ah(n,a,y),Jn(n,a,y)):(He&&m&&Fu(a),a.flags|=1,es(n,a,d,y),a.child)}function v0(n,a,d,m,y,v){return ea(a),a.updateQueue=null,d=Ag(a,m,d,y),_g(n),m=ih(),n!==null&&!Bt?(ah(n,a,v),Jn(n,a,v)):(He&&m&&Fu(a),a.flags|=1,es(n,a,d,v),a.child)}function w0(n,a,d,m,y){if(ea(a),a.stateNode===null){var v=Ia,T=d.contextType;typeof T=="object"&&T!==null&&(v=Jt(T)),v=new d(m,v),a.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=vh,a.stateNode=v,v._reactInternals=a,v=a.stateNode,v.props=m,v.state=a.memoizedState,v.refs={},Wu(a),T=d.contextType,v.context=typeof T=="object"&&T!==null?Jt(T):Ia,v.state=a.memoizedState,T=d.getDerivedStateFromProps,typeof T=="function"&&(bh(a,d,T,m),v.state=a.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(T=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),T!==v.state&&vh.enqueueReplaceState(v,v.state,null),co(a,m,v,y),lo(),v.state=a.memoizedState),typeof v.componentDidMount=="function"&&(a.flags|=4194308),m=!0}else if(n===null){v=a.stateNode;var U=a.memoizedProps,X=ra(d,U);v.props=X;var se=v.context,re=d.contextType;T=Ia,typeof re=="object"&&re!==null&&(T=Jt(re));var ce=d.getDerivedStateFromProps;re=typeof ce=="function"||typeof v.getSnapshotBeforeUpdate=="function",U=a.pendingProps!==U,re||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(U||se!==T)&&o0(a,v,m,T),_i=!1;var ne=a.memoizedState;v.state=ne,co(a,m,v,y),lo(),se=a.memoizedState,U||ne!==se||_i?(typeof ce=="function"&&(bh(a,d,ce,m),se=a.memoizedState),(X=_i||r0(a,d,X,m,ne,se,T))?(re||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(a.flags|=4194308)):(typeof v.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=m,a.memoizedState=se),v.props=m,v.state=se,v.context=T,m=X):(typeof v.componentDidMount=="function"&&(a.flags|=4194308),m=!1)}else{v=a.stateNode,Ku(n,a),T=a.memoizedProps,re=ra(d,T),v.props=re,ce=a.pendingProps,ne=v.context,se=d.contextType,X=Ia,typeof se=="object"&&se!==null&&(X=Jt(se)),U=d.getDerivedStateFromProps,(se=typeof U=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(T!==ce||ne!==X)&&o0(a,v,m,X),_i=!1,ne=a.memoizedState,v.state=ne,co(a,m,v,y),lo();var ae=a.memoizedState;T!==ce||ne!==ae||_i||n!==null&&n.dependencies!==null&&ql(n.dependencies)?(typeof U=="function"&&(bh(a,d,U,m),ae=a.memoizedState),(re=_i||r0(a,d,re,m,ne,ae,X)||n!==null&&n.dependencies!==null&&ql(n.dependencies))?(se||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(m,ae,X),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(m,ae,X)),typeof v.componentDidUpdate=="function"&&(a.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof v.componentDidUpdate!="function"||T===n.memoizedProps&&ne===n.memoizedState||(a.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||T===n.memoizedProps&&ne===n.memoizedState||(a.flags|=1024),a.memoizedProps=m,a.memoizedState=ae),v.props=m,v.state=ae,v.context=X,m=re):(typeof v.componentDidUpdate!="function"||T===n.memoizedProps&&ne===n.memoizedState||(a.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||T===n.memoizedProps&&ne===n.memoizedState||(a.flags|=1024),m=!1)}return v=m,lc(n,a),m=(a.flags&128)!==0,v||m?(v=a.stateNode,d=m&&typeof d.getDerivedStateFromError!="function"?null:v.render(),a.flags|=1,n!==null&&m?(a.child=ia(a,n.child,null,y),a.child=ia(a,null,d,y)):es(n,a,d,y),a.memoizedState=v.state,n=a.child):n=Jn(n,a,y),n}function _0(n,a,d,m){return Zi(),a.flags|=256,es(n,a,d,m),a.child}var Sh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Nh(n){return{baseLanes:n,cachePool:ug()}}function Eh(n,a,d){return n=n!==null?n.childLanes&~d:0,a&&(n|=Fs),n}function A0(n,a,d){var m=a.pendingProps,y=!1,v=(a.flags&128)!==0,T;if((T=v)||(T=n!==null&&n.memoizedState===null?!1:(Ct.current&2)!==0),T&&(y=!0,a.flags&=-129),T=(a.flags&32)!==0,a.flags&=-33,n===null){if(He){if(y?Ni(a):Ei(),(n=ht)?(n=Rx(n,Zs),n=n!==null&&n.data!=="&"?n:null,n!==null&&(a.memoizedState={dehydrated:n,treeContext:yi!==null?{id:En,overflow:jn}:null,retryLane:536870912,hydrationErrors:null},d=sg(n),d.return=a,a.child=d,Zt=a,ht=null)):n=null,n===null)throw vi(a);return cf(n)?a.lanes=32:a.lanes=536870912,null}var U=m.children;return m=m.fallback,y?(Ei(),y=a.mode,U=cc({mode:"hidden",children:U},y),m=Qi(m,y,d,null),U.return=a,m.return=a,U.sibling=m,a.child=U,m=a.child,m.memoizedState=Nh(d),m.childLanes=Eh(n,T,d),a.memoizedState=Sh,po(null,m)):(Ni(a),jh(a,U))}var X=n.memoizedState;if(X!==null&&(U=X.dehydrated,U!==null)){if(v)a.flags&256?(Ni(a),a.flags&=-257,a=Ch(n,a,d)):a.memoizedState!==null?(Ei(),a.child=n.child,a.flags|=128,a=null):(Ei(),U=m.fallback,y=a.mode,m=cc({mode:"visible",children:m.children},y),U=Qi(U,y,d,null),U.flags|=2,m.return=a,U.return=a,m.sibling=U,a.child=m,ia(a,n.child,null,d),m=a.child,m.memoizedState=Nh(d),m.childLanes=Eh(n,T,d),a.memoizedState=Sh,a=po(null,m));else if(Ni(a),cf(U)){if(T=U.nextSibling&&U.nextSibling.dataset,T)var se=T.dgst;T=se,m=Error(s(419)),m.stack="",m.digest=T,so({value:m,source:null,stack:null}),a=Ch(n,a,d)}else if(Bt||Va(n,a,d,!1),T=(d&n.childLanes)!==0,Bt||T){if(T=ot,T!==null&&(m=cp(T,d),m!==0&&m!==X.retryLane))throw X.retryLane=m,Ki(n,m),Ss(T,n,m),_h;lf(U)||yc(),a=Ch(n,a,d)}else lf(U)?(a.flags|=192,a.child=n.child,a=null):(n=X.treeContext,ht=en(U.nextSibling),Zt=a,He=!0,bi=null,Zs=!1,n!==null&&ag(a,n),a=jh(a,m.children),a.flags|=4096);return a}return y?(Ei(),U=m.fallback,y=a.mode,X=n.child,se=X.sibling,m=Yn(X,{mode:"hidden",children:m.children}),m.subtreeFlags=X.subtreeFlags&65011712,se!==null?U=Yn(se,U):(U=Qi(U,y,d,null),U.flags|=2),U.return=a,m.return=a,m.sibling=U,a.child=m,po(null,m),m=a.child,U=n.child.memoizedState,U===null?U=Nh(d):(y=U.cachePool,y!==null?(X=Lt._currentValue,y=y.parent!==X?{parent:X,pool:X}:y):y=ug(),U={baseLanes:U.baseLanes|d,cachePool:y}),m.memoizedState=U,m.childLanes=Eh(n,T,d),a.memoizedState=Sh,po(n.child,m)):(Ni(a),d=n.child,n=d.sibling,d=Yn(d,{mode:"visible",children:m.children}),d.return=a,d.sibling=null,n!==null&&(T=a.deletions,T===null?(a.deletions=[n],a.flags|=16):T.push(n)),a.child=d,a.memoizedState=null,d)}function jh(n,a){return a=cc({mode:"visible",children:a},n.mode),a.return=n,n.child=a}function cc(n,a){return n=Ls(22,n,null,a),n.lanes=0,n}function Ch(n,a,d){return ia(a,n.child,null,d),n=jh(a,a.pendingProps.children),n.flags|=2,a.memoizedState=null,n}function S0(n,a,d){n.lanes|=a;var m=n.alternate;m!==null&&(m.lanes|=a),qu(n.return,a,d)}function Th(n,a,d,m,y,v){var T=n.memoizedState;T===null?n.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:m,tail:d,tailMode:y,treeForkCount:v}:(T.isBackwards=a,T.rendering=null,T.renderingStartTime=0,T.last=m,T.tail=d,T.tailMode=y,T.treeForkCount=v)}function N0(n,a,d){var m=a.pendingProps,y=m.revealOrder,v=m.tail;m=m.children;var T=Ct.current,U=(T&2)!==0;if(U?(T=T&1|2,a.flags|=128):T&=1,K(Ct,T),es(n,a,m,d),m=He?to:0,!U&&n!==null&&(n.flags&128)!==0)e:for(n=a.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&S0(n,d,a);else if(n.tag===19)S0(n,d,a);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===a)break e;for(;n.sibling===null;){if(n.return===null||n.return===a)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(y){case"forwards":for(d=a.child,y=null;d!==null;)n=d.alternate,n!==null&&Ql(n)===null&&(y=d),d=d.sibling;d=y,d===null?(y=a.child,a.child=null):(y=d.sibling,d.sibling=null),Th(a,!1,y,d,v,m);break;case"backwards":case"unstable_legacy-backwards":for(d=null,y=a.child,a.child=null;y!==null;){if(n=y.alternate,n!==null&&Ql(n)===null){a.child=y;break}n=y.sibling,y.sibling=d,d=y,y=n}Th(a,!0,d,null,v,m);break;case"together":Th(a,!1,null,null,void 0,m);break;default:a.memoizedState=null}return a.child}function Jn(n,a,d){if(n!==null&&(a.dependencies=n.dependencies),Ti|=a.lanes,(d&a.childLanes)===0)if(n!==null){if(Va(n,a,d,!1),(d&a.childLanes)===0)return null}else return null;if(n!==null&&a.child!==n.child)throw Error(s(153));if(a.child!==null){for(n=a.child,d=Yn(n,n.pendingProps),a.child=d,d.return=a;n.sibling!==null;)n=n.sibling,d=d.sibling=Yn(n,n.pendingProps),d.return=a;d.sibling=null}return a.child}function kh(n,a){return(n.lanes&a)!==0?!0:(n=n.dependencies,!!(n!==null&&ql(n)))}function d_(n,a,d){switch(a.tag){case 3:xe(a,a.stateNode.containerInfo),wi(a,Lt,n.memoizedState.cache),Zi();break;case 27:case 5:Re(a);break;case 4:xe(a,a.stateNode.containerInfo);break;case 10:wi(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,th(a),null;break;case 13:var m=a.memoizedState;if(m!==null)return m.dehydrated!==null?(Ni(a),a.flags|=128,null):(d&a.child.childLanes)!==0?A0(n,a,d):(Ni(a),n=Jn(n,a,d),n!==null?n.sibling:null);Ni(a);break;case 19:var y=(n.flags&128)!==0;if(m=(d&a.childLanes)!==0,m||(Va(n,a,d,!1),m=(d&a.childLanes)!==0),y){if(m)return N0(n,a,d);a.flags|=128}if(y=a.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),K(Ct,Ct.current),m)break;return null;case 22:return a.lanes=0,x0(n,a,d,a.pendingProps);case 24:wi(a,Lt,n.memoizedState.cache)}return Jn(n,a,d)}function E0(n,a,d){if(n!==null)if(n.memoizedProps!==a.pendingProps)Bt=!0;else{if(!kh(n,d)&&(a.flags&128)===0)return Bt=!1,d_(n,a,d);Bt=(n.flags&131072)!==0}else Bt=!1,He&&(a.flags&1048576)!==0&&ig(a,to,a.index);switch(a.lanes=0,a.tag){case 16:e:{var m=a.pendingProps;if(n=sa(a.elementType),a.type=n,typeof n=="function")Ou(n)?(m=ra(n,m),a.tag=1,a=w0(null,a,n,m,d)):(a.tag=0,a=Ah(null,a,n,m,d));else{if(n!=null){var y=n.$$typeof;if(y===D){a.tag=11,a=m0(null,a,n,m,d);break e}else if(y===P){a.tag=14,a=p0(null,a,n,m,d);break e}}throw a=q(n)||n,Error(s(306,a,""))}}return a;case 0:return Ah(n,a,a.type,a.pendingProps,d);case 1:return m=a.type,y=ra(m,a.pendingProps),w0(n,a,m,y,d);case 3:e:{if(xe(a,a.stateNode.containerInfo),n===null)throw Error(s(387));m=a.pendingProps;var v=a.memoizedState;y=v.element,Ku(n,a),co(a,m,null,d);var T=a.memoizedState;if(m=T.cache,wi(a,Lt,m),m!==v.cache&&Vu(a,[Lt],d,!0),lo(),m=T.element,v.isDehydrated)if(v={element:m,isDehydrated:!1,cache:T.cache},a.updateQueue.baseState=v,a.memoizedState=v,a.flags&256){a=_0(n,a,m,d);break e}else if(m!==y){y=Ws(Error(s(424)),a),so(y),a=_0(n,a,m,d);break e}else for(n=a.stateNode.containerInfo,n.nodeType===9?n=n.body:n=n.nodeName==="HTML"?n.ownerDocument.body:n,ht=en(n.firstChild),Zt=a,He=!0,bi=null,Zs=!0,d=xg(a,null,m,d),a.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling;else{if(Zi(),m===y){a=Jn(n,a,d);break e}es(n,a,m,d)}a=a.child}return a;case 26:return lc(n,a),n===null?(d=Px(a.type,null,a.pendingProps,null))?a.memoizedState=d:He||(d=a.type,n=a.pendingProps,m=Nc(de.current).createElement(d),m[Qt]=a,m[ys]=n,ts(m,d,n),qt(m),a.stateNode=m):a.memoizedState=Px(a.type,n.memoizedProps,a.pendingProps,n.memoizedState),null;case 27:return Re(a),n===null&&He&&(m=a.stateNode=Lx(a.type,a.pendingProps,de.current),Zt=a,Zs=!0,y=ht,Li(a.type)?(df=y,ht=en(m.firstChild)):ht=y),es(n,a,a.pendingProps.children,d),lc(n,a),n===null&&(a.flags|=4194304),a.child;case 5:return n===null&&He&&((y=m=ht)&&(m=I_(m,a.type,a.pendingProps,Zs),m!==null?(a.stateNode=m,Zt=a,ht=en(m.firstChild),Zs=!1,y=!0):y=!1),y||vi(a)),Re(a),y=a.type,v=a.pendingProps,T=n!==null?n.memoizedProps:null,m=v.children,af(y,v)?m=null:T!==null&&af(y,T)&&(a.flags|=32),a.memoizedState!==null&&(y=nh(n,a,t_,null,null,d),ko._currentValue=y),lc(n,a),es(n,a,m,d),a.child;case 6:return n===null&&He&&((n=d=ht)&&(d=z_(d,a.pendingProps,Zs),d!==null?(a.stateNode=d,Zt=a,ht=null,n=!0):n=!1),n||vi(a)),null;case 13:return A0(n,a,d);case 4:return xe(a,a.stateNode.containerInfo),m=a.pendingProps,n===null?a.child=ia(a,null,m,d):es(n,a,m,d),a.child;case 11:return m0(n,a,a.type,a.pendingProps,d);case 7:return es(n,a,a.pendingProps,d),a.child;case 8:return es(n,a,a.pendingProps.children,d),a.child;case 12:return es(n,a,a.pendingProps.children,d),a.child;case 10:return m=a.pendingProps,wi(a,a.type,m.value),es(n,a,m.children,d),a.child;case 9:return y=a.type._context,m=a.pendingProps.children,ea(a),y=Jt(y),m=m(y),a.flags|=1,es(n,a,m,d),a.child;case 14:return p0(n,a,a.type,a.pendingProps,d);case 15:return g0(n,a,a.type,a.pendingProps,d);case 19:return N0(n,a,d);case 31:return c_(n,a,d);case 22:return x0(n,a,d,a.pendingProps);case 24:return ea(a),m=Jt(Lt),n===null?(y=Yu(),y===null&&(y=ot,v=Gu(),y.pooledCache=v,v.refCount++,v!==null&&(y.pooledCacheLanes|=d),y=v),a.memoizedState={parent:m,cache:y},Wu(a),wi(a,Lt,y)):((n.lanes&d)!==0&&(Ku(n,a),co(a,null,null,d),lo()),y=n.memoizedState,v=a.memoizedState,y.parent!==m?(y={parent:m,cache:m},a.memoizedState=y,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=y),wi(a,Lt,m)):(m=v.cache,wi(a,Lt,m),m!==y.cache&&Vu(a,[Lt],d,!0))),es(n,a,a.pendingProps.children,d),a.child;case 29:throw a.pendingProps}throw Error(s(156,a.tag))}function ei(n){n.flags|=4}function Rh(n,a,d,m,y){if((a=(n.mode&32)!==0)&&(a=!1),a){if(n.flags|=16777216,(y&335544128)===y)if(n.stateNode.complete)n.flags|=8192;else if(J0())n.flags|=8192;else throw na=Yl,Xu}else n.flags&=-16777217}function j0(n,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!Hx(a))if(J0())n.flags|=8192;else throw na=Yl,Xu}function dc(n,a){a!==null&&(n.flags|=4),n.flags&16384&&(a=n.tag!==22?Nn():536870912,n.lanes|=a,sr|=a)}function go(n,a){if(!He)switch(n.tailMode){case"hidden":a=n.tail;for(var d=null;a!==null;)a.alternate!==null&&(d=a),a=a.sibling;d===null?n.tail=null:d.sibling=null;break;case"collapsed":d=n.tail;for(var m=null;d!==null;)d.alternate!==null&&(m=d),d=d.sibling;m===null?a||n.tail===null?n.tail=null:n.tail.sibling=null:m.sibling=null}}function ft(n){var a=n.alternate!==null&&n.alternate.child===n.child,d=0,m=0;if(a)for(var y=n.child;y!==null;)d|=y.lanes|y.childLanes,m|=y.subtreeFlags&65011712,m|=y.flags&65011712,y.return=n,y=y.sibling;else for(y=n.child;y!==null;)d|=y.lanes|y.childLanes,m|=y.subtreeFlags,m|=y.flags,y.return=n,y=y.sibling;return n.subtreeFlags|=m,n.childLanes=d,a}function u_(n,a,d){var m=a.pendingProps;switch(Uu(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ft(a),null;case 1:return ft(a),null;case 3:return d=a.stateNode,m=null,n!==null&&(m=n.memoizedState.cache),a.memoizedState.cache!==m&&(a.flags|=2048),Kn(Lt),pe(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(n===null||n.child===null)&&(qa(a)?ei(a):n===null||n.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,zu())),ft(a),null;case 26:var y=a.type,v=a.memoizedState;return n===null?(ei(a),v!==null?(ft(a),j0(a,v)):(ft(a),Rh(a,y,null,m,d))):v?v!==n.memoizedState?(ei(a),ft(a),j0(a,v)):(ft(a),a.flags&=-16777217):(n=n.memoizedProps,n!==m&&ei(a),ft(a),Rh(a,y,n,m,d)),null;case 27:if(ve(a),d=de.current,y=a.type,n!==null&&a.stateNode!=null)n.memoizedProps!==m&&ei(a);else{if(!m){if(a.stateNode===null)throw Error(s(166));return ft(a),null}n=Q.current,qa(a)?rg(a):(n=Lx(y,m,d),a.stateNode=n,ei(a))}return ft(a),null;case 5:if(ve(a),y=a.type,n!==null&&a.stateNode!=null)n.memoizedProps!==m&&ei(a);else{if(!m){if(a.stateNode===null)throw Error(s(166));return ft(a),null}if(v=Q.current,qa(a))rg(a);else{var T=Nc(de.current);switch(v){case 1:v=T.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:v=T.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":v=T.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":v=T.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":v=T.createElement("div"),v.innerHTML="<script><\/script>",v=v.removeChild(v.firstChild);break;case"select":v=typeof m.is=="string"?T.createElement("select",{is:m.is}):T.createElement("select"),m.multiple?v.multiple=!0:m.size&&(v.size=m.size);break;default:v=typeof m.is=="string"?T.createElement(y,{is:m.is}):T.createElement(y)}}v[Qt]=a,v[ys]=m;e:for(T=a.child;T!==null;){if(T.tag===5||T.tag===6)v.appendChild(T.stateNode);else if(T.tag!==4&&T.tag!==27&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===a)break e;for(;T.sibling===null;){if(T.return===null||T.return===a)break e;T=T.return}T.sibling.return=T.return,T=T.sibling}a.stateNode=v;e:switch(ts(v,y,m),y){case"button":case"input":case"select":case"textarea":m=!!m.autoFocus;break e;case"img":m=!0;break e;default:m=!1}m&&ei(a)}}return ft(a),Rh(a,a.type,n===null?null:n.memoizedProps,a.pendingProps,d),null;case 6:if(n&&a.stateNode!=null)n.memoizedProps!==m&&ei(a);else{if(typeof m!="string"&&a.stateNode===null)throw Error(s(166));if(n=de.current,qa(a)){if(n=a.stateNode,d=a.memoizedProps,m=null,y=Zt,y!==null)switch(y.tag){case 27:case 5:m=y.memoizedProps}n[Qt]=a,n=!!(n.nodeValue===d||m!==null&&m.suppressHydrationWarning===!0||Ax(n.nodeValue,d)),n||vi(a,!0)}else n=Nc(n).createTextNode(m),n[Qt]=a,a.stateNode=n}return ft(a),null;case 31:if(d=a.memoizedState,n===null||n.memoizedState!==null){if(m=qa(a),d!==null){if(n===null){if(!m)throw Error(s(318));if(n=a.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(s(557));n[Qt]=a}else Zi(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;ft(a),n=!1}else d=zu(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=d),n=!0;if(!n)return a.flags&256?(Bs(a),a):(Bs(a),null);if((a.flags&128)!==0)throw Error(s(558))}return ft(a),null;case 13:if(m=a.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(y=qa(a),m!==null&&m.dehydrated!==null){if(n===null){if(!y)throw Error(s(318));if(y=a.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(s(317));y[Qt]=a}else Zi(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;ft(a),y=!1}else y=zu(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=y),y=!0;if(!y)return a.flags&256?(Bs(a),a):(Bs(a),null)}return Bs(a),(a.flags&128)!==0?(a.lanes=d,a):(d=m!==null,n=n!==null&&n.memoizedState!==null,d&&(m=a.child,y=null,m.alternate!==null&&m.alternate.memoizedState!==null&&m.alternate.memoizedState.cachePool!==null&&(y=m.alternate.memoizedState.cachePool.pool),v=null,m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(v=m.memoizedState.cachePool.pool),v!==y&&(m.flags|=2048)),d!==n&&d&&(a.child.flags|=8192),dc(a,a.updateQueue),ft(a),null);case 4:return pe(),n===null&&Jh(a.stateNode.containerInfo),ft(a),null;case 10:return Kn(a.type),ft(a),null;case 19:if($(Ct),m=a.memoizedState,m===null)return ft(a),null;if(y=(a.flags&128)!==0,v=m.rendering,v===null)if(y)go(m,!1);else{if(jt!==0||n!==null&&(n.flags&128)!==0)for(n=a.child;n!==null;){if(v=Ql(n),v!==null){for(a.flags|=128,go(m,!1),n=v.updateQueue,a.updateQueue=n,dc(a,n),a.subtreeFlags=0,n=d,d=a.child;d!==null;)tg(d,n),d=d.sibling;return K(Ct,Ct.current&1|2),He&&Xn(a,m.treeForkCount),a.child}n=n.sibling}m.tail!==null&&De()>pc&&(a.flags|=128,y=!0,go(m,!1),a.lanes=4194304)}else{if(!y)if(n=Ql(v),n!==null){if(a.flags|=128,y=!0,n=n.updateQueue,a.updateQueue=n,dc(a,n),go(m,!0),m.tail===null&&m.tailMode==="hidden"&&!v.alternate&&!He)return ft(a),null}else 2*De()-m.renderingStartTime>pc&&d!==536870912&&(a.flags|=128,y=!0,go(m,!1),a.lanes=4194304);m.isBackwards?(v.sibling=a.child,a.child=v):(n=m.last,n!==null?n.sibling=v:a.child=v,m.last=v)}return m.tail!==null?(n=m.tail,m.rendering=n,m.tail=n.sibling,m.renderingStartTime=De(),n.sibling=null,d=Ct.current,K(Ct,y?d&1|2:d&1),He&&Xn(a,m.treeForkCount),n):(ft(a),null);case 22:case 23:return Bs(a),eh(),m=a.memoizedState!==null,n!==null?n.memoizedState!==null!==m&&(a.flags|=8192):m&&(a.flags|=8192),m?(d&536870912)!==0&&(a.flags&128)===0&&(ft(a),a.subtreeFlags&6&&(a.flags|=8192)):ft(a),d=a.updateQueue,d!==null&&dc(a,d.retryQueue),d=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(d=n.memoizedState.cachePool.pool),m=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(m=a.memoizedState.cachePool.pool),m!==d&&(a.flags|=2048),n!==null&&$(ta),null;case 24:return d=null,n!==null&&(d=n.memoizedState.cache),a.memoizedState.cache!==d&&(a.flags|=2048),Kn(Lt),ft(a),null;case 25:return null;case 30:return null}throw Error(s(156,a.tag))}function h_(n,a){switch(Uu(a),a.tag){case 1:return n=a.flags,n&65536?(a.flags=n&-65537|128,a):null;case 3:return Kn(Lt),pe(),n=a.flags,(n&65536)!==0&&(n&128)===0?(a.flags=n&-65537|128,a):null;case 26:case 27:case 5:return ve(a),null;case 31:if(a.memoizedState!==null){if(Bs(a),a.alternate===null)throw Error(s(340));Zi()}return n=a.flags,n&65536?(a.flags=n&-65537|128,a):null;case 13:if(Bs(a),n=a.memoizedState,n!==null&&n.dehydrated!==null){if(a.alternate===null)throw Error(s(340));Zi()}return n=a.flags,n&65536?(a.flags=n&-65537|128,a):null;case 19:return $(Ct),null;case 4:return pe(),null;case 10:return Kn(a.type),null;case 22:case 23:return Bs(a),eh(),n!==null&&$(ta),n=a.flags,n&65536?(a.flags=n&-65537|128,a):null;case 24:return Kn(Lt),null;case 25:return null;default:return null}}function C0(n,a){switch(Uu(a),a.tag){case 3:Kn(Lt),pe();break;case 26:case 27:case 5:ve(a);break;case 4:pe();break;case 31:a.memoizedState!==null&&Bs(a);break;case 13:Bs(a);break;case 19:$(Ct);break;case 10:Kn(a.type);break;case 22:case 23:Bs(a),eh(),n!==null&&$(ta);break;case 24:Kn(Lt)}}function xo(n,a){try{var d=a.updateQueue,m=d!==null?d.lastEffect:null;if(m!==null){var y=m.next;d=y;do{if((d.tag&n)===n){m=void 0;var v=d.create,T=d.inst;m=v(),T.destroy=m}d=d.next}while(d!==y)}}catch(U){tt(a,a.return,U)}}function ji(n,a,d){try{var m=a.updateQueue,y=m!==null?m.lastEffect:null;if(y!==null){var v=y.next;m=v;do{if((m.tag&n)===n){var T=m.inst,U=T.destroy;if(U!==void 0){T.destroy=void 0,y=a;var X=d,se=U;try{se()}catch(re){tt(y,X,re)}}}m=m.next}while(m!==v)}}catch(re){tt(a,a.return,re)}}function T0(n){var a=n.updateQueue;if(a!==null){var d=n.stateNode;try{bg(a,d)}catch(m){tt(n,n.return,m)}}}function k0(n,a,d){d.props=ra(n.type,n.memoizedProps),d.state=n.memoizedState;try{d.componentWillUnmount()}catch(m){tt(n,a,m)}}function yo(n,a){try{var d=n.ref;if(d!==null){switch(n.tag){case 26:case 27:case 5:var m=n.stateNode;break;case 30:m=n.stateNode;break;default:m=n.stateNode}typeof d=="function"?n.refCleanup=d(m):d.current=m}}catch(y){tt(n,a,y)}}function Cn(n,a){var d=n.ref,m=n.refCleanup;if(d!==null)if(typeof m=="function")try{m()}catch(y){tt(n,a,y)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof d=="function")try{d(null)}catch(y){tt(n,a,y)}else d.current=null}function R0(n){var a=n.type,d=n.memoizedProps,m=n.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":d.autoFocus&&m.focus();break e;case"img":d.src?m.src=d.src:d.srcSet&&(m.srcset=d.srcSet)}}catch(y){tt(n,n.return,y)}}function Dh(n,a,d){try{var m=n.stateNode;L_(m,n.type,d,a),m[ys]=a}catch(y){tt(n,n.return,y)}}function D0(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Li(n.type)||n.tag===4}function Mh(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||D0(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Li(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Lh(n,a,d){var m=n.tag;if(m===5||m===6)n=n.stateNode,a?(d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d).insertBefore(n,a):(a=d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d,a.appendChild(n),d=d._reactRootContainer,d!=null||a.onclick!==null||(a.onclick=Gn));else if(m!==4&&(m===27&&Li(n.type)&&(d=n.stateNode,a=null),n=n.child,n!==null))for(Lh(n,a,d),n=n.sibling;n!==null;)Lh(n,a,d),n=n.sibling}function uc(n,a,d){var m=n.tag;if(m===5||m===6)n=n.stateNode,a?d.insertBefore(n,a):d.appendChild(n);else if(m!==4&&(m===27&&Li(n.type)&&(d=n.stateNode),n=n.child,n!==null))for(uc(n,a,d),n=n.sibling;n!==null;)uc(n,a,d),n=n.sibling}function M0(n){var a=n.stateNode,d=n.memoizedProps;try{for(var m=n.type,y=a.attributes;y.length;)a.removeAttributeNode(y[0]);ts(a,m,d),a[Qt]=n,a[ys]=d}catch(v){tt(n,n.return,v)}}var ti=!1,Pt=!1,Oh=!1,L0=typeof WeakSet=="function"?WeakSet:Set,Vt=null;function f_(n,a){if(n=n.containerInfo,sf=Dc,n=$p(n),Cu(n)){if("selectionStart"in n)var d={start:n.selectionStart,end:n.selectionEnd};else e:{d=(d=n.ownerDocument)&&d.defaultView||window;var m=d.getSelection&&d.getSelection();if(m&&m.rangeCount!==0){d=m.anchorNode;var y=m.anchorOffset,v=m.focusNode;m=m.focusOffset;try{d.nodeType,v.nodeType}catch{d=null;break e}var T=0,U=-1,X=-1,se=0,re=0,ce=n,ne=null;t:for(;;){for(var ae;ce!==d||y!==0&&ce.nodeType!==3||(U=T+y),ce!==v||m!==0&&ce.nodeType!==3||(X=T+m),ce.nodeType===3&&(T+=ce.nodeValue.length),(ae=ce.firstChild)!==null;)ne=ce,ce=ae;for(;;){if(ce===n)break t;if(ne===d&&++se===y&&(U=T),ne===v&&++re===m&&(X=T),(ae=ce.nextSibling)!==null)break;ce=ne,ne=ce.parentNode}ce=ae}d=U===-1||X===-1?null:{start:U,end:X}}else d=null}d=d||{start:0,end:0}}else d=null;for(nf={focusedElem:n,selectionRange:d},Dc=!1,Vt=a;Vt!==null;)if(a=Vt,n=a.child,(a.subtreeFlags&1028)!==0&&n!==null)n.return=a,Vt=n;else for(;Vt!==null;){switch(a=Vt,v=a.alternate,n=a.flags,a.tag){case 0:if((n&4)!==0&&(n=a.updateQueue,n=n!==null?n.events:null,n!==null))for(d=0;d<n.length;d++)y=n[d],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&v!==null){n=void 0,d=a,y=v.memoizedProps,v=v.memoizedState,m=d.stateNode;try{var me=ra(d.type,y);n=m.getSnapshotBeforeUpdate(me,v),m.__reactInternalSnapshotBeforeUpdate=n}catch(we){tt(d,d.return,we)}}break;case 3:if((n&1024)!==0){if(n=a.stateNode.containerInfo,d=n.nodeType,d===9)of(n);else if(d===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":of(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(s(163))}if(n=a.sibling,n!==null){n.return=a.return,Vt=n;break}Vt=a.return}}function O0(n,a,d){var m=d.flags;switch(d.tag){case 0:case 11:case 15:ni(n,d),m&4&&xo(5,d);break;case 1:if(ni(n,d),m&4)if(n=d.stateNode,a===null)try{n.componentDidMount()}catch(T){tt(d,d.return,T)}else{var y=ra(d.type,a.memoizedProps);a=a.memoizedState;try{n.componentDidUpdate(y,a,n.__reactInternalSnapshotBeforeUpdate)}catch(T){tt(d,d.return,T)}}m&64&&T0(d),m&512&&yo(d,d.return);break;case 3:if(ni(n,d),m&64&&(n=d.updateQueue,n!==null)){if(a=null,d.child!==null)switch(d.child.tag){case 27:case 5:a=d.child.stateNode;break;case 1:a=d.child.stateNode}try{bg(n,a)}catch(T){tt(d,d.return,T)}}break;case 27:a===null&&m&4&&M0(d);case 26:case 5:ni(n,d),a===null&&m&4&&R0(d),m&512&&yo(d,d.return);break;case 12:ni(n,d);break;case 31:ni(n,d),m&4&&F0(n,d);break;case 13:ni(n,d),m&4&&U0(n,d),m&64&&(n=d.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(d=__.bind(null,d),H_(n,d))));break;case 22:if(m=d.memoizedState!==null||ti,!m){a=a!==null&&a.memoizedState!==null||Pt,y=ti;var v=Pt;ti=m,(Pt=a)&&!v?ii(n,d,(d.subtreeFlags&8772)!==0):ni(n,d),ti=y,Pt=v}break;case 30:break;default:ni(n,d)}}function B0(n){var a=n.alternate;a!==null&&(n.alternate=null,B0(a)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(a=n.stateNode,a!==null&&uu(a)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var gt=null,vs=!1;function si(n,a,d){for(d=d.child;d!==null;)P0(n,a,d),d=d.sibling}function P0(n,a,d){if(pt&&typeof pt.onCommitFiberUnmount=="function")try{pt.onCommitFiberUnmount(fs,d)}catch{}switch(d.tag){case 26:Pt||Cn(d,a),si(n,a,d),d.memoizedState?d.memoizedState.count--:d.stateNode&&(d=d.stateNode,d.parentNode.removeChild(d));break;case 27:Pt||Cn(d,a);var m=gt,y=vs;Li(d.type)&&(gt=d.stateNode,vs=!1),si(n,a,d),jo(d.stateNode),gt=m,vs=y;break;case 5:Pt||Cn(d,a);case 6:if(m=gt,y=vs,gt=null,si(n,a,d),gt=m,vs=y,gt!==null)if(vs)try{(gt.nodeType===9?gt.body:gt.nodeName==="HTML"?gt.ownerDocument.body:gt).removeChild(d.stateNode)}catch(v){tt(d,a,v)}else try{gt.removeChild(d.stateNode)}catch(v){tt(d,a,v)}break;case 18:gt!==null&&(vs?(n=gt,Tx(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,d.stateNode),dr(n)):Tx(gt,d.stateNode));break;case 4:m=gt,y=vs,gt=d.stateNode.containerInfo,vs=!0,si(n,a,d),gt=m,vs=y;break;case 0:case 11:case 14:case 15:ji(2,d,a),Pt||ji(4,d,a),si(n,a,d);break;case 1:Pt||(Cn(d,a),m=d.stateNode,typeof m.componentWillUnmount=="function"&&k0(d,a,m)),si(n,a,d);break;case 21:si(n,a,d);break;case 22:Pt=(m=Pt)||d.memoizedState!==null,si(n,a,d),Pt=m;break;default:si(n,a,d)}}function F0(n,a){if(a.memoizedState===null&&(n=a.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{dr(n)}catch(d){tt(a,a.return,d)}}}function U0(n,a){if(a.memoizedState===null&&(n=a.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{dr(n)}catch(d){tt(a,a.return,d)}}function m_(n){switch(n.tag){case 31:case 13:case 19:var a=n.stateNode;return a===null&&(a=n.stateNode=new L0),a;case 22:return n=n.stateNode,a=n._retryCache,a===null&&(a=n._retryCache=new L0),a;default:throw Error(s(435,n.tag))}}function hc(n,a){var d=m_(n);a.forEach(function(m){if(!d.has(m)){d.add(m);var y=A_.bind(null,n,m);m.then(y,y)}})}function ws(n,a){var d=a.deletions;if(d!==null)for(var m=0;m<d.length;m++){var y=d[m],v=n,T=a,U=T;e:for(;U!==null;){switch(U.tag){case 27:if(Li(U.type)){gt=U.stateNode,vs=!1;break e}break;case 5:gt=U.stateNode,vs=!1;break e;case 3:case 4:gt=U.stateNode.containerInfo,vs=!0;break e}U=U.return}if(gt===null)throw Error(s(160));P0(v,T,y),gt=null,vs=!1,v=y.alternate,v!==null&&(v.return=null),y.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)I0(a,n),a=a.sibling}var hn=null;function I0(n,a){var d=n.alternate,m=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:ws(a,n),_s(n),m&4&&(ji(3,n,n.return),xo(3,n),ji(5,n,n.return));break;case 1:ws(a,n),_s(n),m&512&&(Pt||d===null||Cn(d,d.return)),m&64&&ti&&(n=n.updateQueue,n!==null&&(m=n.callbacks,m!==null&&(d=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=d===null?m:d.concat(m))));break;case 26:var y=hn;if(ws(a,n),_s(n),m&512&&(Pt||d===null||Cn(d,d.return)),m&4){var v=d!==null?d.memoizedState:null;if(m=n.memoizedState,d===null)if(m===null)if(n.stateNode===null){e:{m=n.type,d=n.memoizedProps,y=y.ownerDocument||y;t:switch(m){case"title":v=y.getElementsByTagName("title")[0],(!v||v[Vr]||v[Qt]||v.namespaceURI==="http://www.w3.org/2000/svg"||v.hasAttribute("itemprop"))&&(v=y.createElement(m),y.head.insertBefore(v,y.querySelector("head > title"))),ts(v,m,d),v[Qt]=n,qt(v),m=v;break e;case"link":var T=Ix("link","href",y).get(m+(d.href||""));if(T){for(var U=0;U<T.length;U++)if(v=T[U],v.getAttribute("href")===(d.href==null||d.href===""?null:d.href)&&v.getAttribute("rel")===(d.rel==null?null:d.rel)&&v.getAttribute("title")===(d.title==null?null:d.title)&&v.getAttribute("crossorigin")===(d.crossOrigin==null?null:d.crossOrigin)){T.splice(U,1);break t}}v=y.createElement(m),ts(v,m,d),y.head.appendChild(v);break;case"meta":if(T=Ix("meta","content",y).get(m+(d.content||""))){for(U=0;U<T.length;U++)if(v=T[U],v.getAttribute("content")===(d.content==null?null:""+d.content)&&v.getAttribute("name")===(d.name==null?null:d.name)&&v.getAttribute("property")===(d.property==null?null:d.property)&&v.getAttribute("http-equiv")===(d.httpEquiv==null?null:d.httpEquiv)&&v.getAttribute("charset")===(d.charSet==null?null:d.charSet)){T.splice(U,1);break t}}v=y.createElement(m),ts(v,m,d),y.head.appendChild(v);break;default:throw Error(s(468,m))}v[Qt]=n,qt(v),m=v}n.stateNode=m}else zx(y,n.type,n.stateNode);else n.stateNode=Ux(y,m,n.memoizedProps);else v!==m?(v===null?d.stateNode!==null&&(d=d.stateNode,d.parentNode.removeChild(d)):v.count--,m===null?zx(y,n.type,n.stateNode):Ux(y,m,n.memoizedProps)):m===null&&n.stateNode!==null&&Dh(n,n.memoizedProps,d.memoizedProps)}break;case 27:ws(a,n),_s(n),m&512&&(Pt||d===null||Cn(d,d.return)),d!==null&&m&4&&Dh(n,n.memoizedProps,d.memoizedProps);break;case 5:if(ws(a,n),_s(n),m&512&&(Pt||d===null||Cn(d,d.return)),n.flags&32){y=n.stateNode;try{Ma(y,"")}catch(me){tt(n,n.return,me)}}m&4&&n.stateNode!=null&&(y=n.memoizedProps,Dh(n,y,d!==null?d.memoizedProps:y)),m&1024&&(Oh=!0);break;case 6:if(ws(a,n),_s(n),m&4){if(n.stateNode===null)throw Error(s(162));m=n.memoizedProps,d=n.stateNode;try{d.nodeValue=m}catch(me){tt(n,n.return,me)}}break;case 3:if(Cc=null,y=hn,hn=Ec(a.containerInfo),ws(a,n),hn=y,_s(n),m&4&&d!==null&&d.memoizedState.isDehydrated)try{dr(a.containerInfo)}catch(me){tt(n,n.return,me)}Oh&&(Oh=!1,z0(n));break;case 4:m=hn,hn=Ec(n.stateNode.containerInfo),ws(a,n),_s(n),hn=m;break;case 12:ws(a,n),_s(n);break;case 31:ws(a,n),_s(n),m&4&&(m=n.updateQueue,m!==null&&(n.updateQueue=null,hc(n,m)));break;case 13:ws(a,n),_s(n),n.child.flags&8192&&n.memoizedState!==null!=(d!==null&&d.memoizedState!==null)&&(mc=De()),m&4&&(m=n.updateQueue,m!==null&&(n.updateQueue=null,hc(n,m)));break;case 22:y=n.memoizedState!==null;var X=d!==null&&d.memoizedState!==null,se=ti,re=Pt;if(ti=se||y,Pt=re||X,ws(a,n),Pt=re,ti=se,_s(n),m&8192)e:for(a=n.stateNode,a._visibility=y?a._visibility&-2:a._visibility|1,y&&(d===null||X||ti||Pt||oa(n)),d=null,a=n;;){if(a.tag===5||a.tag===26){if(d===null){X=d=a;try{if(v=X.stateNode,y)T=v.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{U=X.stateNode;var ce=X.memoizedProps.style,ne=ce!=null&&ce.hasOwnProperty("display")?ce.display:null;U.style.display=ne==null||typeof ne=="boolean"?"":(""+ne).trim()}}catch(me){tt(X,X.return,me)}}}else if(a.tag===6){if(d===null){X=a;try{X.stateNode.nodeValue=y?"":X.memoizedProps}catch(me){tt(X,X.return,me)}}}else if(a.tag===18){if(d===null){X=a;try{var ae=X.stateNode;y?kx(ae,!0):kx(X.stateNode,!1)}catch(me){tt(X,X.return,me)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===n)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===n)break e;for(;a.sibling===null;){if(a.return===null||a.return===n)break e;d===a&&(d=null),a=a.return}d===a&&(d=null),a.sibling.return=a.return,a=a.sibling}m&4&&(m=n.updateQueue,m!==null&&(d=m.retryQueue,d!==null&&(m.retryQueue=null,hc(n,d))));break;case 19:ws(a,n),_s(n),m&4&&(m=n.updateQueue,m!==null&&(n.updateQueue=null,hc(n,m)));break;case 30:break;case 21:break;default:ws(a,n),_s(n)}}function _s(n){var a=n.flags;if(a&2){try{for(var d,m=n.return;m!==null;){if(D0(m)){d=m;break}m=m.return}if(d==null)throw Error(s(160));switch(d.tag){case 27:var y=d.stateNode,v=Mh(n);uc(n,v,y);break;case 5:var T=d.stateNode;d.flags&32&&(Ma(T,""),d.flags&=-33);var U=Mh(n);uc(n,U,T);break;case 3:case 4:var X=d.stateNode.containerInfo,se=Mh(n);Lh(n,se,X);break;default:throw Error(s(161))}}catch(re){tt(n,n.return,re)}n.flags&=-3}a&4096&&(n.flags&=-4097)}function z0(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var a=n;z0(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),n=n.sibling}}function ni(n,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)O0(n,a.alternate,a),a=a.sibling}function oa(n){for(n=n.child;n!==null;){var a=n;switch(a.tag){case 0:case 11:case 14:case 15:ji(4,a,a.return),oa(a);break;case 1:Cn(a,a.return);var d=a.stateNode;typeof d.componentWillUnmount=="function"&&k0(a,a.return,d),oa(a);break;case 27:jo(a.stateNode);case 26:case 5:Cn(a,a.return),oa(a);break;case 22:a.memoizedState===null&&oa(a);break;case 30:oa(a);break;default:oa(a)}n=n.sibling}}function ii(n,a,d){for(d=d&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var m=a.alternate,y=n,v=a,T=v.flags;switch(v.tag){case 0:case 11:case 15:ii(y,v,d),xo(4,v);break;case 1:if(ii(y,v,d),m=v,y=m.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(se){tt(m,m.return,se)}if(m=v,y=m.updateQueue,y!==null){var U=m.stateNode;try{var X=y.shared.hiddenCallbacks;if(X!==null)for(y.shared.hiddenCallbacks=null,y=0;y<X.length;y++)yg(X[y],U)}catch(se){tt(m,m.return,se)}}d&&T&64&&T0(v),yo(v,v.return);break;case 27:M0(v);case 26:case 5:ii(y,v,d),d&&m===null&&T&4&&R0(v),yo(v,v.return);break;case 12:ii(y,v,d);break;case 31:ii(y,v,d),d&&T&4&&F0(y,v);break;case 13:ii(y,v,d),d&&T&4&&U0(y,v);break;case 22:v.memoizedState===null&&ii(y,v,d),yo(v,v.return);break;case 30:break;default:ii(y,v,d)}a=a.sibling}}function Bh(n,a){var d=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(d=n.memoizedState.cachePool.pool),n=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(n=a.memoizedState.cachePool.pool),n!==d&&(n!=null&&n.refCount++,d!=null&&no(d))}function Ph(n,a){n=null,a.alternate!==null&&(n=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==n&&(a.refCount++,n!=null&&no(n))}function fn(n,a,d,m){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)H0(n,a,d,m),a=a.sibling}function H0(n,a,d,m){var y=a.flags;switch(a.tag){case 0:case 11:case 15:fn(n,a,d,m),y&2048&&xo(9,a);break;case 1:fn(n,a,d,m);break;case 3:fn(n,a,d,m),y&2048&&(n=null,a.alternate!==null&&(n=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==n&&(a.refCount++,n!=null&&no(n)));break;case 12:if(y&2048){fn(n,a,d,m),n=a.stateNode;try{var v=a.memoizedProps,T=v.id,U=v.onPostCommit;typeof U=="function"&&U(T,a.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(X){tt(a,a.return,X)}}else fn(n,a,d,m);break;case 31:fn(n,a,d,m);break;case 13:fn(n,a,d,m);break;case 23:break;case 22:v=a.stateNode,T=a.alternate,a.memoizedState!==null?v._visibility&2?fn(n,a,d,m):bo(n,a):v._visibility&2?fn(n,a,d,m):(v._visibility|=2,Ja(n,a,d,m,(a.subtreeFlags&10256)!==0||!1)),y&2048&&Bh(T,a);break;case 24:fn(n,a,d,m),y&2048&&Ph(a.alternate,a);break;default:fn(n,a,d,m)}}function Ja(n,a,d,m,y){for(y=y&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var v=n,T=a,U=d,X=m,se=T.flags;switch(T.tag){case 0:case 11:case 15:Ja(v,T,U,X,y),xo(8,T);break;case 23:break;case 22:var re=T.stateNode;T.memoizedState!==null?re._visibility&2?Ja(v,T,U,X,y):bo(v,T):(re._visibility|=2,Ja(v,T,U,X,y)),y&&se&2048&&Bh(T.alternate,T);break;case 24:Ja(v,T,U,X,y),y&&se&2048&&Ph(T.alternate,T);break;default:Ja(v,T,U,X,y)}a=a.sibling}}function bo(n,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var d=n,m=a,y=m.flags;switch(m.tag){case 22:bo(d,m),y&2048&&Bh(m.alternate,m);break;case 24:bo(d,m),y&2048&&Ph(m.alternate,m);break;default:bo(d,m)}a=a.sibling}}var vo=8192;function er(n,a,d){if(n.subtreeFlags&vo)for(n=n.child;n!==null;)q0(n,a,d),n=n.sibling}function q0(n,a,d){switch(n.tag){case 26:er(n,a,d),n.flags&vo&&n.memoizedState!==null&&eA(d,hn,n.memoizedState,n.memoizedProps);break;case 5:er(n,a,d);break;case 3:case 4:var m=hn;hn=Ec(n.stateNode.containerInfo),er(n,a,d),hn=m;break;case 22:n.memoizedState===null&&(m=n.alternate,m!==null&&m.memoizedState!==null?(m=vo,vo=16777216,er(n,a,d),vo=m):er(n,a,d));break;default:er(n,a,d)}}function V0(n){var a=n.alternate;if(a!==null&&(n=a.child,n!==null)){a.child=null;do a=n.sibling,n.sibling=null,n=a;while(n!==null)}}function wo(n){var a=n.deletions;if((n.flags&16)!==0){if(a!==null)for(var d=0;d<a.length;d++){var m=a[d];Vt=m,$0(m,n)}V0(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)G0(n),n=n.sibling}function G0(n){switch(n.tag){case 0:case 11:case 15:wo(n),n.flags&2048&&ji(9,n,n.return);break;case 3:wo(n);break;case 12:wo(n);break;case 22:var a=n.stateNode;n.memoizedState!==null&&a._visibility&2&&(n.return===null||n.return.tag!==13)?(a._visibility&=-3,fc(n)):wo(n);break;default:wo(n)}}function fc(n){var a=n.deletions;if((n.flags&16)!==0){if(a!==null)for(var d=0;d<a.length;d++){var m=a[d];Vt=m,$0(m,n)}V0(n)}for(n=n.child;n!==null;){switch(a=n,a.tag){case 0:case 11:case 15:ji(8,a,a.return),fc(a);break;case 22:d=a.stateNode,d._visibility&2&&(d._visibility&=-3,fc(a));break;default:fc(a)}n=n.sibling}}function $0(n,a){for(;Vt!==null;){var d=Vt;switch(d.tag){case 0:case 11:case 15:ji(8,d,a);break;case 23:case 22:if(d.memoizedState!==null&&d.memoizedState.cachePool!==null){var m=d.memoizedState.cachePool.pool;m!=null&&m.refCount++}break;case 24:no(d.memoizedState.cache)}if(m=d.child,m!==null)m.return=d,Vt=m;else e:for(d=n;Vt!==null;){m=Vt;var y=m.sibling,v=m.return;if(B0(m),m===d){Vt=null;break e}if(y!==null){y.return=v,Vt=y;break e}Vt=v}}}var p_={getCacheForType:function(n){var a=Jt(Lt),d=a.data.get(n);return d===void 0&&(d=n(),a.data.set(n,d)),d},cacheSignal:function(){return Jt(Lt).controller.signal}},g_=typeof WeakMap=="function"?WeakMap:Map,Qe=0,ot=null,Oe=null,Pe=0,et=0,Ps=null,Ci=!1,tr=!1,Fh=!1,ai=0,jt=0,Ti=0,la=0,Uh=0,Fs=0,sr=0,_o=null,As=null,Ih=!1,mc=0,Y0=0,pc=1/0,gc=null,ki=null,It=0,Ri=null,nr=null,ri=0,zh=0,Hh=null,X0=null,Ao=0,qh=null;function Us(){return(Qe&2)!==0&&Pe!==0?Pe&-Pe:E.T!==null?Wh():dp()}function W0(){if(Fs===0)if((Pe&536870912)===0||He){var n=Ea;Ea<<=1,(Ea&3932160)===0&&(Ea=262144),Fs=n}else Fs=536870912;return n=Os.current,n!==null&&(n.flags|=32),Fs}function Ss(n,a,d){(n===ot&&(et===2||et===9)||n.cancelPendingCommit!==null)&&(ir(n,0),Di(n,Pe,Fs,!1)),qr(n,d),((Qe&2)===0||n!==ot)&&(n===ot&&((Qe&2)===0&&(la|=d),jt===4&&Di(n,Pe,Fs,!1)),Tn(n))}function K0(n,a,d){if((Qe&6)!==0)throw Error(s(327));var m=!d&&(a&127)===0&&(a&n.expiredLanes)===0||cn(n,a),y=m?b_(n,a):Gh(n,a,!0),v=m;do{if(y===0){tr&&!m&&Di(n,a,0,!1);break}else{if(d=n.current.alternate,v&&!x_(d)){y=Gh(n,a,!1),v=!1;continue}if(y===2){if(v=a,n.errorRecoveryDisabledLanes&v)var T=0;else T=n.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){a=T;e:{var U=n;y=_o;var X=U.current.memoizedState.isDehydrated;if(X&&(ir(U,T).flags|=256),T=Gh(U,T,!1),T!==2){if(Fh&&!X){U.errorRecoveryDisabledLanes|=v,la|=v,y=4;break e}v=As,As=y,v!==null&&(As===null?As=v:As.push.apply(As,v))}y=T}if(v=!1,y!==2)continue}}if(y===1){ir(n,0),Di(n,a,0,!0);break}e:{switch(m=n,v=y,v){case 0:case 1:throw Error(s(345));case 4:if((a&4194048)!==a)break;case 6:Di(m,a,Fs,!Ci);break e;case 2:As=null;break;case 3:case 5:break;default:throw Error(s(329))}if((a&62914560)===a&&(y=mc+300-De(),10<y)){if(Di(m,a,Fs,!Ci),ln(m,0,!0)!==0)break e;ri=a,m.timeoutHandle=jx(Q0.bind(null,m,d,As,gc,Ih,a,Fs,la,sr,Ci,v,"Throttled",-0,0),y);break e}Q0(m,d,As,gc,Ih,a,Fs,la,sr,Ci,v,null,-0,0)}}break}while(!0);Tn(n)}function Q0(n,a,d,m,y,v,T,U,X,se,re,ce,ne,ae){if(n.timeoutHandle=-1,ce=a.subtreeFlags,ce&8192||(ce&16785408)===16785408){ce={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Gn},q0(a,v,ce);var me=(v&62914560)===v?mc-De():(v&4194048)===v?Y0-De():0;if(me=tA(ce,me),me!==null){ri=v,n.cancelPendingCommit=me(ax.bind(null,n,a,v,d,m,y,T,U,X,re,ce,null,ne,ae)),Di(n,v,T,!se);return}}ax(n,a,v,d,m,y,T,U,X)}function x_(n){for(var a=n;;){var d=a.tag;if((d===0||d===11||d===15)&&a.flags&16384&&(d=a.updateQueue,d!==null&&(d=d.stores,d!==null)))for(var m=0;m<d.length;m++){var y=d[m],v=y.getSnapshot;y=y.value;try{if(!Ms(v(),y))return!1}catch{return!1}}if(d=a.child,a.subtreeFlags&16384&&d!==null)d.return=a,a=d;else{if(a===n)break;for(;a.sibling===null;){if(a.return===null||a.return===n)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Di(n,a,d,m){a&=~Uh,a&=~la,n.suspendedLanes|=a,n.pingedLanes&=~a,m&&(n.warmLanes|=a),m=n.expirationTimes;for(var y=a;0<y;){var v=31-Kt(y),T=1<<v;m[v]=-1,y&=~T}d!==0&&op(n,d,a)}function xc(){return(Qe&6)===0?(So(0),!1):!0}function Vh(){if(Oe!==null){if(et===0)var n=Oe.return;else n=Oe,Wn=Ji=null,rh(n),Xa=null,ao=0,n=Oe;for(;n!==null;)C0(n.alternate,n),n=n.return;Oe=null}}function ir(n,a){var d=n.timeoutHandle;d!==-1&&(n.timeoutHandle=-1,P_(d)),d=n.cancelPendingCommit,d!==null&&(n.cancelPendingCommit=null,d()),ri=0,Vh(),ot=n,Oe=d=Yn(n.current,null),Pe=a,et=0,Ps=null,Ci=!1,tr=cn(n,a),Fh=!1,sr=Fs=Uh=la=Ti=jt=0,As=_o=null,Ih=!1,(a&8)!==0&&(a|=a&32);var m=n.entangledLanes;if(m!==0)for(n=n.entanglements,m&=a;0<m;){var y=31-Kt(m),v=1<<y;a|=n[y],m&=~v}return ai=a,Fl(),d}function Z0(n,a){Te=null,E.H=mo,a===Ya||a===$l?(a=mg(),et=3):a===Xu?(a=mg(),et=4):et=a===_h?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,Ps=a,Oe===null&&(jt=1,rc(n,Ws(a,n.current)))}function J0(){var n=Os.current;return n===null?!0:(Pe&4194048)===Pe?Js===null:(Pe&62914560)===Pe||(Pe&536870912)!==0?n===Js:!1}function ex(){var n=E.H;return E.H=mo,n===null?mo:n}function tx(){var n=E.A;return E.A=p_,n}function yc(){jt=4,Ci||(Pe&4194048)!==Pe&&Os.current!==null||(tr=!0),(Ti&134217727)===0&&(la&134217727)===0||ot===null||Di(ot,Pe,Fs,!1)}function Gh(n,a,d){var m=Qe;Qe|=2;var y=ex(),v=tx();(ot!==n||Pe!==a)&&(gc=null,ir(n,a)),a=!1;var T=jt;e:do try{if(et!==0&&Oe!==null){var U=Oe,X=Ps;switch(et){case 8:Vh(),T=6;break e;case 3:case 2:case 9:case 6:Os.current===null&&(a=!0);var se=et;if(et=0,Ps=null,ar(n,U,X,se),d&&tr){T=0;break e}break;default:se=et,et=0,Ps=null,ar(n,U,X,se)}}y_(),T=jt;break}catch(re){Z0(n,re)}while(!0);return a&&n.shellSuspendCounter++,Wn=Ji=null,Qe=m,E.H=y,E.A=v,Oe===null&&(ot=null,Pe=0,Fl()),T}function y_(){for(;Oe!==null;)sx(Oe)}function b_(n,a){var d=Qe;Qe|=2;var m=ex(),y=tx();ot!==n||Pe!==a?(gc=null,pc=De()+500,ir(n,a)):tr=cn(n,a);e:do try{if(et!==0&&Oe!==null){a=Oe;var v=Ps;t:switch(et){case 1:et=0,Ps=null,ar(n,a,v,1);break;case 2:case 9:if(hg(v)){et=0,Ps=null,nx(a);break}a=function(){et!==2&&et!==9||ot!==n||(et=7),Tn(n)},v.then(a,a);break e;case 3:et=7;break e;case 4:et=5;break e;case 7:hg(v)?(et=0,Ps=null,nx(a)):(et=0,Ps=null,ar(n,a,v,7));break;case 5:var T=null;switch(Oe.tag){case 26:T=Oe.memoizedState;case 5:case 27:var U=Oe;if(T?Hx(T):U.stateNode.complete){et=0,Ps=null;var X=U.sibling;if(X!==null)Oe=X;else{var se=U.return;se!==null?(Oe=se,bc(se)):Oe=null}break t}}et=0,Ps=null,ar(n,a,v,5);break;case 6:et=0,Ps=null,ar(n,a,v,6);break;case 8:Vh(),jt=6;break e;default:throw Error(s(462))}}v_();break}catch(re){Z0(n,re)}while(!0);return Wn=Ji=null,E.H=m,E.A=y,Qe=d,Oe!==null?0:(ot=null,Pe=0,Fl(),jt)}function v_(){for(;Oe!==null&&!Mt();)sx(Oe)}function sx(n){var a=E0(n.alternate,n,ai);n.memoizedProps=n.pendingProps,a===null?bc(n):Oe=a}function nx(n){var a=n,d=a.alternate;switch(a.tag){case 15:case 0:a=v0(d,a,a.pendingProps,a.type,void 0,Pe);break;case 11:a=v0(d,a,a.pendingProps,a.type.render,a.ref,Pe);break;case 5:rh(a);default:C0(d,a),a=Oe=tg(a,ai),a=E0(d,a,ai)}n.memoizedProps=n.pendingProps,a===null?bc(n):Oe=a}function ar(n,a,d,m){Wn=Ji=null,rh(a),Xa=null,ao=0;var y=a.return;try{if(l_(n,y,a,d,Pe)){jt=1,rc(n,Ws(d,n.current)),Oe=null;return}}catch(v){if(y!==null)throw Oe=y,v;jt=1,rc(n,Ws(d,n.current)),Oe=null;return}a.flags&32768?(He||m===1?n=!0:tr||(Pe&536870912)!==0?n=!1:(Ci=n=!0,(m===2||m===9||m===3||m===6)&&(m=Os.current,m!==null&&m.tag===13&&(m.flags|=16384))),ix(a,n)):bc(a)}function bc(n){var a=n;do{if((a.flags&32768)!==0){ix(a,Ci);return}n=a.return;var d=u_(a.alternate,a,ai);if(d!==null){Oe=d;return}if(a=a.sibling,a!==null){Oe=a;return}Oe=a=n}while(a!==null);jt===0&&(jt=5)}function ix(n,a){do{var d=h_(n.alternate,n);if(d!==null){d.flags&=32767,Oe=d;return}if(d=n.return,d!==null&&(d.flags|=32768,d.subtreeFlags=0,d.deletions=null),!a&&(n=n.sibling,n!==null)){Oe=n;return}Oe=n=d}while(n!==null);jt=6,Oe=null}function ax(n,a,d,m,y,v,T,U,X){n.cancelPendingCommit=null;do vc();while(It!==0);if((Qe&6)!==0)throw Error(s(327));if(a!==null){if(a===n.current)throw Error(s(177));if(v=a.lanes|a.childLanes,v|=Mu,Jw(n,d,v,T,U,X),n===ot&&(Oe=ot=null,Pe=0),nr=a,Ri=n,ri=d,zh=v,Hh=y,X0=m,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,S_(Je,function(){return dx(),null})):(n.callbackNode=null,n.callbackPriority=0),m=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||m){m=E.T,E.T=null,y=j.p,j.p=2,T=Qe,Qe|=4;try{f_(n,a,d)}finally{Qe=T,j.p=y,E.T=m}}It=1,rx(),ox(),lx()}}function rx(){if(It===1){It=0;var n=Ri,a=nr,d=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||d){d=E.T,E.T=null;var m=j.p;j.p=2;var y=Qe;Qe|=4;try{I0(a,n);var v=nf,T=$p(n.containerInfo),U=v.focusedElem,X=v.selectionRange;if(T!==U&&U&&U.ownerDocument&&Gp(U.ownerDocument.documentElement,U)){if(X!==null&&Cu(U)){var se=X.start,re=X.end;if(re===void 0&&(re=se),"selectionStart"in U)U.selectionStart=se,U.selectionEnd=Math.min(re,U.value.length);else{var ce=U.ownerDocument||document,ne=ce&&ce.defaultView||window;if(ne.getSelection){var ae=ne.getSelection(),me=U.textContent.length,we=Math.min(X.start,me),it=X.end===void 0?we:Math.min(X.end,me);!ae.extend&&we>it&&(T=it,it=we,we=T);var J=Vp(U,we),W=Vp(U,it);if(J&&W&&(ae.rangeCount!==1||ae.anchorNode!==J.node||ae.anchorOffset!==J.offset||ae.focusNode!==W.node||ae.focusOffset!==W.offset)){var te=ce.createRange();te.setStart(J.node,J.offset),ae.removeAllRanges(),we>it?(ae.addRange(te),ae.extend(W.node,W.offset)):(te.setEnd(W.node,W.offset),ae.addRange(te))}}}}for(ce=[],ae=U;ae=ae.parentNode;)ae.nodeType===1&&ce.push({element:ae,left:ae.scrollLeft,top:ae.scrollTop});for(typeof U.focus=="function"&&U.focus(),U=0;U<ce.length;U++){var le=ce[U];le.element.scrollLeft=le.left,le.element.scrollTop=le.top}}Dc=!!sf,nf=sf=null}finally{Qe=y,j.p=m,E.T=d}}n.current=a,It=2}}function ox(){if(It===2){It=0;var n=Ri,a=nr,d=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||d){d=E.T,E.T=null;var m=j.p;j.p=2;var y=Qe;Qe|=4;try{O0(n,a.alternate,a)}finally{Qe=y,j.p=m,E.T=d}}It=3}}function lx(){if(It===4||It===3){It=0,mt();var n=Ri,a=nr,d=ri,m=X0;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?It=5:(It=0,nr=Ri=null,cx(n,n.pendingLanes));var y=n.pendingLanes;if(y===0&&(ki=null),cu(d),a=a.stateNode,pt&&typeof pt.onCommitFiberRoot=="function")try{pt.onCommitFiberRoot(fs,a,void 0,(a.current.flags&128)===128)}catch{}if(m!==null){a=E.T,y=j.p,j.p=2,E.T=null;try{for(var v=n.onRecoverableError,T=0;T<m.length;T++){var U=m[T];v(U.value,{componentStack:U.stack})}}finally{E.T=a,j.p=y}}(ri&3)!==0&&vc(),Tn(n),y=n.pendingLanes,(d&261930)!==0&&(y&42)!==0?n===qh?Ao++:(Ao=0,qh=n):Ao=0,So(0)}}function cx(n,a){(n.pooledCacheLanes&=a)===0&&(a=n.pooledCache,a!=null&&(n.pooledCache=null,no(a)))}function vc(){return rx(),ox(),lx(),dx()}function dx(){if(It!==5)return!1;var n=Ri,a=zh;zh=0;var d=cu(ri),m=E.T,y=j.p;try{j.p=32>d?32:d,E.T=null,d=Hh,Hh=null;var v=Ri,T=ri;if(It=0,nr=Ri=null,ri=0,(Qe&6)!==0)throw Error(s(331));var U=Qe;if(Qe|=4,G0(v.current),H0(v,v.current,T,d),Qe=U,So(0,!1),pt&&typeof pt.onPostCommitFiberRoot=="function")try{pt.onPostCommitFiberRoot(fs,v)}catch{}return!0}finally{j.p=y,E.T=m,cx(n,a)}}function ux(n,a,d){a=Ws(d,a),a=wh(n.stateNode,a,2),n=Si(n,a,2),n!==null&&(qr(n,2),Tn(n))}function tt(n,a,d){if(n.tag===3)ux(n,n,d);else for(;a!==null;){if(a.tag===3){ux(a,n,d);break}else if(a.tag===1){var m=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(ki===null||!ki.has(m))){n=Ws(d,n),d=h0(2),m=Si(a,d,2),m!==null&&(f0(d,m,a,n),qr(m,2),Tn(m));break}}a=a.return}}function $h(n,a,d){var m=n.pingCache;if(m===null){m=n.pingCache=new g_;var y=new Set;m.set(a,y)}else y=m.get(a),y===void 0&&(y=new Set,m.set(a,y));y.has(d)||(Fh=!0,y.add(d),n=w_.bind(null,n,a,d),a.then(n,n))}function w_(n,a,d){var m=n.pingCache;m!==null&&m.delete(a),n.pingedLanes|=n.suspendedLanes&d,n.warmLanes&=~d,ot===n&&(Pe&d)===d&&(jt===4||jt===3&&(Pe&62914560)===Pe&&300>De()-mc?(Qe&2)===0&&ir(n,0):Uh|=d,sr===Pe&&(sr=0)),Tn(n)}function hx(n,a){a===0&&(a=Nn()),n=Ki(n,a),n!==null&&(qr(n,a),Tn(n))}function __(n){var a=n.memoizedState,d=0;a!==null&&(d=a.retryLane),hx(n,d)}function A_(n,a){var d=0;switch(n.tag){case 31:case 13:var m=n.stateNode,y=n.memoizedState;y!==null&&(d=y.retryLane);break;case 19:m=n.stateNode;break;case 22:m=n.stateNode._retryCache;break;default:throw Error(s(314))}m!==null&&m.delete(a),hx(n,d)}function S_(n,a){return _t(n,a)}var wc=null,rr=null,Yh=!1,_c=!1,Xh=!1,Mi=0;function Tn(n){n!==rr&&n.next===null&&(rr===null?wc=rr=n:rr=rr.next=n),_c=!0,Yh||(Yh=!0,E_())}function So(n,a){if(!Xh&&_c){Xh=!0;do for(var d=!1,m=wc;m!==null;){if(n!==0){var y=m.pendingLanes;if(y===0)var v=0;else{var T=m.suspendedLanes,U=m.pingedLanes;v=(1<<31-Kt(42|n)+1)-1,v&=y&~(T&~U),v=v&201326741?v&201326741|1:v?v|2:0}v!==0&&(d=!0,gx(m,v))}else v=Pe,v=ln(m,m===ot?v:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),(v&3)===0||cn(m,v)||(d=!0,gx(m,v));m=m.next}while(d);Xh=!1}}function N_(){fx()}function fx(){_c=Yh=!1;var n=0;Mi!==0&&B_()&&(n=Mi);for(var a=De(),d=null,m=wc;m!==null;){var y=m.next,v=mx(m,a);v===0?(m.next=null,d===null?wc=y:d.next=y,y===null&&(rr=d)):(d=m,(n!==0||(v&3)!==0)&&(_c=!0)),m=y}It!==0&&It!==5||So(n),Mi!==0&&(Mi=0)}function mx(n,a){for(var d=n.suspendedLanes,m=n.pingedLanes,y=n.expirationTimes,v=n.pendingLanes&-62914561;0<v;){var T=31-Kt(v),U=1<<T,X=y[T];X===-1?((U&d)===0||(U&m)!==0)&&(y[T]=El(U,a)):X<=a&&(n.expiredLanes|=U),v&=~U}if(a=ot,d=Pe,d=ln(n,n===a?d:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),m=n.callbackNode,d===0||n===a&&(et===2||et===9)||n.cancelPendingCommit!==null)return m!==null&&m!==null&&ut(m),n.callbackNode=null,n.callbackPriority=0;if((d&3)===0||cn(n,d)){if(a=d&-d,a===n.callbackPriority)return a;switch(m!==null&&ut(m),cu(d)){case 2:case 8:d=qn;break;case 32:d=Je;break;case 268435456:d=rt;break;default:d=Je}return m=px.bind(null,n),d=_t(d,m),n.callbackPriority=a,n.callbackNode=d,a}return m!==null&&m!==null&&ut(m),n.callbackPriority=2,n.callbackNode=null,2}function px(n,a){if(It!==0&&It!==5)return n.callbackNode=null,n.callbackPriority=0,null;var d=n.callbackNode;if(vc()&&n.callbackNode!==d)return null;var m=Pe;return m=ln(n,n===ot?m:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),m===0?null:(K0(n,m,a),mx(n,De()),n.callbackNode!=null&&n.callbackNode===d?px.bind(null,n):null)}function gx(n,a){if(vc())return null;K0(n,a,!0)}function E_(){F_(function(){(Qe&6)!==0?_t(Rs,N_):fx()})}function Wh(){if(Mi===0){var n=Ga;n===0&&(n=Sn,Sn<<=1,(Sn&261888)===0&&(Sn=256)),Mi=n}return Mi}function xx(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:kl(""+n)}function yx(n,a){var d=a.ownerDocument.createElement("input");return d.name=a.name,d.value=a.value,n.id&&d.setAttribute("form",n.id),a.parentNode.insertBefore(d,a),n=new FormData(n),d.parentNode.removeChild(d),n}function j_(n,a,d,m,y){if(a==="submit"&&d&&d.stateNode===y){var v=xx((y[ys]||null).action),T=m.submitter;T&&(a=(a=T[ys]||null)?xx(a.formAction):T.getAttribute("formAction"),a!==null&&(v=a,T=null));var U=new Ll("action","action",null,m,y);n.push({event:U,listeners:[{instance:null,listener:function(){if(m.defaultPrevented){if(Mi!==0){var X=T?yx(y,T):new FormData(y);ph(d,{pending:!0,data:X,method:y.method,action:v},null,X)}}else typeof v=="function"&&(U.preventDefault(),X=T?yx(y,T):new FormData(y),ph(d,{pending:!0,data:X,method:y.method,action:v},v,X))},currentTarget:y}]})}}for(var Kh=0;Kh<Du.length;Kh++){var Qh=Du[Kh],C_=Qh.toLowerCase(),T_=Qh[0].toUpperCase()+Qh.slice(1);un(C_,"on"+T_)}un(Wp,"onAnimationEnd"),un(Kp,"onAnimationIteration"),un(Qp,"onAnimationStart"),un("dblclick","onDoubleClick"),un("focusin","onFocus"),un("focusout","onBlur"),un(G1,"onTransitionRun"),un($1,"onTransitionStart"),un(Y1,"onTransitionCancel"),un(Zp,"onTransitionEnd"),Ra("onMouseEnter",["mouseout","mouseover"]),Ra("onMouseLeave",["mouseout","mouseover"]),Ra("onPointerEnter",["pointerout","pointerover"]),Ra("onPointerLeave",["pointerout","pointerover"]),$i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),$i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),$i("onBeforeInput",["compositionend","keypress","textInput","paste"]),$i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),$i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),$i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var No="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),k_=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(No));function bx(n,a){a=(a&4)!==0;for(var d=0;d<n.length;d++){var m=n[d],y=m.event;m=m.listeners;e:{var v=void 0;if(a)for(var T=m.length-1;0<=T;T--){var U=m[T],X=U.instance,se=U.currentTarget;if(U=U.listener,X!==v&&y.isPropagationStopped())break e;v=U,y.currentTarget=se;try{v(y)}catch(re){Pl(re)}y.currentTarget=null,v=X}else for(T=0;T<m.length;T++){if(U=m[T],X=U.instance,se=U.currentTarget,U=U.listener,X!==v&&y.isPropagationStopped())break e;v=U,y.currentTarget=se;try{v(y)}catch(re){Pl(re)}y.currentTarget=null,v=X}}}}function Be(n,a){var d=a[du];d===void 0&&(d=a[du]=new Set);var m=n+"__bubble";d.has(m)||(vx(a,n,2,!1),d.add(m))}function Zh(n,a,d){var m=0;a&&(m|=4),vx(d,n,m,a)}var Ac="_reactListening"+Math.random().toString(36).slice(2);function Jh(n){if(!n[Ac]){n[Ac]=!0,fp.forEach(function(d){d!=="selectionchange"&&(k_.has(d)||Zh(d,!1,n),Zh(d,!0,n))});var a=n.nodeType===9?n:n.ownerDocument;a===null||a[Ac]||(a[Ac]=!0,Zh("selectionchange",!1,a))}}function vx(n,a,d,m){switch(Wx(a)){case 2:var y=iA;break;case 8:y=aA;break;default:y=pf}d=y.bind(null,a,d,n),y=void 0,!bu||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(y=!0),m?y!==void 0?n.addEventListener(a,d,{capture:!0,passive:y}):n.addEventListener(a,d,!0):y!==void 0?n.addEventListener(a,d,{passive:y}):n.addEventListener(a,d,!1)}function ef(n,a,d,m,y){var v=m;if((a&1)===0&&(a&2)===0&&m!==null)e:for(;;){if(m===null)return;var T=m.tag;if(T===3||T===4){var U=m.stateNode.containerInfo;if(U===y)break;if(T===4)for(T=m.return;T!==null;){var X=T.tag;if((X===3||X===4)&&T.stateNode.containerInfo===y)return;T=T.return}for(;U!==null;){if(T=Ca(U),T===null)return;if(X=T.tag,X===5||X===6||X===26||X===27){m=v=T;continue e}U=U.parentNode}}m=m.return}Np(function(){var se=v,re=xu(d),ce=[];e:{var ne=Jp.get(n);if(ne!==void 0){var ae=Ll,me=n;switch(n){case"keypress":if(Dl(d)===0)break e;case"keydown":case"keyup":ae=A1;break;case"focusin":me="focus",ae=Au;break;case"focusout":me="blur",ae=Au;break;case"beforeblur":case"afterblur":ae=Au;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ae=Cp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ae=u1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ae=E1;break;case Wp:case Kp:case Qp:ae=m1;break;case Zp:ae=C1;break;case"scroll":case"scrollend":ae=c1;break;case"wheel":ae=k1;break;case"copy":case"cut":case"paste":ae=g1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ae=kp;break;case"toggle":case"beforetoggle":ae=D1}var we=(a&4)!==0,it=!we&&(n==="scroll"||n==="scrollend"),J=we?ne!==null?ne+"Capture":null:ne;we=[];for(var W=se,te;W!==null;){var le=W;if(te=le.stateNode,le=le.tag,le!==5&&le!==26&&le!==27||te===null||J===null||(le=$r(W,J),le!=null&&we.push(Eo(W,le,te))),it)break;W=W.return}0<we.length&&(ne=new ae(ne,me,null,d,re),ce.push({event:ne,listeners:we}))}}if((a&7)===0){e:{if(ne=n==="mouseover"||n==="pointerover",ae=n==="mouseout"||n==="pointerout",ne&&d!==gu&&(me=d.relatedTarget||d.fromElement)&&(Ca(me)||me[ja]))break e;if((ae||ne)&&(ne=re.window===re?re:(ne=re.ownerDocument)?ne.defaultView||ne.parentWindow:window,ae?(me=d.relatedTarget||d.toElement,ae=se,me=me?Ca(me):null,me!==null&&(it=o(me),we=me.tag,me!==it||we!==5&&we!==27&&we!==6)&&(me=null)):(ae=null,me=se),ae!==me)){if(we=Cp,le="onMouseLeave",J="onMouseEnter",W="mouse",(n==="pointerout"||n==="pointerover")&&(we=kp,le="onPointerLeave",J="onPointerEnter",W="pointer"),it=ae==null?ne:Gr(ae),te=me==null?ne:Gr(me),ne=new we(le,W+"leave",ae,d,re),ne.target=it,ne.relatedTarget=te,le=null,Ca(re)===se&&(we=new we(J,W+"enter",me,d,re),we.target=te,we.relatedTarget=it,le=we),it=le,ae&&me)t:{for(we=R_,J=ae,W=me,te=0,le=J;le;le=we(le))te++;le=0;for(var ye=W;ye;ye=we(ye))le++;for(;0<te-le;)J=we(J),te--;for(;0<le-te;)W=we(W),le--;for(;te--;){if(J===W||W!==null&&J===W.alternate){we=J;break t}J=we(J),W=we(W)}we=null}else we=null;ae!==null&&wx(ce,ne,ae,we,!1),me!==null&&it!==null&&wx(ce,it,me,we,!0)}}e:{if(ne=se?Gr(se):window,ae=ne.nodeName&&ne.nodeName.toLowerCase(),ae==="select"||ae==="input"&&ne.type==="file")var We=Fp;else if(Bp(ne))if(Up)We=H1;else{We=I1;var ge=U1}else ae=ne.nodeName,!ae||ae.toLowerCase()!=="input"||ne.type!=="checkbox"&&ne.type!=="radio"?se&&pu(se.elementType)&&(We=Fp):We=z1;if(We&&(We=We(n,se))){Pp(ce,We,d,re);break e}ge&&ge(n,ne,se),n==="focusout"&&se&&ne.type==="number"&&se.memoizedProps.value!=null&&mu(ne,"number",ne.value)}switch(ge=se?Gr(se):window,n){case"focusin":(Bp(ge)||ge.contentEditable==="true")&&(Pa=ge,Tu=se,eo=null);break;case"focusout":eo=Tu=Pa=null;break;case"mousedown":ku=!0;break;case"contextmenu":case"mouseup":case"dragend":ku=!1,Yp(ce,d,re);break;case"selectionchange":if(V1)break;case"keydown":case"keyup":Yp(ce,d,re)}var Me;if(Nu)e:{switch(n){case"compositionstart":var Fe="onCompositionStart";break e;case"compositionend":Fe="onCompositionEnd";break e;case"compositionupdate":Fe="onCompositionUpdate";break e}Fe=void 0}else Ba?Lp(n,d)&&(Fe="onCompositionEnd"):n==="keydown"&&d.keyCode===229&&(Fe="onCompositionStart");Fe&&(Rp&&d.locale!=="ko"&&(Ba||Fe!=="onCompositionStart"?Fe==="onCompositionEnd"&&Ba&&(Me=Ep()):(xi=re,vu="value"in xi?xi.value:xi.textContent,Ba=!0)),ge=Sc(se,Fe),0<ge.length&&(Fe=new Tp(Fe,n,null,d,re),ce.push({event:Fe,listeners:ge}),Me?Fe.data=Me:(Me=Op(d),Me!==null&&(Fe.data=Me)))),(Me=L1?O1(n,d):B1(n,d))&&(Fe=Sc(se,"onBeforeInput"),0<Fe.length&&(ge=new Tp("onBeforeInput","beforeinput",null,d,re),ce.push({event:ge,listeners:Fe}),ge.data=Me)),j_(ce,n,se,d,re)}bx(ce,a)})}function Eo(n,a,d){return{instance:n,listener:a,currentTarget:d}}function Sc(n,a){for(var d=a+"Capture",m=[];n!==null;){var y=n,v=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||v===null||(y=$r(n,d),y!=null&&m.unshift(Eo(n,y,v)),y=$r(n,a),y!=null&&m.push(Eo(n,y,v))),n.tag===3)return m;n=n.return}return[]}function R_(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function wx(n,a,d,m,y){for(var v=a._reactName,T=[];d!==null&&d!==m;){var U=d,X=U.alternate,se=U.stateNode;if(U=U.tag,X!==null&&X===m)break;U!==5&&U!==26&&U!==27||se===null||(X=se,y?(se=$r(d,v),se!=null&&T.unshift(Eo(d,se,X))):y||(se=$r(d,v),se!=null&&T.push(Eo(d,se,X)))),d=d.return}T.length!==0&&n.push({event:a,listeners:T})}var D_=/\r\n?/g,M_=/\u0000|\uFFFD/g;function _x(n){return(typeof n=="string"?n:""+n).replace(D_,`
`).replace(M_,"")}function Ax(n,a){return a=_x(a),_x(n)===a}function nt(n,a,d,m,y,v){switch(d){case"children":typeof m=="string"?a==="body"||a==="textarea"&&m===""||Ma(n,m):(typeof m=="number"||typeof m=="bigint")&&a!=="body"&&Ma(n,""+m);break;case"className":Cl(n,"class",m);break;case"tabIndex":Cl(n,"tabindex",m);break;case"dir":case"role":case"viewBox":case"width":case"height":Cl(n,d,m);break;case"style":Ap(n,m,v);break;case"data":if(a!=="object"){Cl(n,"data",m);break}case"src":case"href":if(m===""&&(a!=="a"||d!=="href")){n.removeAttribute(d);break}if(m==null||typeof m=="function"||typeof m=="symbol"||typeof m=="boolean"){n.removeAttribute(d);break}m=kl(""+m),n.setAttribute(d,m);break;case"action":case"formAction":if(typeof m=="function"){n.setAttribute(d,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof v=="function"&&(d==="formAction"?(a!=="input"&&nt(n,a,"name",y.name,y,null),nt(n,a,"formEncType",y.formEncType,y,null),nt(n,a,"formMethod",y.formMethod,y,null),nt(n,a,"formTarget",y.formTarget,y,null)):(nt(n,a,"encType",y.encType,y,null),nt(n,a,"method",y.method,y,null),nt(n,a,"target",y.target,y,null)));if(m==null||typeof m=="symbol"||typeof m=="boolean"){n.removeAttribute(d);break}m=kl(""+m),n.setAttribute(d,m);break;case"onClick":m!=null&&(n.onclick=Gn);break;case"onScroll":m!=null&&Be("scroll",n);break;case"onScrollEnd":m!=null&&Be("scrollend",n);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(s(61));if(d=m.__html,d!=null){if(y.children!=null)throw Error(s(60));n.innerHTML=d}}break;case"multiple":n.multiple=m&&typeof m!="function"&&typeof m!="symbol";break;case"muted":n.muted=m&&typeof m!="function"&&typeof m!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(m==null||typeof m=="function"||typeof m=="boolean"||typeof m=="symbol"){n.removeAttribute("xlink:href");break}d=kl(""+m),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",d);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":m!=null&&typeof m!="function"&&typeof m!="symbol"?n.setAttribute(d,""+m):n.removeAttribute(d);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":m&&typeof m!="function"&&typeof m!="symbol"?n.setAttribute(d,""):n.removeAttribute(d);break;case"capture":case"download":m===!0?n.setAttribute(d,""):m!==!1&&m!=null&&typeof m!="function"&&typeof m!="symbol"?n.setAttribute(d,m):n.removeAttribute(d);break;case"cols":case"rows":case"size":case"span":m!=null&&typeof m!="function"&&typeof m!="symbol"&&!isNaN(m)&&1<=m?n.setAttribute(d,m):n.removeAttribute(d);break;case"rowSpan":case"start":m==null||typeof m=="function"||typeof m=="symbol"||isNaN(m)?n.removeAttribute(d):n.setAttribute(d,m);break;case"popover":Be("beforetoggle",n),Be("toggle",n),jl(n,"popover",m);break;case"xlinkActuate":Vn(n,"http://www.w3.org/1999/xlink","xlink:actuate",m);break;case"xlinkArcrole":Vn(n,"http://www.w3.org/1999/xlink","xlink:arcrole",m);break;case"xlinkRole":Vn(n,"http://www.w3.org/1999/xlink","xlink:role",m);break;case"xlinkShow":Vn(n,"http://www.w3.org/1999/xlink","xlink:show",m);break;case"xlinkTitle":Vn(n,"http://www.w3.org/1999/xlink","xlink:title",m);break;case"xlinkType":Vn(n,"http://www.w3.org/1999/xlink","xlink:type",m);break;case"xmlBase":Vn(n,"http://www.w3.org/XML/1998/namespace","xml:base",m);break;case"xmlLang":Vn(n,"http://www.w3.org/XML/1998/namespace","xml:lang",m);break;case"xmlSpace":Vn(n,"http://www.w3.org/XML/1998/namespace","xml:space",m);break;case"is":jl(n,"is",m);break;case"innerText":case"textContent":break;default:(!(2<d.length)||d[0]!=="o"&&d[0]!=="O"||d[1]!=="n"&&d[1]!=="N")&&(d=o1.get(d)||d,jl(n,d,m))}}function tf(n,a,d,m,y,v){switch(d){case"style":Ap(n,m,v);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(s(61));if(d=m.__html,d!=null){if(y.children!=null)throw Error(s(60));n.innerHTML=d}}break;case"children":typeof m=="string"?Ma(n,m):(typeof m=="number"||typeof m=="bigint")&&Ma(n,""+m);break;case"onScroll":m!=null&&Be("scroll",n);break;case"onScrollEnd":m!=null&&Be("scrollend",n);break;case"onClick":m!=null&&(n.onclick=Gn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!mp.hasOwnProperty(d))e:{if(d[0]==="o"&&d[1]==="n"&&(y=d.endsWith("Capture"),a=d.slice(2,y?d.length-7:void 0),v=n[ys]||null,v=v!=null?v[d]:null,typeof v=="function"&&n.removeEventListener(a,v,y),typeof m=="function")){typeof v!="function"&&v!==null&&(d in n?n[d]=null:n.hasAttribute(d)&&n.removeAttribute(d)),n.addEventListener(a,m,y);break e}d in n?n[d]=m:m===!0?n.setAttribute(d,""):jl(n,d,m)}}}function ts(n,a,d){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Be("error",n),Be("load",n);var m=!1,y=!1,v;for(v in d)if(d.hasOwnProperty(v)){var T=d[v];if(T!=null)switch(v){case"src":m=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,a));default:nt(n,a,v,T,d,null)}}y&&nt(n,a,"srcSet",d.srcSet,d,null),m&&nt(n,a,"src",d.src,d,null);return;case"input":Be("invalid",n);var U=v=T=y=null,X=null,se=null;for(m in d)if(d.hasOwnProperty(m)){var re=d[m];if(re!=null)switch(m){case"name":y=re;break;case"type":T=re;break;case"checked":X=re;break;case"defaultChecked":se=re;break;case"value":v=re;break;case"defaultValue":U=re;break;case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(s(137,a));break;default:nt(n,a,m,re,d,null)}}bp(n,v,U,X,se,T,y,!1);return;case"select":Be("invalid",n),m=T=v=null;for(y in d)if(d.hasOwnProperty(y)&&(U=d[y],U!=null))switch(y){case"value":v=U;break;case"defaultValue":T=U;break;case"multiple":m=U;default:nt(n,a,y,U,d,null)}a=v,d=T,n.multiple=!!m,a!=null?Da(n,!!m,a,!1):d!=null&&Da(n,!!m,d,!0);return;case"textarea":Be("invalid",n),v=y=m=null;for(T in d)if(d.hasOwnProperty(T)&&(U=d[T],U!=null))switch(T){case"value":m=U;break;case"defaultValue":y=U;break;case"children":v=U;break;case"dangerouslySetInnerHTML":if(U!=null)throw Error(s(91));break;default:nt(n,a,T,U,d,null)}wp(n,m,y,v);return;case"option":for(X in d)d.hasOwnProperty(X)&&(m=d[X],m!=null)&&(X==="selected"?n.selected=m&&typeof m!="function"&&typeof m!="symbol":nt(n,a,X,m,d,null));return;case"dialog":Be("beforetoggle",n),Be("toggle",n),Be("cancel",n),Be("close",n);break;case"iframe":case"object":Be("load",n);break;case"video":case"audio":for(m=0;m<No.length;m++)Be(No[m],n);break;case"image":Be("error",n),Be("load",n);break;case"details":Be("toggle",n);break;case"embed":case"source":case"link":Be("error",n),Be("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(se in d)if(d.hasOwnProperty(se)&&(m=d[se],m!=null))switch(se){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,a));default:nt(n,a,se,m,d,null)}return;default:if(pu(a)){for(re in d)d.hasOwnProperty(re)&&(m=d[re],m!==void 0&&tf(n,a,re,m,d,void 0));return}}for(U in d)d.hasOwnProperty(U)&&(m=d[U],m!=null&&nt(n,a,U,m,d,null))}function L_(n,a,d,m){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,v=null,T=null,U=null,X=null,se=null,re=null;for(ae in d){var ce=d[ae];if(d.hasOwnProperty(ae)&&ce!=null)switch(ae){case"checked":break;case"value":break;case"defaultValue":X=ce;default:m.hasOwnProperty(ae)||nt(n,a,ae,null,m,ce)}}for(var ne in m){var ae=m[ne];if(ce=d[ne],m.hasOwnProperty(ne)&&(ae!=null||ce!=null))switch(ne){case"type":v=ae;break;case"name":y=ae;break;case"checked":se=ae;break;case"defaultChecked":re=ae;break;case"value":T=ae;break;case"defaultValue":U=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(s(137,a));break;default:ae!==ce&&nt(n,a,ne,ae,m,ce)}}fu(n,T,U,X,se,re,v,y);return;case"select":ae=T=U=ne=null;for(v in d)if(X=d[v],d.hasOwnProperty(v)&&X!=null)switch(v){case"value":break;case"multiple":ae=X;default:m.hasOwnProperty(v)||nt(n,a,v,null,m,X)}for(y in m)if(v=m[y],X=d[y],m.hasOwnProperty(y)&&(v!=null||X!=null))switch(y){case"value":ne=v;break;case"defaultValue":U=v;break;case"multiple":T=v;default:v!==X&&nt(n,a,y,v,m,X)}a=U,d=T,m=ae,ne!=null?Da(n,!!d,ne,!1):!!m!=!!d&&(a!=null?Da(n,!!d,a,!0):Da(n,!!d,d?[]:"",!1));return;case"textarea":ae=ne=null;for(U in d)if(y=d[U],d.hasOwnProperty(U)&&y!=null&&!m.hasOwnProperty(U))switch(U){case"value":break;case"children":break;default:nt(n,a,U,null,m,y)}for(T in m)if(y=m[T],v=d[T],m.hasOwnProperty(T)&&(y!=null||v!=null))switch(T){case"value":ne=y;break;case"defaultValue":ae=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(s(91));break;default:y!==v&&nt(n,a,T,y,m,v)}vp(n,ne,ae);return;case"option":for(var me in d)ne=d[me],d.hasOwnProperty(me)&&ne!=null&&!m.hasOwnProperty(me)&&(me==="selected"?n.selected=!1:nt(n,a,me,null,m,ne));for(X in m)ne=m[X],ae=d[X],m.hasOwnProperty(X)&&ne!==ae&&(ne!=null||ae!=null)&&(X==="selected"?n.selected=ne&&typeof ne!="function"&&typeof ne!="symbol":nt(n,a,X,ne,m,ae));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var we in d)ne=d[we],d.hasOwnProperty(we)&&ne!=null&&!m.hasOwnProperty(we)&&nt(n,a,we,null,m,ne);for(se in m)if(ne=m[se],ae=d[se],m.hasOwnProperty(se)&&ne!==ae&&(ne!=null||ae!=null))switch(se){case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(s(137,a));break;default:nt(n,a,se,ne,m,ae)}return;default:if(pu(a)){for(var it in d)ne=d[it],d.hasOwnProperty(it)&&ne!==void 0&&!m.hasOwnProperty(it)&&tf(n,a,it,void 0,m,ne);for(re in m)ne=m[re],ae=d[re],!m.hasOwnProperty(re)||ne===ae||ne===void 0&&ae===void 0||tf(n,a,re,ne,m,ae);return}}for(var J in d)ne=d[J],d.hasOwnProperty(J)&&ne!=null&&!m.hasOwnProperty(J)&&nt(n,a,J,null,m,ne);for(ce in m)ne=m[ce],ae=d[ce],!m.hasOwnProperty(ce)||ne===ae||ne==null&&ae==null||nt(n,a,ce,ne,m,ae)}function Sx(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function O_(){if(typeof performance.getEntriesByType=="function"){for(var n=0,a=0,d=performance.getEntriesByType("resource"),m=0;m<d.length;m++){var y=d[m],v=y.transferSize,T=y.initiatorType,U=y.duration;if(v&&U&&Sx(T)){for(T=0,U=y.responseEnd,m+=1;m<d.length;m++){var X=d[m],se=X.startTime;if(se>U)break;var re=X.transferSize,ce=X.initiatorType;re&&Sx(ce)&&(X=X.responseEnd,T+=re*(X<U?1:(U-se)/(X-se)))}if(--m,a+=8*(v+T)/(y.duration/1e3),n++,10<n)break}}if(0<n)return a/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var sf=null,nf=null;function Nc(n){return n.nodeType===9?n:n.ownerDocument}function Nx(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Ex(n,a){if(n===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&a==="foreignObject"?0:n}function af(n,a){return n==="textarea"||n==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var rf=null;function B_(){var n=window.event;return n&&n.type==="popstate"?n===rf?!1:(rf=n,!0):(rf=null,!1)}var jx=typeof setTimeout=="function"?setTimeout:void 0,P_=typeof clearTimeout=="function"?clearTimeout:void 0,Cx=typeof Promise=="function"?Promise:void 0,F_=typeof queueMicrotask=="function"?queueMicrotask:typeof Cx<"u"?function(n){return Cx.resolve(null).then(n).catch(U_)}:jx;function U_(n){setTimeout(function(){throw n})}function Li(n){return n==="head"}function Tx(n,a){var d=a,m=0;do{var y=d.nextSibling;if(n.removeChild(d),y&&y.nodeType===8)if(d=y.data,d==="/$"||d==="/&"){if(m===0){n.removeChild(y),dr(a);return}m--}else if(d==="$"||d==="$?"||d==="$~"||d==="$!"||d==="&")m++;else if(d==="html")jo(n.ownerDocument.documentElement);else if(d==="head"){d=n.ownerDocument.head,jo(d);for(var v=d.firstChild;v;){var T=v.nextSibling,U=v.nodeName;v[Vr]||U==="SCRIPT"||U==="STYLE"||U==="LINK"&&v.rel.toLowerCase()==="stylesheet"||d.removeChild(v),v=T}}else d==="body"&&jo(n.ownerDocument.body);d=y}while(d);dr(a)}function kx(n,a){var d=n;n=0;do{var m=d.nextSibling;if(d.nodeType===1?a?(d._stashedDisplay=d.style.display,d.style.display="none"):(d.style.display=d._stashedDisplay||"",d.getAttribute("style")===""&&d.removeAttribute("style")):d.nodeType===3&&(a?(d._stashedText=d.nodeValue,d.nodeValue=""):d.nodeValue=d._stashedText||""),m&&m.nodeType===8)if(d=m.data,d==="/$"){if(n===0)break;n--}else d!=="$"&&d!=="$?"&&d!=="$~"&&d!=="$!"||n++;d=m}while(d)}function of(n){var a=n.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var d=a;switch(a=a.nextSibling,d.nodeName){case"HTML":case"HEAD":case"BODY":of(d),uu(d);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(d.rel.toLowerCase()==="stylesheet")continue}n.removeChild(d)}}function I_(n,a,d,m){for(;n.nodeType===1;){var y=d;if(n.nodeName.toLowerCase()!==a.toLowerCase()){if(!m&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(m){if(!n[Vr])switch(a){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(v=n.getAttribute("rel"),v==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(v!==y.rel||n.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||n.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||n.getAttribute("title")!==(y.title==null?null:y.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(v=n.getAttribute("src"),(v!==(y.src==null?null:y.src)||n.getAttribute("type")!==(y.type==null?null:y.type)||n.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&v&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(a==="input"&&n.type==="hidden"){var v=y.name==null?null:""+y.name;if(y.type==="hidden"&&n.getAttribute("name")===v)return n}else return n;if(n=en(n.nextSibling),n===null)break}return null}function z_(n,a,d){if(a==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!d||(n=en(n.nextSibling),n===null))return null;return n}function Rx(n,a){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!a||(n=en(n.nextSibling),n===null))return null;return n}function lf(n){return n.data==="$?"||n.data==="$~"}function cf(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function H_(n,a){var d=n.ownerDocument;if(n.data==="$~")n._reactRetry=a;else if(n.data!=="$?"||d.readyState!=="loading")a();else{var m=function(){a(),d.removeEventListener("DOMContentLoaded",m)};d.addEventListener("DOMContentLoaded",m),n._reactRetry=m}}function en(n){for(;n!=null;n=n.nextSibling){var a=n.nodeType;if(a===1||a===3)break;if(a===8){if(a=n.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return n}var df=null;function Dx(n){n=n.nextSibling;for(var a=0;n;){if(n.nodeType===8){var d=n.data;if(d==="/$"||d==="/&"){if(a===0)return en(n.nextSibling);a--}else d!=="$"&&d!=="$!"&&d!=="$?"&&d!=="$~"&&d!=="&"||a++}n=n.nextSibling}return null}function Mx(n){n=n.previousSibling;for(var a=0;n;){if(n.nodeType===8){var d=n.data;if(d==="$"||d==="$!"||d==="$?"||d==="$~"||d==="&"){if(a===0)return n;a--}else d!=="/$"&&d!=="/&"||a++}n=n.previousSibling}return null}function Lx(n,a,d){switch(a=Nc(d),n){case"html":if(n=a.documentElement,!n)throw Error(s(452));return n;case"head":if(n=a.head,!n)throw Error(s(453));return n;case"body":if(n=a.body,!n)throw Error(s(454));return n;default:throw Error(s(451))}}function jo(n){for(var a=n.attributes;a.length;)n.removeAttributeNode(a[0]);uu(n)}var tn=new Map,Ox=new Set;function Ec(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var oi=j.d;j.d={f:q_,r:V_,D:G_,C:$_,L:Y_,m:X_,X:K_,S:W_,M:Q_};function q_(){var n=oi.f(),a=xc();return n||a}function V_(n){var a=Ta(n);a!==null&&a.tag===5&&a.type==="form"?Zg(a):oi.r(n)}var or=typeof document>"u"?null:document;function Bx(n,a,d){var m=or;if(m&&typeof a=="string"&&a){var y=Ys(a);y='link[rel="'+n+'"][href="'+y+'"]',typeof d=="string"&&(y+='[crossorigin="'+d+'"]'),Ox.has(y)||(Ox.add(y),n={rel:n,crossOrigin:d,href:a},m.querySelector(y)===null&&(a=m.createElement("link"),ts(a,"link",n),qt(a),m.head.appendChild(a)))}}function G_(n){oi.D(n),Bx("dns-prefetch",n,null)}function $_(n,a){oi.C(n,a),Bx("preconnect",n,a)}function Y_(n,a,d){oi.L(n,a,d);var m=or;if(m&&n&&a){var y='link[rel="preload"][as="'+Ys(a)+'"]';a==="image"&&d&&d.imageSrcSet?(y+='[imagesrcset="'+Ys(d.imageSrcSet)+'"]',typeof d.imageSizes=="string"&&(y+='[imagesizes="'+Ys(d.imageSizes)+'"]')):y+='[href="'+Ys(n)+'"]';var v=y;switch(a){case"style":v=lr(n);break;case"script":v=cr(n)}tn.has(v)||(n=g({rel:"preload",href:a==="image"&&d&&d.imageSrcSet?void 0:n,as:a},d),tn.set(v,n),m.querySelector(y)!==null||a==="style"&&m.querySelector(Co(v))||a==="script"&&m.querySelector(To(v))||(a=m.createElement("link"),ts(a,"link",n),qt(a),m.head.appendChild(a)))}}function X_(n,a){oi.m(n,a);var d=or;if(d&&n){var m=a&&typeof a.as=="string"?a.as:"script",y='link[rel="modulepreload"][as="'+Ys(m)+'"][href="'+Ys(n)+'"]',v=y;switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":v=cr(n)}if(!tn.has(v)&&(n=g({rel:"modulepreload",href:n},a),tn.set(v,n),d.querySelector(y)===null)){switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(d.querySelector(To(v)))return}m=d.createElement("link"),ts(m,"link",n),qt(m),d.head.appendChild(m)}}}function W_(n,a,d){oi.S(n,a,d);var m=or;if(m&&n){var y=ka(m).hoistableStyles,v=lr(n);a=a||"default";var T=y.get(v);if(!T){var U={loading:0,preload:null};if(T=m.querySelector(Co(v)))U.loading=5;else{n=g({rel:"stylesheet",href:n,"data-precedence":a},d),(d=tn.get(v))&&uf(n,d);var X=T=m.createElement("link");qt(X),ts(X,"link",n),X._p=new Promise(function(se,re){X.onload=se,X.onerror=re}),X.addEventListener("load",function(){U.loading|=1}),X.addEventListener("error",function(){U.loading|=2}),U.loading|=4,jc(T,a,m)}T={type:"stylesheet",instance:T,count:1,state:U},y.set(v,T)}}}function K_(n,a){oi.X(n,a);var d=or;if(d&&n){var m=ka(d).hoistableScripts,y=cr(n),v=m.get(y);v||(v=d.querySelector(To(y)),v||(n=g({src:n,async:!0},a),(a=tn.get(y))&&hf(n,a),v=d.createElement("script"),qt(v),ts(v,"link",n),d.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},m.set(y,v))}}function Q_(n,a){oi.M(n,a);var d=or;if(d&&n){var m=ka(d).hoistableScripts,y=cr(n),v=m.get(y);v||(v=d.querySelector(To(y)),v||(n=g({src:n,async:!0,type:"module"},a),(a=tn.get(y))&&hf(n,a),v=d.createElement("script"),qt(v),ts(v,"link",n),d.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},m.set(y,v))}}function Px(n,a,d,m){var y=(y=de.current)?Ec(y):null;if(!y)throw Error(s(446));switch(n){case"meta":case"title":return null;case"style":return typeof d.precedence=="string"&&typeof d.href=="string"?(a=lr(d.href),d=ka(y).hoistableStyles,m=d.get(a),m||(m={type:"style",instance:null,count:0,state:null},d.set(a,m)),m):{type:"void",instance:null,count:0,state:null};case"link":if(d.rel==="stylesheet"&&typeof d.href=="string"&&typeof d.precedence=="string"){n=lr(d.href);var v=ka(y).hoistableStyles,T=v.get(n);if(T||(y=y.ownerDocument||y,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},v.set(n,T),(v=y.querySelector(Co(n)))&&!v._p&&(T.instance=v,T.state.loading=5),tn.has(n)||(d={rel:"preload",as:"style",href:d.href,crossOrigin:d.crossOrigin,integrity:d.integrity,media:d.media,hrefLang:d.hrefLang,referrerPolicy:d.referrerPolicy},tn.set(n,d),v||Z_(y,n,d,T.state))),a&&m===null)throw Error(s(528,""));return T}if(a&&m!==null)throw Error(s(529,""));return null;case"script":return a=d.async,d=d.src,typeof d=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=cr(d),d=ka(y).hoistableScripts,m=d.get(a),m||(m={type:"script",instance:null,count:0,state:null},d.set(a,m)),m):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,n))}}function lr(n){return'href="'+Ys(n)+'"'}function Co(n){return'link[rel="stylesheet"]['+n+"]"}function Fx(n){return g({},n,{"data-precedence":n.precedence,precedence:null})}function Z_(n,a,d,m){n.querySelector('link[rel="preload"][as="style"]['+a+"]")?m.loading=1:(a=n.createElement("link"),m.preload=a,a.addEventListener("load",function(){return m.loading|=1}),a.addEventListener("error",function(){return m.loading|=2}),ts(a,"link",d),qt(a),n.head.appendChild(a))}function cr(n){return'[src="'+Ys(n)+'"]'}function To(n){return"script[async]"+n}function Ux(n,a,d){if(a.count++,a.instance===null)switch(a.type){case"style":var m=n.querySelector('style[data-href~="'+Ys(d.href)+'"]');if(m)return a.instance=m,qt(m),m;var y=g({},d,{"data-href":d.href,"data-precedence":d.precedence,href:null,precedence:null});return m=(n.ownerDocument||n).createElement("style"),qt(m),ts(m,"style",y),jc(m,d.precedence,n),a.instance=m;case"stylesheet":y=lr(d.href);var v=n.querySelector(Co(y));if(v)return a.state.loading|=4,a.instance=v,qt(v),v;m=Fx(d),(y=tn.get(y))&&uf(m,y),v=(n.ownerDocument||n).createElement("link"),qt(v);var T=v;return T._p=new Promise(function(U,X){T.onload=U,T.onerror=X}),ts(v,"link",m),a.state.loading|=4,jc(v,d.precedence,n),a.instance=v;case"script":return v=cr(d.src),(y=n.querySelector(To(v)))?(a.instance=y,qt(y),y):(m=d,(y=tn.get(v))&&(m=g({},d),hf(m,y)),n=n.ownerDocument||n,y=n.createElement("script"),qt(y),ts(y,"link",m),n.head.appendChild(y),a.instance=y);case"void":return null;default:throw Error(s(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(m=a.instance,a.state.loading|=4,jc(m,d.precedence,n));return a.instance}function jc(n,a,d){for(var m=d.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=m.length?m[m.length-1]:null,v=y,T=0;T<m.length;T++){var U=m[T];if(U.dataset.precedence===a)v=U;else if(v!==y)break}v?v.parentNode.insertBefore(n,v.nextSibling):(a=d.nodeType===9?d.head:d,a.insertBefore(n,a.firstChild))}function uf(n,a){n.crossOrigin==null&&(n.crossOrigin=a.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=a.referrerPolicy),n.title==null&&(n.title=a.title)}function hf(n,a){n.crossOrigin==null&&(n.crossOrigin=a.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=a.referrerPolicy),n.integrity==null&&(n.integrity=a.integrity)}var Cc=null;function Ix(n,a,d){if(Cc===null){var m=new Map,y=Cc=new Map;y.set(d,m)}else y=Cc,m=y.get(d),m||(m=new Map,y.set(d,m));if(m.has(n))return m;for(m.set(n,null),d=d.getElementsByTagName(n),y=0;y<d.length;y++){var v=d[y];if(!(v[Vr]||v[Qt]||n==="link"&&v.getAttribute("rel")==="stylesheet")&&v.namespaceURI!=="http://www.w3.org/2000/svg"){var T=v.getAttribute(a)||"";T=n+T;var U=m.get(T);U?U.push(v):m.set(T,[v])}}return m}function zx(n,a,d){n=n.ownerDocument||n,n.head.insertBefore(d,a==="title"?n.querySelector("head > title"):null)}function J_(n,a,d){if(d===1||a.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;return a.rel==="stylesheet"?(n=a.disabled,typeof a.precedence=="string"&&n==null):!0;case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function Hx(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function eA(n,a,d,m){if(d.type==="stylesheet"&&(typeof m.media!="string"||matchMedia(m.media).matches!==!1)&&(d.state.loading&4)===0){if(d.instance===null){var y=lr(m.href),v=a.querySelector(Co(y));if(v){a=v._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(n.count++,n=Tc.bind(n),a.then(n,n)),d.state.loading|=4,d.instance=v,qt(v);return}v=a.ownerDocument||a,m=Fx(m),(y=tn.get(y))&&uf(m,y),v=v.createElement("link"),qt(v);var T=v;T._p=new Promise(function(U,X){T.onload=U,T.onerror=X}),ts(v,"link",m),d.instance=v}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(d,a),(a=d.state.preload)&&(d.state.loading&3)===0&&(n.count++,d=Tc.bind(n),a.addEventListener("load",d),a.addEventListener("error",d))}}var ff=0;function tA(n,a){return n.stylesheets&&n.count===0&&Rc(n,n.stylesheets),0<n.count||0<n.imgCount?function(d){var m=setTimeout(function(){if(n.stylesheets&&Rc(n,n.stylesheets),n.unsuspend){var v=n.unsuspend;n.unsuspend=null,v()}},6e4+a);0<n.imgBytes&&ff===0&&(ff=62500*O_());var y=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&Rc(n,n.stylesheets),n.unsuspend)){var v=n.unsuspend;n.unsuspend=null,v()}},(n.imgBytes>ff?50:800)+a);return n.unsuspend=d,function(){n.unsuspend=null,clearTimeout(m),clearTimeout(y)}}:null}function Tc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Rc(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var kc=null;function Rc(n,a){n.stylesheets=null,n.unsuspend!==null&&(n.count++,kc=new Map,a.forEach(sA,n),kc=null,Tc.call(n))}function sA(n,a){if(!(a.state.loading&4)){var d=kc.get(n);if(d)var m=d.get(null);else{d=new Map,kc.set(n,d);for(var y=n.querySelectorAll("link[data-precedence],style[data-precedence]"),v=0;v<y.length;v++){var T=y[v];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(d.set(T.dataset.precedence,T),m=T)}m&&d.set(null,m)}y=a.instance,T=y.getAttribute("data-precedence"),v=d.get(T)||m,v===m&&d.set(null,y),d.set(T,y),this.count++,m=Tc.bind(this),y.addEventListener("load",m),y.addEventListener("error",m),v?v.parentNode.insertBefore(y,v.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(y,n.firstChild)),a.state.loading|=4}}var ko={$$typeof:O,Provider:null,Consumer:null,_currentValue:G,_currentValue2:G,_threadCount:0};function nA(n,a,d,m,y,v,T,U,X){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=dn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=dn(0),this.hiddenUpdates=dn(null),this.identifierPrefix=m,this.onUncaughtError=y,this.onCaughtError=v,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=X,this.incompleteTransitions=new Map}function qx(n,a,d,m,y,v,T,U,X,se,re,ce){return n=new nA(n,a,d,T,X,se,re,ce,U),a=1,v===!0&&(a|=24),v=Ls(3,null,null,a),n.current=v,v.stateNode=n,a=Gu(),a.refCount++,n.pooledCache=a,a.refCount++,v.memoizedState={element:m,isDehydrated:d,cache:a},Wu(v),n}function Vx(n){return n?(n=Ia,n):Ia}function Gx(n,a,d,m,y,v){y=Vx(y),m.context===null?m.context=y:m.pendingContext=y,m=Ai(a),m.payload={element:d},v=v===void 0?null:v,v!==null&&(m.callback=v),d=Si(n,m,a),d!==null&&(Ss(d,n,a),oo(d,n,a))}function $x(n,a){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var d=n.retryLane;n.retryLane=d!==0&&d<a?d:a}}function mf(n,a){$x(n,a),(n=n.alternate)&&$x(n,a)}function Yx(n){if(n.tag===13||n.tag===31){var a=Ki(n,67108864);a!==null&&Ss(a,n,67108864),mf(n,67108864)}}function Xx(n){if(n.tag===13||n.tag===31){var a=Us();a=lu(a);var d=Ki(n,a);d!==null&&Ss(d,n,a),mf(n,a)}}var Dc=!0;function iA(n,a,d,m){var y=E.T;E.T=null;var v=j.p;try{j.p=2,pf(n,a,d,m)}finally{j.p=v,E.T=y}}function aA(n,a,d,m){var y=E.T;E.T=null;var v=j.p;try{j.p=8,pf(n,a,d,m)}finally{j.p=v,E.T=y}}function pf(n,a,d,m){if(Dc){var y=gf(m);if(y===null)ef(n,a,m,Mc,d),Kx(n,m);else if(oA(y,n,a,d,m))m.stopPropagation();else if(Kx(n,m),a&4&&-1<rA.indexOf(n)){for(;y!==null;){var v=Ta(y);if(v!==null)switch(v.tag){case 3:if(v=v.stateNode,v.current.memoizedState.isDehydrated){var T=rs(v.pendingLanes);if(T!==0){var U=v;for(U.pendingLanes|=2,U.entangledLanes|=2;T;){var X=1<<31-Kt(T);U.entanglements[1]|=X,T&=~X}Tn(v),(Qe&6)===0&&(pc=De()+500,So(0))}}break;case 31:case 13:U=Ki(v,2),U!==null&&Ss(U,v,2),xc(),mf(v,2)}if(v=gf(m),v===null&&ef(n,a,m,Mc,d),v===y)break;y=v}y!==null&&m.stopPropagation()}else ef(n,a,m,null,d)}}function gf(n){return n=xu(n),xf(n)}var Mc=null;function xf(n){if(Mc=null,n=Ca(n),n!==null){var a=o(n);if(a===null)n=null;else{var d=a.tag;if(d===13){if(n=c(a),n!==null)return n;n=null}else if(d===31){if(n=u(a),n!==null)return n;n=null}else if(d===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;n=null}else a!==n&&(n=null)}}return Mc=n,null}function Wx(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Xt()){case Rs:return 2;case qn:return 8;case Je:case is:return 32;case rt:return 268435456;default:return 32}default:return 32}}var yf=!1,Oi=null,Bi=null,Pi=null,Ro=new Map,Do=new Map,Fi=[],rA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Kx(n,a){switch(n){case"focusin":case"focusout":Oi=null;break;case"dragenter":case"dragleave":Bi=null;break;case"mouseover":case"mouseout":Pi=null;break;case"pointerover":case"pointerout":Ro.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Do.delete(a.pointerId)}}function Mo(n,a,d,m,y,v){return n===null||n.nativeEvent!==v?(n={blockedOn:a,domEventName:d,eventSystemFlags:m,nativeEvent:v,targetContainers:[y]},a!==null&&(a=Ta(a),a!==null&&Yx(a)),n):(n.eventSystemFlags|=m,a=n.targetContainers,y!==null&&a.indexOf(y)===-1&&a.push(y),n)}function oA(n,a,d,m,y){switch(a){case"focusin":return Oi=Mo(Oi,n,a,d,m,y),!0;case"dragenter":return Bi=Mo(Bi,n,a,d,m,y),!0;case"mouseover":return Pi=Mo(Pi,n,a,d,m,y),!0;case"pointerover":var v=y.pointerId;return Ro.set(v,Mo(Ro.get(v)||null,n,a,d,m,y)),!0;case"gotpointercapture":return v=y.pointerId,Do.set(v,Mo(Do.get(v)||null,n,a,d,m,y)),!0}return!1}function Qx(n){var a=Ca(n.target);if(a!==null){var d=o(a);if(d!==null){if(a=d.tag,a===13){if(a=c(d),a!==null){n.blockedOn=a,up(n.priority,function(){Xx(d)});return}}else if(a===31){if(a=u(d),a!==null){n.blockedOn=a,up(n.priority,function(){Xx(d)});return}}else if(a===3&&d.stateNode.current.memoizedState.isDehydrated){n.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Lc(n){if(n.blockedOn!==null)return!1;for(var a=n.targetContainers;0<a.length;){var d=gf(n.nativeEvent);if(d===null){d=n.nativeEvent;var m=new d.constructor(d.type,d);gu=m,d.target.dispatchEvent(m),gu=null}else return a=Ta(d),a!==null&&Yx(a),n.blockedOn=d,!1;a.shift()}return!0}function Zx(n,a,d){Lc(n)&&d.delete(a)}function lA(){yf=!1,Oi!==null&&Lc(Oi)&&(Oi=null),Bi!==null&&Lc(Bi)&&(Bi=null),Pi!==null&&Lc(Pi)&&(Pi=null),Ro.forEach(Zx),Do.forEach(Zx)}function Oc(n,a){n.blockedOn===a&&(n.blockedOn=null,yf||(yf=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,lA)))}var Bc=null;function Jx(n){Bc!==n&&(Bc=n,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Bc===n&&(Bc=null);for(var a=0;a<n.length;a+=3){var d=n[a],m=n[a+1],y=n[a+2];if(typeof m!="function"){if(xf(m||d)===null)continue;break}var v=Ta(d);v!==null&&(n.splice(a,3),a-=3,ph(v,{pending:!0,data:y,method:d.method,action:m},m,y))}}))}function dr(n){function a(X){return Oc(X,n)}Oi!==null&&Oc(Oi,n),Bi!==null&&Oc(Bi,n),Pi!==null&&Oc(Pi,n),Ro.forEach(a),Do.forEach(a);for(var d=0;d<Fi.length;d++){var m=Fi[d];m.blockedOn===n&&(m.blockedOn=null)}for(;0<Fi.length&&(d=Fi[0],d.blockedOn===null);)Qx(d),d.blockedOn===null&&Fi.shift();if(d=(n.ownerDocument||n).$$reactFormReplay,d!=null)for(m=0;m<d.length;m+=3){var y=d[m],v=d[m+1],T=y[ys]||null;if(typeof v=="function")T||Jx(d);else if(T){var U=null;if(v&&v.hasAttribute("formAction")){if(y=v,T=v[ys]||null)U=T.formAction;else if(xf(y)!==null)continue}else U=T.action;typeof U=="function"?d[m+1]=U:(d.splice(m,3),m-=3),Jx(d)}}}function ey(){function n(v){v.canIntercept&&v.info==="react-transition"&&v.intercept({handler:function(){return new Promise(function(T){return y=T})},focusReset:"manual",scroll:"manual"})}function a(){y!==null&&(y(),y=null),m||setTimeout(d,20)}function d(){if(!m&&!navigation.transition){var v=navigation.currentEntry;v&&v.url!=null&&navigation.navigate(v.url,{state:v.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var m=!1,y=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(d,100),function(){m=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),y!==null&&(y(),y=null)}}}function bf(n){this._internalRoot=n}Pc.prototype.render=bf.prototype.render=function(n){var a=this._internalRoot;if(a===null)throw Error(s(409));var d=a.current,m=Us();Gx(d,m,n,a,null,null)},Pc.prototype.unmount=bf.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var a=n.containerInfo;Gx(n.current,2,null,n,null,null),xc(),a[ja]=null}};function Pc(n){this._internalRoot=n}Pc.prototype.unstable_scheduleHydration=function(n){if(n){var a=dp();n={blockedOn:null,target:n,priority:a};for(var d=0;d<Fi.length&&a!==0&&a<Fi[d].priority;d++);Fi.splice(d,0,n),d===0&&Qx(n)}};var ty=e.version;if(ty!=="19.2.3")throw Error(s(527,ty,"19.2.3"));j.findDOMNode=function(n){var a=n._reactInternals;if(a===void 0)throw typeof n.render=="function"?Error(s(188)):(n=Object.keys(n).join(","),Error(s(268,n)));return n=p(a),n=n!==null?f(n):null,n=n===null?null:n.stateNode,n};var cA={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:E,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Fc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fc.isDisabled&&Fc.supportsFiber)try{fs=Fc.inject(cA),pt=Fc}catch{}}return Oo.createRoot=function(n,a){if(!i(n))throw Error(s(299));var d=!1,m="",y=l0,v=c0,T=d0;return a!=null&&(a.unstable_strictMode===!0&&(d=!0),a.identifierPrefix!==void 0&&(m=a.identifierPrefix),a.onUncaughtError!==void 0&&(y=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(T=a.onRecoverableError)),a=qx(n,1,!1,null,null,d,m,null,y,v,T,ey),n[ja]=a.current,Jh(n),new bf(a)},Oo.hydrateRoot=function(n,a,d){if(!i(n))throw Error(s(299));var m=!1,y="",v=l0,T=c0,U=d0,X=null;return d!=null&&(d.unstable_strictMode===!0&&(m=!0),d.identifierPrefix!==void 0&&(y=d.identifierPrefix),d.onUncaughtError!==void 0&&(v=d.onUncaughtError),d.onCaughtError!==void 0&&(T=d.onCaughtError),d.onRecoverableError!==void 0&&(U=d.onRecoverableError),d.formState!==void 0&&(X=d.formState)),a=qx(n,1,!0,a,d??null,m,y,X,v,T,U,ey),a.context=Vx(null),d=a.current,m=Us(),m=lu(m),y=Ai(m),y.callback=null,Si(d,y,m),d=m,a.current.lanes=d,qr(a,d),Tn(a),n[ja]=a.current,Jh(n),new Pc(a)},Oo.version="19.2.3",Oo}var fy;function bA(){if(fy)return Af.exports;fy=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Af.exports=yA(),Af.exports}var vA=bA();var my="popstate";function wA(r={}){function e(s,i){let{pathname:o,search:c,hash:u}=s.location;return Yf("",{pathname:o,search:c,hash:u},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function t(s,i){return typeof i=="string"?i:Zo(i)}return AA(e,t,null,r)}function vt(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function on(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function _A(){return Math.random().toString(36).substring(2,10)}function py(r,e){return{usr:r.state,key:r.key,idx:e}}function Yf(r,e,t=null,s){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof e=="string"?Lr(e):e,state:t,key:e&&e.key||s||_A()}}function Zo({pathname:r="/",search:e="",hash:t=""}){return e&&e!=="?"&&(r+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(r+=t.charAt(0)==="#"?t:"#"+t),r}function Lr(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substring(t),r=r.substring(0,t));let s=r.indexOf("?");s>=0&&(e.search=r.substring(s),r=r.substring(0,s)),r&&(e.pathname=r)}return e}function AA(r,e,t,s={}){let{window:i=document.defaultView,v5Compat:o=!1}=s,c=i.history,u="POP",h=null,p=f();p==null&&(p=0,c.replaceState({...c.state,idx:p},""));function f(){return(c.state||{idx:null}).idx}function g(){u="POP";let S=f(),A=S==null?null:S-p;p=S,h&&h({action:u,location:_.location,delta:A})}function x(S,A){u="PUSH";let L=Yf(_.location,S,A);p=f()+1;let O=py(L,p),D=_.createHref(L);try{c.pushState(O,"",D)}catch(I){if(I instanceof DOMException&&I.name==="DataCloneError")throw I;i.location.assign(D)}o&&h&&h({action:u,location:_.location,delta:1})}function b(S,A){u="REPLACE";let L=Yf(_.location,S,A);p=f();let O=py(L,p),D=_.createHref(L);c.replaceState(O,"",D),o&&h&&h({action:u,location:_.location,delta:0})}function w(S){return SA(S)}let _={get action(){return u},get location(){return r(i,c)},listen(S){if(h)throw new Error("A history only accepts one active listener");return i.addEventListener(my,g),h=S,()=>{i.removeEventListener(my,g),h=null}},createHref(S){return e(i,S)},createURL:w,encodeLocation(S){let A=w(S);return{pathname:A.pathname,search:A.search,hash:A.hash}},push:x,replace:b,go(S){return c.go(S)}};return _}function SA(r,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),vt(t,"No window.location.(origin|href) available to create URL");let s=typeof r=="string"?r:Zo(r);return s=s.replace(/ $/,"%20"),!e&&s.startsWith("//")&&(s=t+s),new URL(s,t)}function Rb(r,e,t="/"){return NA(r,e,t,!1)}function NA(r,e,t,s){let i=typeof e=="string"?Lr(e):e,o=hi(i.pathname||"/",t);if(o==null)return null;let c=Db(r);EA(c);let u=null;for(let h=0;u==null&&h<c.length;++h){let p=PA(o);u=OA(c[h],p,s)}return u}function Db(r,e=[],t=[],s="",i=!1){let o=(c,u,h=i,p)=>{let f={relativePath:p===void 0?c.path||"":p,caseSensitive:c.caseSensitive===!0,childrenIndex:u,route:c};if(f.relativePath.startsWith("/")){if(!f.relativePath.startsWith(s)&&h)return;vt(f.relativePath.startsWith(s),`Absolute route path "${f.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),f.relativePath=f.relativePath.slice(s.length)}let g=di([s,f.relativePath]),x=t.concat(f);c.children&&c.children.length>0&&(vt(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),Db(c.children,e,x,g,h)),!(c.path==null&&!c.index)&&e.push({path:g,score:MA(g,c.index),routesMeta:x})};return r.forEach((c,u)=>{if(c.path===""||!c.path?.includes("?"))o(c,u);else for(let h of Mb(c.path))o(c,u,!0,h)}),e}function Mb(r){let e=r.split("/");if(e.length===0)return[];let[t,...s]=e,i=t.endsWith("?"),o=t.replace(/\?$/,"");if(s.length===0)return i?[o,""]:[o];let c=Mb(s.join("/")),u=[];return u.push(...c.map(h=>h===""?o:[o,h].join("/"))),i&&u.push(...c),u.map(h=>r.startsWith("/")&&h===""?"/":h)}function EA(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:LA(e.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}var jA=/^:[\w-]+$/,CA=3,TA=2,kA=1,RA=10,DA=-2,gy=r=>r==="*";function MA(r,e){let t=r.split("/"),s=t.length;return t.some(gy)&&(s+=DA),e&&(s+=TA),t.filter(i=>!gy(i)).reduce((i,o)=>i+(jA.test(o)?CA:o===""?kA:RA),s)}function LA(r,e){return r.length===e.length&&r.slice(0,-1).every((s,i)=>s===e[i])?r[r.length-1]-e[e.length-1]:0}function OA(r,e,t=!1){let{routesMeta:s}=r,i={},o="/",c=[];for(let u=0;u<s.length;++u){let h=s[u],p=u===s.length-1,f=o==="/"?e:e.slice(o.length)||"/",g=wd({path:h.relativePath,caseSensitive:h.caseSensitive,end:p},f),x=h.route;if(!g&&p&&t&&!s[s.length-1].route.index&&(g=wd({path:h.relativePath,caseSensitive:h.caseSensitive,end:!1},f)),!g)return null;Object.assign(i,g.params),c.push({params:i,pathname:di([o,g.pathname]),pathnameBase:zA(di([o,g.pathnameBase])),route:x}),g.pathnameBase!=="/"&&(o=di([o,g.pathnameBase]))}return c}function wd(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,s]=BA(r.path,r.caseSensitive,r.end),i=e.match(t);if(!i)return null;let o=i[0],c=o.replace(/(.)\/+$/,"$1"),u=i.slice(1);return{params:s.reduce((p,{paramName:f,isOptional:g},x)=>{if(f==="*"){let w=u[x]||"";c=o.slice(0,o.length-w.length).replace(/(.)\/+$/,"$1")}const b=u[x];return g&&!b?p[f]=void 0:p[f]=(b||"").replace(/%2F/g,"/"),p},{}),pathname:o,pathnameBase:c,pattern:r}}function BA(r,e=!1,t=!0){on(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let s=[],i="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,u,h)=>(s.push({paramName:u,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return r.endsWith("*")?(s.push({paramName:"*"}),i+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":r!==""&&r!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),s]}function PA(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return on(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),r}}function hi(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,s=r.charAt(t);return s&&s!=="/"?null:r.slice(t)||"/"}var Lb=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,FA=r=>Lb.test(r);function UA(r,e="/"){let{pathname:t,search:s="",hash:i=""}=typeof r=="string"?Lr(r):r,o;if(t)if(FA(t))o=t;else{if(t.includes("//")){let c=t;t=t.replace(/\/\/+/g,"/"),on(!1,`Pathnames cannot have embedded double slashes - normalizing ${c} -> ${t}`)}t.startsWith("/")?o=xy(t.substring(1),"/"):o=xy(t,e)}else o=e;return{pathname:o,search:HA(s),hash:qA(i)}}function xy(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function jf(r,e,t,s){return`Cannot include a '${r}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function IA(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function bm(r){let e=IA(r);return e.map((t,s)=>s===e.length-1?t.pathname:t.pathnameBase)}function vm(r,e,t,s=!1){let i;typeof r=="string"?i=Lr(r):(i={...r},vt(!i.pathname||!i.pathname.includes("?"),jf("?","pathname","search",i)),vt(!i.pathname||!i.pathname.includes("#"),jf("#","pathname","hash",i)),vt(!i.search||!i.search.includes("#"),jf("#","search","hash",i)));let o=r===""||i.pathname==="",c=o?"/":i.pathname,u;if(c==null)u=t;else{let g=e.length-1;if(!s&&c.startsWith("..")){let x=c.split("/");for(;x[0]==="..";)x.shift(),g-=1;i.pathname=x.join("/")}u=g>=0?e[g]:"/"}let h=UA(i,u),p=c&&c!=="/"&&c.endsWith("/"),f=(o||c===".")&&t.endsWith("/");return!h.pathname.endsWith("/")&&(p||f)&&(h.pathname+="/"),h}var di=r=>r.join("/").replace(/\/\/+/g,"/"),zA=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),HA=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,qA=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r,VA=class{constructor(r,e,t,s=!1){this.status=r,this.statusText=e||"",this.internal=s,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function GA(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}function $A(r){return r.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var Ob=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Bb(r,e){let t=r;if(typeof t!="string"||!Lb.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let s=t,i=!1;if(Ob)try{let o=new URL(window.location.href),c=t.startsWith("//")?new URL(o.protocol+t):new URL(t),u=hi(c.pathname,e);c.origin===o.origin&&u!=null?t=u+c.search+c.hash:i=!0}catch{on(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:s,isExternal:i,to:t}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Pb=["POST","PUT","PATCH","DELETE"];new Set(Pb);var YA=["GET",...Pb];new Set(YA);var Or=R.createContext(null);Or.displayName="DataRouter";var Bd=R.createContext(null);Bd.displayName="DataRouterState";var XA=R.createContext(!1),Fb=R.createContext({isTransitioning:!1});Fb.displayName="ViewTransition";var WA=R.createContext(new Map);WA.displayName="Fetchers";var KA=R.createContext(null);KA.displayName="Await";var Vs=R.createContext(null);Vs.displayName="Navigation";var rl=R.createContext(null);rl.displayName="Location";var bn=R.createContext({outlet:null,matches:[],isDataRoute:!1});bn.displayName="Route";var wm=R.createContext(null);wm.displayName="RouteError";var Ub="REACT_ROUTER_ERROR",QA="REDIRECT",ZA="ROUTE_ERROR_RESPONSE";function JA(r){if(r.startsWith(`${Ub}:${QA}:{`))try{let e=JSON.parse(r.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function eS(r){if(r.startsWith(`${Ub}:${ZA}:{`))try{let e=JSON.parse(r.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new VA(e.status,e.statusText,e.data)}catch{}}function tS(r,{relative:e}={}){vt(Br(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:s}=R.useContext(Vs),{hash:i,pathname:o,search:c}=ol(r,{relative:e}),u=o;return t!=="/"&&(u=o==="/"?t:di([t,o])),s.createHref({pathname:u,search:c,hash:i})}function Br(){return R.useContext(rl)!=null}function vn(){return vt(Br(),"useLocation() may be used only in the context of a <Router> component."),R.useContext(rl).location}var Ib="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function zb(r){R.useContext(Vs).static||R.useLayoutEffect(r)}function pi(){let{isDataRoute:r}=R.useContext(bn);return r?mS():sS()}function sS(){vt(Br(),"useNavigate() may be used only in the context of a <Router> component.");let r=R.useContext(Or),{basename:e,navigator:t}=R.useContext(Vs),{matches:s}=R.useContext(bn),{pathname:i}=vn(),o=JSON.stringify(bm(s)),c=R.useRef(!1);return zb(()=>{c.current=!0}),R.useCallback((h,p={})=>{if(on(c.current,Ib),!c.current)return;if(typeof h=="number"){t.go(h);return}let f=vm(h,JSON.parse(o),i,p.relative==="path");r==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:di([e,f.pathname])),(p.replace?t.replace:t.push)(f,p.state,p)},[e,t,o,i,r])}R.createContext(null);function Pd(){let{matches:r}=R.useContext(bn),e=r[r.length-1];return e?e.params:{}}function ol(r,{relative:e}={}){let{matches:t}=R.useContext(bn),{pathname:s}=vn(),i=JSON.stringify(bm(t));return R.useMemo(()=>vm(r,JSON.parse(i),s,e==="path"),[r,i,s,e])}function nS(r,e){return Hb(r,e)}function Hb(r,e,t,s,i){vt(Br(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=R.useContext(Vs),{matches:c}=R.useContext(bn),u=c[c.length-1],h=u?u.params:{},p=u?u.pathname:"/",f=u?u.pathnameBase:"/",g=u&&u.route;{let L=g&&g.path||"";Vb(p,!g||L.endsWith("*")||L.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${L}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${L}"> to <Route path="${L==="/"?"*":`${L}/*`}">.`)}let x=vn(),b;if(e){let L=typeof e=="string"?Lr(e):e;vt(f==="/"||L.pathname?.startsWith(f),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${L.pathname}" was given in the \`location\` prop.`),b=L}else b=x;let w=b.pathname||"/",_=w;if(f!=="/"){let L=f.replace(/^\//,"").split("/");_="/"+w.replace(/^\//,"").split("/").slice(L.length).join("/")}let S=Rb(r,{pathname:_});on(g||S!=null,`No routes matched location "${b.pathname}${b.search}${b.hash}" `),on(S==null||S[S.length-1].route.element!==void 0||S[S.length-1].route.Component!==void 0||S[S.length-1].route.lazy!==void 0,`Matched leaf route at location "${b.pathname}${b.search}${b.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let A=lS(S&&S.map(L=>Object.assign({},L,{params:Object.assign({},h,L.params),pathname:di([f,o.encodeLocation?o.encodeLocation(L.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:L.pathname]),pathnameBase:L.pathnameBase==="/"?f:di([f,o.encodeLocation?o.encodeLocation(L.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:L.pathnameBase])})),c,t,s,i);return e&&A?R.createElement(rl.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...b},navigationType:"POP"}},A):A}function iS(){let r=fS(),e=GA(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,s="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:s},o={padding:"2px 4px",backgroundColor:s},c=null;return console.error("Error handled by React Router default ErrorBoundary:",r),c=R.createElement(R.Fragment,null,R.createElement("p",null," Hey developer "),R.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",R.createElement("code",{style:o},"ErrorBoundary")," or"," ",R.createElement("code",{style:o},"errorElement")," prop on your route.")),R.createElement(R.Fragment,null,R.createElement("h2",null,"Unexpected Application Error!"),R.createElement("h3",{style:{fontStyle:"italic"}},e),t?R.createElement("pre",{style:i},t):null,c)}var aS=R.createElement(iS,null),qb=class extends R.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,e){return e.location!==r.location||e.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:e.error,location:e.location,revalidation:r.revalidation||e.revalidation}}componentDidCatch(r,e){this.props.onError?this.props.onError(r,e):console.error("React Router caught the following error during render",r)}render(){let r=this.state.error;if(this.context&&typeof r=="object"&&r&&"digest"in r&&typeof r.digest=="string"){const t=eS(r.digest);t&&(r=t)}let e=r!==void 0?R.createElement(bn.Provider,{value:this.props.routeContext},R.createElement(wm.Provider,{value:r,children:this.props.component})):this.props.children;return this.context?R.createElement(rS,{error:r},e):e}};qb.contextType=XA;var Cf=new WeakMap;function rS({children:r,error:e}){let{basename:t}=R.useContext(Vs);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let s=JA(e.digest);if(s){let i=Cf.get(e);if(i)throw i;let o=Bb(s.location,t);if(Ob&&!Cf.get(e))if(o.isExternal||s.reloadDocument)window.location.href=o.absoluteURL||o.to;else{const c=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(o.to,{replace:s.replace}));throw Cf.set(e,c),c}return R.createElement("meta",{httpEquiv:"refresh",content:`0;url=${o.absoluteURL||o.to}`})}}return r}function oS({routeContext:r,match:e,children:t}){let s=R.useContext(Or);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),R.createElement(bn.Provider,{value:r},t)}function lS(r,e=[],t=null,s=null,i=null){if(r==null){if(!t)return null;if(t.errors)r=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let o=r,c=t?.errors;if(c!=null){let f=o.findIndex(g=>g.route.id&&c?.[g.route.id]!==void 0);vt(f>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),o=o.slice(0,Math.min(o.length,f+1))}let u=!1,h=-1;if(t)for(let f=0;f<o.length;f++){let g=o[f];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(h=f),g.route.id){let{loaderData:x,errors:b}=t,w=g.route.loader&&!x.hasOwnProperty(g.route.id)&&(!b||b[g.route.id]===void 0);if(g.route.lazy||w){u=!0,h>=0?o=o.slice(0,h+1):o=[o[0]];break}}}let p=t&&s?(f,g)=>{s(f,{location:t.location,params:t.matches?.[0]?.params??{},unstable_pattern:$A(t.matches),errorInfo:g})}:void 0;return o.reduceRight((f,g,x)=>{let b,w=!1,_=null,S=null;t&&(b=c&&g.route.id?c[g.route.id]:void 0,_=g.route.errorElement||aS,u&&(h<0&&x===0?(Vb("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),w=!0,S=null):h===x&&(w=!0,S=g.route.hydrateFallbackElement||null)));let A=e.concat(o.slice(0,x+1)),L=()=>{let O;return b?O=_:w?O=S:g.route.Component?O=R.createElement(g.route.Component,null):g.route.element?O=g.route.element:O=f,R.createElement(oS,{match:g,routeContext:{outlet:f,matches:A,isDataRoute:t!=null},children:O})};return t&&(g.route.ErrorBoundary||g.route.errorElement||x===0)?R.createElement(qb,{location:t.location,revalidation:t.revalidation,component:_,error:b,children:L(),routeContext:{outlet:null,matches:A,isDataRoute:!0},onError:p}):L()},null)}function _m(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function cS(r){let e=R.useContext(Or);return vt(e,_m(r)),e}function dS(r){let e=R.useContext(Bd);return vt(e,_m(r)),e}function uS(r){let e=R.useContext(bn);return vt(e,_m(r)),e}function Am(r){let e=uS(r),t=e.matches[e.matches.length-1];return vt(t.route.id,`${r} can only be used on routes that contain a unique "id"`),t.route.id}function hS(){return Am("useRouteId")}function fS(){let r=R.useContext(wm),e=dS("useRouteError"),t=Am("useRouteError");return r!==void 0?r:e.errors?.[t]}function mS(){let{router:r}=cS("useNavigate"),e=Am("useNavigate"),t=R.useRef(!1);return zb(()=>{t.current=!0}),R.useCallback(async(i,o={})=>{on(t.current,Ib),t.current&&(typeof i=="number"?await r.navigate(i):await r.navigate(i,{fromRouteId:e,...o}))},[r,e])}var yy={};function Vb(r,e,t){!e&&!yy[r]&&(yy[r]=!0,on(!1,t))}R.memo(pS);function pS({routes:r,future:e,state:t,onError:s}){return Hb(r,void 0,t,s,e)}function od({to:r,replace:e,state:t,relative:s}){vt(Br(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=R.useContext(Vs);on(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=R.useContext(bn),{pathname:c}=vn(),u=pi(),h=vm(r,bm(o),c,s==="path"),p=JSON.stringify(h);return R.useEffect(()=>{u(JSON.parse(p),{replace:e,state:t,relative:s})},[u,p,s,e,t]),null}function qe(r){vt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function gS({basename:r="/",children:e=null,location:t,navigationType:s="POP",navigator:i,static:o=!1,unstable_useTransitions:c}){vt(!Br(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=r.replace(/^\/*/,"/"),h=R.useMemo(()=>({basename:u,navigator:i,static:o,unstable_useTransitions:c,future:{}}),[u,i,o,c]);typeof t=="string"&&(t=Lr(t));let{pathname:p="/",search:f="",hash:g="",state:x=null,key:b="default"}=t,w=R.useMemo(()=>{let _=hi(p,u);return _==null?null:{location:{pathname:_,search:f,hash:g,state:x,key:b},navigationType:s}},[u,p,f,g,x,b,s]);return on(w!=null,`<Router basename="${u}"> is not able to match the URL "${p}${f}${g}" because it does not start with the basename, so the <Router> won't render anything.`),w==null?null:R.createElement(Vs.Provider,{value:h},R.createElement(rl.Provider,{children:e,value:w}))}function xS({children:r,location:e}){return nS(Xf(r),e)}function Xf(r,e=[]){let t=[];return R.Children.forEach(r,(s,i)=>{if(!R.isValidElement(s))return;let o=[...e,i];if(s.type===R.Fragment){t.push.apply(t,Xf(s.props.children,o));return}vt(s.type===qe,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),vt(!s.props.index||!s.props.children,"An index route cannot have child routes.");let c={id:s.props.id||o.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,middleware:s.props.middleware,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(c.children=Xf(s.props.children,o)),t.push(c)}),t}var ld="get",cd="application/x-www-form-urlencoded";function Fd(r){return typeof HTMLElement<"u"&&r instanceof HTMLElement}function yS(r){return Fd(r)&&r.tagName.toLowerCase()==="button"}function bS(r){return Fd(r)&&r.tagName.toLowerCase()==="form"}function vS(r){return Fd(r)&&r.tagName.toLowerCase()==="input"}function wS(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function _S(r,e){return r.button===0&&(!e||e==="_self")&&!wS(r)}var Uc=null;function AS(){if(Uc===null)try{new FormData(document.createElement("form"),0),Uc=!1}catch{Uc=!0}return Uc}var SS=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Tf(r){return r!=null&&!SS.has(r)?(on(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${cd}"`),null):r}function NS(r,e){let t,s,i,o,c;if(bS(r)){let u=r.getAttribute("action");s=u?hi(u,e):null,t=r.getAttribute("method")||ld,i=Tf(r.getAttribute("enctype"))||cd,o=new FormData(r)}else if(yS(r)||vS(r)&&(r.type==="submit"||r.type==="image")){let u=r.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let h=r.getAttribute("formaction")||u.getAttribute("action");if(s=h?hi(h,e):null,t=r.getAttribute("formmethod")||u.getAttribute("method")||ld,i=Tf(r.getAttribute("formenctype"))||Tf(u.getAttribute("enctype"))||cd,o=new FormData(u,r),!AS()){let{name:p,type:f,value:g}=r;if(f==="image"){let x=p?`${p}.`:"";o.append(`${x}x`,"0"),o.append(`${x}y`,"0")}else p&&o.append(p,g)}}else{if(Fd(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=ld,s=null,i=cd,c=r}return o&&i==="text/plain"&&(c=o,o=void 0),{action:s,method:t.toLowerCase(),encType:i,formData:o,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Sm(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function ES(r,e,t){let s=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return s.pathname==="/"?s.pathname=`_root.${t}`:e&&hi(s.pathname,e)==="/"?s.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${t}`,s}async function jS(r,e){if(r.id in e)return e[r.id];try{let t=await import(r.module);return e[r.id]=t,t}catch(t){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function CS(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function TS(r,e,t){let s=await Promise.all(r.map(async i=>{let o=e.routes[i.route.id];if(o){let c=await jS(o,t);return c.links?c.links():[]}return[]}));return MS(s.flat(1).filter(CS).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function by(r,e,t,s,i,o){let c=(h,p)=>t[p]?h.route.id!==t[p].route.id:!0,u=(h,p)=>t[p].pathname!==h.pathname||t[p].route.path?.endsWith("*")&&t[p].params["*"]!==h.params["*"];return o==="assets"?e.filter((h,p)=>c(h,p)||u(h,p)):o==="data"?e.filter((h,p)=>{let f=s.routes[h.route.id];if(!f||!f.hasLoader)return!1;if(c(h,p)||u(h,p))return!0;if(h.route.shouldRevalidate){let g=h.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(r,window.origin),nextParams:h.params,defaultShouldRevalidate:!0});if(typeof g=="boolean")return g}return!0}):[]}function kS(r,e,{includeHydrateFallback:t}={}){return RS(r.map(s=>{let i=e.routes[s.route.id];if(!i)return[];let o=[i.module];return i.clientActionModule&&(o=o.concat(i.clientActionModule)),i.clientLoaderModule&&(o=o.concat(i.clientLoaderModule)),t&&i.hydrateFallbackModule&&(o=o.concat(i.hydrateFallbackModule)),i.imports&&(o=o.concat(i.imports)),o}).flat(1))}function RS(r){return[...new Set(r)]}function DS(r){let e={},t=Object.keys(r).sort();for(let s of t)e[s]=r[s];return e}function MS(r,e){let t=new Set;return new Set(e),r.reduce((s,i)=>{let o=JSON.stringify(DS(i));return t.has(o)||(t.add(o),s.push({key:o,link:i})),s},[])}function Gb(){let r=R.useContext(Or);return Sm(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function LS(){let r=R.useContext(Bd);return Sm(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var Nm=R.createContext(void 0);Nm.displayName="FrameworkContext";function $b(){let r=R.useContext(Nm);return Sm(r,"You must render this element inside a <HydratedRouter> element"),r}function OS(r,e){let t=R.useContext(Nm),[s,i]=R.useState(!1),[o,c]=R.useState(!1),{onFocus:u,onBlur:h,onMouseEnter:p,onMouseLeave:f,onTouchStart:g}=e,x=R.useRef(null);R.useEffect(()=>{if(r==="render"&&c(!0),r==="viewport"){let _=A=>{A.forEach(L=>{c(L.isIntersecting)})},S=new IntersectionObserver(_,{threshold:.5});return x.current&&S.observe(x.current),()=>{S.disconnect()}}},[r]),R.useEffect(()=>{if(s){let _=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(_)}}},[s]);let b=()=>{i(!0)},w=()=>{i(!1),c(!1)};return t?r!=="intent"?[o,x,{}]:[o,x,{onFocus:Bo(u,b),onBlur:Bo(h,w),onMouseEnter:Bo(p,b),onMouseLeave:Bo(f,w),onTouchStart:Bo(g,b)}]:[!1,x,{}]}function Bo(r,e){return t=>{r&&r(t),t.defaultPrevented||e(t)}}function BS({page:r,...e}){let{router:t}=Gb(),s=R.useMemo(()=>Rb(t.routes,r,t.basename),[t.routes,r,t.basename]);return s?R.createElement(FS,{page:r,matches:s,...e}):null}function PS(r){let{manifest:e,routeModules:t}=$b(),[s,i]=R.useState([]);return R.useEffect(()=>{let o=!1;return TS(r,e,t).then(c=>{o||i(c)}),()=>{o=!0}},[r,e,t]),s}function FS({page:r,matches:e,...t}){let s=vn(),{manifest:i,routeModules:o}=$b(),{basename:c}=Gb(),{loaderData:u,matches:h}=LS(),p=R.useMemo(()=>by(r,e,h,i,s,"data"),[r,e,h,i,s]),f=R.useMemo(()=>by(r,e,h,i,s,"assets"),[r,e,h,i,s]),g=R.useMemo(()=>{if(r===s.pathname+s.search+s.hash)return[];let w=new Set,_=!1;if(e.forEach(A=>{let L=i.routes[A.route.id];!L||!L.hasLoader||(!p.some(O=>O.route.id===A.route.id)&&A.route.id in u&&o[A.route.id]?.shouldRevalidate||L.hasClientLoader?_=!0:w.add(A.route.id))}),w.size===0)return[];let S=ES(r,c,"data");return _&&w.size>0&&S.searchParams.set("_routes",e.filter(A=>w.has(A.route.id)).map(A=>A.route.id).join(",")),[S.pathname+S.search]},[c,u,s,i,p,e,r,o]),x=R.useMemo(()=>kS(f,i),[f,i]),b=PS(f);return R.createElement(R.Fragment,null,g.map(w=>R.createElement("link",{key:w,rel:"prefetch",as:"fetch",href:w,...t})),x.map(w=>R.createElement("link",{key:w,rel:"modulepreload",href:w,...t})),b.map(({key:w,link:_})=>R.createElement("link",{key:w,nonce:t.nonce,..._})))}function US(...r){return e=>{r.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var IS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{IS&&(window.__reactRouterVersion="7.11.0")}catch{}function zS({basename:r,children:e,unstable_useTransitions:t,window:s}){let i=R.useRef();i.current==null&&(i.current=wA({window:s,v5Compat:!0}));let o=i.current,[c,u]=R.useState({action:o.action,location:o.location}),h=R.useCallback(p=>{t===!1?u(p):R.startTransition(()=>u(p))},[t]);return R.useLayoutEffect(()=>o.listen(h),[o,h]),R.createElement(gS,{basename:r,children:e,location:c.location,navigationType:c.action,navigator:o,unstable_useTransitions:t})}var Yb=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ct=R.forwardRef(function({onClick:e,discover:t="render",prefetch:s="none",relative:i,reloadDocument:o,replace:c,state:u,target:h,to:p,preventScrollReset:f,viewTransition:g,unstable_defaultShouldRevalidate:x,...b},w){let{basename:_,unstable_useTransitions:S}=R.useContext(Vs),A=typeof p=="string"&&Yb.test(p),L=Bb(p,_);p=L.to;let O=tS(p,{relative:i}),[D,I,C]=OS(s,b),P=GS(p,{replace:c,state:u,target:h,preventScrollReset:f,relative:i,viewTransition:g,unstable_defaultShouldRevalidate:x,unstable_useTransitions:S});function k(M){e&&e(M),M.defaultPrevented||P(M)}let N=R.createElement("a",{...b,...C,href:L.absoluteURL||O,onClick:L.isExternal||o?e:k,ref:US(w,I),target:h,"data-discover":!A&&t==="render"?"true":void 0});return D&&!A?R.createElement(R.Fragment,null,N,R.createElement(BS,{page:O})):N});ct.displayName="Link";var HS=R.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:s="",end:i=!1,style:o,to:c,viewTransition:u,children:h,...p},f){let g=ol(c,{relative:p.relative}),x=vn(),b=R.useContext(Bd),{navigator:w,basename:_}=R.useContext(Vs),S=b!=null&&KS(g)&&u===!0,A=w.encodeLocation?w.encodeLocation(g).pathname:g.pathname,L=x.pathname,O=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;t||(L=L.toLowerCase(),O=O?O.toLowerCase():null,A=A.toLowerCase()),O&&_&&(O=hi(O,_)||O);const D=A!=="/"&&A.endsWith("/")?A.length-1:A.length;let I=L===A||!i&&L.startsWith(A)&&L.charAt(D)==="/",C=O!=null&&(O===A||!i&&O.startsWith(A)&&O.charAt(A.length)==="/"),P={isActive:I,isPending:C,isTransitioning:S},k=I?e:void 0,N;typeof s=="function"?N=s(P):N=[s,I?"active":null,C?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let M=typeof o=="function"?o(P):o;return R.createElement(ct,{...p,"aria-current":k,className:N,ref:f,style:M,to:c,viewTransition:u},typeof h=="function"?h(P):h)});HS.displayName="NavLink";var qS=R.forwardRef(({discover:r="render",fetcherKey:e,navigate:t,reloadDocument:s,replace:i,state:o,method:c=ld,action:u,onSubmit:h,relative:p,preventScrollReset:f,viewTransition:g,unstable_defaultShouldRevalidate:x,...b},w)=>{let{unstable_useTransitions:_}=R.useContext(Vs),S=XS(),A=WS(u,{relative:p}),L=c.toLowerCase()==="get"?"get":"post",O=typeof u=="string"&&Yb.test(u),D=I=>{if(h&&h(I),I.defaultPrevented)return;I.preventDefault();let C=I.nativeEvent.submitter,P=C?.getAttribute("formmethod")||c,k=()=>S(C||I.currentTarget,{fetcherKey:e,method:P,navigate:t,replace:i,state:o,relative:p,preventScrollReset:f,viewTransition:g,unstable_defaultShouldRevalidate:x});_&&t!==!1?R.startTransition(()=>k()):k()};return R.createElement("form",{ref:w,method:L,action:A,onSubmit:s?h:D,...b,"data-discover":!O&&r==="render"?"true":void 0})});qS.displayName="Form";function VS(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Xb(r){let e=R.useContext(Or);return vt(e,VS(r)),e}function GS(r,{target:e,replace:t,state:s,preventScrollReset:i,relative:o,viewTransition:c,unstable_defaultShouldRevalidate:u,unstable_useTransitions:h}={}){let p=pi(),f=vn(),g=ol(r,{relative:o});return R.useCallback(x=>{if(_S(x,e)){x.preventDefault();let b=t!==void 0?t:Zo(f)===Zo(g),w=()=>p(r,{replace:b,state:s,preventScrollReset:i,relative:o,viewTransition:c,unstable_defaultShouldRevalidate:u});h?R.startTransition(()=>w()):w()}},[f,p,g,t,s,e,r,i,o,c,u,h])}var $S=0,YS=()=>`__${String(++$S)}__`;function XS(){let{router:r}=Xb("useSubmit"),{basename:e}=R.useContext(Vs),t=hS(),s=r.fetch,i=r.navigate;return R.useCallback(async(o,c={})=>{let{action:u,method:h,encType:p,formData:f,body:g}=NS(o,e);if(c.navigate===!1){let x=c.fetcherKey||YS();await s(x,t,c.action||u,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:f,body:g,formMethod:c.method||h,formEncType:c.encType||p,flushSync:c.flushSync})}else await i(c.action||u,{unstable_defaultShouldRevalidate:c.unstable_defaultShouldRevalidate,preventScrollReset:c.preventScrollReset,formData:f,body:g,formMethod:c.method||h,formEncType:c.encType||p,replace:c.replace,state:c.state,fromRouteId:t,flushSync:c.flushSync,viewTransition:c.viewTransition})},[s,i,e,t])}function WS(r,{relative:e}={}){let{basename:t}=R.useContext(Vs),s=R.useContext(bn);vt(s,"useFormAction must be used inside a RouteContext");let[i]=s.matches.slice(-1),o={...ol(r||".",{relative:e})},c=vn();if(r==null){o.search=c.search;let u=new URLSearchParams(o.search),h=u.getAll("index");if(h.some(f=>f==="")){u.delete("index"),h.filter(g=>g).forEach(g=>u.append("index",g));let f=u.toString();o.search=f?`?${f}`:""}}return(!r||r===".")&&i.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(o.pathname=o.pathname==="/"?t:di([t,o.pathname])),Zo(o)}function KS(r,{relative:e}={}){let t=R.useContext(Fb);vt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=Xb("useViewTransitionState"),i=ol(r,{relative:e});if(!t.isTransitioning)return!1;let o=hi(t.currentLocation.pathname,s)||t.currentLocation.pathname,c=hi(t.nextLocation.pathname,s)||t.nextLocation.pathname;return wd(i.pathname,c)!=null||wd(i.pathname,o)!=null}function Wb(r,e){return function(){return r.apply(e,arguments)}}const{toString:QS}=Object.prototype,{getPrototypeOf:Em}=Object,{iterator:Ud,toStringTag:Kb}=Symbol,Id=(r=>e=>{const t=QS.call(e);return r[t]||(r[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),wn=r=>(r=r.toLowerCase(),e=>Id(e)===r),zd=r=>e=>typeof e===r,{isArray:Pr}=Array,kr=zd("undefined");function ll(r){return r!==null&&!kr(r)&&r.constructor!==null&&!kr(r.constructor)&&Ts(r.constructor.isBuffer)&&r.constructor.isBuffer(r)}const Qb=wn("ArrayBuffer");function ZS(r){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(r):e=r&&r.buffer&&Qb(r.buffer),e}const JS=zd("string"),Ts=zd("function"),Zb=zd("number"),cl=r=>r!==null&&typeof r=="object",e2=r=>r===!0||r===!1,dd=r=>{if(Id(r)!=="object")return!1;const e=Em(r);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Kb in r)&&!(Ud in r)},t2=r=>{if(!cl(r)||ll(r))return!1;try{return Object.keys(r).length===0&&Object.getPrototypeOf(r)===Object.prototype}catch{return!1}},s2=wn("Date"),n2=wn("File"),i2=wn("Blob"),a2=wn("FileList"),r2=r=>cl(r)&&Ts(r.pipe),o2=r=>{let e;return r&&(typeof FormData=="function"&&r instanceof FormData||Ts(r.append)&&((e=Id(r))==="formdata"||e==="object"&&Ts(r.toString)&&r.toString()==="[object FormData]"))},l2=wn("URLSearchParams"),[c2,d2,u2,h2]=["ReadableStream","Request","Response","Headers"].map(wn),f2=r=>r.trim?r.trim():r.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function dl(r,e,{allOwnKeys:t=!1}={}){if(r===null||typeof r>"u")return;let s,i;if(typeof r!="object"&&(r=[r]),Pr(r))for(s=0,i=r.length;s<i;s++)e.call(null,r[s],s,r);else{if(ll(r))return;const o=t?Object.getOwnPropertyNames(r):Object.keys(r),c=o.length;let u;for(s=0;s<c;s++)u=o[s],e.call(null,r[u],u,r)}}function Jb(r,e){if(ll(r))return null;e=e.toLowerCase();const t=Object.keys(r);let s=t.length,i;for(;s-- >0;)if(i=t[s],e===i.toLowerCase())return i;return null}const fa=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,ev=r=>!kr(r)&&r!==fa;function Wf(){const{caseless:r,skipUndefined:e}=ev(this)&&this||{},t={},s=(i,o)=>{const c=r&&Jb(t,o)||o;dd(t[c])&&dd(i)?t[c]=Wf(t[c],i):dd(i)?t[c]=Wf({},i):Pr(i)?t[c]=i.slice():(!e||!kr(i))&&(t[c]=i)};for(let i=0,o=arguments.length;i<o;i++)arguments[i]&&dl(arguments[i],s);return t}const m2=(r,e,t,{allOwnKeys:s}={})=>(dl(e,(i,o)=>{t&&Ts(i)?r[o]=Wb(i,t):r[o]=i},{allOwnKeys:s}),r),p2=r=>(r.charCodeAt(0)===65279&&(r=r.slice(1)),r),g2=(r,e,t,s)=>{r.prototype=Object.create(e.prototype,s),r.prototype.constructor=r,Object.defineProperty(r,"super",{value:e.prototype}),t&&Object.assign(r.prototype,t)},x2=(r,e,t,s)=>{let i,o,c;const u={};if(e=e||{},r==null)return e;do{for(i=Object.getOwnPropertyNames(r),o=i.length;o-- >0;)c=i[o],(!s||s(c,r,e))&&!u[c]&&(e[c]=r[c],u[c]=!0);r=t!==!1&&Em(r)}while(r&&(!t||t(r,e))&&r!==Object.prototype);return e},y2=(r,e,t)=>{r=String(r),(t===void 0||t>r.length)&&(t=r.length),t-=e.length;const s=r.indexOf(e,t);return s!==-1&&s===t},b2=r=>{if(!r)return null;if(Pr(r))return r;let e=r.length;if(!Zb(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=r[e];return t},v2=(r=>e=>r&&e instanceof r)(typeof Uint8Array<"u"&&Em(Uint8Array)),w2=(r,e)=>{const s=(r&&r[Ud]).call(r);let i;for(;(i=s.next())&&!i.done;){const o=i.value;e.call(r,o[0],o[1])}},_2=(r,e)=>{let t;const s=[];for(;(t=r.exec(e))!==null;)s.push(t);return s},A2=wn("HTMLFormElement"),S2=r=>r.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,s,i){return s.toUpperCase()+i}),vy=(({hasOwnProperty:r})=>(e,t)=>r.call(e,t))(Object.prototype),N2=wn("RegExp"),tv=(r,e)=>{const t=Object.getOwnPropertyDescriptors(r),s={};dl(t,(i,o)=>{let c;(c=e(i,o,r))!==!1&&(s[o]=c||i)}),Object.defineProperties(r,s)},E2=r=>{tv(r,(e,t)=>{if(Ts(r)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const s=r[t];if(Ts(s)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},j2=(r,e)=>{const t={},s=i=>{i.forEach(o=>{t[o]=!0})};return Pr(r)?s(r):s(String(r).split(e)),t},C2=()=>{},T2=(r,e)=>r!=null&&Number.isFinite(r=+r)?r:e;function k2(r){return!!(r&&Ts(r.append)&&r[Kb]==="FormData"&&r[Ud])}const R2=r=>{const e=new Array(10),t=(s,i)=>{if(cl(s)){if(e.indexOf(s)>=0)return;if(ll(s))return s;if(!("toJSON"in s)){e[i]=s;const o=Pr(s)?[]:{};return dl(s,(c,u)=>{const h=t(c,i+1);!kr(h)&&(o[u]=h)}),e[i]=void 0,o}}return s};return t(r,0)},D2=wn("AsyncFunction"),M2=r=>r&&(cl(r)||Ts(r))&&Ts(r.then)&&Ts(r.catch),sv=((r,e)=>r?setImmediate:e?((t,s)=>(fa.addEventListener("message",({source:i,data:o})=>{i===fa&&o===t&&s.length&&s.shift()()},!1),i=>{s.push(i),fa.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",Ts(fa.postMessage)),L2=typeof queueMicrotask<"u"?queueMicrotask.bind(fa):typeof process<"u"&&process.nextTick||sv,O2=r=>r!=null&&Ts(r[Ud]),ie={isArray:Pr,isArrayBuffer:Qb,isBuffer:ll,isFormData:o2,isArrayBufferView:ZS,isString:JS,isNumber:Zb,isBoolean:e2,isObject:cl,isPlainObject:dd,isEmptyObject:t2,isReadableStream:c2,isRequest:d2,isResponse:u2,isHeaders:h2,isUndefined:kr,isDate:s2,isFile:n2,isBlob:i2,isRegExp:N2,isFunction:Ts,isStream:r2,isURLSearchParams:l2,isTypedArray:v2,isFileList:a2,forEach:dl,merge:Wf,extend:m2,trim:f2,stripBOM:p2,inherits:g2,toFlatObject:x2,kindOf:Id,kindOfTest:wn,endsWith:y2,toArray:b2,forEachEntry:w2,matchAll:_2,isHTMLForm:A2,hasOwnProperty:vy,hasOwnProp:vy,reduceDescriptors:tv,freezeMethods:E2,toObjectSet:j2,toCamelCase:S2,noop:C2,toFiniteNumber:T2,findKey:Jb,global:fa,isContextDefined:ev,isSpecCompliantForm:k2,toJSONObject:R2,isAsyncFn:D2,isThenable:M2,setImmediate:sv,asap:L2,isIterable:O2};function ke(r,e,t,s,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=r,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),s&&(this.request=s),i&&(this.response=i,this.status=i.status?i.status:null)}ie.inherits(ke,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ie.toJSONObject(this.config),code:this.code,status:this.status}}});const nv=ke.prototype,iv={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(r=>{iv[r]={value:r}});Object.defineProperties(ke,iv);Object.defineProperty(nv,"isAxiosError",{value:!0});ke.from=(r,e,t,s,i,o)=>{const c=Object.create(nv);ie.toFlatObject(r,c,function(f){return f!==Error.prototype},p=>p!=="isAxiosError");const u=r&&r.message?r.message:"Error",h=e==null&&r?r.code:e;return ke.call(c,u,h,t,s,i),r&&c.cause==null&&Object.defineProperty(c,"cause",{value:r,configurable:!0}),c.name=r&&r.name||"Error",o&&Object.assign(c,o),c};const B2=null;function Kf(r){return ie.isPlainObject(r)||ie.isArray(r)}function av(r){return ie.endsWith(r,"[]")?r.slice(0,-2):r}function wy(r,e,t){return r?r.concat(e).map(function(i,o){return i=av(i),!t&&o?"["+i+"]":i}).join(t?".":""):e}function P2(r){return ie.isArray(r)&&!r.some(Kf)}const F2=ie.toFlatObject(ie,{},null,function(e){return/^is[A-Z]/.test(e)});function Hd(r,e,t){if(!ie.isObject(r))throw new TypeError("target must be an object");e=e||new FormData,t=ie.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(_,S){return!ie.isUndefined(S[_])});const s=t.metaTokens,i=t.visitor||f,o=t.dots,c=t.indexes,h=(t.Blob||typeof Blob<"u"&&Blob)&&ie.isSpecCompliantForm(e);if(!ie.isFunction(i))throw new TypeError("visitor must be a function");function p(w){if(w===null)return"";if(ie.isDate(w))return w.toISOString();if(ie.isBoolean(w))return w.toString();if(!h&&ie.isBlob(w))throw new ke("Blob is not supported. Use a Buffer instead.");return ie.isArrayBuffer(w)||ie.isTypedArray(w)?h&&typeof Blob=="function"?new Blob([w]):Buffer.from(w):w}function f(w,_,S){let A=w;if(w&&!S&&typeof w=="object"){if(ie.endsWith(_,"{}"))_=s?_:_.slice(0,-2),w=JSON.stringify(w);else if(ie.isArray(w)&&P2(w)||(ie.isFileList(w)||ie.endsWith(_,"[]"))&&(A=ie.toArray(w)))return _=av(_),A.forEach(function(O,D){!(ie.isUndefined(O)||O===null)&&e.append(c===!0?wy([_],D,o):c===null?_:_+"[]",p(O))}),!1}return Kf(w)?!0:(e.append(wy(S,_,o),p(w)),!1)}const g=[],x=Object.assign(F2,{defaultVisitor:f,convertValue:p,isVisitable:Kf});function b(w,_){if(!ie.isUndefined(w)){if(g.indexOf(w)!==-1)throw Error("Circular reference detected in "+_.join("."));g.push(w),ie.forEach(w,function(A,L){(!(ie.isUndefined(A)||A===null)&&i.call(e,A,ie.isString(L)?L.trim():L,_,x))===!0&&b(A,_?_.concat(L):[L])}),g.pop()}}if(!ie.isObject(r))throw new TypeError("data must be an object");return b(r),e}function _y(r){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(r).replace(/[!'()~]|%20|%00/g,function(s){return e[s]})}function jm(r,e){this._pairs=[],r&&Hd(r,this,e)}const rv=jm.prototype;rv.append=function(e,t){this._pairs.push([e,t])};rv.toString=function(e){const t=e?function(s){return e.call(this,s,_y)}:_y;return this._pairs.map(function(i){return t(i[0])+"="+t(i[1])},"").join("&")};function U2(r){return encodeURIComponent(r).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function ov(r,e,t){if(!e)return r;const s=t&&t.encode||U2;ie.isFunction(t)&&(t={serialize:t});const i=t&&t.serialize;let o;if(i?o=i(e,t):o=ie.isURLSearchParams(e)?e.toString():new jm(e,t).toString(s),o){const c=r.indexOf("#");c!==-1&&(r=r.slice(0,c)),r+=(r.indexOf("?")===-1?"?":"&")+o}return r}class Ay{constructor(){this.handlers=[]}use(e,t,s){return this.handlers.push({fulfilled:e,rejected:t,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){ie.forEach(this.handlers,function(s){s!==null&&e(s)})}}const lv={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},I2=typeof URLSearchParams<"u"?URLSearchParams:jm,z2=typeof FormData<"u"?FormData:null,H2=typeof Blob<"u"?Blob:null,q2={isBrowser:!0,classes:{URLSearchParams:I2,FormData:z2,Blob:H2},protocols:["http","https","file","blob","url","data"]},Cm=typeof window<"u"&&typeof document<"u",Qf=typeof navigator=="object"&&navigator||void 0,V2=Cm&&(!Qf||["ReactNative","NativeScript","NS"].indexOf(Qf.product)<0),G2=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",$2=Cm&&window.location.href||"http://localhost",Y2=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Cm,hasStandardBrowserEnv:V2,hasStandardBrowserWebWorkerEnv:G2,navigator:Qf,origin:$2},Symbol.toStringTag,{value:"Module"})),ds={...Y2,...q2};function X2(r,e){return Hd(r,new ds.classes.URLSearchParams,{visitor:function(t,s,i,o){return ds.isNode&&ie.isBuffer(t)?(this.append(s,t.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)},...e})}function W2(r){return ie.matchAll(/\w+|\[(\w*)]/g,r).map(e=>e[0]==="[]"?"":e[1]||e[0])}function K2(r){const e={},t=Object.keys(r);let s;const i=t.length;let o;for(s=0;s<i;s++)o=t[s],e[o]=r[o];return e}function cv(r){function e(t,s,i,o){let c=t[o++];if(c==="__proto__")return!0;const u=Number.isFinite(+c),h=o>=t.length;return c=!c&&ie.isArray(i)?i.length:c,h?(ie.hasOwnProp(i,c)?i[c]=[i[c],s]:i[c]=s,!u):((!i[c]||!ie.isObject(i[c]))&&(i[c]=[]),e(t,s,i[c],o)&&ie.isArray(i[c])&&(i[c]=K2(i[c])),!u)}if(ie.isFormData(r)&&ie.isFunction(r.entries)){const t={};return ie.forEachEntry(r,(s,i)=>{e(W2(s),i,t,0)}),t}return null}function Q2(r,e,t){if(ie.isString(r))try{return(e||JSON.parse)(r),ie.trim(r)}catch(s){if(s.name!=="SyntaxError")throw s}return(t||JSON.stringify)(r)}const ul={transitional:lv,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const s=t.getContentType()||"",i=s.indexOf("application/json")>-1,o=ie.isObject(e);if(o&&ie.isHTMLForm(e)&&(e=new FormData(e)),ie.isFormData(e))return i?JSON.stringify(cv(e)):e;if(ie.isArrayBuffer(e)||ie.isBuffer(e)||ie.isStream(e)||ie.isFile(e)||ie.isBlob(e)||ie.isReadableStream(e))return e;if(ie.isArrayBufferView(e))return e.buffer;if(ie.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let u;if(o){if(s.indexOf("application/x-www-form-urlencoded")>-1)return X2(e,this.formSerializer).toString();if((u=ie.isFileList(e))||s.indexOf("multipart/form-data")>-1){const h=this.env&&this.env.FormData;return Hd(u?{"files[]":e}:e,h&&new h,this.formSerializer)}}return o||i?(t.setContentType("application/json",!1),Q2(e)):e}],transformResponse:[function(e){const t=this.transitional||ul.transitional,s=t&&t.forcedJSONParsing,i=this.responseType==="json";if(ie.isResponse(e)||ie.isReadableStream(e))return e;if(e&&ie.isString(e)&&(s&&!this.responseType||i)){const c=!(t&&t.silentJSONParsing)&&i;try{return JSON.parse(e,this.parseReviver)}catch(u){if(c)throw u.name==="SyntaxError"?ke.from(u,ke.ERR_BAD_RESPONSE,this,null,this.response):u}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ds.classes.FormData,Blob:ds.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ie.forEach(["delete","get","head","post","put","patch"],r=>{ul.headers[r]={}});const Z2=ie.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),J2=r=>{const e={};let t,s,i;return r&&r.split(`
`).forEach(function(c){i=c.indexOf(":"),t=c.substring(0,i).trim().toLowerCase(),s=c.substring(i+1).trim(),!(!t||e[t]&&Z2[t])&&(t==="set-cookie"?e[t]?e[t].push(s):e[t]=[s]:e[t]=e[t]?e[t]+", "+s:s)}),e},Sy=Symbol("internals");function Po(r){return r&&String(r).trim().toLowerCase()}function ud(r){return r===!1||r==null?r:ie.isArray(r)?r.map(ud):String(r)}function eN(r){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=t.exec(r);)e[s[1]]=s[2];return e}const tN=r=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(r.trim());function kf(r,e,t,s,i){if(ie.isFunction(s))return s.call(this,e,t);if(i&&(e=t),!!ie.isString(e)){if(ie.isString(s))return e.indexOf(s)!==-1;if(ie.isRegExp(s))return s.test(e)}}function sN(r){return r.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,s)=>t.toUpperCase()+s)}function nN(r,e){const t=ie.toCamelCase(" "+e);["get","set","has"].forEach(s=>{Object.defineProperty(r,s+t,{value:function(i,o,c){return this[s].call(this,e,i,o,c)},configurable:!0})})}let ks=class{constructor(e){e&&this.set(e)}set(e,t,s){const i=this;function o(u,h,p){const f=Po(h);if(!f)throw new Error("header name must be a non-empty string");const g=ie.findKey(i,f);(!g||i[g]===void 0||p===!0||p===void 0&&i[g]!==!1)&&(i[g||h]=ud(u))}const c=(u,h)=>ie.forEach(u,(p,f)=>o(p,f,h));if(ie.isPlainObject(e)||e instanceof this.constructor)c(e,t);else if(ie.isString(e)&&(e=e.trim())&&!tN(e))c(J2(e),t);else if(ie.isObject(e)&&ie.isIterable(e)){let u={},h,p;for(const f of e){if(!ie.isArray(f))throw TypeError("Object iterator must return a key-value pair");u[p=f[0]]=(h=u[p])?ie.isArray(h)?[...h,f[1]]:[h,f[1]]:f[1]}c(u,t)}else e!=null&&o(t,e,s);return this}get(e,t){if(e=Po(e),e){const s=ie.findKey(this,e);if(s){const i=this[s];if(!t)return i;if(t===!0)return eN(i);if(ie.isFunction(t))return t.call(this,i,s);if(ie.isRegExp(t))return t.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Po(e),e){const s=ie.findKey(this,e);return!!(s&&this[s]!==void 0&&(!t||kf(this,this[s],s,t)))}return!1}delete(e,t){const s=this;let i=!1;function o(c){if(c=Po(c),c){const u=ie.findKey(s,c);u&&(!t||kf(s,s[u],u,t))&&(delete s[u],i=!0)}}return ie.isArray(e)?e.forEach(o):o(e),i}clear(e){const t=Object.keys(this);let s=t.length,i=!1;for(;s--;){const o=t[s];(!e||kf(this,this[o],o,e,!0))&&(delete this[o],i=!0)}return i}normalize(e){const t=this,s={};return ie.forEach(this,(i,o)=>{const c=ie.findKey(s,o);if(c){t[c]=ud(i),delete t[o];return}const u=e?sN(o):String(o).trim();u!==o&&delete t[o],t[u]=ud(i),s[u]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return ie.forEach(this,(s,i)=>{s!=null&&s!==!1&&(t[i]=e&&ie.isArray(s)?s.join(", "):s)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const s=new this(e);return t.forEach(i=>s.set(i)),s}static accessor(e){const s=(this[Sy]=this[Sy]={accessors:{}}).accessors,i=this.prototype;function o(c){const u=Po(c);s[u]||(nN(i,c),s[u]=!0)}return ie.isArray(e)?e.forEach(o):o(e),this}};ks.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ie.reduceDescriptors(ks.prototype,({value:r},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>r,set(s){this[t]=s}}});ie.freezeMethods(ks);function Rf(r,e){const t=this||ul,s=e||t,i=ks.from(s.headers);let o=s.data;return ie.forEach(r,function(u){o=u.call(t,o,i.normalize(),e?e.status:void 0)}),i.normalize(),o}function dv(r){return!!(r&&r.__CANCEL__)}function Fr(r,e,t){ke.call(this,r??"canceled",ke.ERR_CANCELED,e,t),this.name="CanceledError"}ie.inherits(Fr,ke,{__CANCEL__:!0});function uv(r,e,t){const s=t.config.validateStatus;!t.status||!s||s(t.status)?r(t):e(new ke("Request failed with status code "+t.status,[ke.ERR_BAD_REQUEST,ke.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function iN(r){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(r);return e&&e[1]||""}function aN(r,e){r=r||10;const t=new Array(r),s=new Array(r);let i=0,o=0,c;return e=e!==void 0?e:1e3,function(h){const p=Date.now(),f=s[o];c||(c=p),t[i]=h,s[i]=p;let g=o,x=0;for(;g!==i;)x+=t[g++],g=g%r;if(i=(i+1)%r,i===o&&(o=(o+1)%r),p-c<e)return;const b=f&&p-f;return b?Math.round(x*1e3/b):void 0}}function rN(r,e){let t=0,s=1e3/e,i,o;const c=(p,f=Date.now())=>{t=f,i=null,o&&(clearTimeout(o),o=null),r(...p)};return[(...p)=>{const f=Date.now(),g=f-t;g>=s?c(p,f):(i=p,o||(o=setTimeout(()=>{o=null,c(i)},s-g)))},()=>i&&c(i)]}const _d=(r,e,t=3)=>{let s=0;const i=aN(50,250);return rN(o=>{const c=o.loaded,u=o.lengthComputable?o.total:void 0,h=c-s,p=i(h),f=c<=u;s=c;const g={loaded:c,total:u,progress:u?c/u:void 0,bytes:h,rate:p||void 0,estimated:p&&u&&f?(u-c)/p:void 0,event:o,lengthComputable:u!=null,[e?"download":"upload"]:!0};r(g)},t)},Ny=(r,e)=>{const t=r!=null;return[s=>e[0]({lengthComputable:t,total:r,loaded:s}),e[1]]},Ey=r=>(...e)=>ie.asap(()=>r(...e)),oN=ds.hasStandardBrowserEnv?((r,e)=>t=>(t=new URL(t,ds.origin),r.protocol===t.protocol&&r.host===t.host&&(e||r.port===t.port)))(new URL(ds.origin),ds.navigator&&/(msie|trident)/i.test(ds.navigator.userAgent)):()=>!0,lN=ds.hasStandardBrowserEnv?{write(r,e,t,s,i,o,c){if(typeof document>"u")return;const u=[`${r}=${encodeURIComponent(e)}`];ie.isNumber(t)&&u.push(`expires=${new Date(t).toUTCString()}`),ie.isString(s)&&u.push(`path=${s}`),ie.isString(i)&&u.push(`domain=${i}`),o===!0&&u.push("secure"),ie.isString(c)&&u.push(`SameSite=${c}`),document.cookie=u.join("; ")},read(r){if(typeof document>"u")return null;const e=document.cookie.match(new RegExp("(?:^|; )"+r+"=([^;]*)"));return e?decodeURIComponent(e[1]):null},remove(r){this.write(r,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function cN(r){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(r)}function dN(r,e){return e?r.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):r}function hv(r,e,t){let s=!cN(e);return r&&(s||t==!1)?dN(r,e):e}const jy=r=>r instanceof ks?{...r}:r;function va(r,e){e=e||{};const t={};function s(p,f,g,x){return ie.isPlainObject(p)&&ie.isPlainObject(f)?ie.merge.call({caseless:x},p,f):ie.isPlainObject(f)?ie.merge({},f):ie.isArray(f)?f.slice():f}function i(p,f,g,x){if(ie.isUndefined(f)){if(!ie.isUndefined(p))return s(void 0,p,g,x)}else return s(p,f,g,x)}function o(p,f){if(!ie.isUndefined(f))return s(void 0,f)}function c(p,f){if(ie.isUndefined(f)){if(!ie.isUndefined(p))return s(void 0,p)}else return s(void 0,f)}function u(p,f,g){if(g in e)return s(p,f);if(g in r)return s(void 0,p)}const h={url:o,method:o,data:o,baseURL:c,transformRequest:c,transformResponse:c,paramsSerializer:c,timeout:c,timeoutMessage:c,withCredentials:c,withXSRFToken:c,adapter:c,responseType:c,xsrfCookieName:c,xsrfHeaderName:c,onUploadProgress:c,onDownloadProgress:c,decompress:c,maxContentLength:c,maxBodyLength:c,beforeRedirect:c,transport:c,httpAgent:c,httpsAgent:c,cancelToken:c,socketPath:c,responseEncoding:c,validateStatus:u,headers:(p,f,g)=>i(jy(p),jy(f),g,!0)};return ie.forEach(Object.keys({...r,...e}),function(f){const g=h[f]||i,x=g(r[f],e[f],f);ie.isUndefined(x)&&g!==u||(t[f]=x)}),t}const fv=r=>{const e=va({},r);let{data:t,withXSRFToken:s,xsrfHeaderName:i,xsrfCookieName:o,headers:c,auth:u}=e;if(e.headers=c=ks.from(c),e.url=ov(hv(e.baseURL,e.url,e.allowAbsoluteUrls),r.params,r.paramsSerializer),u&&c.set("Authorization","Basic "+btoa((u.username||"")+":"+(u.password?unescape(encodeURIComponent(u.password)):""))),ie.isFormData(t)){if(ds.hasStandardBrowserEnv||ds.hasStandardBrowserWebWorkerEnv)c.setContentType(void 0);else if(ie.isFunction(t.getHeaders)){const h=t.getHeaders(),p=["content-type","content-length"];Object.entries(h).forEach(([f,g])=>{p.includes(f.toLowerCase())&&c.set(f,g)})}}if(ds.hasStandardBrowserEnv&&(s&&ie.isFunction(s)&&(s=s(e)),s||s!==!1&&oN(e.url))){const h=i&&o&&lN.read(o);h&&c.set(i,h)}return e},uN=typeof XMLHttpRequest<"u",hN=uN&&function(r){return new Promise(function(t,s){const i=fv(r);let o=i.data;const c=ks.from(i.headers).normalize();let{responseType:u,onUploadProgress:h,onDownloadProgress:p}=i,f,g,x,b,w;function _(){b&&b(),w&&w(),i.cancelToken&&i.cancelToken.unsubscribe(f),i.signal&&i.signal.removeEventListener("abort",f)}let S=new XMLHttpRequest;S.open(i.method.toUpperCase(),i.url,!0),S.timeout=i.timeout;function A(){if(!S)return;const O=ks.from("getAllResponseHeaders"in S&&S.getAllResponseHeaders()),I={data:!u||u==="text"||u==="json"?S.responseText:S.response,status:S.status,statusText:S.statusText,headers:O,config:r,request:S};uv(function(P){t(P),_()},function(P){s(P),_()},I),S=null}"onloadend"in S?S.onloadend=A:S.onreadystatechange=function(){!S||S.readyState!==4||S.status===0&&!(S.responseURL&&S.responseURL.indexOf("file:")===0)||setTimeout(A)},S.onabort=function(){S&&(s(new ke("Request aborted",ke.ECONNABORTED,r,S)),S=null)},S.onerror=function(D){const I=D&&D.message?D.message:"Network Error",C=new ke(I,ke.ERR_NETWORK,r,S);C.event=D||null,s(C),S=null},S.ontimeout=function(){let D=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const I=i.transitional||lv;i.timeoutErrorMessage&&(D=i.timeoutErrorMessage),s(new ke(D,I.clarifyTimeoutError?ke.ETIMEDOUT:ke.ECONNABORTED,r,S)),S=null},o===void 0&&c.setContentType(null),"setRequestHeader"in S&&ie.forEach(c.toJSON(),function(D,I){S.setRequestHeader(I,D)}),ie.isUndefined(i.withCredentials)||(S.withCredentials=!!i.withCredentials),u&&u!=="json"&&(S.responseType=i.responseType),p&&([x,w]=_d(p,!0),S.addEventListener("progress",x)),h&&S.upload&&([g,b]=_d(h),S.upload.addEventListener("progress",g),S.upload.addEventListener("loadend",b)),(i.cancelToken||i.signal)&&(f=O=>{S&&(s(!O||O.type?new Fr(null,r,S):O),S.abort(),S=null)},i.cancelToken&&i.cancelToken.subscribe(f),i.signal&&(i.signal.aborted?f():i.signal.addEventListener("abort",f)));const L=iN(i.url);if(L&&ds.protocols.indexOf(L)===-1){s(new ke("Unsupported protocol "+L+":",ke.ERR_BAD_REQUEST,r));return}S.send(o||null)})},fN=(r,e)=>{const{length:t}=r=r?r.filter(Boolean):[];if(e||t){let s=new AbortController,i;const o=function(p){if(!i){i=!0,u();const f=p instanceof Error?p:this.reason;s.abort(f instanceof ke?f:new Fr(f instanceof Error?f.message:f))}};let c=e&&setTimeout(()=>{c=null,o(new ke(`timeout ${e} of ms exceeded`,ke.ETIMEDOUT))},e);const u=()=>{r&&(c&&clearTimeout(c),c=null,r.forEach(p=>{p.unsubscribe?p.unsubscribe(o):p.removeEventListener("abort",o)}),r=null)};r.forEach(p=>p.addEventListener("abort",o));const{signal:h}=s;return h.unsubscribe=()=>ie.asap(u),h}},mN=function*(r,e){let t=r.byteLength;if(t<e){yield r;return}let s=0,i;for(;s<t;)i=s+e,yield r.slice(s,i),s=i},pN=async function*(r,e){for await(const t of gN(r))yield*mN(t,e)},gN=async function*(r){if(r[Symbol.asyncIterator]){yield*r;return}const e=r.getReader();try{for(;;){const{done:t,value:s}=await e.read();if(t)break;yield s}}finally{await e.cancel()}},Cy=(r,e,t,s)=>{const i=pN(r,e);let o=0,c,u=h=>{c||(c=!0,s&&s(h))};return new ReadableStream({async pull(h){try{const{done:p,value:f}=await i.next();if(p){u(),h.close();return}let g=f.byteLength;if(t){let x=o+=g;t(x)}h.enqueue(new Uint8Array(f))}catch(p){throw u(p),p}},cancel(h){return u(h),i.return()}},{highWaterMark:2})},Ty=64*1024,{isFunction:Ic}=ie,xN=(({Request:r,Response:e})=>({Request:r,Response:e}))(ie.global),{ReadableStream:ky,TextEncoder:Ry}=ie.global,Dy=(r,...e)=>{try{return!!r(...e)}catch{return!1}},yN=r=>{r=ie.merge.call({skipUndefined:!0},xN,r);const{fetch:e,Request:t,Response:s}=r,i=e?Ic(e):typeof fetch=="function",o=Ic(t),c=Ic(s);if(!i)return!1;const u=i&&Ic(ky),h=i&&(typeof Ry=="function"?(w=>_=>w.encode(_))(new Ry):async w=>new Uint8Array(await new t(w).arrayBuffer())),p=o&&u&&Dy(()=>{let w=!1;const _=new t(ds.origin,{body:new ky,method:"POST",get duplex(){return w=!0,"half"}}).headers.has("Content-Type");return w&&!_}),f=c&&u&&Dy(()=>ie.isReadableStream(new s("").body)),g={stream:f&&(w=>w.body)};i&&["text","arrayBuffer","blob","formData","stream"].forEach(w=>{!g[w]&&(g[w]=(_,S)=>{let A=_&&_[w];if(A)return A.call(_);throw new ke(`Response type '${w}' is not supported`,ke.ERR_NOT_SUPPORT,S)})});const x=async w=>{if(w==null)return 0;if(ie.isBlob(w))return w.size;if(ie.isSpecCompliantForm(w))return(await new t(ds.origin,{method:"POST",body:w}).arrayBuffer()).byteLength;if(ie.isArrayBufferView(w)||ie.isArrayBuffer(w))return w.byteLength;if(ie.isURLSearchParams(w)&&(w=w+""),ie.isString(w))return(await h(w)).byteLength},b=async(w,_)=>{const S=ie.toFiniteNumber(w.getContentLength());return S??x(_)};return async w=>{let{url:_,method:S,data:A,signal:L,cancelToken:O,timeout:D,onDownloadProgress:I,onUploadProgress:C,responseType:P,headers:k,withCredentials:N="same-origin",fetchOptions:M}=fv(w),H=e||fetch;P=P?(P+"").toLowerCase():"text";let F=fN([L,O&&O.toAbortSignal()],D),V=null;const q=F&&F.unsubscribe&&(()=>{F.unsubscribe()});let z;try{if(C&&p&&S!=="get"&&S!=="head"&&(z=await b(k,A))!==0){let B=new t(_,{method:"POST",body:A,duplex:"half"}),$;if(ie.isFormData(A)&&($=B.headers.get("content-type"))&&k.setContentType($),B.body){const[K,Q]=Ny(z,_d(Ey(C)));A=Cy(B.body,Ty,K,Q)}}ie.isString(N)||(N=N?"include":"omit");const E=o&&"credentials"in t.prototype,j={...M,signal:F,method:S.toUpperCase(),headers:k.normalize().toJSON(),body:A,duplex:"half",credentials:E?N:void 0};V=o&&new t(_,j);let G=await(o?H(V,M):H(_,j));const Y=f&&(P==="stream"||P==="response");if(f&&(I||Y&&q)){const B={};["status","statusText","headers"].forEach(Z=>{B[Z]=G[Z]});const $=ie.toFiniteNumber(G.headers.get("content-length")),[K,Q]=I&&Ny($,_d(Ey(I),!0))||[];G=new s(Cy(G.body,Ty,K,()=>{Q&&Q(),q&&q()}),B)}P=P||"text";let ee=await g[ie.findKey(g,P)||"text"](G,w);return!Y&&q&&q(),await new Promise((B,$)=>{uv(B,$,{data:ee,headers:ks.from(G.headers),status:G.status,statusText:G.statusText,config:w,request:V})})}catch(E){throw q&&q(),E&&E.name==="TypeError"&&/Load failed|fetch/i.test(E.message)?Object.assign(new ke("Network Error",ke.ERR_NETWORK,w,V),{cause:E.cause||E}):ke.from(E,E&&E.code,w,V)}}},bN=new Map,mv=r=>{let e=r&&r.env||{};const{fetch:t,Request:s,Response:i}=e,o=[s,i,t];let c=o.length,u=c,h,p,f=bN;for(;u--;)h=o[u],p=f.get(h),p===void 0&&f.set(h,p=u?new Map:yN(e)),f=p;return p};mv();const Tm={http:B2,xhr:hN,fetch:{get:mv}};ie.forEach(Tm,(r,e)=>{if(r){try{Object.defineProperty(r,"name",{value:e})}catch{}Object.defineProperty(r,"adapterName",{value:e})}});const My=r=>`- ${r}`,vN=r=>ie.isFunction(r)||r===null||r===!1;function wN(r,e){r=ie.isArray(r)?r:[r];const{length:t}=r;let s,i;const o={};for(let c=0;c<t;c++){s=r[c];let u;if(i=s,!vN(s)&&(i=Tm[(u=String(s)).toLowerCase()],i===void 0))throw new ke(`Unknown adapter '${u}'`);if(i&&(ie.isFunction(i)||(i=i.get(e))))break;o[u||"#"+c]=i}if(!i){const c=Object.entries(o).map(([h,p])=>`adapter ${h} `+(p===!1?"is not supported by the environment":"is not available in the build"));let u=t?c.length>1?`since :
`+c.map(My).join(`
`):" "+My(c[0]):"as no adapter specified";throw new ke("There is no suitable adapter to dispatch the request "+u,"ERR_NOT_SUPPORT")}return i}const pv={getAdapter:wN,adapters:Tm};function Df(r){if(r.cancelToken&&r.cancelToken.throwIfRequested(),r.signal&&r.signal.aborted)throw new Fr(null,r)}function Ly(r){return Df(r),r.headers=ks.from(r.headers),r.data=Rf.call(r,r.transformRequest),["post","put","patch"].indexOf(r.method)!==-1&&r.headers.setContentType("application/x-www-form-urlencoded",!1),pv.getAdapter(r.adapter||ul.adapter,r)(r).then(function(s){return Df(r),s.data=Rf.call(r,r.transformResponse,s),s.headers=ks.from(s.headers),s},function(s){return dv(s)||(Df(r),s&&s.response&&(s.response.data=Rf.call(r,r.transformResponse,s.response),s.response.headers=ks.from(s.response.headers))),Promise.reject(s)})}const gv="1.13.2",qd={};["object","boolean","number","function","string","symbol"].forEach((r,e)=>{qd[r]=function(s){return typeof s===r||"a"+(e<1?"n ":" ")+r}});const Oy={};qd.transitional=function(e,t,s){function i(o,c){return"[Axios v"+gv+"] Transitional option '"+o+"'"+c+(s?". "+s:"")}return(o,c,u)=>{if(e===!1)throw new ke(i(c," has been removed"+(t?" in "+t:"")),ke.ERR_DEPRECATED);return t&&!Oy[c]&&(Oy[c]=!0,console.warn(i(c," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(o,c,u):!0}};qd.spelling=function(e){return(t,s)=>(console.warn(`${s} is likely a misspelling of ${e}`),!0)};function _N(r,e,t){if(typeof r!="object")throw new ke("options must be an object",ke.ERR_BAD_OPTION_VALUE);const s=Object.keys(r);let i=s.length;for(;i-- >0;){const o=s[i],c=e[o];if(c){const u=r[o],h=u===void 0||c(u,o,r);if(h!==!0)throw new ke("option "+o+" must be "+h,ke.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new ke("Unknown option "+o,ke.ERR_BAD_OPTION)}}const hd={assertOptions:_N,validators:qd},Dn=hd.validators;let ba=class{constructor(e){this.defaults=e||{},this.interceptors={request:new Ay,response:new Ay}}async request(e,t){try{return await this._request(e,t)}catch(s){if(s instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const o=i.stack?i.stack.replace(/^.+\n/,""):"";try{s.stack?o&&!String(s.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+o):s.stack=o}catch{}}throw s}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=va(this.defaults,t);const{transitional:s,paramsSerializer:i,headers:o}=t;s!==void 0&&hd.assertOptions(s,{silentJSONParsing:Dn.transitional(Dn.boolean),forcedJSONParsing:Dn.transitional(Dn.boolean),clarifyTimeoutError:Dn.transitional(Dn.boolean)},!1),i!=null&&(ie.isFunction(i)?t.paramsSerializer={serialize:i}:hd.assertOptions(i,{encode:Dn.function,serialize:Dn.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),hd.assertOptions(t,{baseUrl:Dn.spelling("baseURL"),withXsrfToken:Dn.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let c=o&&ie.merge(o.common,o[t.method]);o&&ie.forEach(["delete","get","head","post","put","patch","common"],w=>{delete o[w]}),t.headers=ks.concat(c,o);const u=[];let h=!0;this.interceptors.request.forEach(function(_){typeof _.runWhen=="function"&&_.runWhen(t)===!1||(h=h&&_.synchronous,u.unshift(_.fulfilled,_.rejected))});const p=[];this.interceptors.response.forEach(function(_){p.push(_.fulfilled,_.rejected)});let f,g=0,x;if(!h){const w=[Ly.bind(this),void 0];for(w.unshift(...u),w.push(...p),x=w.length,f=Promise.resolve(t);g<x;)f=f.then(w[g++],w[g++]);return f}x=u.length;let b=t;for(;g<x;){const w=u[g++],_=u[g++];try{b=w(b)}catch(S){_.call(this,S);break}}try{f=Ly.call(this,b)}catch(w){return Promise.reject(w)}for(g=0,x=p.length;g<x;)f=f.then(p[g++],p[g++]);return f}getUri(e){e=va(this.defaults,e);const t=hv(e.baseURL,e.url,e.allowAbsoluteUrls);return ov(t,e.params,e.paramsSerializer)}};ie.forEach(["delete","get","head","options"],function(e){ba.prototype[e]=function(t,s){return this.request(va(s||{},{method:e,url:t,data:(s||{}).data}))}});ie.forEach(["post","put","patch"],function(e){function t(s){return function(o,c,u){return this.request(va(u||{},{method:e,headers:s?{"Content-Type":"multipart/form-data"}:{},url:o,data:c}))}}ba.prototype[e]=t(),ba.prototype[e+"Form"]=t(!0)});let AN=class xv{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(o){t=o});const s=this;this.promise.then(i=>{if(!s._listeners)return;let o=s._listeners.length;for(;o-- >0;)s._listeners[o](i);s._listeners=null}),this.promise.then=i=>{let o;const c=new Promise(u=>{s.subscribe(u),o=u}).then(i);return c.cancel=function(){s.unsubscribe(o)},c},e(function(o,c,u){s.reason||(s.reason=new Fr(o,c,u),t(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=s=>{e.abort(s)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new xv(function(i){e=i}),cancel:e}}};function SN(r){return function(t){return r.apply(null,t)}}function NN(r){return ie.isObject(r)&&r.isAxiosError===!0}const Zf={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(Zf).forEach(([r,e])=>{Zf[e]=r});function yv(r){const e=new ba(r),t=Wb(ba.prototype.request,e);return ie.extend(t,ba.prototype,e,{allOwnKeys:!0}),ie.extend(t,e,null,{allOwnKeys:!0}),t.create=function(i){return yv(va(r,i))},t}const Dt=yv(ul);Dt.Axios=ba;Dt.CanceledError=Fr;Dt.CancelToken=AN;Dt.isCancel=dv;Dt.VERSION=gv;Dt.toFormData=Hd;Dt.AxiosError=ke;Dt.Cancel=Dt.CanceledError;Dt.all=function(e){return Promise.all(e)};Dt.spread=SN;Dt.isAxiosError=NN;Dt.mergeConfig=va;Dt.AxiosHeaders=ks;Dt.formToJSON=r=>cv(ie.isHTMLForm(r)?new FormData(r):r);Dt.getAdapter=pv.getAdapter;Dt.HttpStatusCode=Zf;Dt.default=Dt;const{Axios:jk,AxiosError:Ck,CanceledError:Tk,isCancel:kk,CancelToken:Rk,VERSION:Dk,all:Mk,Cancel:Lk,isAxiosError:Ok,spread:Bk,toFormData:Pk,AxiosHeaders:Fk,HttpStatusCode:Uk,formToJSON:Ik,getAdapter:zk,mergeConfig:Hk}=Dt,Ad="https://school.superwingrouplivestock.farm/api",oe=Dt.create({baseURL:Ad,headers:{Accept:"application/json"}});oe.interceptors.request.use(r=>{if(r.url&&r.url.includes("/admin/")&&!r.url.includes("/admin/login")){const e=localStorage.getItem("admin_token");e&&(r.headers.Authorization=`Bearer ${e}`)}if(r.url&&(r.url.includes("/public/profile")||r.url.includes("/public/logout")||r.url.includes("/public/chat/"))){const e=localStorage.getItem("public_token");e&&(r.headers.Authorization=`Bearer ${e}`)}return r.data instanceof FormData||(r.headers["Content-Type"]="application/json"),r},r=>Promise.reject(r));oe.interceptors.response.use(r=>r,r=>(r.response?.status===401&&(localStorage.removeItem("admin_token"),localStorage.removeItem("admin_user"),window.location.href="/admin/login"),Promise.reject(r)));const xr={login:async r=>{const e=await oe.post("/admin/login",r);return e.data.token&&(localStorage.setItem("admin_token",e.data.token),localStorage.setItem("admin_user",JSON.stringify(e.data.user))),e.data},logout:()=>{localStorage.removeItem("admin_token"),localStorage.removeItem("admin_user")},getCurrentUser:()=>{const r=localStorage.getItem("admin_user");return r?JSON.parse(r):null},isAuthenticated:()=>!!localStorage.getItem("admin_token"),checkAdmin:async()=>(await oe.get("/admin/check")).data,getProfile:async()=>(await oe.get("/admin/profile")).data,updateProfile:async r=>{const e=await oe.put("/admin/profile",r);return e.data.user&&localStorage.setItem("admin_user",JSON.stringify(e.data.user)),e.data},changePassword:async r=>(await oe.post("/admin/change-password",r)).data},bv=R.createContext(null),EN=({children:r})=>{const[e,t]=R.useState(null),[s,i]=R.useState(!0);R.useEffect(()=>{const p=xr.getCurrentUser();p&&xr.isAuthenticated()&&t(p),i(!1)},[]);const h={user:e,login:async p=>{try{const f=await xr.login(p);return t(f.user),f}catch(f){throw f}},logout:()=>{xr.logout(),t(null)},setUser:p=>{t(p),p&&localStorage.setItem("admin_user",JSON.stringify(p))},isAuthenticated:!!e,loading:s};return l.jsx(bv.Provider,{value:h,children:r})},hl=()=>{const r=R.useContext(bv);if(!r)throw new Error("useAuth must be used within AuthProvider");return r},Hn=Object.create(null);Hn.open="0";Hn.close="1";Hn.ping="2";Hn.pong="3";Hn.message="4";Hn.upgrade="5";Hn.noop="6";const fd=Object.create(null);Object.keys(Hn).forEach(r=>{fd[Hn[r]]=r});const Jf={type:"error",data:"parser error"},vv=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",wv=typeof ArrayBuffer=="function",_v=r=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(r):r&&r.buffer instanceof ArrayBuffer,km=({type:r,data:e},t,s)=>vv&&e instanceof Blob?t?s(e):By(e,s):wv&&(e instanceof ArrayBuffer||_v(e))?t?s(e):By(new Blob([e]),s):s(Hn[r]+(e||"")),By=(r,e)=>{const t=new FileReader;return t.onload=function(){const s=t.result.split(",")[1];e("b"+(s||""))},t.readAsDataURL(r)};function Py(r){return r instanceof Uint8Array?r:r instanceof ArrayBuffer?new Uint8Array(r):new Uint8Array(r.buffer,r.byteOffset,r.byteLength)}let Mf;function jN(r,e){if(vv&&r.data instanceof Blob)return r.data.arrayBuffer().then(Py).then(e);if(wv&&(r.data instanceof ArrayBuffer||_v(r.data)))return e(Py(r.data));km(r,!1,t=>{Mf||(Mf=new TextEncoder),e(Mf.encode(t))})}const Fy="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",qo=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let r=0;r<Fy.length;r++)qo[Fy.charCodeAt(r)]=r;const CN=r=>{let e=r.length*.75,t=r.length,s,i=0,o,c,u,h;r[r.length-1]==="="&&(e--,r[r.length-2]==="="&&e--);const p=new ArrayBuffer(e),f=new Uint8Array(p);for(s=0;s<t;s+=4)o=qo[r.charCodeAt(s)],c=qo[r.charCodeAt(s+1)],u=qo[r.charCodeAt(s+2)],h=qo[r.charCodeAt(s+3)],f[i++]=o<<2|c>>4,f[i++]=(c&15)<<4|u>>2,f[i++]=(u&3)<<6|h&63;return p},TN=typeof ArrayBuffer=="function",Rm=(r,e)=>{if(typeof r!="string")return{type:"message",data:Av(r,e)};const t=r.charAt(0);return t==="b"?{type:"message",data:kN(r.substring(1),e)}:fd[t]?r.length>1?{type:fd[t],data:r.substring(1)}:{type:fd[t]}:Jf},kN=(r,e)=>{if(TN){const t=CN(r);return Av(t,e)}else return{base64:!0,data:r}},Av=(r,e)=>e==="blob"?r instanceof Blob?r:new Blob([r]):r instanceof ArrayBuffer?r:r.buffer,Sv="",RN=(r,e)=>{const t=r.length,s=new Array(t);let i=0;r.forEach((o,c)=>{km(o,!1,u=>{s[c]=u,++i===t&&e(s.join(Sv))})})},DN=(r,e)=>{const t=r.split(Sv),s=[];for(let i=0;i<t.length;i++){const o=Rm(t[i],e);if(s.push(o),o.type==="error")break}return s};function MN(){return new TransformStream({transform(r,e){jN(r,t=>{const s=t.length;let i;if(s<126)i=new Uint8Array(1),new DataView(i.buffer).setUint8(0,s);else if(s<65536){i=new Uint8Array(3);const o=new DataView(i.buffer);o.setUint8(0,126),o.setUint16(1,s)}else{i=new Uint8Array(9);const o=new DataView(i.buffer);o.setUint8(0,127),o.setBigUint64(1,BigInt(s))}r.data&&typeof r.data!="string"&&(i[0]|=128),e.enqueue(i),e.enqueue(t)})}})}let Lf;function zc(r){return r.reduce((e,t)=>e+t.length,0)}function Hc(r,e){if(r[0].length===e)return r.shift();const t=new Uint8Array(e);let s=0;for(let i=0;i<e;i++)t[i]=r[0][s++],s===r[0].length&&(r.shift(),s=0);return r.length&&s<r[0].length&&(r[0]=r[0].slice(s)),t}function LN(r,e){Lf||(Lf=new TextDecoder);const t=[];let s=0,i=-1,o=!1;return new TransformStream({transform(c,u){for(t.push(c);;){if(s===0){if(zc(t)<1)break;const h=Hc(t,1);o=(h[0]&128)===128,i=h[0]&127,i<126?s=3:i===126?s=1:s=2}else if(s===1){if(zc(t)<2)break;const h=Hc(t,2);i=new DataView(h.buffer,h.byteOffset,h.length).getUint16(0),s=3}else if(s===2){if(zc(t)<8)break;const h=Hc(t,8),p=new DataView(h.buffer,h.byteOffset,h.length),f=p.getUint32(0);if(f>Math.pow(2,21)-1){u.enqueue(Jf);break}i=f*Math.pow(2,32)+p.getUint32(4),s=3}else{if(zc(t)<i)break;const h=Hc(t,i);u.enqueue(Rm(o?h:Lf.decode(h),e)),s=0}if(i===0||i>r){u.enqueue(Jf);break}}}})}const Nv=4;function Ut(r){if(r)return ON(r)}function ON(r){for(var e in Ut.prototype)r[e]=Ut.prototype[e];return r}Ut.prototype.on=Ut.prototype.addEventListener=function(r,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+r]=this._callbacks["$"+r]||[]).push(e),this};Ut.prototype.once=function(r,e){function t(){this.off(r,t),e.apply(this,arguments)}return t.fn=e,this.on(r,t),this};Ut.prototype.off=Ut.prototype.removeListener=Ut.prototype.removeAllListeners=Ut.prototype.removeEventListener=function(r,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var t=this._callbacks["$"+r];if(!t)return this;if(arguments.length==1)return delete this._callbacks["$"+r],this;for(var s,i=0;i<t.length;i++)if(s=t[i],s===e||s.fn===e){t.splice(i,1);break}return t.length===0&&delete this._callbacks["$"+r],this};Ut.prototype.emit=function(r){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),t=this._callbacks["$"+r],s=1;s<arguments.length;s++)e[s-1]=arguments[s];if(t){t=t.slice(0);for(var s=0,i=t.length;s<i;++s)t[s].apply(this,e)}return this};Ut.prototype.emitReserved=Ut.prototype.emit;Ut.prototype.listeners=function(r){return this._callbacks=this._callbacks||{},this._callbacks["$"+r]||[]};Ut.prototype.hasListeners=function(r){return!!this.listeners(r).length};const Vd=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,t)=>t(e,0),rn=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),BN="arraybuffer";function Ev(r,...e){return e.reduce((t,s)=>(r.hasOwnProperty(s)&&(t[s]=r[s]),t),{})}const PN=rn.setTimeout,FN=rn.clearTimeout;function Gd(r,e){e.useNativeTimers?(r.setTimeoutFn=PN.bind(rn),r.clearTimeoutFn=FN.bind(rn)):(r.setTimeoutFn=rn.setTimeout.bind(rn),r.clearTimeoutFn=rn.clearTimeout.bind(rn))}const UN=1.33;function IN(r){return typeof r=="string"?zN(r):Math.ceil((r.byteLength||r.size)*UN)}function zN(r){let e=0,t=0;for(let s=0,i=r.length;s<i;s++)e=r.charCodeAt(s),e<128?t+=1:e<2048?t+=2:e<55296||e>=57344?t+=3:(s++,t+=4);return t}function jv(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function HN(r){let e="";for(let t in r)r.hasOwnProperty(t)&&(e.length&&(e+="&"),e+=encodeURIComponent(t)+"="+encodeURIComponent(r[t]));return e}function qN(r){let e={},t=r.split("&");for(let s=0,i=t.length;s<i;s++){let o=t[s].split("=");e[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return e}class VN extends Error{constructor(e,t,s){super(e),this.description=t,this.context=s,this.type="TransportError"}}class Dm extends Ut{constructor(e){super(),this.writable=!1,Gd(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,t,s){return super.emitReserved("error",new VN(e,t,s)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const t=Rm(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,t={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(t)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const t=HN(e);return t.length?"?"+t:""}}class GN extends Dm{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const t=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let s=0;this._polling&&(s++,this.once("pollComplete",function(){--s||t()})),this.writable||(s++,this.once("drain",function(){--s||t()}))}else t()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const t=s=>{if(this.readyState==="opening"&&s.type==="open"&&this.onOpen(),s.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(s)};DN(e,this.socket.binaryType).forEach(t),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,RN(e,t=>{this.doWrite(t,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",t=this.query||{};return this.opts.timestampRequests!==!1&&(t[this.opts.timestampParam]=jv()),!this.supportsBinary&&!t.sid&&(t.b64=1),this.createUri(e,t)}}let Cv=!1;try{Cv=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const $N=Cv;function YN(){}class XN extends GN{constructor(e){if(super(e),typeof location<"u"){const t=location.protocol==="https:";let s=location.port;s||(s=t?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||s!==e.port}}doWrite(e,t){const s=this.request({method:"POST",data:e});s.on("success",t),s.on("error",(i,o)=>{this.onError("xhr post error",i,o)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(t,s)=>{this.onError("xhr poll error",t,s)}),this.pollXhr=e}}class In extends Ut{constructor(e,t,s){super(),this.createRequest=e,Gd(this,s),this._opts=s,this._method=s.method||"GET",this._uri=t,this._data=s.data!==void 0?s.data:null,this._create()}_create(){var e;const t=Ev(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this._opts.xd;const s=this._xhr=this.createRequest(t);try{s.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){s.setDisableHeaderCheck&&s.setDisableHeaderCheck(!0);for(let i in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(i)&&s.setRequestHeader(i,this._opts.extraHeaders[i])}}catch{}if(this._method==="POST")try{s.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{s.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(s),"withCredentials"in s&&(s.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(s.timeout=this._opts.requestTimeout),s.onreadystatechange=()=>{var i;s.readyState===3&&((i=this._opts.cookieJar)===null||i===void 0||i.parseCookies(s.getResponseHeader("set-cookie"))),s.readyState===4&&(s.status===200||s.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof s.status=="number"?s.status:0)},0))},s.send(this._data)}catch(i){this.setTimeoutFn(()=>{this._onError(i)},0);return}typeof document<"u"&&(this._index=In.requestsCount++,In.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=YN,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete In.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}In.requestsCount=0;In.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",Uy);else if(typeof addEventListener=="function"){const r="onpagehide"in rn?"pagehide":"unload";addEventListener(r,Uy,!1)}}function Uy(){for(let r in In.requests)In.requests.hasOwnProperty(r)&&In.requests[r].abort()}const WN=(function(){const r=Tv({xdomain:!1});return r&&r.responseType!==null})();class KN extends XN{constructor(e){super(e);const t=e&&e.forceBase64;this.supportsBinary=WN&&!t}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new In(Tv,this.uri(),e)}}function Tv(r){const e=r.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||$N))return new XMLHttpRequest}catch{}if(!e)try{return new rn[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const kv=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class QN extends Dm{get name(){return"websocket"}doOpen(){const e=this.uri(),t=this.opts.protocols,s=kv?{}:Ev(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(s.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,t,s)}catch(i){return this.emitReserved("error",i)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const s=e[t],i=t===e.length-1;km(s,this.supportsBinary,o=>{try{this.doWrite(s,o)}catch{}i&&Vd(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",t=this.query||{};return this.opts.timestampRequests&&(t[this.opts.timestampParam]=jv()),this.supportsBinary||(t.b64=1),this.createUri(e,t)}}const Of=rn.WebSocket||rn.MozWebSocket;class ZN extends QN{createSocket(e,t,s){return kv?new Of(e,t,s):t?new Of(e,t):new Of(e)}doWrite(e,t){this.ws.send(t)}}class JN extends Dm{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const t=LN(Number.MAX_SAFE_INTEGER,this.socket.binaryType),s=e.readable.pipeThrough(t).getReader(),i=MN();i.readable.pipeTo(e.writable),this._writer=i.writable.getWriter();const o=()=>{s.read().then(({done:u,value:h})=>{u||(this.onPacket(h),o())}).catch(u=>{})};o();const c={type:"open"};this.query.sid&&(c.data=`{"sid":"${this.query.sid}"}`),this._writer.write(c).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const s=e[t],i=t===e.length-1;this._writer.write(s).then(()=>{i&&Vd(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}}const eE={websocket:ZN,webtransport:JN,polling:KN},tE=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,sE=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function em(r){if(r.length>8e3)throw"URI too long";const e=r,t=r.indexOf("["),s=r.indexOf("]");t!=-1&&s!=-1&&(r=r.substring(0,t)+r.substring(t,s).replace(/:/g,";")+r.substring(s,r.length));let i=tE.exec(r||""),o={},c=14;for(;c--;)o[sE[c]]=i[c]||"";return t!=-1&&s!=-1&&(o.source=e,o.host=o.host.substring(1,o.host.length-1).replace(/;/g,":"),o.authority=o.authority.replace("[","").replace("]","").replace(/;/g,":"),o.ipv6uri=!0),o.pathNames=nE(o,o.path),o.queryKey=iE(o,o.query),o}function nE(r,e){const t=/\/{2,9}/g,s=e.replace(t,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&s.splice(0,1),e.slice(-1)=="/"&&s.splice(s.length-1,1),s}function iE(r,e){const t={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(s,i,o){i&&(t[i]=o)}),t}const tm=typeof addEventListener=="function"&&typeof removeEventListener=="function",md=[];tm&&addEventListener("offline",()=>{md.forEach(r=>r())},!1);class qi extends Ut{constructor(e,t){if(super(),this.binaryType=BN,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(t=e,e=null),e){const s=em(e);t.hostname=s.host,t.secure=s.protocol==="https"||s.protocol==="wss",t.port=s.port,s.query&&(t.query=s.query)}else t.host&&(t.hostname=em(t.host).host);Gd(this,t),this.secure=t.secure!=null?t.secure:typeof location<"u"&&location.protocol==="https:",t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=t.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},t.transports.forEach(s=>{const i=s.prototype.name;this.transports.push(i),this._transportsByName[i]=s}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},t),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=qN(this.opts.query)),tm&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},md.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const t=Object.assign({},this.opts.query);t.EIO=Nv,t.transport=e,this.id&&(t.sid=this.id);const s=Object.assign({},this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](s)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const e=this.opts.rememberUpgrade&&qi.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const t=this.createTransport(e);t.open(),this.setTransport(t)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",t=>this._onClose("transport close",t))}onOpen(){this.readyState="open",qi.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const t=new Error("server error");t.code=e.data,this._onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let t=1;for(let s=0;s<this.writeBuffer.length;s++){const i=this.writeBuffer[s].data;if(i&&(t+=IN(i)),s>0&&t>this._maxPayload)return this.writeBuffer.slice(0,s);t+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,Vd(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,t,s){return this._sendPacket("message",e,t,s),this}send(e,t,s){return this._sendPacket("message",e,t,s),this}_sendPacket(e,t,s,i){if(typeof t=="function"&&(i=t,t=void 0),typeof s=="function"&&(i=s,s=null),this.readyState==="closing"||this.readyState==="closed")return;s=s||{},s.compress=s.compress!==!1;const o={type:e,data:t,options:s};this.emitReserved("packetCreate",o),this.writeBuffer.push(o),i&&this.once("flush",i),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),e()},s=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?s():e()}):this.upgrading?s():e()),this}_onError(e){if(qi.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),tm&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const s=md.indexOf(this._offlineEventListener);s!==-1&&md.splice(s,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this._prevBufferLen=0}}}qi.protocol=Nv;class aE extends qi{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let t=this.createTransport(e),s=!1;qi.priorWebsocketSuccess=!1;const i=()=>{s||(t.send([{type:"ping",data:"probe"}]),t.once("packet",g=>{if(!s)if(g.type==="pong"&&g.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",t),!t)return;qi.priorWebsocketSuccess=t.name==="websocket",this.transport.pause(()=>{s||this.readyState!=="closed"&&(f(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emitReserved("upgrade",t),t=null,this.upgrading=!1,this.flush())})}else{const x=new Error("probe error");x.transport=t.name,this.emitReserved("upgradeError",x)}}))};function o(){s||(s=!0,f(),t.close(),t=null)}const c=g=>{const x=new Error("probe error: "+g);x.transport=t.name,o(),this.emitReserved("upgradeError",x)};function u(){c("transport closed")}function h(){c("socket closed")}function p(g){t&&g.name!==t.name&&o()}const f=()=>{t.removeListener("open",i),t.removeListener("error",c),t.removeListener("close",u),this.off("close",h),this.off("upgrading",p)};t.once("open",i),t.once("error",c),t.once("close",u),this.once("close",h),this.once("upgrading",p),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{s||t.open()},200):t.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const t=[];for(let s=0;s<e.length;s++)~this.transports.indexOf(e[s])&&t.push(e[s]);return t}}let rE=class extends aE{constructor(e,t={}){const s=typeof e=="object"?e:t;(!s.transports||s.transports&&typeof s.transports[0]=="string")&&(s.transports=(s.transports||["polling","websocket","webtransport"]).map(i=>eE[i]).filter(i=>!!i)),super(e,s)}};function oE(r,e="",t){let s=r;t=t||typeof location<"u"&&location,r==null&&(r=t.protocol+"//"+t.host),typeof r=="string"&&(r.charAt(0)==="/"&&(r.charAt(1)==="/"?r=t.protocol+r:r=t.host+r),/^(https?|wss?):\/\//.test(r)||(typeof t<"u"?r=t.protocol+"//"+r:r="https://"+r),s=em(r)),s.port||(/^(http|ws)$/.test(s.protocol)?s.port="80":/^(http|ws)s$/.test(s.protocol)&&(s.port="443")),s.path=s.path||"/";const o=s.host.indexOf(":")!==-1?"["+s.host+"]":s.host;return s.id=s.protocol+"://"+o+":"+s.port+e,s.href=s.protocol+"://"+o+(t&&t.port===s.port?"":":"+s.port),s}const lE=typeof ArrayBuffer=="function",cE=r=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(r):r.buffer instanceof ArrayBuffer,Rv=Object.prototype.toString,dE=typeof Blob=="function"||typeof Blob<"u"&&Rv.call(Blob)==="[object BlobConstructor]",uE=typeof File=="function"||typeof File<"u"&&Rv.call(File)==="[object FileConstructor]";function Mm(r){return lE&&(r instanceof ArrayBuffer||cE(r))||dE&&r instanceof Blob||uE&&r instanceof File}function pd(r,e){if(!r||typeof r!="object")return!1;if(Array.isArray(r)){for(let t=0,s=r.length;t<s;t++)if(pd(r[t]))return!0;return!1}if(Mm(r))return!0;if(r.toJSON&&typeof r.toJSON=="function"&&arguments.length===1)return pd(r.toJSON(),!0);for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t)&&pd(r[t]))return!0;return!1}function hE(r){const e=[],t=r.data,s=r;return s.data=sm(t,e),s.attachments=e.length,{packet:s,buffers:e}}function sm(r,e){if(!r)return r;if(Mm(r)){const t={_placeholder:!0,num:e.length};return e.push(r),t}else if(Array.isArray(r)){const t=new Array(r.length);for(let s=0;s<r.length;s++)t[s]=sm(r[s],e);return t}else if(typeof r=="object"&&!(r instanceof Date)){const t={};for(const s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=sm(r[s],e));return t}return r}function fE(r,e){return r.data=nm(r.data,e),delete r.attachments,r}function nm(r,e){if(!r)return r;if(r&&r._placeholder===!0){if(typeof r.num=="number"&&r.num>=0&&r.num<e.length)return e[r.num];throw new Error("illegal attachments")}else if(Array.isArray(r))for(let t=0;t<r.length;t++)r[t]=nm(r[t],e);else if(typeof r=="object")for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&(r[t]=nm(r[t],e));return r}const mE=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],pE=5;var Ge;(function(r){r[r.CONNECT=0]="CONNECT",r[r.DISCONNECT=1]="DISCONNECT",r[r.EVENT=2]="EVENT",r[r.ACK=3]="ACK",r[r.CONNECT_ERROR=4]="CONNECT_ERROR",r[r.BINARY_EVENT=5]="BINARY_EVENT",r[r.BINARY_ACK=6]="BINARY_ACK"})(Ge||(Ge={}));class gE{constructor(e){this.replacer=e}encode(e){return(e.type===Ge.EVENT||e.type===Ge.ACK)&&pd(e)?this.encodeAsBinary({type:e.type===Ge.EVENT?Ge.BINARY_EVENT:Ge.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let t=""+e.type;return(e.type===Ge.BINARY_EVENT||e.type===Ge.BINARY_ACK)&&(t+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(t+=e.nsp+","),e.id!=null&&(t+=e.id),e.data!=null&&(t+=JSON.stringify(e.data,this.replacer)),t}encodeAsBinary(e){const t=hE(e),s=this.encodeAsString(t.packet),i=t.buffers;return i.unshift(s),i}}function Iy(r){return Object.prototype.toString.call(r)==="[object Object]"}class Lm extends Ut{constructor(e){super(),this.reviver=e}add(e){let t;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");t=this.decodeString(e);const s=t.type===Ge.BINARY_EVENT;s||t.type===Ge.BINARY_ACK?(t.type=s?Ge.EVENT:Ge.ACK,this.reconstructor=new xE(t),t.attachments===0&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else if(Mm(e)||e.base64)if(this.reconstructor)t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,super.emitReserved("decoded",t));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let t=0;const s={type:Number(e.charAt(0))};if(Ge[s.type]===void 0)throw new Error("unknown packet type "+s.type);if(s.type===Ge.BINARY_EVENT||s.type===Ge.BINARY_ACK){const o=t+1;for(;e.charAt(++t)!=="-"&&t!=e.length;);const c=e.substring(o,t);if(c!=Number(c)||e.charAt(t)!=="-")throw new Error("Illegal attachments");s.attachments=Number(c)}if(e.charAt(t+1)==="/"){const o=t+1;for(;++t&&!(e.charAt(t)===","||t===e.length););s.nsp=e.substring(o,t)}else s.nsp="/";const i=e.charAt(t+1);if(i!==""&&Number(i)==i){const o=t+1;for(;++t;){const c=e.charAt(t);if(c==null||Number(c)!=c){--t;break}if(t===e.length)break}s.id=Number(e.substring(o,t+1))}if(e.charAt(++t)){const o=this.tryParse(e.substr(t));if(Lm.isPayloadValid(s.type,o))s.data=o;else throw new Error("invalid payload")}return s}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,t){switch(e){case Ge.CONNECT:return Iy(t);case Ge.DISCONNECT:return t===void 0;case Ge.CONNECT_ERROR:return typeof t=="string"||Iy(t);case Ge.EVENT:case Ge.BINARY_EVENT:return Array.isArray(t)&&(typeof t[0]=="number"||typeof t[0]=="string"&&mE.indexOf(t[0])===-1);case Ge.ACK:case Ge.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class xE{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const t=fE(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const yE=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Lm,Encoder:gE,get PacketType(){return Ge},protocol:pE},Symbol.toStringTag,{value:"Module"}));function xn(r,e,t){return r.on(e,t),function(){r.off(e,t)}}const bE=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Dv extends Ut{constructor(e,t,s){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,s&&s.auth&&(this.auth=s.auth),this._opts=Object.assign({},s),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[xn(e,"open",this.onopen.bind(this)),xn(e,"packet",this.onpacket.bind(this)),xn(e,"error",this.onerror.bind(this)),xn(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...t){var s,i,o;if(bE.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(t.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(t),this;const c={type:Ge.EVENT,data:t};if(c.options={},c.options.compress=this.flags.compress!==!1,typeof t[t.length-1]=="function"){const f=this.ids++,g=t.pop();this._registerAckCallback(f,g),c.id=f}const u=(i=(s=this.io.engine)===null||s===void 0?void 0:s.transport)===null||i===void 0?void 0:i.writable,h=this.connected&&!(!((o=this.io.engine)===null||o===void 0)&&o._hasPingExpired());return this.flags.volatile&&!u||(h?(this.notifyOutgoingListeners(c),this.packet(c)):this.sendBuffer.push(c)),this.flags={},this}_registerAckCallback(e,t){var s;const i=(s=this.flags.timeout)!==null&&s!==void 0?s:this._opts.ackTimeout;if(i===void 0){this.acks[e]=t;return}const o=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let u=0;u<this.sendBuffer.length;u++)this.sendBuffer[u].id===e&&this.sendBuffer.splice(u,1);t.call(this,new Error("operation has timed out"))},i),c=(...u)=>{this.io.clearTimeoutFn(o),t.apply(this,u)};c.withError=!0,this.acks[e]=c}emitWithAck(e,...t){return new Promise((s,i)=>{const o=(c,u)=>c?i(c):s(u);o.withError=!0,t.push(o),this.emit(e,...t)})}_addToQueue(e){let t;typeof e[e.length-1]=="function"&&(t=e.pop());const s={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((i,...o)=>s!==this._queue[0]?void 0:(i!==null?s.tryCount>this._opts.retries&&(this._queue.shift(),t&&t(i)):(this._queue.shift(),t&&t(null,...o)),s.pending=!1,this._drainQueue())),this._queue.push(s),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const t=this._queue[0];t.pending&&!e||(t.pending=!0,t.tryCount++,this.flags=t.flags,this.emit.apply(this,t.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:Ge.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(s=>String(s.id)===e)){const s=this.acks[e];delete this.acks[e],s.withError&&s.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case Ge.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Ge.EVENT:case Ge.BINARY_EVENT:this.onevent(e);break;case Ge.ACK:case Ge.BINARY_ACK:this.onack(e);break;case Ge.DISCONNECT:this.ondisconnect();break;case Ge.CONNECT_ERROR:this.destroy();const s=new Error(e.data.message);s.data=e.data.data,this.emitReserved("connect_error",s);break}}onevent(e){const t=e.data||[];e.id!=null&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const t=this._anyListeners.slice();for(const s of t)s.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const t=this;let s=!1;return function(...i){s||(s=!0,t.packet({type:Ge.ACK,id:e,data:i}))}}onack(e){const t=this.acks[e.id];typeof t=="function"&&(delete this.acks[e.id],t.withError&&e.data.unshift(null),t.apply(this,e.data))}onconnect(e,t){this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Ge.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const t=this._anyListeners;for(let s=0;s<t.length;s++)if(e===t[s])return t.splice(s,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const t=this._anyOutgoingListeners;for(let s=0;s<t.length;s++)if(e===t[s])return t.splice(s,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const t=this._anyOutgoingListeners.slice();for(const s of t)s.apply(this,e.data)}}}function Ur(r){r=r||{},this.ms=r.min||100,this.max=r.max||1e4,this.factor=r.factor||2,this.jitter=r.jitter>0&&r.jitter<=1?r.jitter:0,this.attempts=0}Ur.prototype.duration=function(){var r=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),t=Math.floor(e*this.jitter*r);r=(Math.floor(e*10)&1)==0?r-t:r+t}return Math.min(r,this.max)|0};Ur.prototype.reset=function(){this.attempts=0};Ur.prototype.setMin=function(r){this.ms=r};Ur.prototype.setMax=function(r){this.max=r};Ur.prototype.setJitter=function(r){this.jitter=r};class im extends Ut{constructor(e,t){var s;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(t=e,e=void 0),t=t||{},t.path=t.path||"/socket.io",this.opts=t,Gd(this,t),this.reconnection(t.reconnection!==!1),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor((s=t.randomizationFactor)!==null&&s!==void 0?s:.5),this.backoff=new Ur({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(t.timeout==null?2e4:t.timeout),this._readyState="closed",this.uri=e;const i=t.parser||yE;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=t.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(t=this.backoff)===null||t===void 0||t.setMin(e),this)}randomizationFactor(e){var t;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(t=this.backoff)===null||t===void 0||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(t=this.backoff)===null||t===void 0||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new rE(this.uri,this.opts);const t=this.engine,s=this;this._readyState="opening",this.skipReconnect=!1;const i=xn(t,"open",function(){s.onopen(),e&&e()}),o=u=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",u),e?e(u):this.maybeReconnectOnOpen()},c=xn(t,"error",o);if(this._timeout!==!1){const u=this._timeout,h=this.setTimeoutFn(()=>{i(),o(new Error("timeout")),t.close()},u);this.opts.autoUnref&&h.unref(),this.subs.push(()=>{this.clearTimeoutFn(h)})}return this.subs.push(i),this.subs.push(c),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(xn(e,"ping",this.onping.bind(this)),xn(e,"data",this.ondata.bind(this)),xn(e,"error",this.onerror.bind(this)),xn(e,"close",this.onclose.bind(this)),xn(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(t){this.onclose("parse error",t)}}ondecoded(e){Vd(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,t){let s=this.nsps[e];return s?this._autoConnect&&!s.active&&s.connect():(s=new Dv(this,e,t),this.nsps[e]=s),s}_destroy(e){const t=Object.keys(this.nsps);for(const s of t)if(this.nsps[s].active)return;this._close()}_packet(e){const t=this.encoder.encode(e);for(let s=0;s<t.length;s++)this.engine.write(t[s],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,t){var s;this.cleanup(),(s=this.engine)===null||s===void 0||s.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const t=this.backoff.duration();this._reconnecting=!0;const s=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(i=>{i?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",i)):e.onreconnect()}))},t);this.opts.autoUnref&&s.unref(),this.subs.push(()=>{this.clearTimeoutFn(s)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const Fo={};function gd(r,e){typeof r=="object"&&(e=r,r=void 0),e=e||{};const t=oE(r,e.path||"/socket.io"),s=t.source,i=t.id,o=t.path,c=Fo[i]&&o in Fo[i].nsps,u=e.forceNew||e["force new connection"]||e.multiplex===!1||c;let h;return u?h=new im(s,e):(Fo[i]||(Fo[i]=new im(s,e)),h=Fo[i]),t.query&&!e.query&&(e.query=t.queryKey),h.socket(t.path,e)}Object.assign(gd,{Manager:im,Socket:Dv,io:gd,connect:gd});class vE{constructor(){this.socket=null,this.isConnected=!1,this.listeners=[],this.userId=null}connect(e="public"){if(this.socket&&this.isConnected)return;this.socket&&!this.isConnected&&(this.socket.removeAllListeners(),this.socket.disconnect(),this.socket=null),(!e||e==="public")&&(e=this.getOrCreatePublicUserId()),this.userId=e;const t="https://maxwin688.site";this.socket=gd(t,{transports:["polling","websocket"],reconnection:!0,reconnectionDelay:1e3,reconnectionDelayMax:5e3,reconnectionAttempts:1/0,timeout:2e4,forceNew:!0}),this.socket.on("connect",()=>{console.log(" Connected to notification server"),this.isConnected=!0,this.socket.emit("register",e)}),this.socket.on("disconnect",s=>{console.log(" Disconnected from notification server:",s),this.isConnected=!1,s==="io server disconnect"&&this.socket.connect()}),this.socket.on("receive_noti",s=>{console.log(" Received notification:",s),(s.to_user_id==="public"||s.to_user_id===e||s.to_user_id==="all")&&this.listeners.forEach(i=>{typeof i=="function"&&i(s)})}),this.socket.on("connect_error",s=>{console.error("Connection error:",s),this.isConnected=!1}),this.socket.on("reconnect",s=>{console.log(" Reconnected to notification server after",s,"attempts"),this.isConnected=!0,this.userId&&this.socket.emit("register",this.userId)}),this.socket.on("reconnect_attempt",s=>{console.log(" Reconnection attempt",s)}),this.socket.on("reconnect_error",s=>{console.error(" Reconnection error:",s)}),this.socket.on("reconnect_failed",()=>{console.error(" Reconnection failed after all attempts")})}getOrCreatePublicUserId(){let e=sessionStorage.getItem("public_user_id");return e||(e="public_"+Date.now()+"_"+Math.random().toString(36).substr(2,9),sessionStorage.setItem("public_user_id",e)),e}disconnect(){this.socket&&(this.socket.removeAllListeners(),this.socket.disconnect(),this.socket=null,this.isConnected=!1)}onNotification(e){return this.listeners.push(e),()=>{this.listeners=this.listeners.filter(t=>t!==e)}}}const zy=new vE,Mv=R.createContext(),wE=()=>{const r=R.useContext(Mv);if(!r)throw new Error("useNotification must be used within NotificationProvider");return r},_E=({children:r})=>{const[e,t]=R.useState([]),[s,i]=R.useState(0),o=pi();R.useEffect(()=>{zy.connect("public");const x=zy.onNotification(b=>{const w={id:Date.now(),title:b.title,body:b.body,route:b.notification_data?.route,type:b.notification_data?.type,data:b.notification_data,timestamp:new Date,read:!1};t(_=>[w,..._]),i(_=>_+1),c()});return()=>{x()}},[]);const c=()=>{try{const x=new Audio("/sounds/noti.wav");x.volume=.5,x.play().catch(b=>{console.error("Error playing notification sound:",b)})}catch(x){console.error("Error loading notification sound:",x)}},u=R.useCallback(x=>{t(b=>b.map(w=>w.id===x?{...w,read:!0}:w)),i(b=>Math.max(0,b-1))},[]),h=R.useCallback(()=>{t(x=>x.map(b=>({...b,read:!0}))),i(0)},[]),p=R.useCallback(x=>{u(x.id),x.route&&o(x.route)},[o,u]),f=R.useCallback(()=>{t([]),i(0)},[]),g={notifications:e,unreadCount:s,markAsRead:u,markAllAsRead:h,handleNotificationClick:p,clearNotifications:f};return l.jsx(Mv.Provider,{value:g,children:r})},ui={register:async r=>{const e=await oe.post("/public/register",r);return e.data.token&&(localStorage.setItem("public_token",e.data.token),localStorage.setItem("public_user",JSON.stringify(e.data.user))),e.data},login:async r=>{const e=await oe.post("/public/login",r);return e.data.token&&(localStorage.setItem("public_token",e.data.token),localStorage.setItem("public_user",JSON.stringify(e.data.user))),e.data},logout:()=>{localStorage.removeItem("public_token"),localStorage.removeItem("public_user")},getCurrentUser:()=>{const r=localStorage.getItem("public_user");return r?JSON.parse(r):null},isAuthenticated:()=>!!localStorage.getItem("public_token"),getProfile:async()=>(await oe.get("/public/profile")).data},zt=({children:r})=>{const{isAuthenticated:e,loading:t,user:s}=hl();return t?l.jsx("div",{className:"flex items-center justify-center min-h-screen",children:l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-600"})}):!e||!s?l.jsx(od,{to:"/admin/login",replace:!0}):s.type!=="super_admin"?ui.getCurrentUser()?l.jsx(od,{to:"/",replace:!0}):l.jsx(od,{to:"/admin/login",replace:!0}):r},Ht=({children:r})=>{const[e,t]=R.useState(!0),s=vn(),i=pi(),{user:o,logout:c}=hl(),u=()=>{c(),i("/admin/login")},h=[{path:"/admin/dashboard",label:"Dashboard",icon:""},{path:"/admin/banners",label:"Banners",icon:""},{path:"/admin/banner-texts",label:"Banner Texts",icon:""},{path:"/admin/posts",label:"Posts",icon:""},{path:"/admin/categories",label:"Categories",icon:""},{path:"/admin/text-books",label:"Text Books",icon:""},{path:"/admin/dictionary",label:"Dictionary",icon:""},{path:"/admin/monastery-building-donations",label:"Building Donations",icon:""},{path:"/admin/contacts",label:"Contacts",icon:""},{path:"/admin/chat",label:"User Chat",icon:""},{path:"/admin/academic-years",label:"Academic Years",icon:""},{path:"/admin/subjects",label:"Subjects",icon:""},{path:"/admin/classes",label:"Classes",icon:""},{path:"/admin/lessons",label:"Lessons",icon:""},{path:"/admin/profile",label:"Profile",icon:""}],p=f=>s.pathname===f;return l.jsxs("div",{className:"flex h-screen bg-gray-100",children:[l.jsxs("aside",{className:`bg-gradient-to-b from-amber-800 to-amber-900 text-white transition-all duration-300 ${e?"w-64":"w-20"} flex flex-col shadow-lg`,children:[l.jsx("div",{className:"p-4 border-b border-amber-700",children:l.jsxs("div",{className:"flex items-center justify-between",children:[e&&l.jsx("h1",{className:"text-xl font-bold",children:"Dhamma Center"}),l.jsx("button",{onClick:()=>t(!e),className:"p-2 hover:bg-amber-700 rounded-lg transition",children:e?"":""})]})}),l.jsx("nav",{className:"flex-1 overflow-y-auto p-4",children:l.jsx("ul",{className:"space-y-2",children:h.map(f=>l.jsx("li",{children:l.jsxs(ct,{to:f.path,className:`flex items-center gap-3 p-3 rounded-lg transition-all ${p(f.path)?"bg-amber-700 shadow-lg":"hover:bg-amber-700/50"}`,children:[l.jsx("span",{className:"text-xl",children:f.icon}),e&&l.jsx("span",{className:"font-medium",children:f.label})]})},f.path))})}),e&&l.jsxs("div",{className:"p-4 border-t border-amber-700",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[l.jsx("div",{className:"w-10 h-10 bg-amber-700 rounded-full flex items-center justify-center font-bold",children:o?.name?.charAt(0)||"A"}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("p",{className:"font-semibold truncate",children:o?.name||"Admin"}),l.jsx("p",{className:"text-xs text-amber-200 truncate",children:o?.user_name||""})]})]}),l.jsx(ct,{to:"/admin/profile",className:"block w-full mb-2 bg-amber-700 hover:bg-amber-600 py-2 rounded-lg font-medium transition text-center",children:"Profile"}),l.jsx("button",{onClick:u,className:"w-full bg-red-600 hover:bg-red-700 py-2 rounded-lg font-medium transition",children:"Logout"})]})]}),l.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[l.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200 px-6 py-4",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:h.find(f=>p(f.path))?.label||"Admin Panel"}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("span",{className:"text-sm text-gray-600",children:["Welcome, ",o?.name||"Admin"]}),l.jsxs("button",{onClick:u,className:"flex items-center gap-2 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors duration-200 font-medium",title:"Logout",children:[l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:l.jsx("path",{fillRule:"evenodd",d:"M3 3a1 1 0 011 1v12a1 1 0 11-2 0V4a1 1 0 011-1zm7.707 3.293a1 1 0 011.414 0l3 3a1 1 0 010 1.414l-3 3a1 1 0 01-1.414-1.414L12.586 11H5a1 1 0 110-2h7.586l-1.293-1.293a1 1 0 010-1.414z",clipRule:"evenodd"})}),l.jsx("span",{children:"Logout"})]})]})]})}),l.jsx("main",{className:"flex-1 overflow-y-auto p-6",children:r})]})]})},AE=()=>{const[r,e]=R.useState({user_name:"",password:""}),[t,s]=R.useState(""),[i,o]=R.useState(!1),{login:c,isAuthenticated:u}=hl(),h=pi();R.useEffect(()=>{u&&h("/admin/dashboard",{replace:!0})},[u,h]);const p=async f=>{f.preventDefault(),s(""),o(!0);try{await c(r),h("/admin/dashboard")}catch(g){s(g.response?.data?.message||"Login failed. Please check your credentials.")}finally{o(!1)}};return l.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-amber-50 to-orange-50",children:l.jsxs("div",{className:"max-w-md w-full bg-white rounded-2xl shadow-xl p-8",children:[l.jsxs("div",{className:"text-center mb-8",children:[l.jsx("h1",{className:"text-3xl font-bold text-amber-800 mb-2",children:"Admin Login"}),l.jsx("p",{className:"text-gray-600",children:"Thet Thet Winner School"})]}),t&&l.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded-lg",children:t}),l.jsxs("form",{onSubmit:p,className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"user_name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Username"}),l.jsx("input",{id:"user_name",type:"text",required:!0,value:r.user_name,onChange:f=>e({...r,user_name:f.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent outline-none transition",placeholder:"Enter your username"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),l.jsx("input",{id:"password",type:"password",required:!0,value:r.password,onChange:f=>e({...r,password:f.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent outline-none transition",placeholder:"Enter your password"})]}),l.jsx("button",{type:"submit",disabled:i,className:"w-full bg-amber-600 text-white py-3 rounded-lg font-semibold hover:bg-amber-700 focus:outline-none focus:ring-2 focus:ring-amber-500 focus:ring-offset-2 transition disabled:opacity-50 disabled:cursor-not-allowed",children:i?"Logging in...":"Login"})]})]})})},Vo={getAll:r=>oe.get("/admin/posts",{params:r}),getById:r=>oe.get(`/admin/posts/${r}`),create:r=>oe.post("/admin/posts",r),update:(r,e)=>e instanceof FormData?(e.append("_method","PUT"),oe.post(`/admin/posts/${r}`,e)):oe.put(`/admin/posts/${r}`,e),delete:r=>oe.delete(`/admin/posts/${r}`)},yr={getAll:()=>oe.get("/admin/categories"),getById:r=>oe.get(`/admin/categories/${r}`),create:r=>oe.post("/admin/categories",r),update:(r,e)=>oe.put(`/admin/categories/${r}`,e),delete:r=>oe.delete(`/admin/categories/${r}`)},da={getAll:()=>oe.get("/admin/donations"),getById:r=>oe.get(`/admin/donations/${r}`),create:r=>oe.post("/admin/donations",r),update:(r,e)=>oe.put(`/admin/donations/${r}`,e),delete:r=>oe.delete(`/admin/donations/${r}`),approve:r=>oe.post(`/admin/donations/${r}/approve`),reject:r=>oe.post(`/admin/donations/${r}/reject`)},xd={getAll:()=>oe.get("/admin/contacts"),getById:r=>oe.get(`/admin/contacts/${r}`),update:(r,e)=>oe.put(`/admin/contacts/${r}`,e),delete:r=>oe.delete(`/admin/contacts/${r}`),markAsRead:r=>oe.post(`/admin/contacts/${r}/read`)},SE=()=>{const[r,e]=R.useState({posts:0,categories:0,donations:0,contacts:0}),[t,s]=R.useState(!0);R.useEffect(()=>{(async()=>{try{const[c,u,h,p]=await Promise.all([Vo.getAll().catch(()=>({data:{data:[]}})),yr.getAll().catch(()=>({data:{data:[]}})),da.getAll().catch(()=>({data:{data:[]}})),xd.getAll().catch(()=>({data:{data:[]}}))]);e({posts:c.data?.data?.length||0,categories:u.data?.data?.length||0,donations:h.data?.data?.length||0,contacts:p.data?.data?.length||0})}catch(c){console.error("Error fetching stats:",c)}finally{s(!1)}})()},[]);const i=[{label:"Total Posts",value:r.posts,icon:"",color:"bg-blue-500"},{label:"Categories",value:r.categories,icon:"",color:"bg-green-500"},{label:"Donations",value:r.donations,icon:"",color:"bg-yellow-500"},{label:"Contacts",value:r.contacts,icon:"",color:"bg-purple-500"}];return t?l.jsx("div",{className:"flex items-center justify-center h-64",children:l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-600"})}):l.jsxs("div",{children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-6",children:"Dashboard"}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:i.map((o,c)=>l.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-gray-600 text-sm font-medium mb-1",children:o.label}),l.jsx("p",{className:"text-3xl font-bold text-gray-800",children:o.value})]}),l.jsx("div",{className:`${o.color} w-16 h-16 rounded-full flex items-center justify-center text-3xl`,children:o.icon})]})},c))}),l.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[l.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"Quick Actions"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsxs("button",{className:"p-4 bg-blue-50 hover:bg-blue-100 rounded-lg text-left transition",children:[l.jsx("h3",{className:"font-semibold text-blue-800",children:"Create New Post"}),l.jsx("p",{className:"text-sm text-blue-600",children:"Add a new blog post"})]}),l.jsxs("button",{className:"p-4 bg-green-50 hover:bg-green-100 rounded-lg text-left transition",children:[l.jsx("h3",{className:"font-semibold text-green-800",children:"Manage Donations"}),l.jsx("p",{className:"text-sm text-green-600",children:"View and approve donations"})]}),l.jsxs("button",{className:"p-4 bg-purple-50 hover:bg-purple-100 rounded-lg text-left transition",children:[l.jsx("h3",{className:"font-semibold text-purple-800",children:"View Contacts"}),l.jsx("p",{className:"text-sm text-purple-600",children:"Check new messages"})]})]})]})]})},Om=({value:r,onChange:e,placeholder:t="Enter content..."})=>{const s=R.useRef(null),[i,o]=R.useState(!1);R.useEffect(()=>{s.current&&r!==s.current.innerHTML&&(s.current.innerHTML=r||"")},[r]);const c=f=>{const g=f.target.innerHTML;e(g)},u=(f,g=null)=>{document.execCommand(f,!1,g),s.current?.focus();const x=s.current?.innerHTML||"";e(x)},h=()=>{const f=document.createElement("input");f.setAttribute("type","file"),f.setAttribute("accept","image/*"),f.click(),f.onchange=async g=>{const x=g.target.files?.[0];if(x){const b=new FileReader;b.onload=w=>{const _=document.createElement("img");_.src=w.target.result,_.style.maxWidth="100%",_.style.height="auto",u("insertHTML",_.outerHTML)},b.readAsDataURL(x)}}},p=({onClick:f,children:g,title:x,active:b=!1})=>l.jsx("button",{type:"button",onClick:f,title:x,className:`p-2 rounded hover:bg-gray-200 transition ${b?"bg-amber-200":""}`,children:g});return l.jsxs("div",{className:"rich-text-editor border border-gray-300 rounded-lg overflow-hidden focus-within:ring-2 focus-within:ring-amber-500",children:[l.jsxs("div",{className:"bg-gray-50 border-b border-gray-300 p-2 flex flex-wrap gap-1",children:[l.jsxs("div",{className:"flex gap-1 border-r border-gray-300 pr-2 mr-2",children:[l.jsx(p,{onClick:()=>u("bold"),title:"Bold",children:l.jsx("strong",{children:"B"})}),l.jsx(p,{onClick:()=>u("italic"),title:"Italic",children:l.jsx("em",{children:"I"})}),l.jsx(p,{onClick:()=>u("underline"),title:"Underline",children:l.jsx("u",{children:"U"})}),l.jsx(p,{onClick:()=>u("strikeThrough"),title:"Strikethrough",children:l.jsx("s",{children:"S"})})]}),l.jsxs("div",{className:"flex gap-1 border-r border-gray-300 pr-2 mr-2",children:[l.jsx(p,{onClick:()=>u("formatBlock","<h1>"),title:"Heading 1",children:"H1"}),l.jsx(p,{onClick:()=>u("formatBlock","<h2>"),title:"Heading 2",children:"H2"}),l.jsx(p,{onClick:()=>u("formatBlock","<h3>"),title:"Heading 3",children:"H3"}),l.jsx(p,{onClick:()=>u("formatBlock","<p>"),title:"Paragraph",children:"P"})]}),l.jsxs("div",{className:"flex gap-1 border-r border-gray-300 pr-2 mr-2",children:[l.jsx(p,{onClick:()=>u("justifyLeft"),title:"Align Left",children:""}),l.jsx(p,{onClick:()=>u("justifyCenter"),title:"Align Center",children:""}),l.jsx(p,{onClick:()=>u("justifyRight"),title:"Align Right",children:""}),l.jsx(p,{onClick:()=>u("justifyFull"),title:"Justify",children:""})]}),l.jsxs("div",{className:"flex gap-1 border-r border-gray-300 pr-2 mr-2",children:[l.jsx(p,{onClick:()=>u("insertUnorderedList"),title:"Bullet List",children:""}),l.jsx(p,{onClick:()=>u("insertOrderedList"),title:"Numbered List",children:"1."}),l.jsx(p,{onClick:()=>u("outdent"),title:"Decrease Indent",children:""}),l.jsx(p,{onClick:()=>u("indent"),title:"Increase Indent",children:""})]}),l.jsxs("div",{className:"flex gap-1 border-r border-gray-300 pr-2 mr-2",children:[l.jsx(p,{onClick:()=>u("createLink",prompt("Enter URL:")),title:"Insert Link",children:""}),l.jsx(p,{onClick:h,title:"Insert Image",children:""})]}),l.jsxs("div",{className:"flex gap-1",children:[l.jsx(p,{onClick:()=>u("foreColor",prompt("Enter color (e.g., #000000):")),title:"Text Color",children:"A"}),l.jsx(p,{onClick:()=>u("removeFormat"),title:"Remove Formatting",children:""})]})]}),l.jsx("div",{ref:s,contentEditable:!0,onInput:c,onFocus:()=>o(!0),onBlur:()=>o(!1),className:"min-h-[300px] p-4 outline-none",style:{fontFamily:"Helvetica, Arial, sans-serif",fontSize:"16px",lineHeight:"1.6"},"data-placeholder":!r&&!i?t:"",suppressContentEditableWarning:!0}),l.jsx("style",{children:`
        .rich-text-editor [contenteditable][data-placeholder]:empty:before {
          content: attr(data-placeholder);
          color: #9ca3af;
          pointer-events: none;
        }
        .rich-text-editor [contenteditable] img {
          max-width: 100%;
          height: auto;
          margin: 10px 0;
        }
        .rich-text-editor [contenteditable] a {
          color: #3b82f6;
          text-decoration: underline;
        }
        .rich-text-editor [contenteditable]:focus {
          outline: none;
        }
      `})]})};var NE=Object.defineProperty,EE=(r,e,t)=>e in r?NE(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,bt=(r,e,t)=>EE(r,typeof e!="symbol"?e+"":e,t);const Sd={x:0,y:0,width:0,height:0,unit:"px"},ur=(r,e,t)=>Math.min(Math.max(r,e),t),jE=(...r)=>r.filter(e=>e&&typeof e=="string").join(" "),Hy=(r,e)=>r===e||r.width===e.width&&r.height===e.height&&r.x===e.x&&r.y===e.y&&r.unit===e.unit;function hr(r,e,t){return r.unit==="%"?{...Sd,...r,unit:"%"}:{unit:"%",x:r.x?r.x/e*100:0,y:r.y?r.y/t*100:0,width:r.width?r.width/e*100:0,height:r.height?r.height/t*100:0}}function Ii(r,e,t){return r.unit?r.unit==="px"?{...Sd,...r,unit:"px"}:{unit:"px",x:r.x?r.x*e/100:0,y:r.y?r.y*t/100:0,width:r.width?r.width*e/100:0,height:r.height?r.height*t/100:0}:{...Sd,...r,unit:"px"}}function qy(r,e,t,s,i,o=0,c=0,u=s,h=i){const p={...r};let f=Math.min(o,s),g=Math.min(c,i),x=Math.min(u,s),b=Math.min(h,i);e&&(e>1?(f=c?c*e:f,g=f/e,x=u*e):(g=o?o/e:g,f=g*e,b=h/e)),p.y<0&&(p.height=Math.max(p.height+p.y,g),p.y=0),p.x<0&&(p.width=Math.max(p.width+p.x,f),p.x=0);const w=s-(p.x+p.width);w<0&&(p.x=Math.min(p.x,s-f),p.width+=w);const _=i-(p.y+p.height);if(_<0&&(p.y=Math.min(p.y,i-g),p.height+=_),p.width<f&&((t==="sw"||t=="nw")&&(p.x-=f-p.width),p.width=f),p.height<g&&((t==="nw"||t=="ne")&&(p.y-=g-p.height),p.height=g),p.width>x&&((t==="sw"||t=="nw")&&(p.x-=x-p.width),p.width=x),p.height>b&&((t==="nw"||t=="ne")&&(p.y-=b-p.height),p.height=b),e){const S=p.width/p.height;if(S<e){const A=Math.max(p.width/e,g);(t==="nw"||t=="ne")&&(p.y-=A-p.height),p.height=A}else if(S>e){const A=Math.max(p.height*e,f);(t==="sw"||t=="nw")&&(p.x-=A-p.width),p.width=A}}return p}function CE(r,e,t,s){const i={...r};return e==="ArrowLeft"?s==="nw"?(i.x-=t,i.y-=t,i.width+=t,i.height+=t):s==="w"?(i.x-=t,i.width+=t):s==="sw"?(i.x-=t,i.width+=t,i.height+=t):s==="ne"?(i.y+=t,i.width-=t,i.height-=t):s==="e"?i.width-=t:s==="se"&&(i.width-=t,i.height-=t):e==="ArrowRight"&&(s==="nw"?(i.x+=t,i.y+=t,i.width-=t,i.height-=t):s==="w"?(i.x+=t,i.width-=t):s==="sw"?(i.x+=t,i.width-=t,i.height-=t):s==="ne"?(i.y-=t,i.width+=t,i.height+=t):s==="e"?i.width+=t:s==="se"&&(i.width+=t,i.height+=t)),e==="ArrowUp"?s==="nw"?(i.x-=t,i.y-=t,i.width+=t,i.height+=t):s==="n"?(i.y-=t,i.height+=t):s==="ne"?(i.y-=t,i.width+=t,i.height+=t):s==="sw"?(i.x+=t,i.width-=t,i.height-=t):s==="s"?i.height-=t:s==="se"&&(i.width-=t,i.height-=t):e==="ArrowDown"&&(s==="nw"?(i.x+=t,i.y+=t,i.width-=t,i.height-=t):s==="n"?(i.y+=t,i.height-=t):s==="ne"?(i.y+=t,i.width-=t,i.height-=t):s==="sw"?(i.x-=t,i.width+=t,i.height+=t):s==="s"?i.height+=t:s==="se"&&(i.width+=t,i.height+=t)),i}const fr={capture:!0,passive:!1};let TE=0;const zi=class mn extends R.PureComponent{constructor(){super(...arguments),bt(this,"docMoveBound",!1),bt(this,"mouseDownOnCrop",!1),bt(this,"dragStarted",!1),bt(this,"evData",{startClientX:0,startClientY:0,startCropX:0,startCropY:0,clientX:0,clientY:0,isResize:!0}),bt(this,"componentRef",R.createRef()),bt(this,"mediaRef",R.createRef()),bt(this,"resizeObserver"),bt(this,"initChangeCalled",!1),bt(this,"instanceId",`rc-${TE++}`),bt(this,"state",{cropIsActive:!1,newCropIsBeingDrawn:!1}),bt(this,"onCropPointerDown",e=>{const{crop:t,disabled:s}=this.props,i=this.getBox();if(!t)return;const o=Ii(t,i.width,i.height);if(s)return;e.cancelable&&e.preventDefault(),this.bindDocMove(),this.componentRef.current.focus({preventScroll:!0});const c=e.target.dataset.ord,u=!!c;let h=e.clientX,p=e.clientY,f=o.x,g=o.y;if(c){const x=e.clientX-i.x,b=e.clientY-i.y;let w=0,_=0;c==="ne"||c=="e"?(w=x-(o.x+o.width),_=b-o.y,f=o.x,g=o.y+o.height):c==="se"||c==="s"?(w=x-(o.x+o.width),_=b-(o.y+o.height),f=o.x,g=o.y):c==="sw"||c=="w"?(w=x-o.x,_=b-(o.y+o.height),f=o.x+o.width,g=o.y):(c==="nw"||c=="n")&&(w=x-o.x,_=b-o.y,f=o.x+o.width,g=o.y+o.height),h=f+i.x+w,p=g+i.y+_}this.evData={startClientX:h,startClientY:p,startCropX:f,startCropY:g,clientX:e.clientX,clientY:e.clientY,isResize:u,ord:c},this.mouseDownOnCrop=!0,this.setState({cropIsActive:!0})}),bt(this,"onComponentPointerDown",e=>{const{crop:t,disabled:s,locked:i,keepSelection:o,onChange:c}=this.props,u=this.getBox();if(s||i||o&&t)return;e.cancelable&&e.preventDefault(),this.bindDocMove(),this.componentRef.current.focus({preventScroll:!0});const h=e.clientX-u.x,p=e.clientY-u.y,f={unit:"px",x:h,y:p,width:0,height:0};this.evData={startClientX:e.clientX,startClientY:e.clientY,startCropX:h,startCropY:p,clientX:e.clientX,clientY:e.clientY,isResize:!0},this.mouseDownOnCrop=!0,c(Ii(f,u.width,u.height),hr(f,u.width,u.height)),this.setState({cropIsActive:!0,newCropIsBeingDrawn:!0})}),bt(this,"onDocPointerMove",e=>{const{crop:t,disabled:s,onChange:i,onDragStart:o}=this.props,c=this.getBox();if(s||!t||!this.mouseDownOnCrop)return;e.cancelable&&e.preventDefault(),this.dragStarted||(this.dragStarted=!0,o&&o(e));const{evData:u}=this;u.clientX=e.clientX,u.clientY=e.clientY;let h;u.isResize?h=this.resizeCrop():h=this.dragCrop(),Hy(t,h)||i(Ii(h,c.width,c.height),hr(h,c.width,c.height))}),bt(this,"onComponentKeyDown",e=>{const{crop:t,disabled:s,onChange:i,onComplete:o}=this.props;if(s)return;const c=e.key;let u=!1;if(!t)return;const h=this.getBox(),p=this.makePixelCrop(h),f=(navigator.platform.match("Mac")?e.metaKey:e.ctrlKey)?mn.nudgeStepLarge:e.shiftKey?mn.nudgeStepMedium:mn.nudgeStep;if(c==="ArrowLeft"?(p.x-=f,u=!0):c==="ArrowRight"?(p.x+=f,u=!0):c==="ArrowUp"?(p.y-=f,u=!0):c==="ArrowDown"&&(p.y+=f,u=!0),u){e.cancelable&&e.preventDefault(),p.x=ur(p.x,0,h.width-p.width),p.y=ur(p.y,0,h.height-p.height);const g=Ii(p,h.width,h.height),x=hr(p,h.width,h.height);i(g,x),o&&o(g,x)}}),bt(this,"onHandlerKeyDown",(e,t)=>{const{aspect:s=0,crop:i,disabled:o,minWidth:c=0,minHeight:u=0,maxWidth:h,maxHeight:p,onChange:f,onComplete:g}=this.props,x=this.getBox();if(o||!i)return;if(e.key==="ArrowUp"||e.key==="ArrowDown"||e.key==="ArrowLeft"||e.key==="ArrowRight")e.stopPropagation(),e.preventDefault();else return;const b=(navigator.platform.match("Mac")?e.metaKey:e.ctrlKey)?mn.nudgeStepLarge:e.shiftKey?mn.nudgeStepMedium:mn.nudgeStep,w=Ii(i,x.width,x.height),_=CE(w,e.key,b,t),S=qy(_,s,t,x.width,x.height,c,u,h,p);if(!Hy(i,S)){const A=hr(S,x.width,x.height);f(S,A),g&&g(S,A)}}),bt(this,"onDocPointerDone",e=>{const{crop:t,disabled:s,onComplete:i,onDragEnd:o}=this.props,c=this.getBox();this.unbindDocMove(),!(s||!t)&&this.mouseDownOnCrop&&(this.mouseDownOnCrop=!1,this.dragStarted=!1,o&&o(e),i&&i(Ii(t,c.width,c.height),hr(t,c.width,c.height)),this.setState({cropIsActive:!1,newCropIsBeingDrawn:!1}))}),bt(this,"onDragFocus",()=>{var e;(e=this.componentRef.current)==null||e.scrollTo(0,0)})}get document(){return document}getBox(){const e=this.mediaRef.current;if(!e)return{x:0,y:0,width:0,height:0};const{x:t,y:s,width:i,height:o}=e.getBoundingClientRect();return{x:t,y:s,width:i,height:o}}componentDidUpdate(e){const{crop:t,onComplete:s}=this.props;if(s&&!e.crop&&t){const{width:i,height:o}=this.getBox();i&&o&&s(Ii(t,i,o),hr(t,i,o))}}componentWillUnmount(){this.resizeObserver&&this.resizeObserver.disconnect(),this.unbindDocMove()}bindDocMove(){this.docMoveBound||(this.document.addEventListener("pointermove",this.onDocPointerMove,fr),this.document.addEventListener("pointerup",this.onDocPointerDone,fr),this.document.addEventListener("pointercancel",this.onDocPointerDone,fr),this.docMoveBound=!0)}unbindDocMove(){this.docMoveBound&&(this.document.removeEventListener("pointermove",this.onDocPointerMove,fr),this.document.removeEventListener("pointerup",this.onDocPointerDone,fr),this.document.removeEventListener("pointercancel",this.onDocPointerDone,fr),this.docMoveBound=!1)}getCropStyle(){const{crop:e}=this.props;if(e)return{top:`${e.y}${e.unit}`,left:`${e.x}${e.unit}`,width:`${e.width}${e.unit}`,height:`${e.height}${e.unit}`}}dragCrop(){const{evData:e}=this,t=this.getBox(),s=this.makePixelCrop(t),i=e.clientX-e.startClientX,o=e.clientY-e.startClientY;return s.x=ur(e.startCropX+i,0,t.width-s.width),s.y=ur(e.startCropY+o,0,t.height-s.height),s}getPointRegion(e,t,s,i){const{evData:o}=this,c=o.clientX-e.x,u=o.clientY-e.y;let h;i&&t?h=t==="nw"||t==="n"||t==="ne":h=u<o.startCropY;let p;return s&&t?p=t==="nw"||t==="w"||t==="sw":p=c<o.startCropX,p?h?"nw":"sw":h?"ne":"se"}resolveMinDimensions(e,t,s=0,i=0){const o=Math.min(s,e.width),c=Math.min(i,e.height);return!t||!o&&!c?[o,c]:t>1?o?[o,o/t]:[c*t,c]:c?[c*t,c]:[o,o/t]}resizeCrop(){const{evData:e}=this,{aspect:t=0,maxWidth:s,maxHeight:i}=this.props,o=this.getBox(),[c,u]=this.resolveMinDimensions(o,t,this.props.minWidth,this.props.minHeight);let h=this.makePixelCrop(o);const p=this.getPointRegion(o,e.ord,c,u),f=e.ord||p;let g=e.clientX-e.startClientX,x=e.clientY-e.startClientY;(c&&f==="nw"||f==="w"||f==="sw")&&(g=Math.min(g,-c)),(u&&f==="nw"||f==="n"||f==="ne")&&(x=Math.min(x,-u));const b={unit:"px",x:0,y:0,width:0,height:0};p==="ne"?(b.x=e.startCropX,b.width=g,t?(b.height=b.width/t,b.y=e.startCropY-b.height):(b.height=Math.abs(x),b.y=e.startCropY-b.height)):p==="se"?(b.x=e.startCropX,b.y=e.startCropY,b.width=g,t?b.height=b.width/t:b.height=x):p==="sw"?(b.x=e.startCropX+g,b.y=e.startCropY,b.width=Math.abs(g),t?b.height=b.width/t:b.height=x):p==="nw"&&(b.x=e.startCropX+g,b.width=Math.abs(g),t?(b.height=b.width/t,b.y=e.startCropY-b.height):(b.height=Math.abs(x),b.y=e.startCropY+x));const w=qy(b,t,p,o.width,o.height,c,u,s,i);return t||mn.xyOrds.indexOf(f)>-1?h=w:mn.xOrds.indexOf(f)>-1?(h.x=w.x,h.width=w.width):mn.yOrds.indexOf(f)>-1&&(h.y=w.y,h.height=w.height),h.x=ur(h.x,0,o.width-h.width),h.y=ur(h.y,0,o.height-h.height),h}renderCropSelection(){const{ariaLabels:e=mn.defaultProps.ariaLabels,disabled:t,locked:s,renderSelectionAddon:i,ruleOfThirds:o,crop:c}=this.props,u=this.getCropStyle();if(c)return Ve.createElement("div",{style:u,className:"ReactCrop__crop-selection",onPointerDown:this.onCropPointerDown,"aria-label":e.cropArea,tabIndex:0,onKeyDown:this.onComponentKeyDown,role:"group"},!t&&!s&&Ve.createElement("div",{className:"ReactCrop__drag-elements",onFocus:this.onDragFocus},Ve.createElement("div",{className:"ReactCrop__drag-bar ord-n","data-ord":"n"}),Ve.createElement("div",{className:"ReactCrop__drag-bar ord-e","data-ord":"e"}),Ve.createElement("div",{className:"ReactCrop__drag-bar ord-s","data-ord":"s"}),Ve.createElement("div",{className:"ReactCrop__drag-bar ord-w","data-ord":"w"}),Ve.createElement("div",{className:"ReactCrop__drag-handle ord-nw","data-ord":"nw",tabIndex:0,"aria-label":e.nwDragHandle,onKeyDown:h=>this.onHandlerKeyDown(h,"nw"),role:"button"}),Ve.createElement("div",{className:"ReactCrop__drag-handle ord-n","data-ord":"n",tabIndex:0,"aria-label":e.nDragHandle,onKeyDown:h=>this.onHandlerKeyDown(h,"n"),role:"button"}),Ve.createElement("div",{className:"ReactCrop__drag-handle ord-ne","data-ord":"ne",tabIndex:0,"aria-label":e.neDragHandle,onKeyDown:h=>this.onHandlerKeyDown(h,"ne"),role:"button"}),Ve.createElement("div",{className:"ReactCrop__drag-handle ord-e","data-ord":"e",tabIndex:0,"aria-label":e.eDragHandle,onKeyDown:h=>this.onHandlerKeyDown(h,"e"),role:"button"}),Ve.createElement("div",{className:"ReactCrop__drag-handle ord-se","data-ord":"se",tabIndex:0,"aria-label":e.seDragHandle,onKeyDown:h=>this.onHandlerKeyDown(h,"se"),role:"button"}),Ve.createElement("div",{className:"ReactCrop__drag-handle ord-s","data-ord":"s",tabIndex:0,"aria-label":e.sDragHandle,onKeyDown:h=>this.onHandlerKeyDown(h,"s"),role:"button"}),Ve.createElement("div",{className:"ReactCrop__drag-handle ord-sw","data-ord":"sw",tabIndex:0,"aria-label":e.swDragHandle,onKeyDown:h=>this.onHandlerKeyDown(h,"sw"),role:"button"}),Ve.createElement("div",{className:"ReactCrop__drag-handle ord-w","data-ord":"w",tabIndex:0,"aria-label":e.wDragHandle,onKeyDown:h=>this.onHandlerKeyDown(h,"w"),role:"button"})),i&&Ve.createElement("div",{className:"ReactCrop__selection-addon",onPointerDown:h=>h.stopPropagation()},i(this.state)),o&&Ve.createElement(Ve.Fragment,null,Ve.createElement("div",{className:"ReactCrop__rule-of-thirds-hz"}),Ve.createElement("div",{className:"ReactCrop__rule-of-thirds-vt"})))}makePixelCrop(e){const t={...Sd,...this.props.crop||{}};return Ii(t,e.width,e.height)}render(){const{aspect:e,children:t,circularCrop:s,className:i,crop:o,disabled:c,locked:u,style:h,ruleOfThirds:p}=this.props,{cropIsActive:f,newCropIsBeingDrawn:g}=this.state,x=o?this.renderCropSelection():null,b=jE("ReactCrop",i,f&&"ReactCrop--active",c&&"ReactCrop--disabled",u&&"ReactCrop--locked",g&&"ReactCrop--new-crop",o&&e&&"ReactCrop--fixed-aspect",o&&s&&"ReactCrop--circular-crop",o&&p&&"ReactCrop--rule-of-thirds",!this.dragStarted&&o&&!o.width&&!o.height&&"ReactCrop--invisible-crop",s&&"ReactCrop--no-animate");return Ve.createElement("div",{ref:this.componentRef,className:b,style:h},Ve.createElement("div",{ref:this.mediaRef,className:"ReactCrop__child-wrapper",onPointerDown:this.onComponentPointerDown},t),o?Ve.createElement("svg",{className:"ReactCrop__crop-mask",width:"100%",height:"100%"},Ve.createElement("defs",null,Ve.createElement("mask",{id:`hole-${this.instanceId}`},Ve.createElement("rect",{width:"100%",height:"100%",fill:"white"}),s?Ve.createElement("ellipse",{cx:`${o.x+o.width/2}${o.unit}`,cy:`${o.y+o.height/2}${o.unit}`,rx:`${o.width/2}${o.unit}`,ry:`${o.height/2}${o.unit}`,fill:"black"}):Ve.createElement("rect",{x:`${o.x}${o.unit}`,y:`${o.y}${o.unit}`,width:`${o.width}${o.unit}`,height:`${o.height}${o.unit}`,fill:"black"}))),Ve.createElement("rect",{fill:"black",fillOpacity:.5,width:"100%",height:"100%",mask:`url(#hole-${this.instanceId})`})):void 0,x)}};bt(zi,"xOrds",["e","w"]),bt(zi,"yOrds",["n","s"]),bt(zi,"xyOrds",["nw","ne","se","sw"]),bt(zi,"nudgeStep",1),bt(zi,"nudgeStepMedium",10),bt(zi,"nudgeStepLarge",100),bt(zi,"defaultProps",{ariaLabels:{cropArea:"Use the arrow keys to move the crop selection area",nwDragHandle:"Use the arrow keys to move the north west drag handle to change the crop selection area",nDragHandle:"Use the up and down arrow keys to move the north drag handle to change the crop selection area",neDragHandle:"Use the arrow keys to move the north east drag handle to change the crop selection area",eDragHandle:"Use the up and down arrow keys to move the east drag handle to change the crop selection area",seDragHandle:"Use the arrow keys to move the south east drag handle to change the crop selection area",sDragHandle:"Use the up and down arrow keys to move the south drag handle to change the crop selection area",swDragHandle:"Use the arrow keys to move the south west drag handle to change the crop selection area",wDragHandle:"Use the up and down arrow keys to move the west drag handle to change the crop selection area"}});let kE=zi;function RE(r,e){return e.forEach((function(t){t&&typeof t!="string"&&!Array.isArray(t)&&Object.keys(t).forEach((function(s){if(s!=="default"&&!(s in r)){var i=Object.getOwnPropertyDescriptor(t,s);Object.defineProperty(r,s,i.get?i:{enumerable:!0,get:function(){return t[s]}})}}))})),Object.freeze(r)}function Lv(r,e){return new Promise((function(t,s){let i;return DE(r).then((function(o){try{return i=o,t(new Blob([e.slice(0,2),i,e.slice(2)],{type:"image/jpeg"}))}catch(c){return s(c)}}),s)}))}const DE=r=>new Promise(((e,t)=>{const s=new FileReader;s.addEventListener("load",(({target:{result:i}})=>{const o=new DataView(i);let c=0;if(o.getUint16(c)!==65496)return t("not a valid JPEG");for(c+=2;;){const u=o.getUint16(c);if(u===65498)break;const h=o.getUint16(c+2);if(u===65505&&o.getUint32(c+4)===1165519206){const p=c+10;let f;switch(o.getUint16(p)){case 18761:f=!0;break;case 19789:f=!1;break;default:return t("TIFF header contains invalid endian")}if(o.getUint16(p+2,f)!==42)return t("TIFF header contains invalid version");const g=o.getUint32(p+4,f),x=p+g+2+12*o.getUint16(p+g,f);for(let b=p+g+2;b<x;b+=12)if(o.getUint16(b,f)==274){if(o.getUint16(b+2,f)!==3)return t("Orientation data type is invalid");if(o.getUint32(b+4,f)!==1)return t("Orientation data count is invalid");o.setUint16(b+8,1,f);break}return e(i.slice(c,c+2+h))}c+=2+h}return e(new Blob)})),s.readAsArrayBuffer(r)}));var Nd={},ME={get exports(){return Nd},set exports(r){Nd=r}};(function(r){var e,t,s={};ME.exports=s,s.parse=function(i,o){for(var c=s.bin.readUshort,u=s.bin.readUint,h=0,p={},f=new Uint8Array(i),g=f.length-4;u(f,g)!=101010256;)g--;h=g,h+=4;var x=c(f,h+=4);c(f,h+=2);var b=u(f,h+=2),w=u(f,h+=4);h+=4,h=w;for(var _=0;_<x;_++){u(f,h),h+=4,h+=4,h+=4,u(f,h+=4),b=u(f,h+=4);var S=u(f,h+=4),A=c(f,h+=4),L=c(f,h+2),O=c(f,h+4);h+=6;var D=u(f,h+=8);h+=4,h+=A+L+O,s._readLocal(f,D,p,b,S,o)}return p},s._readLocal=function(i,o,c,u,h,p){var f=s.bin.readUshort,g=s.bin.readUint;g(i,o),f(i,o+=4),f(i,o+=2);var x=f(i,o+=2);g(i,o+=2),g(i,o+=4),o+=4;var b=f(i,o+=8),w=f(i,o+=2);o+=2;var _=s.bin.readUTF8(i,o,b);if(o+=b,o+=w,p)c[_]={size:h,csize:u};else{var S=new Uint8Array(i.buffer,o);if(x==0)c[_]=new Uint8Array(S.buffer.slice(o,o+u));else{if(x!=8)throw"unknown compression method: "+x;var A=new Uint8Array(h);s.inflateRaw(S,A),c[_]=A}}},s.inflateRaw=function(i,o){return s.F.inflate(i,o)},s.inflate=function(i,o){return i[0],i[1],s.inflateRaw(new Uint8Array(i.buffer,i.byteOffset+2,i.length-6),o)},s.deflate=function(i,o){o==null&&(o={level:6});var c=0,u=new Uint8Array(50+Math.floor(1.1*i.length));u[c]=120,u[c+1]=156,c+=2,c=s.F.deflateRaw(i,u,c,o.level);var h=s.adler(i,0,i.length);return u[c+0]=h>>>24&255,u[c+1]=h>>>16&255,u[c+2]=h>>>8&255,u[c+3]=h>>>0&255,new Uint8Array(u.buffer,0,c+4)},s.deflateRaw=function(i,o){o==null&&(o={level:6});var c=new Uint8Array(50+Math.floor(1.1*i.length)),u=s.F.deflateRaw(i,c,u,o.level);return new Uint8Array(c.buffer,0,u)},s.encode=function(i,o){o==null&&(o=!1);var c=0,u=s.bin.writeUint,h=s.bin.writeUshort,p={};for(var f in i){var g=!s._noNeed(f)&&!o,x=i[f],b=s.crc.crc(x,0,x.length);p[f]={cpr:g,usize:x.length,crc:b,file:g?s.deflateRaw(x):x}}for(var f in p)c+=p[f].file.length+30+46+2*s.bin.sizeUTF8(f);c+=22;var w=new Uint8Array(c),_=0,S=[];for(var f in p){var A=p[f];S.push(_),_=s._writeHeader(w,_,f,A,0)}var L=0,O=_;for(var f in p)A=p[f],S.push(_),_=s._writeHeader(w,_,f,A,1,S[L++]);var D=_-O;return u(w,_,101010256),_+=4,h(w,_+=4,L),h(w,_+=2,L),u(w,_+=2,D),u(w,_+=4,O),_+=4,_+=2,w.buffer},s._noNeed=function(i){var o=i.split(".").pop().toLowerCase();return"png,jpg,jpeg,zip".indexOf(o)!=-1},s._writeHeader=function(i,o,c,u,h,p){var f=s.bin.writeUint,g=s.bin.writeUshort,x=u.file;return f(i,o,h==0?67324752:33639248),o+=4,h==1&&(o+=2),g(i,o,20),g(i,o+=2,0),g(i,o+=2,u.cpr?8:0),f(i,o+=2,0),f(i,o+=4,u.crc),f(i,o+=4,x.length),f(i,o+=4,u.usize),g(i,o+=4,s.bin.sizeUTF8(c)),g(i,o+=2,0),o+=2,h==1&&(o+=2,o+=2,f(i,o+=6,p),o+=4),o+=s.bin.writeUTF8(i,o,c),h==0&&(i.set(x,o),o+=x.length),o},s.crc={table:(function(){for(var i=new Uint32Array(256),o=0;o<256;o++){for(var c=o,u=0;u<8;u++)1&c?c=3988292384^c>>>1:c>>>=1;i[o]=c}return i})(),update:function(i,o,c,u){for(var h=0;h<u;h++)i=s.crc.table[255&(i^o[c+h])]^i>>>8;return i},crc:function(i,o,c){return 4294967295^s.crc.update(4294967295,i,o,c)}},s.adler=function(i,o,c){for(var u=1,h=0,p=o,f=o+c;p<f;){for(var g=Math.min(p+5552,f);p<g;)h+=u+=i[p++];u%=65521,h%=65521}return h<<16|u},s.bin={readUshort:function(i,o){return i[o]|i[o+1]<<8},writeUshort:function(i,o,c){i[o]=255&c,i[o+1]=c>>8&255},readUint:function(i,o){return 16777216*i[o+3]+(i[o+2]<<16|i[o+1]<<8|i[o])},writeUint:function(i,o,c){i[o]=255&c,i[o+1]=c>>8&255,i[o+2]=c>>16&255,i[o+3]=c>>24&255},readASCII:function(i,o,c){for(var u="",h=0;h<c;h++)u+=String.fromCharCode(i[o+h]);return u},writeASCII:function(i,o,c){for(var u=0;u<c.length;u++)i[o+u]=c.charCodeAt(u)},pad:function(i){return i.length<2?"0"+i:i},readUTF8:function(i,o,c){for(var u,h="",p=0;p<c;p++)h+="%"+s.bin.pad(i[o+p].toString(16));try{u=decodeURIComponent(h)}catch{return s.bin.readASCII(i,o,c)}return u},writeUTF8:function(i,o,c){for(var u=c.length,h=0,p=0;p<u;p++){var f=c.charCodeAt(p);if((4294967168&f)==0)i[o+h]=f,h++;else if((4294965248&f)==0)i[o+h]=192|f>>6,i[o+h+1]=128|f>>0&63,h+=2;else if((4294901760&f)==0)i[o+h]=224|f>>12,i[o+h+1]=128|f>>6&63,i[o+h+2]=128|f>>0&63,h+=3;else{if((4292870144&f)!=0)throw"e";i[o+h]=240|f>>18,i[o+h+1]=128|f>>12&63,i[o+h+2]=128|f>>6&63,i[o+h+3]=128|f>>0&63,h+=4}}return h},sizeUTF8:function(i){for(var o=i.length,c=0,u=0;u<o;u++){var h=i.charCodeAt(u);if((4294967168&h)==0)c++;else if((4294965248&h)==0)c+=2;else if((4294901760&h)==0)c+=3;else{if((4292870144&h)!=0)throw"e";c+=4}}return c}},s.F={},s.F.deflateRaw=function(i,o,c,u){var h=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][u],p=s.F.U,f=s.F._goodIndex;s.F._hash;var g=s.F._putsE,x=0,b=c<<3,w=0,_=i.length;if(u==0){for(;x<_;)g(o,b,x+(H=Math.min(65535,_-x))==_?1:0),b=s.F._copyExact(i,x,H,o,b+8),x+=H;return b>>>3}var S=p.lits,A=p.strt,L=p.prev,O=0,D=0,I=0,C=0,P=0,k=0;for(_>2&&(A[k=s.F._hash(i,0)]=0),x=0;x<_;x++){if(P=k,x+1<_-2){k=s.F._hash(i,x+1);var N=x+1&32767;L[N]=A[k],A[k]=N}if(w<=x){(O>14e3||D>26697)&&_-x>100&&(w<x&&(S[O]=x-w,O+=2,w=x),b=s.F._writeBlock(x==_-1||w==_?1:0,S,O,C,i,I,x-I,o,b),O=D=C=0,I=x);var M=0;x<_-2&&(M=s.F._bestMatch(i,x,L,P,Math.min(h[2],_-x),h[3]));var H=M>>>16,F=65535&M;if(M!=0){F=65535&M;var V=f(H=M>>>16,p.of0);p.lhst[257+V]++;var q=f(F,p.df0);p.dhst[q]++,C+=p.exb[V]+p.dxb[q],S[O]=H<<23|x-w,S[O+1]=F<<16|V<<8|q,O+=2,w=x+H}else p.lhst[i[x]]++;D++}}for(I==x&&i.length!=0||(w<x&&(S[O]=x-w,O+=2,w=x),b=s.F._writeBlock(1,S,O,C,i,I,x-I,o,b),O=0,D=0,O=D=C=0,I=x);(7&b)!=0;)b++;return b>>>3},s.F._bestMatch=function(i,o,c,u,h,p){var f=32767&o,g=c[f],x=f-g+32768&32767;if(g==f||u!=s.F._hash(i,o-x))return 0;for(var b=0,w=0,_=Math.min(32767,o);x<=_&&--p!=0&&g!=f;){if(b==0||i[o+b]==i[o+b-x]){var S=s.F._howLong(i,o,x);if(S>b){if(w=x,(b=S)>=h)break;x+2<S&&(S=x+2);for(var A=0,L=0;L<S-2;L++){var O=o-x+L+32768&32767,D=O-c[O]+32768&32767;D>A&&(A=D,g=O)}}}x+=(f=g)-(g=c[f])+32768&32767}return b<<16|w},s.F._howLong=function(i,o,c){if(i[o]!=i[o-c]||i[o+1]!=i[o+1-c]||i[o+2]!=i[o+2-c])return 0;var u=o,h=Math.min(i.length,o+258);for(o+=3;o<h&&i[o]==i[o-c];)o++;return o-u},s.F._hash=function(i,o){return(i[o]<<8|i[o+1])+(i[o+2]<<4)&65535},s.saved=0,s.F._writeBlock=function(i,o,c,u,h,p,f,g,x){var b,w,_,S,A,L,O,D,I,C=s.F.U,P=s.F._putsF,k=s.F._putsE;C.lhst[256]++,w=(b=s.F.getTrees())[0],_=b[1],S=b[2],A=b[3],L=b[4],O=b[5],D=b[6],I=b[7];var N=32+((x+3&7)==0?0:8-(x+3&7))+(f<<3),M=u+s.F.contSize(C.fltree,C.lhst)+s.F.contSize(C.fdtree,C.dhst),H=u+s.F.contSize(C.ltree,C.lhst)+s.F.contSize(C.dtree,C.dhst);H+=14+3*O+s.F.contSize(C.itree,C.ihst)+(2*C.ihst[16]+3*C.ihst[17]+7*C.ihst[18]);for(var F=0;F<286;F++)C.lhst[F]=0;for(F=0;F<30;F++)C.dhst[F]=0;for(F=0;F<19;F++)C.ihst[F]=0;var V=N<M&&N<H?0:M<H?1:2;if(P(g,x,i),P(g,x+1,V),x+=3,V==0){for(;(7&x)!=0;)x++;x=s.F._copyExact(h,p,f,g,x)}else{var q,z;if(V==1&&(q=C.fltree,z=C.fdtree),V==2){s.F.makeCodes(C.ltree,w),s.F.revCodes(C.ltree,w),s.F.makeCodes(C.dtree,_),s.F.revCodes(C.dtree,_),s.F.makeCodes(C.itree,S),s.F.revCodes(C.itree,S),q=C.ltree,z=C.dtree,k(g,x,A-257),k(g,x+=5,L-1),k(g,x+=5,O-4),x+=4;for(var E=0;E<O;E++)k(g,x+3*E,C.itree[1+(C.ordr[E]<<1)]);x+=3*O,x=s.F._codeTiny(D,C.itree,g,x),x=s.F._codeTiny(I,C.itree,g,x)}for(var j=p,G=0;G<c;G+=2){for(var Y=o[G],ee=Y>>>23,B=j+(8388607&Y);j<B;)x=s.F._writeLit(h[j++],q,g,x);if(ee!=0){var $=o[G+1],K=$>>16,Q=$>>8&255,Z=255&$;k(g,x=s.F._writeLit(257+Q,q,g,x),ee-C.of0[Q]),x+=C.exb[Q],P(g,x=s.F._writeLit(Z,z,g,x),K-C.df0[Z]),x+=C.dxb[Z],j+=ee}}x=s.F._writeLit(256,q,g,x)}return x},s.F._copyExact=function(i,o,c,u,h){var p=h>>>3;return u[p]=c,u[p+1]=c>>>8,u[p+2]=255-u[p],u[p+3]=255-u[p+1],p+=4,u.set(new Uint8Array(i.buffer,o,c),p),h+(c+4<<3)},s.F.getTrees=function(){for(var i=s.F.U,o=s.F._hufTree(i.lhst,i.ltree,15),c=s.F._hufTree(i.dhst,i.dtree,15),u=[],h=s.F._lenCodes(i.ltree,u),p=[],f=s.F._lenCodes(i.dtree,p),g=0;g<u.length;g+=2)i.ihst[u[g]]++;for(g=0;g<p.length;g+=2)i.ihst[p[g]]++;for(var x=s.F._hufTree(i.ihst,i.itree,7),b=19;b>4&&i.itree[1+(i.ordr[b-1]<<1)]==0;)b--;return[o,c,x,h,f,b,u,p]},s.F.getSecond=function(i){for(var o=[],c=0;c<i.length;c+=2)o.push(i[c+1]);return o},s.F.nonZero=function(i){for(var o="",c=0;c<i.length;c+=2)i[c+1]!=0&&(o+=(c>>1)+",");return o},s.F.contSize=function(i,o){for(var c=0,u=0;u<o.length;u++)c+=o[u]*i[1+(u<<1)];return c},s.F._codeTiny=function(i,o,c,u){for(var h=0;h<i.length;h+=2){var p=i[h],f=i[h+1];u=s.F._writeLit(p,o,c,u);var g=p==16?2:p==17?3:7;p>15&&(s.F._putsE(c,u,f,g),u+=g)}return u},s.F._lenCodes=function(i,o){for(var c=i.length;c!=2&&i[c-1]==0;)c-=2;for(var u=0;u<c;u+=2){var h=i[u+1],p=u+3<c?i[u+3]:-1,f=u+5<c?i[u+5]:-1,g=u==0?-1:i[u-1];if(h==0&&p==h&&f==h){for(var x=u+5;x+2<c&&i[x+2]==h;)x+=2;(b=Math.min(x+1-u>>>1,138))<11?o.push(17,b-3):o.push(18,b-11),u+=2*b-2}else if(h==g&&p==h&&f==h){for(x=u+5;x+2<c&&i[x+2]==h;)x+=2;var b=Math.min(x+1-u>>>1,6);o.push(16,b-3),u+=2*b-2}else o.push(h,0)}return c>>>1},s.F._hufTree=function(i,o,c){var u=[],h=i.length,p=o.length,f=0;for(f=0;f<p;f+=2)o[f]=0,o[f+1]=0;for(f=0;f<h;f++)i[f]!=0&&u.push({lit:f,f:i[f]});var g=u.length,x=u.slice(0);if(g==0)return 0;if(g==1){var b=u[0].lit;return x=b==0?1:0,o[1+(b<<1)]=1,o[1+(x<<1)]=1,1}u.sort((function(D,I){return D.f-I.f}));var w=u[0],_=u[1],S=0,A=1,L=2;for(u[0]={lit:-1,f:w.f+_.f,l:w,r:_,d:0};A!=g-1;)w=S!=A&&(L==g||u[S].f<u[L].f)?u[S++]:u[L++],_=S!=A&&(L==g||u[S].f<u[L].f)?u[S++]:u[L++],u[A++]={lit:-1,f:w.f+_.f,l:w,r:_};var O=s.F.setDepth(u[A-1],0);for(O>c&&(s.F.restrictDepth(x,c,O),O=c),f=0;f<g;f++)o[1+(x[f].lit<<1)]=x[f].d;return O},s.F.setDepth=function(i,o){return i.lit!=-1?(i.d=o,o):Math.max(s.F.setDepth(i.l,o+1),s.F.setDepth(i.r,o+1))},s.F.restrictDepth=function(i,o,c){var u=0,h=1<<c-o,p=0;for(i.sort((function(g,x){return x.d==g.d?g.f-x.f:x.d-g.d})),u=0;u<i.length&&i[u].d>o;u++){var f=i[u].d;i[u].d=o,p+=h-(1<<c-f)}for(p>>>=c-o;p>0;)(f=i[u].d)<o?(i[u].d++,p-=1<<o-f-1):u++;for(;u>=0;u--)i[u].d==o&&p<0&&(i[u].d--,p++);p!=0&&console.log("debt left")},s.F._goodIndex=function(i,o){var c=0;return o[16|c]<=i&&(c|=16),o[8|c]<=i&&(c|=8),o[4|c]<=i&&(c|=4),o[2|c]<=i&&(c|=2),o[1|c]<=i&&(c|=1),c},s.F._writeLit=function(i,o,c,u){return s.F._putsF(c,u,o[i<<1]),u+o[1+(i<<1)]},s.F.inflate=function(i,o){var c=Uint8Array;if(i[0]==3&&i[1]==0)return o||new c(0);var u=s.F,h=u._bitsF,p=u._bitsE,f=u._decodeTiny,g=u.makeCodes,x=u.codes2map,b=u._get17,w=u.U,_=o==null;_&&(o=new c(i.length>>>2<<3));for(var S,A,L=0,O=0,D=0,I=0,C=0,P=0,k=0,N=0,M=0;L==0;)if(L=h(i,M,1),O=h(i,M+1,2),M+=3,O!=0){if(_&&(o=s.F._check(o,N+(1<<17))),O==1&&(S=w.flmap,A=w.fdmap,P=511,k=31),O==2){D=p(i,M,5)+257,I=p(i,M+5,5)+1,C=p(i,M+10,4)+4,M+=14;for(var H=0;H<38;H+=2)w.itree[H]=0,w.itree[H+1]=0;var F=1;for(H=0;H<C;H++){var V=p(i,M+3*H,3);w.itree[1+(w.ordr[H]<<1)]=V,V>F&&(F=V)}M+=3*C,g(w.itree,F),x(w.itree,F,w.imap),S=w.lmap,A=w.dmap,M=f(w.imap,(1<<F)-1,D+I,i,M,w.ttree);var q=u._copyOut(w.ttree,0,D,w.ltree);P=(1<<q)-1;var z=u._copyOut(w.ttree,D,I,w.dtree);k=(1<<z)-1,g(w.ltree,q),x(w.ltree,q,S),g(w.dtree,z),x(w.dtree,z,A)}for(;;){var E=S[b(i,M)&P];M+=15&E;var j=E>>>4;if(!(j>>>8))o[N++]=j;else{if(j==256)break;var G=N+j-254;if(j>264){var Y=w.ldef[j-257];G=N+(Y>>>3)+p(i,M,7&Y),M+=7&Y}var ee=A[b(i,M)&k];M+=15&ee;var B=ee>>>4,$=w.ddef[B],K=($>>>4)+h(i,M,15&$);for(M+=15&$,_&&(o=s.F._check(o,N+(1<<17)));N<G;)o[N]=o[N++-K],o[N]=o[N++-K],o[N]=o[N++-K],o[N]=o[N++-K];N=G}}}else{(7&M)!=0&&(M+=8-(7&M));var Q=4+(M>>>3),Z=i[Q-4]|i[Q-3]<<8;_&&(o=s.F._check(o,N+Z)),o.set(new c(i.buffer,i.byteOffset+Q,Z),N),M=Q+Z<<3,N+=Z}return o.length==N?o:o.slice(0,N)},s.F._check=function(i,o){var c=i.length;if(o<=c)return i;var u=new Uint8Array(Math.max(c<<1,o));return u.set(i,0),u},s.F._decodeTiny=function(i,o,c,u,h,p){for(var f=s.F._bitsE,g=s.F._get17,x=0;x<c;){var b=i[g(u,h)&o];h+=15&b;var w=b>>>4;if(w<=15)p[x]=w,x++;else{var _=0,S=0;w==16?(S=3+f(u,h,2),h+=2,_=p[x-1]):w==17?(S=3+f(u,h,3),h+=3):w==18&&(S=11+f(u,h,7),h+=7);for(var A=x+S;x<A;)p[x]=_,x++}}return h},s.F._copyOut=function(i,o,c,u){for(var h=0,p=0,f=u.length>>>1;p<c;){var g=i[p+o];u[p<<1]=0,u[1+(p<<1)]=g,g>h&&(h=g),p++}for(;p<f;)u[p<<1]=0,u[1+(p<<1)]=0,p++;return h},s.F.makeCodes=function(i,o){for(var c,u,h,p,f=s.F.U,g=i.length,x=f.bl_count,b=0;b<=o;b++)x[b]=0;for(b=1;b<g;b+=2)x[i[b]]++;var w=f.next_code;for(c=0,x[0]=0,u=1;u<=o;u++)c=c+x[u-1]<<1,w[u]=c;for(h=0;h<g;h+=2)(p=i[h+1])!=0&&(i[h]=w[p],w[p]++)},s.F.codes2map=function(i,o,c){for(var u=i.length,h=s.F.U.rev15,p=0;p<u;p+=2)if(i[p+1]!=0)for(var f=p>>1,g=i[p+1],x=f<<4|g,b=o-g,w=i[p]<<b,_=w+(1<<b);w!=_;)c[h[w]>>>15-o]=x,w++},s.F.revCodes=function(i,o){for(var c=s.F.U.rev15,u=15-o,h=0;h<i.length;h+=2){var p=i[h]<<o-i[h+1];i[h]=c[p]>>>u}},s.F._putsE=function(i,o,c){c<<=7&o;var u=o>>>3;i[u]|=c,i[u+1]|=c>>>8},s.F._putsF=function(i,o,c){c<<=7&o;var u=o>>>3;i[u]|=c,i[u+1]|=c>>>8,i[u+2]|=c>>>16},s.F._bitsE=function(i,o,c){return(i[o>>>3]|i[1+(o>>>3)]<<8)>>>(7&o)&(1<<c)-1},s.F._bitsF=function(i,o,c){return(i[o>>>3]|i[1+(o>>>3)]<<8|i[2+(o>>>3)]<<16)>>>(7&o)&(1<<c)-1},s.F._get17=function(i,o){return(i[o>>>3]|i[1+(o>>>3)]<<8|i[2+(o>>>3)]<<16)>>>(7&o)},s.F._get25=function(i,o){return(i[o>>>3]|i[1+(o>>>3)]<<8|i[2+(o>>>3)]<<16|i[3+(o>>>3)]<<24)>>>(7&o)},s.F.U=(e=Uint16Array,t=Uint32Array,{next_code:new e(16),bl_count:new e(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new e(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new t(32),flmap:new e(512),fltree:[],fdmap:new e(32),fdtree:[],lmap:new e(32768),ltree:[],ttree:[],dmap:new e(32768),dtree:[],imap:new e(512),itree:[],rev15:new e(32768),lhst:new t(286),dhst:new t(30),ihst:new t(19),lits:new t(15e3),strt:new e(65536),prev:new e(32768)}),(function(){for(var i=s.F.U,o=0;o<32768;o++){var c=o;c=(4278255360&(c=(4042322160&(c=(3435973836&(c=(2863311530&c)>>>1|(1431655765&c)<<1))>>>2|(858993459&c)<<2))>>>4|(252645135&c)<<4))>>>8|(16711935&c)<<8,i.rev15[o]=(c>>>16|c<<16)>>>17}function u(h,p,f){for(;p--!=0;)h.push(0,f)}for(o=0;o<32;o++)i.ldef[o]=i.of0[o]<<3|i.exb[o],i.ddef[o]=i.df0[o]<<4|i.dxb[o];u(i.fltree,144,8),u(i.fltree,112,9),u(i.fltree,24,7),u(i.fltree,8,8),s.F.makeCodes(i.fltree,9),s.F.codes2map(i.fltree,9,i.flmap),s.F.revCodes(i.fltree,9),u(i.fdtree,32,5),s.F.makeCodes(i.fdtree,5),s.F.codes2map(i.fdtree,5,i.fdmap),s.F.revCodes(i.fdtree,5),u(i.itree,19,0),u(i.ltree,286,0),u(i.dtree,30,0),u(i.ttree,320,0)})()})();var LE=RE({__proto__:null,default:Nd},[Nd]);const pn=(function(){var r={nextZero(f,g){for(;f[g]!=0;)g++;return g},readUshort:(f,g)=>f[g]<<8|f[g+1],writeUshort(f,g,x){f[g]=x>>8&255,f[g+1]=255&x},readUint:(f,g)=>16777216*f[g]+(f[g+1]<<16|f[g+2]<<8|f[g+3]),writeUint(f,g,x){f[g]=x>>24&255,f[g+1]=x>>16&255,f[g+2]=x>>8&255,f[g+3]=255&x},readASCII(f,g,x){let b="";for(let w=0;w<x;w++)b+=String.fromCharCode(f[g+w]);return b},writeASCII(f,g,x){for(let b=0;b<x.length;b++)f[g+b]=x.charCodeAt(b)},readBytes(f,g,x){const b=[];for(let w=0;w<x;w++)b.push(f[g+w]);return b},pad:f=>f.length<2?`0${f}`:f,readUTF8(f,g,x){let b,w="";for(let _=0;_<x;_++)w+=`%${r.pad(f[g+_].toString(16))}`;try{b=decodeURIComponent(w)}catch{return r.readASCII(f,g,x)}return b}};function e(f,g,x,b){const w=g*x,_=o(b),S=Math.ceil(g*_/8),A=new Uint8Array(4*w),L=new Uint32Array(A.buffer),{ctype:O}=b,{depth:D}=b,I=r.readUshort;if(O==6){const Y=w<<2;if(D==8)for(var C=0;C<Y;C+=4)A[C]=f[C],A[C+1]=f[C+1],A[C+2]=f[C+2],A[C+3]=f[C+3];if(D==16)for(C=0;C<Y;C++)A[C]=f[C<<1]}else if(O==2){const Y=b.tabs.tRNS;if(Y==null){if(D==8)for(C=0;C<w;C++){var P=3*C;L[C]=255<<24|f[P+2]<<16|f[P+1]<<8|f[P]}if(D==16)for(C=0;C<w;C++)P=6*C,L[C]=255<<24|f[P+4]<<16|f[P+2]<<8|f[P]}else{var k=Y[0];const ee=Y[1],B=Y[2];if(D==8)for(C=0;C<w;C++){var N=C<<2;P=3*C,L[C]=255<<24|f[P+2]<<16|f[P+1]<<8|f[P],f[P]==k&&f[P+1]==ee&&f[P+2]==B&&(A[N+3]=0)}if(D==16)for(C=0;C<w;C++)N=C<<2,P=6*C,L[C]=255<<24|f[P+4]<<16|f[P+2]<<8|f[P],I(f,P)==k&&I(f,P+2)==ee&&I(f,P+4)==B&&(A[N+3]=0)}}else if(O==3){const Y=b.tabs.PLTE,ee=b.tabs.tRNS,B=ee?ee.length:0;if(D==1)for(var M=0;M<x;M++){var H=M*S,F=M*g;for(C=0;C<g;C++){N=F+C<<2;var V=3*(q=f[H+(C>>3)]>>7-((7&C)<<0)&1);A[N]=Y[V],A[N+1]=Y[V+1],A[N+2]=Y[V+2],A[N+3]=q<B?ee[q]:255}}if(D==2)for(M=0;M<x;M++)for(H=M*S,F=M*g,C=0;C<g;C++)N=F+C<<2,V=3*(q=f[H+(C>>2)]>>6-((3&C)<<1)&3),A[N]=Y[V],A[N+1]=Y[V+1],A[N+2]=Y[V+2],A[N+3]=q<B?ee[q]:255;if(D==4)for(M=0;M<x;M++)for(H=M*S,F=M*g,C=0;C<g;C++)N=F+C<<2,V=3*(q=f[H+(C>>1)]>>4-((1&C)<<2)&15),A[N]=Y[V],A[N+1]=Y[V+1],A[N+2]=Y[V+2],A[N+3]=q<B?ee[q]:255;if(D==8)for(C=0;C<w;C++){var q;N=C<<2,V=3*(q=f[C]),A[N]=Y[V],A[N+1]=Y[V+1],A[N+2]=Y[V+2],A[N+3]=q<B?ee[q]:255}}else if(O==4){if(D==8)for(C=0;C<w;C++){N=C<<2;var z=f[E=C<<1];A[N]=z,A[N+1]=z,A[N+2]=z,A[N+3]=f[E+1]}if(D==16)for(C=0;C<w;C++){var E;N=C<<2,z=f[E=C<<2],A[N]=z,A[N+1]=z,A[N+2]=z,A[N+3]=f[E+2]}}else if(O==0)for(k=b.tabs.tRNS?b.tabs.tRNS:-1,M=0;M<x;M++){const Y=M*S,ee=M*g;if(D==1)for(var j=0;j<g;j++){var G=(z=255*(f[Y+(j>>>3)]>>>7-(7&j)&1))==255*k?0:255;L[ee+j]=G<<24|z<<16|z<<8|z}else if(D==2)for(j=0;j<g;j++)G=(z=85*(f[Y+(j>>>2)]>>>6-((3&j)<<1)&3))==85*k?0:255,L[ee+j]=G<<24|z<<16|z<<8|z;else if(D==4)for(j=0;j<g;j++)G=(z=17*(f[Y+(j>>>1)]>>>4-((1&j)<<2)&15))==17*k?0:255,L[ee+j]=G<<24|z<<16|z<<8|z;else if(D==8)for(j=0;j<g;j++)G=(z=f[Y+j])==k?0:255,L[ee+j]=G<<24|z<<16|z<<8|z;else if(D==16)for(j=0;j<g;j++)z=f[Y+(j<<1)],G=I(f,Y+(j<<1))==k?0:255,L[ee+j]=G<<24|z<<16|z<<8|z}return A}function t(f,g,x,b){const w=o(f),_=Math.ceil(x*w/8),S=new Uint8Array((_+1+f.interlace)*b);return g=f.tabs.CgBI?i(g,S):s(g,S),f.interlace==0?g=c(g,f,0,x,b):f.interlace==1&&(g=(function(L,O){const D=O.width,I=O.height,C=o(O),P=C>>3,k=Math.ceil(D*C/8),N=new Uint8Array(I*k);let M=0;const H=[0,0,4,0,2,0,1],F=[0,4,0,2,0,1,0],V=[8,8,8,4,4,2,2],q=[8,8,4,4,2,2,1];let z=0;for(;z<7;){const j=V[z],G=q[z];let Y=0,ee=0,B=H[z];for(;B<I;)B+=j,ee++;let $=F[z];for(;$<D;)$+=G,Y++;const K=Math.ceil(Y*C/8);c(L,O,M,Y,ee);let Q=0,Z=H[z];for(;Z<I;){let de=F[z],ue=M+Q*K<<3;for(;de<D;){var E;if(C==1&&(E=(E=L[ue>>3])>>7-(7&ue)&1,N[Z*k+(de>>3)]|=E<<7-((7&de)<<0)),C==2&&(E=(E=L[ue>>3])>>6-(7&ue)&3,N[Z*k+(de>>2)]|=E<<6-((3&de)<<1)),C==4&&(E=(E=L[ue>>3])>>4-(7&ue)&15,N[Z*k+(de>>1)]|=E<<4-((1&de)<<2)),C>=8){const xe=Z*k+de*P;for(let pe=0;pe<P;pe++)N[xe+pe]=L[(ue>>3)+pe]}ue+=C,de+=G}Q++,Z+=j}Y*ee!=0&&(M+=ee*(1+K)),z+=1}return N})(g,f)),g}function s(f,g){return i(new Uint8Array(f.buffer,2,f.length-6),g)}var i=(function(){const f={H:{}};return f.H.N=function(g,x){const b=Uint8Array;let w,_,S=0,A=0,L=0,O=0,D=0,I=0,C=0,P=0,k=0;if(g[0]==3&&g[1]==0)return x||new b(0);const N=f.H,M=N.b,H=N.e,F=N.R,V=N.n,q=N.A,z=N.Z,E=N.m,j=x==null;for(j&&(x=new b(g.length>>>2<<5));S==0;)if(S=M(g,k,1),A=M(g,k+1,2),k+=3,A!=0){if(j&&(x=f.H.W(x,P+(1<<17))),A==1&&(w=E.J,_=E.h,I=511,C=31),A==2){L=H(g,k,5)+257,O=H(g,k+5,5)+1,D=H(g,k+10,4)+4,k+=14;let Y=1;for(var G=0;G<38;G+=2)E.Q[G]=0,E.Q[G+1]=0;for(G=0;G<D;G++){const $=H(g,k+3*G,3);E.Q[1+(E.X[G]<<1)]=$,$>Y&&(Y=$)}k+=3*D,V(E.Q,Y),q(E.Q,Y,E.u),w=E.w,_=E.d,k=F(E.u,(1<<Y)-1,L+O,g,k,E.v);const ee=N.V(E.v,0,L,E.C);I=(1<<ee)-1;const B=N.V(E.v,L,O,E.D);C=(1<<B)-1,V(E.C,ee),q(E.C,ee,w),V(E.D,B),q(E.D,B,_)}for(;;){const Y=w[z(g,k)&I];k+=15&Y;const ee=Y>>>4;if(!(ee>>>8))x[P++]=ee;else{if(ee==256)break;{let B=P+ee-254;if(ee>264){const de=E.q[ee-257];B=P+(de>>>3)+H(g,k,7&de),k+=7&de}const $=_[z(g,k)&C];k+=15&$;const K=$>>>4,Q=E.c[K],Z=(Q>>>4)+M(g,k,15&Q);for(k+=15&Q;P<B;)x[P]=x[P++-Z],x[P]=x[P++-Z],x[P]=x[P++-Z],x[P]=x[P++-Z];P=B}}}}else{(7&k)!=0&&(k+=8-(7&k));const Y=4+(k>>>3),ee=g[Y-4]|g[Y-3]<<8;j&&(x=f.H.W(x,P+ee)),x.set(new b(g.buffer,g.byteOffset+Y,ee),P),k=Y+ee<<3,P+=ee}return x.length==P?x:x.slice(0,P)},f.H.W=function(g,x){const b=g.length;if(x<=b)return g;const w=new Uint8Array(b<<1);return w.set(g,0),w},f.H.R=function(g,x,b,w,_,S){const A=f.H.e,L=f.H.Z;let O=0;for(;O<b;){const D=g[L(w,_)&x];_+=15&D;const I=D>>>4;if(I<=15)S[O]=I,O++;else{let C=0,P=0;I==16?(P=3+A(w,_,2),_+=2,C=S[O-1]):I==17?(P=3+A(w,_,3),_+=3):I==18&&(P=11+A(w,_,7),_+=7);const k=O+P;for(;O<k;)S[O]=C,O++}}return _},f.H.V=function(g,x,b,w){let _=0,S=0;const A=w.length>>>1;for(;S<b;){const L=g[S+x];w[S<<1]=0,w[1+(S<<1)]=L,L>_&&(_=L),S++}for(;S<A;)w[S<<1]=0,w[1+(S<<1)]=0,S++;return _},f.H.n=function(g,x){const b=f.H.m,w=g.length;let _,S,A,L;const O=b.j;for(var D=0;D<=x;D++)O[D]=0;for(D=1;D<w;D+=2)O[g[D]]++;const I=b.K;for(_=0,O[0]=0,S=1;S<=x;S++)_=_+O[S-1]<<1,I[S]=_;for(A=0;A<w;A+=2)L=g[A+1],L!=0&&(g[A]=I[L],I[L]++)},f.H.A=function(g,x,b){const w=g.length,_=f.H.m.r;for(let S=0;S<w;S+=2)if(g[S+1]!=0){const A=S>>1,L=g[S+1],O=A<<4|L,D=x-L;let I=g[S]<<D;const C=I+(1<<D);for(;I!=C;)b[_[I]>>>15-x]=O,I++}},f.H.l=function(g,x){const b=f.H.m.r,w=15-x;for(let _=0;_<g.length;_+=2){const S=g[_]<<x-g[_+1];g[_]=b[S]>>>w}},f.H.M=function(g,x,b){b<<=7&x;const w=x>>>3;g[w]|=b,g[w+1]|=b>>>8},f.H.I=function(g,x,b){b<<=7&x;const w=x>>>3;g[w]|=b,g[w+1]|=b>>>8,g[w+2]|=b>>>16},f.H.e=function(g,x,b){return(g[x>>>3]|g[1+(x>>>3)]<<8)>>>(7&x)&(1<<b)-1},f.H.b=function(g,x,b){return(g[x>>>3]|g[1+(x>>>3)]<<8|g[2+(x>>>3)]<<16)>>>(7&x)&(1<<b)-1},f.H.Z=function(g,x){return(g[x>>>3]|g[1+(x>>>3)]<<8|g[2+(x>>>3)]<<16)>>>(7&x)},f.H.i=function(g,x){return(g[x>>>3]|g[1+(x>>>3)]<<8|g[2+(x>>>3)]<<16|g[3+(x>>>3)]<<24)>>>(7&x)},f.H.m=(function(){const g=Uint16Array,x=Uint32Array;return{K:new g(16),j:new g(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new g(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new x(32),J:new g(512),_:[],h:new g(32),$:[],w:new g(32768),C:[],v:[],d:new g(32768),D:[],u:new g(512),Q:[],r:new g(32768),s:new x(286),Y:new x(30),a:new x(19),t:new x(15e3),k:new g(65536),g:new g(32768)}})(),(function(){const g=f.H.m;for(var x=0;x<32768;x++){let w=x;w=(2863311530&w)>>>1|(1431655765&w)<<1,w=(3435973836&w)>>>2|(858993459&w)<<2,w=(4042322160&w)>>>4|(252645135&w)<<4,w=(4278255360&w)>>>8|(16711935&w)<<8,g.r[x]=(w>>>16|w<<16)>>>17}function b(w,_,S){for(;_--!=0;)w.push(0,S)}for(x=0;x<32;x++)g.q[x]=g.S[x]<<3|g.T[x],g.c[x]=g.p[x]<<4|g.z[x];b(g._,144,8),b(g._,112,9),b(g._,24,7),b(g._,8,8),f.H.n(g._,9),f.H.A(g._,9,g.J),f.H.l(g._,9),b(g.$,32,5),f.H.n(g.$,5),f.H.A(g.$,5,g.h),f.H.l(g.$,5),b(g.Q,19,0),b(g.C,286,0),b(g.D,30,0),b(g.v,320,0)})(),f.H.N})();function o(f){return[1,null,3,1,2,null,4][f.ctype]*f.depth}function c(f,g,x,b,w){let _=o(g);const S=Math.ceil(b*_/8);let A,L;_=Math.ceil(_/8);let O=f[x],D=0;if(O>1&&(f[x]=[0,0,1][O-2]),O==3)for(D=_;D<S;D++)f[D+1]=f[D+1]+(f[D+1-_]>>>1)&255;for(let I=0;I<w;I++)if(A=x+I*S,L=A+I+1,O=f[L-1],D=0,O==0)for(;D<S;D++)f[A+D]=f[L+D];else if(O==1){for(;D<_;D++)f[A+D]=f[L+D];for(;D<S;D++)f[A+D]=f[L+D]+f[A+D-_]}else if(O==2)for(;D<S;D++)f[A+D]=f[L+D]+f[A+D-S];else if(O==3){for(;D<_;D++)f[A+D]=f[L+D]+(f[A+D-S]>>>1);for(;D<S;D++)f[A+D]=f[L+D]+(f[A+D-S]+f[A+D-_]>>>1)}else{for(;D<_;D++)f[A+D]=f[L+D]+u(0,f[A+D-S],0);for(;D<S;D++)f[A+D]=f[L+D]+u(f[A+D-_],f[A+D-S],f[A+D-_-S])}return f}function u(f,g,x){const b=f+g-x,w=b-f,_=b-g,S=b-x;return w*w<=_*_&&w*w<=S*S?f:_*_<=S*S?g:x}function h(f,g,x){x.width=r.readUint(f,g),g+=4,x.height=r.readUint(f,g),g+=4,x.depth=f[g],g++,x.ctype=f[g],g++,x.compress=f[g],g++,x.filter=f[g],g++,x.interlace=f[g],g++}function p(f,g,x,b,w,_,S,A,L){const O=Math.min(g,w),D=Math.min(x,_);let I=0,C=0;for(let z=0;z<D;z++)for(let E=0;E<O;E++)if(S>=0&&A>=0?(I=z*g+E<<2,C=(A+z)*w+S+E<<2):(I=(-A+z)*g-S+E<<2,C=z*w+E<<2),L==0)b[C]=f[I],b[C+1]=f[I+1],b[C+2]=f[I+2],b[C+3]=f[I+3];else if(L==1){var P=f[I+3]*.00392156862745098,k=f[I]*P,N=f[I+1]*P,M=f[I+2]*P,H=b[C+3]*(1/255),F=b[C]*H,V=b[C+1]*H,q=b[C+2]*H;const j=1-P,G=P+H*j,Y=G==0?0:1/G;b[C+3]=255*G,b[C+0]=(k+F*j)*Y,b[C+1]=(N+V*j)*Y,b[C+2]=(M+q*j)*Y}else if(L==2)P=f[I+3],k=f[I],N=f[I+1],M=f[I+2],H=b[C+3],F=b[C],V=b[C+1],q=b[C+2],P==H&&k==F&&N==V&&M==q?(b[C]=0,b[C+1]=0,b[C+2]=0,b[C+3]=0):(b[C]=k,b[C+1]=N,b[C+2]=M,b[C+3]=P);else if(L==3){if(P=f[I+3],k=f[I],N=f[I+1],M=f[I+2],H=b[C+3],F=b[C],V=b[C+1],q=b[C+2],P==H&&k==F&&N==V&&M==q)continue;if(P<220&&H>20)return!1}return!0}return{decode:function(g){const x=new Uint8Array(g);let b=8;const w=r,_=w.readUshort,S=w.readUint,A={tabs:{},frames:[]},L=new Uint8Array(x.length);let O,D=0,I=0;const C=[137,80,78,71,13,10,26,10];for(var P=0;P<8;P++)if(x[P]!=C[P])throw"The input is not a PNG file!";for(;b<x.length;){const z=w.readUint(x,b);b+=4;const E=w.readASCII(x,b,4);if(b+=4,E=="IHDR")h(x,b,A);else if(E=="iCCP"){for(var k=b;x[k]!=0;)k++;w.readASCII(x,b,k-b),x[k+1];const j=x.slice(k+2,b+z);let G=null;try{G=s(j)}catch{G=i(j)}A.tabs[E]=G}else if(E=="CgBI")A.tabs[E]=x.slice(b,b+4);else if(E=="IDAT"){for(P=0;P<z;P++)L[D+P]=x[b+P];D+=z}else if(E=="acTL")A.tabs[E]={num_frames:S(x,b),num_plays:S(x,b+4)},O=new Uint8Array(x.length);else if(E=="fcTL"){I!=0&&((q=A.frames[A.frames.length-1]).data=t(A,O.slice(0,I),q.rect.width,q.rect.height),I=0);const j={x:S(x,b+12),y:S(x,b+16),width:S(x,b+4),height:S(x,b+8)};let G=_(x,b+22);G=_(x,b+20)/(G==0?100:G);const Y={rect:j,delay:Math.round(1e3*G),dispose:x[b+24],blend:x[b+25]};A.frames.push(Y)}else if(E=="fdAT"){for(P=0;P<z-4;P++)O[I+P]=x[b+P+4];I+=z-4}else if(E=="pHYs")A.tabs[E]=[w.readUint(x,b),w.readUint(x,b+4),x[b+8]];else if(E=="cHRM")for(A.tabs[E]=[],P=0;P<8;P++)A.tabs[E].push(w.readUint(x,b+4*P));else if(E=="tEXt"||E=="zTXt"){A.tabs[E]==null&&(A.tabs[E]={});var N=w.nextZero(x,b),M=w.readASCII(x,b,N-b),H=b+z-N-1;if(E=="tEXt")V=w.readASCII(x,N+1,H);else{var F=s(x.slice(N+2,N+2+H));V=w.readUTF8(F,0,F.length)}A.tabs[E][M]=V}else if(E=="iTXt"){A.tabs[E]==null&&(A.tabs[E]={}),N=0,k=b,N=w.nextZero(x,k),M=w.readASCII(x,k,N-k);const j=x[k=N+1];var V;x[k+1],k+=2,N=w.nextZero(x,k),w.readASCII(x,k,N-k),k=N+1,N=w.nextZero(x,k),w.readUTF8(x,k,N-k),H=z-((k=N+1)-b),j==0?V=w.readUTF8(x,k,H):(F=s(x.slice(k,k+H)),V=w.readUTF8(F,0,F.length)),A.tabs[E][M]=V}else if(E=="PLTE")A.tabs[E]=w.readBytes(x,b,z);else if(E=="hIST"){const j=A.tabs.PLTE.length/3;for(A.tabs[E]=[],P=0;P<j;P++)A.tabs[E].push(_(x,b+2*P))}else if(E=="tRNS")A.ctype==3?A.tabs[E]=w.readBytes(x,b,z):A.ctype==0?A.tabs[E]=_(x,b):A.ctype==2&&(A.tabs[E]=[_(x,b),_(x,b+2),_(x,b+4)]);else if(E=="gAMA")A.tabs[E]=w.readUint(x,b)/1e5;else if(E=="sRGB")A.tabs[E]=x[b];else if(E=="bKGD")A.ctype==0||A.ctype==4?A.tabs[E]=[_(x,b)]:A.ctype==2||A.ctype==6?A.tabs[E]=[_(x,b),_(x,b+2),_(x,b+4)]:A.ctype==3&&(A.tabs[E]=x[b]);else if(E=="IEND")break;b+=z,w.readUint(x,b),b+=4}var q;return I!=0&&((q=A.frames[A.frames.length-1]).data=t(A,O.slice(0,I),q.rect.width,q.rect.height)),A.data=t(A,L,A.width,A.height),delete A.compress,delete A.interlace,delete A.filter,A},toRGBA8:function(g){const x=g.width,b=g.height;if(g.tabs.acTL==null)return[e(g.data,x,b,g).buffer];const w=[];g.frames[0].data==null&&(g.frames[0].data=g.data);const _=x*b*4,S=new Uint8Array(_),A=new Uint8Array(_),L=new Uint8Array(_);for(let D=0;D<g.frames.length;D++){const I=g.frames[D],C=I.rect.x,P=I.rect.y,k=I.rect.width,N=I.rect.height,M=e(I.data,k,N,g);if(D!=0)for(var O=0;O<_;O++)L[O]=S[O];if(I.blend==0?p(M,k,N,S,x,b,C,P,0):I.blend==1&&p(M,k,N,S,x,b,C,P,1),w.push(S.buffer.slice(0)),I.dispose!=0){if(I.dispose==1)p(A,k,N,S,x,b,C,P,0);else if(I.dispose==2)for(O=0;O<_;O++)S[O]=L[O]}}return w},_paeth:u,_copyTile:p,_bin:r}})();(function(){const{_copyTile:r}=pn,{_bin:e}=pn,t=pn._paeth;var s={table:(function(){const k=new Uint32Array(256);for(let N=0;N<256;N++){let M=N;for(let H=0;H<8;H++)1&M?M=3988292384^M>>>1:M>>>=1;k[N]=M}return k})(),update(k,N,M,H){for(let F=0;F<H;F++)k=s.table[255&(k^N[M+F])]^k>>>8;return k},crc:(k,N,M)=>4294967295^s.update(4294967295,k,N,M)};function i(k,N,M,H){N[M]+=k[0]*H>>4,N[M+1]+=k[1]*H>>4,N[M+2]+=k[2]*H>>4,N[M+3]+=k[3]*H>>4}function o(k){return Math.max(0,Math.min(255,k))}function c(k,N){const M=k[0]-N[0],H=k[1]-N[1],F=k[2]-N[2],V=k[3]-N[3];return M*M+H*H+F*F+V*V}function u(k,N,M,H,F,V,q){q==null&&(q=1);const z=H.length,E=[];for(var j=0;j<z;j++){const Z=H[j];E.push([Z>>>0&255,Z>>>8&255,Z>>>16&255,Z>>>24&255])}for(j=0;j<z;j++){let Z=4294967295;for(var G=0,Y=0;Y<z;Y++){var ee=c(E[j],E[Y]);Y!=j&&ee<Z&&(Z=ee,G=Y)}}const B=new Uint32Array(F.buffer),$=new Int16Array(N*M*4),K=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(j=0;j<K.length;j++)K[j]=255*((K[j]+.5)/16-.5);for(let Z=0;Z<M;Z++)for(let de=0;de<N;de++){var Q;j=4*(Z*N+de),q!=2?Q=[o(k[j]+$[j]),o(k[j+1]+$[j+1]),o(k[j+2]+$[j+2]),o(k[j+3]+$[j+3])]:(ee=K[4*(3&Z)+(3&de)],Q=[o(k[j]+ee),o(k[j+1]+ee),o(k[j+2]+ee),o(k[j+3]+ee)]),G=0;let ue=16777215;for(Y=0;Y<z;Y++){const Re=c(Q,E[Y]);Re<ue&&(ue=Re,G=Y)}const xe=E[G],pe=[Q[0]-xe[0],Q[1]-xe[1],Q[2]-xe[2],Q[3]-xe[3]];q==1&&(de!=N-1&&i(pe,$,j+4,7),Z!=M-1&&(de!=0&&i(pe,$,j+4*N-4,3),i(pe,$,j+4*N,5),de!=N-1&&i(pe,$,j+4*N+4,1))),V[j>>2]=G,B[j>>2]=H[G]}}function h(k,N,M,H,F){F==null&&(F={});const{crc:V}=s,q=e.writeUint,z=e.writeUshort,E=e.writeASCII;let j=8;const G=k.frames.length>1;let Y,ee=!1,B=33+(G?20:0);if(F.sRGB!=null&&(B+=13),F.pHYs!=null&&(B+=21),F.iCCP!=null&&(Y=pako.deflate(F.iCCP),B+=21+Y.length+4),k.ctype==3){for(var $=k.plte.length,K=0;K<$;K++)k.plte[K]>>>24!=255&&(ee=!0);B+=8+3*$+4+(ee?8+1*$+4:0)}for(var Q=0;Q<k.frames.length;Q++)G&&(B+=38),B+=(xe=k.frames[Q]).cimg.length+12,Q!=0&&(B+=4);B+=12;const Z=new Uint8Array(B),de=[137,80,78,71,13,10,26,10];for(K=0;K<8;K++)Z[K]=de[K];if(q(Z,j,13),j+=4,E(Z,j,"IHDR"),j+=4,q(Z,j,N),j+=4,q(Z,j,M),j+=4,Z[j]=k.depth,j++,Z[j]=k.ctype,j++,Z[j]=0,j++,Z[j]=0,j++,Z[j]=0,j++,q(Z,j,V(Z,j-17,17)),j+=4,F.sRGB!=null&&(q(Z,j,1),j+=4,E(Z,j,"sRGB"),j+=4,Z[j]=F.sRGB,j++,q(Z,j,V(Z,j-5,5)),j+=4),F.iCCP!=null){const pe=13+Y.length;q(Z,j,pe),j+=4,E(Z,j,"iCCP"),j+=4,E(Z,j,"ICC profile"),j+=11,j+=2,Z.set(Y,j),j+=Y.length,q(Z,j,V(Z,j-(pe+4),pe+4)),j+=4}if(F.pHYs!=null&&(q(Z,j,9),j+=4,E(Z,j,"pHYs"),j+=4,q(Z,j,F.pHYs[0]),j+=4,q(Z,j,F.pHYs[1]),j+=4,Z[j]=F.pHYs[2],j++,q(Z,j,V(Z,j-13,13)),j+=4),G&&(q(Z,j,8),j+=4,E(Z,j,"acTL"),j+=4,q(Z,j,k.frames.length),j+=4,q(Z,j,F.loop!=null?F.loop:0),j+=4,q(Z,j,V(Z,j-12,12)),j+=4),k.ctype==3){for(q(Z,j,3*($=k.plte.length)),j+=4,E(Z,j,"PLTE"),j+=4,K=0;K<$;K++){const pe=3*K,Re=k.plte[K],ve=255&Re,Xe=Re>>>8&255,Ie=Re>>>16&255;Z[j+pe+0]=ve,Z[j+pe+1]=Xe,Z[j+pe+2]=Ie}if(j+=3*$,q(Z,j,V(Z,j-3*$-4,3*$+4)),j+=4,ee){for(q(Z,j,$),j+=4,E(Z,j,"tRNS"),j+=4,K=0;K<$;K++)Z[j+K]=k.plte[K]>>>24&255;j+=$,q(Z,j,V(Z,j-$-4,$+4)),j+=4}}let ue=0;for(Q=0;Q<k.frames.length;Q++){var xe=k.frames[Q];G&&(q(Z,j,26),j+=4,E(Z,j,"fcTL"),j+=4,q(Z,j,ue++),j+=4,q(Z,j,xe.rect.width),j+=4,q(Z,j,xe.rect.height),j+=4,q(Z,j,xe.rect.x),j+=4,q(Z,j,xe.rect.y),j+=4,z(Z,j,H[Q]),j+=2,z(Z,j,1e3),j+=2,Z[j]=xe.dispose,j++,Z[j]=xe.blend,j++,q(Z,j,V(Z,j-30,30)),j+=4);const pe=xe.cimg;q(Z,j,($=pe.length)+(Q==0?0:4)),j+=4;const Re=j;E(Z,j,Q==0?"IDAT":"fdAT"),j+=4,Q!=0&&(q(Z,j,ue++),j+=4),Z.set(pe,j),j+=$,q(Z,j,V(Z,Re,j-Re)),j+=4}return q(Z,j,0),j+=4,E(Z,j,"IEND"),j+=4,q(Z,j,V(Z,j-4,4)),j+=4,Z.buffer}function p(k,N,M){for(let H=0;H<k.frames.length;H++){const F=k.frames[H];F.rect.width;const V=F.rect.height,q=new Uint8Array(V*F.bpl+V);F.cimg=b(F.img,V,F.bpp,F.bpl,q,N,M)}}function f(k,N,M,H,F){const V=F[0],q=F[1],z=F[2],E=F[3],j=F[4],G=F[5];let Y=6,ee=8,B=255;for(var $=0;$<k.length;$++){const ze=new Uint8Array(k[$]);for(var K=ze.length,Q=0;Q<K;Q+=4)B&=ze[Q+3]}const Z=B!=255,de=(function(Ne,Ze,wt,_t,ut,Mt){const mt=[];for(var De=0;De<Ne.length;De++){const rt=new Uint8Array(Ne[De]),Wt=new Uint32Array(rt.buffer);var Xt;let xs=0,fs=0,pt=Ze,as=wt,Kt=_t?1:0;if(De!=0){const ou=Mt||_t||De==1||mt[De-2].dispose!=0?1:2;let Hr=0,Nl=1e9;for(let Sn=0;Sn<ou;Sn++){var Rs=new Uint8Array(Ne[De-1-Sn]);const Ea=new Uint32Array(Ne[De-1-Sn]);let Ds=Ze,rs=wt,ln=-1,cn=-1;for(let Nn=0;Nn<wt;Nn++)for(let dn=0;dn<Ze;dn++)Wt[Je=Nn*Ze+dn]!=Ea[Je]&&(dn<Ds&&(Ds=dn),dn>ln&&(ln=dn),Nn<rs&&(rs=Nn),Nn>cn&&(cn=Nn));ln==-1&&(Ds=rs=ln=cn=0),ut&&((1&Ds)==1&&Ds--,(1&rs)==1&&rs--);const El=(ln-Ds+1)*(cn-rs+1);El<Nl&&(Nl=El,Hr=Sn,xs=Ds,fs=rs,pt=ln-Ds+1,as=cn-rs+1)}Rs=new Uint8Array(Ne[De-1-Hr]),Hr==1&&(mt[De-1].dispose=2),Xt=new Uint8Array(pt*as*4),r(Rs,Ze,wt,Xt,pt,as,-xs,-fs,0),Kt=r(rt,Ze,wt,Xt,pt,as,-xs,-fs,3)?1:0,Kt==1?x(rt,Ze,wt,Xt,{x:xs,y:fs,width:pt,height:as}):r(rt,Ze,wt,Xt,pt,as,-xs,-fs,0)}else Xt=rt.slice(0);mt.push({rect:{x:xs,y:fs,width:pt,height:as},img:Xt,blend:Kt,dispose:0})}if(_t)for(De=0;De<mt.length;De++){if((is=mt[De]).blend==1)continue;const rt=is.rect,Wt=mt[De-1].rect,xs=Math.min(rt.x,Wt.x),fs=Math.min(rt.y,Wt.y),pt={x:xs,y:fs,width:Math.max(rt.x+rt.width,Wt.x+Wt.width)-xs,height:Math.max(rt.y+rt.height,Wt.y+Wt.height)-fs};mt[De-1].dispose=1,De-1!=0&&g(Ne,Ze,wt,mt,De-1,pt,ut),g(Ne,Ze,wt,mt,De,pt,ut)}let qn=0;if(Ne.length!=1)for(var Je=0;Je<mt.length;Je++){var is;qn+=(is=mt[Je]).rect.width*is.rect.height}return mt})(k,N,M,V,q,z),ue={},xe=[],pe=[];if(H!=0){const ze=[];for(Q=0;Q<de.length;Q++)ze.push(de[Q].img.buffer);const Ne=(function(ut){let Mt=0;for(var mt=0;mt<ut.length;mt++)Mt+=ut[mt].byteLength;const De=new Uint8Array(Mt);let Xt=0;for(mt=0;mt<ut.length;mt++){const Rs=new Uint8Array(ut[mt]),qn=Rs.length;for(let Je=0;Je<qn;Je+=4){let is=Rs[Je],rt=Rs[Je+1],Wt=Rs[Je+2];const xs=Rs[Je+3];xs==0&&(is=rt=Wt=0),De[Xt+Je]=is,De[Xt+Je+1]=rt,De[Xt+Je+2]=Wt,De[Xt+Je+3]=xs}Xt+=qn}return De.buffer})(ze),Ze=_(Ne,H);for(Q=0;Q<Ze.plte.length;Q++)xe.push(Ze.plte[Q].est.rgba);let wt=0;for(Q=0;Q<de.length;Q++){const _t=(ve=de[Q]).img.length;var Re=new Uint8Array(Ze.inds.buffer,wt>>2,_t>>2);pe.push(Re);const ut=new Uint8Array(Ze.abuf,wt,_t);G&&u(ve.img,ve.rect.width,ve.rect.height,xe,ut,Re),ve.img.set(ut),wt+=_t}}else for($=0;$<de.length;$++){var ve=de[$];const ze=new Uint32Array(ve.img.buffer);var Xe=ve.rect.width;for(K=ze.length,Re=new Uint8Array(K),pe.push(Re),Q=0;Q<K;Q++){const Ne=ze[Q];if(Q!=0&&Ne==ze[Q-1])Re[Q]=Re[Q-1];else if(Q>Xe&&Ne==ze[Q-Xe])Re[Q]=Re[Q-Xe];else{let Ze=ue[Ne];if(Ze==null&&(ue[Ne]=Ze=xe.length,xe.push(Ne),xe.length>=300))break;Re[Q]=Ze}}}const Ie=xe.length;for(Ie<=256&&j==0&&(ee=Ie<=2?1:Ie<=4?2:Ie<=16?4:8,ee=Math.max(ee,E)),$=0;$<de.length;$++){(ve=de[$]).rect.x,ve.rect.y,Xe=ve.rect.width;const ze=ve.rect.height;let Ne=ve.img;new Uint32Array(Ne.buffer);let Ze=4*Xe,wt=4;if(Ie<=256&&j==0){Ze=Math.ceil(ee*Xe/8);var Se=new Uint8Array(Ze*ze);const _t=pe[$];for(let ut=0;ut<ze;ut++){Q=ut*Ze;const Mt=ut*Xe;if(ee==8)for(var Ae=0;Ae<Xe;Ae++)Se[Q+Ae]=_t[Mt+Ae];else if(ee==4)for(Ae=0;Ae<Xe;Ae++)Se[Q+(Ae>>1)]|=_t[Mt+Ae]<<4-4*(1&Ae);else if(ee==2)for(Ae=0;Ae<Xe;Ae++)Se[Q+(Ae>>2)]|=_t[Mt+Ae]<<6-2*(3&Ae);else if(ee==1)for(Ae=0;Ae<Xe;Ae++)Se[Q+(Ae>>3)]|=_t[Mt+Ae]<<7-1*(7&Ae)}Ne=Se,Y=3,wt=1}else if(Z==0&&de.length==1){Se=new Uint8Array(Xe*ze*3);const _t=Xe*ze;for(Q=0;Q<_t;Q++){const ut=3*Q,Mt=4*Q;Se[ut]=Ne[Mt],Se[ut+1]=Ne[Mt+1],Se[ut+2]=Ne[Mt+2]}Ne=Se,Y=2,wt=3,Ze=3*Xe}ve.img=Ne,ve.bpl=Ze,ve.bpp=wt}return{ctype:Y,depth:ee,plte:xe,frames:de}}function g(k,N,M,H,F,V,q){const z=Uint8Array,E=Uint32Array,j=new z(k[F-1]),G=new E(k[F-1]),Y=F+1<k.length?new z(k[F+1]):null,ee=new z(k[F]),B=new E(ee.buffer);let $=N,K=M,Q=-1,Z=-1;for(let ue=0;ue<V.height;ue++)for(let xe=0;xe<V.width;xe++){const pe=V.x+xe,Re=V.y+ue,ve=Re*N+pe,Xe=B[ve];Xe==0||H[F-1].dispose==0&&G[ve]==Xe&&(Y==null||Y[4*ve+3]!=0)||(pe<$&&($=pe),pe>Q&&(Q=pe),Re<K&&(K=Re),Re>Z&&(Z=Re))}Q==-1&&($=K=Q=Z=0),q&&((1&$)==1&&$--,(1&K)==1&&K--),V={x:$,y:K,width:Q-$+1,height:Z-K+1};const de=H[F];de.rect=V,de.blend=1,de.img=new Uint8Array(V.width*V.height*4),H[F-1].dispose==0?(r(j,N,M,de.img,V.width,V.height,-V.x,-V.y,0),x(ee,N,M,de.img,V)):r(ee,N,M,de.img,V.width,V.height,-V.x,-V.y,0)}function x(k,N,M,H,F){r(k,N,M,H,F.width,F.height,-F.x,-F.y,2)}function b(k,N,M,H,F,V,q){const z=[];let E,j=[0,1,2,3,4];V!=-1?j=[V]:(N*H>5e5||M==1)&&(j=[0]),q&&(E={level:0});const G=LE;for(var Y=0;Y<j.length;Y++){for(let $=0;$<N;$++)w(F,k,$,H,M,j[Y]);z.push(G.deflate(F,E))}let ee,B=1e9;for(Y=0;Y<z.length;Y++)z[Y].length<B&&(ee=Y,B=z[Y].length);return z[ee]}function w(k,N,M,H,F,V){const q=M*H;let z=q+M;if(k[z]=V,z++,V==0)if(H<500)for(var E=0;E<H;E++)k[z+E]=N[q+E];else k.set(new Uint8Array(N.buffer,q,H),z);else if(V==1){for(E=0;E<F;E++)k[z+E]=N[q+E];for(E=F;E<H;E++)k[z+E]=N[q+E]-N[q+E-F]+256&255}else if(M==0){for(E=0;E<F;E++)k[z+E]=N[q+E];if(V==2)for(E=F;E<H;E++)k[z+E]=N[q+E];if(V==3)for(E=F;E<H;E++)k[z+E]=N[q+E]-(N[q+E-F]>>1)+256&255;if(V==4)for(E=F;E<H;E++)k[z+E]=N[q+E]-t(N[q+E-F],0,0)+256&255}else{if(V==2)for(E=0;E<H;E++)k[z+E]=N[q+E]+256-N[q+E-H]&255;if(V==3){for(E=0;E<F;E++)k[z+E]=N[q+E]+256-(N[q+E-H]>>1)&255;for(E=F;E<H;E++)k[z+E]=N[q+E]+256-(N[q+E-H]+N[q+E-F]>>1)&255}if(V==4){for(E=0;E<F;E++)k[z+E]=N[q+E]+256-t(0,N[q+E-H],0)&255;for(E=F;E<H;E++)k[z+E]=N[q+E]+256-t(N[q+E-F],N[q+E-H],N[q+E-F-H])&255}}}function _(k,N){const M=new Uint8Array(k),H=M.slice(0),F=new Uint32Array(H.buffer),V=S(H,N),q=V[0],z=V[1],E=M.length,j=new Uint8Array(E>>2);let G;if(M.length<2e7)for(var Y=0;Y<E;Y+=4)G=A(q,ee=M[Y]*(1/255),B=M[Y+1]*(1/255),$=M[Y+2]*(1/255),K=M[Y+3]*(1/255)),j[Y>>2]=G.ind,F[Y>>2]=G.est.rgba;else for(Y=0;Y<E;Y+=4){var ee=M[Y]*.00392156862745098,B=M[Y+1]*(1/255),$=M[Y+2]*(1/255),K=M[Y+3]*(1/255);for(G=q;G.left;)G=L(G.est,ee,B,$,K)<=0?G.left:G.right;j[Y>>2]=G.ind,F[Y>>2]=G.est.rgba}return{abuf:H.buffer,inds:j,plte:z}}function S(k,N,M){M==null&&(M=1e-4);const H=new Uint32Array(k.buffer),F={i0:0,i1:k.length,bst:null,est:null,tdst:0,left:null,right:null};F.bst=I(k,F.i0,F.i1),F.est=C(F.bst);const V=[F];for(;V.length<N;){let z=0,E=0;for(var q=0;q<V.length;q++)V[q].est.L>z&&(z=V[q].est.L,E=q);if(z<M)break;const j=V[E],G=O(k,H,j.i0,j.i1,j.est.e,j.est.eMq255);if(j.i0>=G||j.i1<=G){j.est.L=0;continue}const Y={i0:j.i0,i1:G,bst:null,est:null,tdst:0,left:null,right:null};Y.bst=I(k,Y.i0,Y.i1),Y.est=C(Y.bst);const ee={i0:G,i1:j.i1,bst:null,est:null,tdst:0,left:null,right:null};for(ee.bst={R:[],m:[],N:j.bst.N-Y.bst.N},q=0;q<16;q++)ee.bst.R[q]=j.bst.R[q]-Y.bst.R[q];for(q=0;q<4;q++)ee.bst.m[q]=j.bst.m[q]-Y.bst.m[q];ee.est=C(ee.bst),j.left=Y,j.right=ee,V[E]=Y,V.push(ee)}for(V.sort(((z,E)=>E.bst.N-z.bst.N)),q=0;q<V.length;q++)V[q].ind=q;return[F,V]}function A(k,N,M,H,F){if(k.left==null)return k.tdst=(function(Y,ee,B,$,K){const Q=ee-Y[0],Z=B-Y[1],de=$-Y[2],ue=K-Y[3];return Q*Q+Z*Z+de*de+ue*ue})(k.est.q,N,M,H,F),k;const V=L(k.est,N,M,H,F);let q=k.left,z=k.right;V>0&&(q=k.right,z=k.left);const E=A(q,N,M,H,F);if(E.tdst<=V*V)return E;const j=A(z,N,M,H,F);return j.tdst<E.tdst?j:E}function L(k,N,M,H,F){const{e:V}=k;return V[0]*N+V[1]*M+V[2]*H+V[3]*F-k.eMq}function O(k,N,M,H,F,V){for(H-=4;M<H;){for(;D(k,M,F)<=V;)M+=4;for(;D(k,H,F)>V;)H-=4;if(M>=H)break;const q=N[M>>2];N[M>>2]=N[H>>2],N[H>>2]=q,M+=4,H-=4}for(;D(k,M,F)>V;)M-=4;return M+4}function D(k,N,M){return k[N]*M[0]+k[N+1]*M[1]+k[N+2]*M[2]+k[N+3]*M[3]}function I(k,N,M){const H=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],F=[0,0,0,0],V=M-N>>2;for(let q=N;q<M;q+=4){const z=k[q]*.00392156862745098,E=k[q+1]*(1/255),j=k[q+2]*(1/255),G=k[q+3]*(1/255);F[0]+=z,F[1]+=E,F[2]+=j,F[3]+=G,H[0]+=z*z,H[1]+=z*E,H[2]+=z*j,H[3]+=z*G,H[5]+=E*E,H[6]+=E*j,H[7]+=E*G,H[10]+=j*j,H[11]+=j*G,H[15]+=G*G}return H[4]=H[1],H[8]=H[2],H[9]=H[6],H[12]=H[3],H[13]=H[7],H[14]=H[11],{R:H,m:F,N:V}}function C(k){const{R:N}=k,{m:M}=k,{N:H}=k,F=M[0],V=M[1],q=M[2],z=M[3],E=H==0?0:1/H,j=[N[0]-F*F*E,N[1]-F*V*E,N[2]-F*q*E,N[3]-F*z*E,N[4]-V*F*E,N[5]-V*V*E,N[6]-V*q*E,N[7]-V*z*E,N[8]-q*F*E,N[9]-q*V*E,N[10]-q*q*E,N[11]-q*z*E,N[12]-z*F*E,N[13]-z*V*E,N[14]-z*q*E,N[15]-z*z*E],G=j,Y=P;let ee=[Math.random(),Math.random(),Math.random(),Math.random()],B=0,$=0;if(H!=0)for(let Q=0;Q<16&&(ee=Y.multVec(G,ee),$=Math.sqrt(Y.dot(ee,ee)),ee=Y.sml(1/$,ee),!(Q!=0&&Math.abs($-B)<1e-9));Q++)B=$;const K=[F*E,V*E,q*E,z*E];return{Cov:j,q:K,e:ee,L:B,eMq255:Y.dot(Y.sml(255,K),ee),eMq:Y.dot(ee,K),rgba:(Math.round(255*K[3])<<24|Math.round(255*K[2])<<16|Math.round(255*K[1])<<8|Math.round(255*K[0])<<0)>>>0}}var P={multVec:(k,N)=>[k[0]*N[0]+k[1]*N[1]+k[2]*N[2]+k[3]*N[3],k[4]*N[0]+k[5]*N[1]+k[6]*N[2]+k[7]*N[3],k[8]*N[0]+k[9]*N[1]+k[10]*N[2]+k[11]*N[3],k[12]*N[0]+k[13]*N[1]+k[14]*N[2]+k[15]*N[3]],dot:(k,N)=>k[0]*N[0]+k[1]*N[1]+k[2]*N[2]+k[3]*N[3],sml:(k,N)=>[k*N[0],k*N[1],k*N[2],k*N[3]]};pn.encode=function(N,M,H,F,V,q,z){F==null&&(F=0),z==null&&(z=!1);const E=f(N,M,H,F,[!1,!1,!1,0,z,!1]);return p(E,-1),h(E,M,H,V,q)},pn.encodeLL=function(N,M,H,F,V,q,z,E){const j={ctype:0+(F==1?0:2)+(V==0?0:4),depth:q,frames:[]},G=(F+V)*q,Y=G*M;for(let ee=0;ee<N.length;ee++)j.frames.push({rect:{x:0,y:0,width:M,height:H},img:new Uint8Array(N[ee]),blend:0,dispose:1,bpp:Math.ceil(G/8),bpl:Math.ceil(Y/8)});return p(j,0,!0),h(j,M,H,z,E)},pn.encode.compress=f,pn.encode.dither=u,pn.quantize=_,pn.quantize.getKDtree=S,pn.quantize.getNearest=A})();const Ov={toArrayBuffer(r,e){const t=r.width,s=r.height,i=t<<2,o=r.getContext("2d").getImageData(0,0,t,s),c=new Uint32Array(o.data.buffer),u=(32*t+31)/32<<2,h=u*s,p=122+h,f=new ArrayBuffer(p),g=new DataView(f),x=1<<20;let b,w,_,S,A=x,L=0,O=0,D=0;function I(k){g.setUint16(O,k,!0),O+=2}function C(k){g.setUint32(O,k,!0),O+=4}function P(k){O+=k}I(19778),C(p),P(4),C(122),C(108),C(t),C(-s>>>0),I(1),I(32),C(3),C(h),C(2835),C(2835),P(8),C(16711680),C(65280),C(255),C(4278190080),C(1466527264),(function k(){for(;L<s&&A>0;){for(S=122+L*u,b=0;b<i;)A--,w=c[D++],_=w>>>24,g.setUint32(S+b,w<<8|_),b+=4;L++}D<c.length?(A=x,setTimeout(k,Ov._dly)):e(f)})()},toBlob(r,e){this.toArrayBuffer(r,(t=>{e(new Blob([t],{type:"image/bmp"}))}))},_dly:9};var Cs={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},OE={[Cs.CHROME]:16384,[Cs.FIREFOX]:11180,[Cs.DESKTOP_SAFARI]:16384,[Cs.IE]:8192,[Cs.IOS]:4096,[Cs.ETC]:8192};const Bm=typeof window<"u",Bv=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,Ed=Bm&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),BE=(Bm||Bv)&&(Ed&&Ed.getOriginalSymbol(window,"File")||typeof File<"u"&&File),Pv=(Bm||Bv)&&(Ed&&Ed.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function Pm(r,e,t=Date.now()){return new Promise((s=>{const i=r.split(","),o=i[0].match(/:(.*?);/)[1],c=globalThis.atob(i[1]);let u=c.length;const h=new Uint8Array(u);for(;u--;)h[u]=c.charCodeAt(u);const p=new Blob([h],{type:o});p.name=e,p.lastModified=t,s(p)}))}function Fv(r){return new Promise(((e,t)=>{const s=new Pv;s.onload=()=>e(s.result),s.onerror=i=>t(i),s.readAsDataURL(r)}))}function Uv(r){return new Promise(((e,t)=>{const s=new Image;s.onload=()=>e(s),s.onerror=i=>t(i),s.src=r}))}function ma(){if(ma.cachedResult!==void 0)return ma.cachedResult;let r=Cs.ETC;const{userAgent:e}=navigator;return/Chrom(e|ium)/i.test(e)?r=Cs.CHROME:/iP(ad|od|hone)/i.test(e)&&/WebKit/i.test(e)?r=Cs.IOS:/Safari/i.test(e)?r=Cs.DESKTOP_SAFARI:/Firefox/i.test(e)?r=Cs.FIREFOX:(/MSIE/i.test(e)||document.documentMode)&&(r=Cs.IE),ma.cachedResult=r,ma.cachedResult}function Iv(r,e){const t=ma(),s=OE[t];let i=r,o=e,c=i*o;const u=i>o?o/i:i/o;for(;c>s*s;){const h=(s+i)/2,p=(s+o)/2;h<p?(o=p,i=p*u):(o=h*u,i=h),c=i*o}return{width:i,height:o}}function $d(r,e){let t,s;try{if(t=new OffscreenCanvas(r,e),s=t.getContext("2d"),s===null)throw new Error("getContext of OffscreenCanvas returns null")}catch{t=document.createElement("canvas"),s=t.getContext("2d")}return t.width=r,t.height=e,[t,s]}function zv(r,e){const{width:t,height:s}=Iv(r.width,r.height),[i,o]=$d(t,s);return e&&/jpe?g/.test(e)&&(o.fillStyle="white",o.fillRect(0,0,i.width,i.height)),o.drawImage(r,0,0,i.width,i.height),i}function yd(){return yd.cachedResult!==void 0||(yd.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),yd.cachedResult}function jd(r,e={}){return new Promise((function(t,s){let i,o;var c=function(){try{return o=zv(i,e.fileType||r.type),t([i,o])}catch(h){return s(h)}},u=function(h){try{var p=function(f){try{throw f}catch(g){return s(g)}};try{let f;return Fv(r).then((function(g){try{return f=g,Uv(f).then((function(x){try{return i=x,(function(){try{return c()}catch(b){return s(b)}})()}catch(b){return p(b)}}),p)}catch(x){return p(x)}}),p)}catch(f){p(f)}}catch(f){return s(f)}};try{if(yd()||[Cs.DESKTOP_SAFARI,Cs.MOBILE_SAFARI].includes(ma()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(r).then((function(h){try{return i=h,c()}catch{return u()}}),u)}catch{u()}}))}function Cd(r,e,t,s,i=1){return new Promise((function(o,c){let u;if(e==="image/png"){let p,f,g;return p=r.getContext("2d"),{data:f}=p.getImageData(0,0,r.width,r.height),g=pn.encode([f.buffer],r.width,r.height,4096*i),u=new Blob([g],{type:e}),u.name=t,u.lastModified=s,h.call(this)}{let p=function(){return h.call(this)};if(e==="image/bmp")return new Promise((f=>Ov.toBlob(r,f))).then((function(f){try{return u=f,u.name=t,u.lastModified=s,p.call(this)}catch(g){return c(g)}}).bind(this),c);{let f=function(){return p.call(this)};if(typeof OffscreenCanvas=="function"&&r instanceof OffscreenCanvas)return r.convertToBlob({type:e,quality:i}).then((function(g){try{return u=g,u.name=t,u.lastModified=s,f.call(this)}catch(x){return c(x)}}).bind(this),c);{let g;return g=r.toDataURL(e,i),Pm(g,t,s).then((function(x){try{return u=x,f.call(this)}catch(b){return c(b)}}).bind(this),c)}}}function h(){return o(u)}}))}function Fn(r){r.width=0,r.height=0}function br(){return new Promise((function(r,e){let t,s,i,o;return br.cachedResult!==void 0?r(br.cachedResult):Pm("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then((function(c){try{return t=c,jd(t).then((function(u){try{return s=u[1],Cd(s,t.type,t.name,t.lastModified).then((function(h){try{return i=h,Fn(s),jd(i).then((function(p){try{return o=p[0],br.cachedResult=o.width===1&&o.height===2,r(br.cachedResult)}catch(f){return e(f)}}),e)}catch(p){return e(p)}}),e)}catch(h){return e(h)}}),e)}catch(u){return e(u)}}),e)}))}function Hv(r){return new Promise(((e,t)=>{const s=new Pv;s.onload=i=>{const o=new DataView(i.target.result);if(o.getUint16(0,!1)!=65496)return e(-2);const c=o.byteLength;let u=2;for(;u<c;){if(o.getUint16(u+2,!1)<=8)return e(-1);const h=o.getUint16(u,!1);if(u+=2,h==65505){if(o.getUint32(u+=2,!1)!=1165519206)return e(-1);const p=o.getUint16(u+=6,!1)==18761;u+=o.getUint32(u+4,p);const f=o.getUint16(u,p);u+=2;for(let g=0;g<f;g++)if(o.getUint16(u+12*g,p)==274)return e(o.getUint16(u+12*g+8,p))}else{if((65280&h)!=65280)break;u+=o.getUint16(u,!1)}}return e(-1)},s.onerror=i=>t(i),s.readAsArrayBuffer(r)}))}function qv(r,e){const{width:t}=r,{height:s}=r,{maxWidthOrHeight:i}=e;let o,c=r;return isFinite(i)&&(t>i||s>i)&&([c,o]=$d(t,s),t>s?(c.width=i,c.height=s/t*i):(c.width=t/s*i,c.height=i),o.drawImage(r,0,0,c.width,c.height),Fn(r)),c}function Vv(r,e){const{width:t}=r,{height:s}=r,[i,o]=$d(t,s);switch(e>4&&e<9?(i.width=s,i.height=t):(i.width=t,i.height=s),e){case 2:o.transform(-1,0,0,1,t,0);break;case 3:o.transform(-1,0,0,-1,t,s);break;case 4:o.transform(1,0,0,-1,0,s);break;case 5:o.transform(0,1,1,0,0,0);break;case 6:o.transform(0,1,-1,0,s,0);break;case 7:o.transform(0,-1,-1,0,s,t);break;case 8:o.transform(0,-1,1,0,0,t)}return o.drawImage(r,0,0,t,s),Fn(r),i}function Vy(r,e,t=0){return new Promise((function(s,i){let o,c,u,h,p,f,g,x,b,w,_,S,A,L,O,D,I,C,P,k;function N(H=5){if(e.signal&&e.signal.aborted)throw e.signal.reason;o+=H,e.onProgress(Math.min(o,100))}function M(H){if(e.signal&&e.signal.aborted)throw e.signal.reason;o=Math.min(Math.max(H,o),100),e.onProgress(o)}return o=t,c=e.maxIteration||10,u=1024*e.maxSizeMB*1024,N(),jd(r,e).then((function(H){try{return[,h]=H,N(),p=qv(h,e),N(),new Promise((function(F,V){var q;if(!(q=e.exifOrientation))return Hv(r).then((function(E){try{return q=E,z.call(this)}catch(j){return V(j)}}).bind(this),V);function z(){return F(q)}return z.call(this)})).then((function(F){try{return f=F,N(),br().then((function(V){try{return g=V?p:Vv(p,f),N(),x=e.initialQuality||1,b=e.fileType||r.type,Cd(g,b,r.name,r.lastModified,x).then((function(q){try{{let E=function(){if(c--&&(O>u||O>A)){let G,Y;return G=k?.95*P.width:P.width,Y=k?.95*P.height:P.height,[I,C]=$d(G,Y),C.drawImage(P,0,0,G,Y),x*=b==="image/png"?.85:.95,Cd(I,b,r.name,r.lastModified,x).then((function(ee){try{return D=ee,Fn(P),P=I,O=D.size,M(Math.min(99,Math.floor((L-O)/(L-u)*100))),E}catch(B){return i(B)}}),i)}return[1]},j=function(){return Fn(P),Fn(I),Fn(p),Fn(g),Fn(h),M(100),s(D)};if(w=q,N(),_=w.size>u,S=w.size>r.size,!_&&!S)return M(100),s(w);var z;return A=r.size,L=w.size,O=L,P=g,k=!e.alwaysKeepResolution&&_,(z=(function(G){for(;G;){if(G.then)return void G.then(z,i);try{if(G.pop){if(G.length)return G.pop()?j.call(this):G;G=E}else G=G.call(this)}catch(Y){return i(Y)}}}).bind(this))(E)}}catch(E){return i(E)}}).bind(this),i)}catch(q){return i(q)}}).bind(this),i)}catch(V){return i(V)}}).bind(this),i)}catch(F){return i(F)}}).bind(this),i)}))}const PE=`
let scriptImported = false
self.addEventListener('message', async (e) => {
  const { file, id, imageCompressionLibUrl, options } = e.data
  options.onProgress = (progress) => self.postMessage({ progress, id })
  try {
    if (!scriptImported) {
      // console.log('[worker] importScripts', imageCompressionLibUrl)
      self.importScripts(imageCompressionLibUrl)
      scriptImported = true
    }
    // console.log('[worker] self', self)
    const compressedFile = await imageCompression(file, options)
    self.postMessage({ file: compressedFile, id })
  } catch (e) {
    // console.error('[worker] error', e)
    self.postMessage({ error: e.message + '\\n' + e.stack, id })
  }
})
`;let Bf;function FE(r,e){return new Promise(((t,s)=>{Bf||(Bf=(function(c){const u=[];return u.push(c),URL.createObjectURL(new Blob(u))})(PE));const i=new Worker(Bf);i.addEventListener("message",(function(c){if(e.signal&&e.signal.aborted)i.terminate();else if(c.data.progress===void 0){if(c.data.error)return s(new Error(c.data.error)),void i.terminate();t(c.data.file),i.terminate()}else e.onProgress(c.data.progress)})),i.addEventListener("error",s),e.signal&&e.signal.addEventListener("abort",(()=>{s(e.signal.reason),i.terminate()})),i.postMessage({file:r,imageCompressionLibUrl:e.libURL,options:{...e,onProgress:void 0,signal:void 0}})}))}function ls(r,e){return new Promise((function(t,s){let i,o,c,u,h,p;if(i={...e},c=0,{onProgress:u}=i,i.maxSizeMB=i.maxSizeMB||Number.POSITIVE_INFINITY,h=typeof i.useWebWorker!="boolean"||i.useWebWorker,delete i.useWebWorker,i.onProgress=b=>{c=b,typeof u=="function"&&u(c)},!(r instanceof Blob||r instanceof BE))return s(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(r.type))return s(new Error("The file given is not an image"));if(p=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!h||typeof Worker!="function"||p)return Vy(r,i).then((function(b){try{return o=b,x.call(this)}catch(w){return s(w)}}).bind(this),s);var f=(function(){try{return x.call(this)}catch(b){return s(b)}}).bind(this),g=function(b){try{return Vy(r,i).then((function(w){try{return o=w,f()}catch(_){return s(_)}}),s)}catch(w){return s(w)}};try{return i.libURL=i.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",FE(r,i).then((function(b){try{return o=b,f()}catch{return g()}}),g)}catch{g()}function x(){try{o.name=r.name,o.lastModified=r.lastModified}catch{}try{i.preserveExif&&r.type==="image/jpeg"&&(!i.fileType||i.fileType&&i.fileType===r.type)&&(o=Lv(r,o))}catch{}return t(o)}}))}ls.getDataUrlFromFile=Fv,ls.getFilefromDataUrl=Pm,ls.loadImage=Uv,ls.drawImageInCanvas=zv,ls.drawFileInCanvas=jd,ls.canvasToFile=Cd,ls.getExifOrientation=Hv,ls.handleMaxWidthOrHeight=qv,ls.followExifOrientation=Vv,ls.cleanupCanvasMemory=Fn,ls.isAutoOrientationInBrowser=br,ls.approximateBelowMaximumCanvasSizeOfBrowser=Iv,ls.copyExifWithoutOrientation=Lv,ls.getBrowserName=ma,ls.version="2.0.2";const Gv=({images:r,onImagesChange:e,maxImages:t=10,onUploadProgress:s,enableCrop:i=!0})=>{const[o,c]=R.useState(!1),[u,h]=R.useState(null),[p,f]=R.useState({unit:"%",x:5,y:5,width:90,height:90,aspect:16/9}),[g,x]=R.useState(null),[b,w]=R.useState({}),[_,S]=R.useState([]),A=R.useRef(null),L=R.useRef(null),O=async N=>{const M=Array.from(N.target.files);if(r.length+M.length>t){alert(`Maximum ${t} images allowed`);return}const H=[];for(const F of M){const V=URL.createObjectURL(F);H.push({file:F,preview:V,progress:0})}S([..._,...H]);for(let F=0;F<M.length;F++){const V=M[F],q=_.length+F;w(E=>({...E,[q]:{stage:"compressing",progress:0}}));const z={maxSizeMB:2,maxWidthOrHeight:1920,useWebWorker:!0,onProgress:E=>{w(j=>({...j,[q]:{stage:"compressing",progress:E}}))}};try{const E=await ls(V,z);if(i){w(G=>({...G,[q]:{stage:"ready",progress:100}}));const j=new FileReader;j.onload=G=>{f({unit:"%",x:5,y:5,width:90,height:90,aspect:16/9}),h({file:E,src:G.target.result,index:r.length+F,previewIndex:q}),c(!0)},j.readAsDataURL(E)}else{w(G=>({...G,[q]:{stage:"ready",progress:100}}));const j=[...r,E];e(j),S(G=>G.filter((Y,ee)=>ee!==q)),w(G=>{const Y={...G};return delete Y[q],Y})}}catch(E){console.error("Error compressing image:",E),alert("Error processing image"),S(j=>j.filter((G,Y)=>Y!==q)),w(j=>{const G={...j};return delete G[q],G})}}},D=(N,M)=>new Promise((H,F)=>{if(!M||!M.width||!M.height||M.width<=0||M.height<=0){F(new Error("Invalid crop dimensions"));return}if(!N.complete||N.naturalWidth===0||N.naturalHeight===0){F(new Error("Image not fully loaded"));return}const V=document.createElement("canvas"),q=N.naturalWidth/N.width,z=N.naturalHeight/N.height,E=window.devicePixelRatio||1;let j,G,Y,ee;if(M.unit==="%"?(j=M.x/100*N.width*q,G=M.y/100*N.height*z,Y=M.width/100*N.width*q,ee=M.height/100*N.height*z):(j=M.x*q,G=M.y*z,Y=M.width*q,ee=M.height*z),j=Math.round(j),G=Math.round(G),Y=Math.round(Y),ee=Math.round(ee),j<0||G<0||Y<=0||ee<=0){F(new Error("Invalid crop coordinates"));return}if(j+Y>N.naturalWidth&&(Y=N.naturalWidth-j),G+ee>N.naturalHeight&&(ee=N.naturalHeight-G),Y<=0||ee<=0){F(new Error("Crop area is outside image bounds"));return}const B=Math.max(1,Math.round(Y)),$=Math.max(1,Math.round(ee));V.width=B*E,V.height=$*E;const K=V.getContext("2d");if(!K){F(new Error("Could not get canvas context"));return}K.setTransform(E,0,0,E,0,0),K.imageSmoothingQuality="high";try{K.drawImage(N,j,G,Y,ee,0,0,B,$),V.toBlob(Q=>{if(!Q){F(new Error("Canvas is empty - failed to create blob"));return}H(Q)},"image/jpeg",.9)}catch(Q){F(new Error(`Error drawing image: ${Q.message}`))}}),I=async()=>{if(!(!A.current||!g||!u))try{w(V=>({...V,[u.previewIndex]:{stage:"cropping",progress:50}})),A.current.complete||await new Promise(V=>{A.current.onload=V,A.current.onerror=V});const N=await D(A.current,g),M=new File([N],u.file.name,{type:"image/jpeg"}),H=URL.createObjectURL(M);S(V=>{const q=[...V];return q[u.previewIndex]&&(q[u.previewIndex]={...q[u.previewIndex],file:M,preview:H}),q});const F=[...r,M];e(F),S(V=>V.filter((q,z)=>z!==u.previewIndex)),w(V=>{const q={...V};return delete q[u.previewIndex],q}),c(!1),h(null),x(null)}catch(N){console.error("Error cropping image:",N);try{const M=u.file,H=[...r,M];e(H);const F=URL.createObjectURL(M);S(V=>{const q=[...V];return q[u.previewIndex]&&(q[u.previewIndex]={...q[u.previewIndex],file:M,preview:F}),q}),S(V=>V.filter((q,z)=>z!==u.previewIndex)),w(V=>{const q={...V};return delete q[u.previewIndex],q}),c(!1),h(null),x(null),alert("Image cropping failed. Using original image instead.")}catch(M){console.error("Error in fallback:",M),alert(`Error processing image: ${N.message}. Please try again.`),S(H=>H.filter((F,V)=>V!==u.previewIndex)),w(H=>{const F={...H};return delete F[u.previewIndex],F}),c(!1),h(null),x(null)}}},C=N=>{const M=r.filter((H,F)=>F!==N);e(M),_[N]&&URL.revokeObjectURL(_[N].preview),S(H=>H.filter((F,V)=>V!==N)),w(H=>{const F={...H};return delete F[N],F})},P=N=>{const M=r[N],H=new FileReader;H.onload=F=>{f({unit:"%",x:5,y:5,width:90,height:90,aspect:16/9}),h({file:M,src:F.target.result,index:N,previewIndex:N}),c(!0)},H.readAsDataURL(M)},k=async()=>{if(!(!A.current||!g||!u))try{const N=await D(A.current,g),M=new File([N],u.file.name,{type:"image/jpeg"}),H=URL.createObjectURL(M);S(V=>{const q=[...V];return q[u.previewIndex]&&(URL.revokeObjectURL(q[u.previewIndex].preview),q[u.previewIndex]={...q[u.previewIndex],file:M,preview:H}),q});const F=[...r];F[u.index]=M,e(F),c(!1),h(null),x(null)}catch(N){console.error("Error replacing image:",N),alert("Error replacing image")}};return l.jsxs("div",{children:[l.jsxs("div",{className:"mb-4",children:[l.jsx("input",{ref:L,type:"file",accept:"image/*",multiple:!0,onChange:O,className:"hidden"}),l.jsxs("button",{type:"button",onClick:()=>L.current?.click(),disabled:r.length>=t,className:"px-4 py-2 bg-amber-600 text-white rounded-lg hover:bg-amber-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition",children:["+ Add Images (",r.length,"/",t,")"]})]}),(r.length>0||_.length>0)&&l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[r.map((N,M)=>l.jsxs("div",{className:"relative group",children:[l.jsxs("div",{className:"relative",children:[l.jsx("img",{src:URL.createObjectURL(N),alt:`Preview ${M+1}`,className:"w-full h-32 object-cover rounded-lg border-2 border-gray-200"}),l.jsxs("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-opacity rounded-lg flex items-center justify-center gap-2",children:[i&&l.jsx("button",{type:"button",onClick:()=>P(M),className:"opacity-0 group-hover:opacity-100 bg-white text-gray-800 px-3 py-1 rounded text-sm font-medium hover:bg-gray-100 transition",children:"Edit"}),l.jsx("button",{type:"button",onClick:()=>C(M),className:"opacity-0 group-hover:opacity-100 bg-red-600 text-white px-3 py-1 rounded text-sm font-medium hover:bg-red-700 transition",children:"Remove"})]})]}),l.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-green-500 h-1 rounded-b-lg"})]},`image-${M}`)),_.map((N,M)=>{const H=r.length+M,F=b[H],V=F&&F.stage!=="complete";return l.jsxs("div",{className:"relative group",children:[l.jsxs("div",{className:"relative",children:[l.jsx("img",{src:N.preview,alt:`Preview ${H+1}`,className:"w-full h-32 object-cover rounded-lg border-2 border-gray-200"}),V&&l.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 rounded-lg flex items-center justify-center",children:l.jsxs("div",{className:"text-center text-white",children:[l.jsxs("div",{className:"text-xs mb-1",children:[F.stage==="compressing"&&"Compressing...",F.stage==="cropping"&&"Processing...",F.stage==="ready"&&"Ready"]}),l.jsx("div",{className:"w-32 bg-gray-700 rounded-full h-2",children:l.jsx("div",{className:"bg-amber-600 h-2 rounded-full transition-all duration-300",style:{width:`${F.progress}%`}})}),l.jsxs("div",{className:"text-xs mt-1",children:[Math.round(F.progress),"%"]})]})}),!V&&l.jsxs("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-opacity rounded-lg flex items-center justify-center gap-2",children:[i&&l.jsx("button",{type:"button",onClick:()=>{const q=new FileReader;q.onload=z=>{f({unit:"%",x:5,y:5,width:90,height:90,aspect:16/9}),h({file:N.file,src:z.target.result,index:r.length,previewIndex:M}),c(!0)},q.readAsDataURL(N.file)},className:"opacity-0 group-hover:opacity-100 bg-white text-gray-800 px-3 py-1 rounded text-sm font-medium hover:bg-gray-100 transition",children:"Edit"}),l.jsx("button",{type:"button",onClick:()=>{URL.revokeObjectURL(N.preview),S(q=>q.filter((z,E)=>E!==M)),w(q=>{const z={...q};return delete z[H],z})},className:"opacity-0 group-hover:opacity-100 bg-red-600 text-white px-3 py-1 rounded text-sm font-medium hover:bg-red-700 transition",children:"Remove"})]})]}),V&&l.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gray-300 h-1 rounded-b-lg overflow-hidden",children:l.jsx("div",{className:"bg-amber-600 h-full transition-all duration-300",style:{width:`${F.progress}%`}})}),!V&&F?.stage==="complete"&&l.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-green-500 h-1 rounded-b-lg"})]},`preview-${M}`)})]}),o&&u&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[l.jsx("h3",{className:"text-xl font-bold mb-4",children:"Crop & Edit Image"}),l.jsx("div",{className:"mb-4",children:l.jsx(kE,{src:u.src,crop:p,onChange:N=>f(N),onComplete:N=>x(N),aspect:16/9,children:l.jsx("img",{ref:A,src:u.src,alt:"Crop",style:{maxWidth:"100%"},onLoad:()=>{if(A.current){const{width:N,height:M}=A.current,H=16/9;let F=90,V=F/H*(N/M);V>90&&(V=90,F=V*H*(M/N)),f({unit:"%",x:(100-F)/2,y:(100-V)/2,width:F,height:V,aspect:H})}}})})}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{type:"button",onClick:u.index!==void 0&&u.index<r.length?k:I,className:"flex-1 bg-amber-600 text-white py-2 rounded-lg hover:bg-amber-700",children:u.index!==void 0&&u.index<r.length?"Replace Image":"Add Image"}),l.jsx("button",{type:"button",onClick:()=>{c(!1),h(null),x(null)},className:"flex-1 bg-gray-300 text-gray-700 py-2 rounded-lg hover:bg-gray-400",children:"Cancel"})]})]})})]})},UE={getViews:(r,e,t=100)=>oe.get("/admin/views",{params:{viewable_type:r,viewable_id:e,limit:t}}),getStats:(r,e)=>oe.get("/admin/views/stats",{params:{viewable_type:r,viewable_id:e}})},fl=({isOpen:r,onClose:e,viewableType:t,viewableId:s})=>{const[i,o]=R.useState({views:[],stats:null,loading:!1});R.useEffect(()=>{r&&t&&s&&c()},[r,t,s]);const c=async()=>{o({views:[],stats:null,loading:!0});try{const u=await UE.getViews(t,s);o({views:u.data?.data||[],stats:u.data?.stats||null,loading:!1})}catch(u){console.error("Error fetching views:",u),o({views:[],stats:null,loading:!1}),alert("Error loading view data")}};return r?l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-white rounded-xl shadow-xl p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"View Statistics & IP Addresses"}),l.jsx("button",{onClick:e,className:"text-gray-500 hover:text-gray-700",children:l.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),i.loading?l.jsx("div",{className:"flex items-center justify-center py-12",children:l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-600"})}):l.jsxs("div",{className:"space-y-6",children:[i.stats&&l.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[l.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[l.jsx("div",{className:"text-sm text-gray-600",children:"Total Views"}),l.jsx("div",{className:"text-2xl font-bold text-blue-600",children:i.stats.total_views||0})]}),l.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[l.jsx("div",{className:"text-sm text-gray-600",children:"Unique IPs"}),l.jsx("div",{className:"text-2xl font-bold text-green-600",children:i.stats.unique_ips||0})]}),l.jsxs("div",{className:"bg-amber-50 p-4 rounded-lg",children:[l.jsx("div",{className:"text-sm text-gray-600",children:"Views (24h)"}),l.jsx("div",{className:"text-2xl font-bold text-amber-600",children:i.stats.recent_views_24h||0})]})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-semibold mb-4",children:"IP Addresses"}),i.views.length===0?l.jsx("div",{className:"text-center py-8 text-gray-500",children:"No views recorded yet"}):l.jsx("div",{className:"bg-gray-50 rounded-lg overflow-hidden",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-100",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:"IP Address"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:"User Agent"}),l.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:"Date"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.views.map(u=>l.jsxs("tr",{className:"hover:bg-gray-50",children:[l.jsx("td",{className:"px-4 py-3 text-sm font-mono text-gray-900",children:u.ip_address}),l.jsx("td",{className:"px-4 py-3 text-sm text-gray-600 truncate max-w-xs",title:u.user_agent||"N/A",children:u.user_agent||"N/A"}),l.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:u.created_at?new Date(u.created_at).toLocaleString():"N/A"})]},u.id))})]})})]})]})]})}):null},IE=()=>{const[r,e]=R.useState([]),[t,s]=R.useState([]),[i,o]=R.useState(!0),[c,u]=R.useState(!1),[h,p]=R.useState(!1),[f,g]=R.useState(!1),[x,b]=R.useState(null),[w,_]=R.useState(null),[S,A]=R.useState(null),[L,O]=R.useState(1),[D,I]=R.useState(null),[C,P]=R.useState({title:"",content:"",category_id:"",images:[],status:"draft"});R.useEffect(()=>{k(L),N()},[L]);const k=async(j=1)=>{try{const G=await Vo.getAll({page:j});e(G.data?.data||G.data||[]),I(G.data?.pagination||null)}catch(G){console.error("Error fetching posts:",G)}finally{o(!1)}},N=async()=>{try{const j=await yr.getAll();s(j.data?.data||[])}catch(j){console.error("Error fetching categories:",j)}},M=j=>{if(!j||j.trim()==="")return!0;const G=document.createElement("div");return G.innerHTML=j,(G.textContent||G.innerText||"").trim()===""},H=async j=>{if(j.preventDefault(),!C.title||C.title.trim()===""){alert("Error saving post: The title field is required.");return}const G=C.content||"";if(M(G)){alert("Error saving post: The content field is required.");return}try{const Y=new FormData;Y.append("title",C.title.trim());const ee=G||"";Y.append("content",ee),Y.append("category_id",C.category_id||""),Y.append("status",C.status),C.images.forEach((B,$)=>{Y.append(`images[${$}]`,B)}),w?(console.log("Updating post:",w.id),console.log("Form data:",{title:C.title,contentLength:C.content?.length,category_id:C.category_id,status:C.status,imagesCount:C.images.length}),await Vo.update(w.id,Y),alert("Post updated successfully!")):(await Vo.create(Y),alert("Post created successfully!")),u(!1),E(),k(L)}catch(Y){if(console.error("Error saving post:",Y),Y.response?.data?.message)alert(`Error saving post: ${Y.response.data.message}`);else if(Y.response?.data?.errors){const ee=Y.response.data.errors;let B=`Validation failed:
`;for(const $ in ee)B+=`- ${ee[$].join(", ")}
`;alert(B)}else alert("Error saving post: "+(Y.message||"Unknown error"))}},F=j=>{b(j),p(!0)},V=j=>{A(j),g(!0)},q=j=>{_(j);const G=j.content||"";P({title:j.title||"",content:G,category_id:j.category_id?String(j.category_id):"",images:[],status:j.status||"draft"}),u(!0)},z=async j=>{if(confirm("Are you sure you want to delete this post?"))try{await Vo.delete(j),k(L)}catch(G){console.error("Error deleting post:",G),alert("Error deleting post")}},E=()=>{P({title:"",content:"",category_id:"",images:[],status:"draft"}),_(null)};return i?l.jsx("div",{className:"flex items-center justify-center h-64",children:l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-600"})}):l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Posts"}),l.jsx("button",{onClick:()=>{E(),u(!0)},className:"bg-amber-600 text-white px-4 py-2 rounded-lg hover:bg-amber-700 transition",children:"+ Add New Post"})]}),l.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:[l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Title"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Category"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Views"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.map(j=>l.jsxs("tr",{className:"hover:bg-gray-50",children:[l.jsx("td",{className:"px-6 py-4",children:l.jsx("div",{className:"text-sm font-medium text-gray-900 cursor-pointer hover:text-amber-600 transition",onClick:()=>F(j),title:"Click to view details",children:j.title})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("span",{className:"text-sm text-gray-500",children:j.category?.name||"N/A"})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${j.status==="published"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:j.status})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("button",{onClick:()=>V(j),className:"text-blue-600 hover:text-blue-900 font-semibold cursor-pointer",title:"Click to view IP addresses",children:j.views_count||0})}),l.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[l.jsx("button",{onClick:()=>F(j),className:"text-blue-600 hover:text-blue-900 mr-3",title:"View Details",children:"View"}),l.jsx("button",{onClick:()=>q(j),className:"text-amber-600 hover:text-amber-900 mr-3",children:"Edit"}),l.jsx("button",{onClick:()=>z(j.id),className:"text-red-600 hover:text-red-900",children:"Delete"})]})]},j.id))})]}),D&&l.jsxs("div",{className:"flex items-center justify-between px-6 py-3 border-t border-gray-200",children:[l.jsx("button",{disabled:L<=1,onClick:()=>O(j=>Math.max(1,j-1)),className:"px-4 py-2 rounded-lg bg-gray-100 text-gray-700 disabled:opacity-50 hover:bg-gray-200 transition",children:"Previous"}),l.jsxs("span",{className:"text-sm text-gray-600",children:["Page ",D.current_page," of ",D.last_page]}),l.jsx("button",{disabled:!D.has_more_pages,onClick:()=>O(j=>j+1),className:"px-4 py-2 rounded-lg bg-amber-600 text-white disabled:opacity-50 hover:bg-amber-700 transition",children:"Next"})]})]}),c&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-white rounded-xl shadow-xl p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[l.jsx("h2",{className:"text-2xl font-bold mb-4",children:w?"Edit Post":"Create New Post"}),l.jsxs("form",{onSubmit:H,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title *"}),l.jsx("input",{type:"text",required:!0,value:C.title,onChange:j=>P({...C,title:j.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),l.jsxs("select",{value:C.category_id,onChange:j=>P({...C,category_id:j.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500",children:[l.jsx("option",{value:"",children:"Select Category (Optional)"}),t.map(j=>l.jsx("option",{value:j.id,children:j.name},j.id))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Content *"}),l.jsx(Om,{value:C.content,onChange:j=>P({...C,content:j}),placeholder:"Write your post content here..."})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Images"}),l.jsx(Gv,{images:C.images,onImagesChange:j=>P({...C,images:j}),maxImages:10,enableCrop:!1}),w&&w.image&&C.images.length===0&&l.jsxs("div",{className:"mt-2",children:[l.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"Current Image:"}),l.jsx("img",{src:w.image,alt:"Current",className:"h-32 w-auto rounded-lg border border-gray-300"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),l.jsxs("select",{value:C.status,onChange:j=>P({...C,status:j.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500",children:[l.jsx("option",{value:"draft",children:"Draft"}),l.jsx("option",{value:"published",children:"Published"})]})]}),l.jsxs("div",{className:"flex gap-3 pt-4",children:[l.jsx("button",{type:"submit",className:"flex-1 bg-amber-600 text-white py-2 rounded-lg hover:bg-amber-700",children:w?"Update":"Create"}),l.jsx("button",{type:"button",onClick:()=>{u(!1),E()},className:"flex-1 bg-gray-300 text-gray-700 py-2 rounded-lg hover:bg-gray-400",children:"Cancel"})]})]})]})}),h&&x&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-white rounded-xl shadow-xl p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Post Details"}),l.jsx("button",{onClick:()=>{p(!1),b(null)},className:"text-gray-500 hover:text-gray-700",children:l.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),l.jsxs("div",{className:"space-y-6",children:[x.image&&l.jsx("div",{children:l.jsx("img",{src:x.image,alt:x.title,className:"w-full h-64 object-cover rounded-lg"})}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title"}),l.jsx("div",{className:"text-lg font-semibold text-gray-900",children:x.title})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),l.jsx("div",{className:"text-gray-900",children:x.category?.name||"N/A"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),l.jsx("span",{className:`inline-block px-3 py-1 text-xs rounded-full ${x.status==="published"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:x.status})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Created At"}),l.jsx("div",{className:"text-gray-900",children:x.created_at?new Date(x.created_at).toLocaleString():"N/A"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Updated At"}),l.jsx("div",{className:"text-gray-900",children:x.updated_at?new Date(x.updated_at).toLocaleString():"N/A"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Content"}),l.jsx("div",{className:"prose max-w-none p-4 bg-gray-50 rounded-lg border border-gray-200",dangerouslySetInnerHTML:{__html:x.content}})]}),l.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[l.jsx("button",{onClick:()=>{p(!1),q(x)},className:"flex-1 bg-amber-600 text-white py-2 rounded-lg hover:bg-amber-700",children:"Edit Post"}),l.jsx("button",{onClick:()=>{p(!1),b(null)},className:"flex-1 bg-gray-300 text-gray-700 py-2 rounded-lg hover:bg-gray-400",children:"Close"})]})]})]})}),l.jsx(fl,{isOpen:f,onClose:()=>{g(!1),A(null)},viewableType:S?"App\\Models\\Post":null,viewableId:S?.id||null})]})},zE=()=>{const[r,e]=R.useState([]),[t,s]=R.useState(!0),[i,o]=R.useState(!1),[c,u]=R.useState(null),[h,p]=R.useState({name:"",description:""});R.useEffect(()=>{f()},[]);const f=async()=>{try{const _=await yr.getAll();e(_.data?.data||[])}catch(_){console.error("Error fetching categories:",_)}finally{s(!1)}},g=async _=>{_.preventDefault();try{c?await yr.update(c.id,h):await yr.create(h),o(!1),w(),f()}catch(S){console.error("Error saving category:",S),alert("Error saving category")}},x=_=>{u(_),p({name:_.name||"",description:_.description||""}),o(!0)},b=async _=>{if(confirm("Are you sure you want to delete this category?"))try{await yr.delete(_),f()}catch(S){console.error("Error deleting category:",S),alert("Error deleting category")}},w=()=>{p({name:"",description:""}),u(null)};return t?l.jsx("div",{className:"flex items-center justify-center h-64",children:l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-600"})}):l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Categories"}),l.jsx("button",{onClick:()=>{w(),o(!0)},className:"bg-amber-600 text-white px-4 py-2 rounded-lg hover:bg-amber-700 transition",children:"+ Add New Category"})]}),l.jsx("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Name"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Description"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.map(_=>l.jsxs("tr",{className:"hover:bg-gray-50",children:[l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("div",{className:"text-sm font-medium text-gray-900",children:_.name})}),l.jsx("td",{className:"px-6 py-4",children:l.jsx("div",{className:"text-sm text-gray-500",children:_.description||"N/A"})}),l.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[l.jsx("button",{onClick:()=>x(_),className:"text-amber-600 hover:text-amber-900 mr-3",children:"Edit"}),l.jsx("button",{onClick:()=>b(_.id),className:"text-red-600 hover:text-red-900",children:"Delete"})]})]},_.id))})]})}),i&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-white rounded-xl shadow-xl p-6 w-full max-w-md",children:[l.jsx("h2",{className:"text-2xl font-bold mb-4",children:c?"Edit Category":"Create New Category"}),l.jsxs("form",{onSubmit:g,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),l.jsx("input",{type:"text",required:!0,value:h.name,onChange:_=>p({...h,name:_.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),l.jsx("textarea",{rows:4,value:h.description,onChange:_=>p({...h,description:_.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500"})]}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{type:"submit",className:"flex-1 bg-amber-600 text-white py-2 rounded-lg hover:bg-amber-700",children:c?"Update":"Create"}),l.jsx("button",{type:"button",onClick:()=>{o(!1),w()},className:"flex-1 bg-gray-300 text-gray-700 py-2 rounded-lg hover:bg-gray-400",children:"Cancel"})]})]})]})})]})},qc={getAll:()=>oe.get("/admin/dhammas"),getById:r=>oe.get(`/admin/dhammas/${r}`),create:r=>oe.post("/admin/dhammas",r),update:(r,e)=>e instanceof FormData?(e.append("_method","PUT"),oe.post(`/admin/dhammas/${r}`,e)):oe.put(`/admin/dhammas/${r}`,e),delete:r=>oe.delete(`/admin/dhammas/${r}`)},HE=()=>{const[r,e]=R.useState([]),[t,s]=R.useState(!0),[i,o]=R.useState(!1),[c,u]=R.useState(!1),[h,p]=R.useState(!1),[f,g]=R.useState(null),[x,b]=R.useState(null),[w,_]=R.useState(null),[S,A]=R.useState({title:"",content:"",speaker:"",date:"",images:[]});R.useEffect(()=>{L()},[]);const L=async()=>{try{const N=await qc.getAll();e(N.data?.data||[])}catch(N){console.error("Error fetching dhammas:",N)}finally{s(!1)}},O=async N=>{N.preventDefault();try{const M=new FormData;M.append("title",S.title.trim()),M.append("content",S.content||""),M.append("speaker",S.speaker.trim()),M.append("date",S.date),S.images.forEach((H,F)=>{M.append(`images[${F}]`,H)}),x?(console.log("Updating dhamma:",x.id),await qc.update(x.id,M),alert("Dhamma talk updated successfully!")):(await qc.create(M),alert("Dhamma talk created successfully!")),o(!1),k(),L()}catch(M){if(console.error("Error saving dhamma:",M),M.response?.data?.message)alert(`Error saving dhamma talk: ${M.response.data.message}`);else if(M.response?.data?.errors){const H=M.response.data.errors;let F=`Validation failed:
`;for(const V in H)F+=`- ${H[V].join(", ")}
`;alert(F)}else alert("Error saving dhamma talk: "+(M.message||"Unknown error"))}},D=N=>{g(N),u(!0)},I=N=>{_(N),p(!0)},C=N=>{b(N);const M=N.content||"";A({title:N.title||"",content:M,speaker:N.speaker||"",date:N.date?N.date.split("T")[0]:"",images:[]}),o(!0)},P=async N=>{if(confirm("Are you sure you want to delete this dhamma talk?"))try{await qc.delete(N),L()}catch(M){console.error("Error deleting dhamma:",M),alert("Error deleting dhamma talk")}},k=()=>{A({title:"",content:"",speaker:"",date:"",images:[]}),b(null)};return t?l.jsx("div",{className:"flex items-center justify-center h-64",children:l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-600"})}):l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Dhamma Talks"}),l.jsx("button",{onClick:()=>{k(),o(!0)},className:"bg-amber-600 text-white px-4 py-2 rounded-lg hover:bg-amber-700 transition",children:"+ Add New Dhamma Talk"})]}),l.jsx("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Title"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Speaker"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Date"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Views"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.map(N=>l.jsxs("tr",{className:"hover:bg-gray-50",children:[l.jsx("td",{className:"px-6 py-4",children:l.jsx("div",{className:"text-sm font-medium text-gray-900 cursor-pointer hover:text-amber-600 transition",onClick:()=>D(N),title:"Click to view details",children:N.title})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("div",{className:"text-sm text-gray-500",children:N.speaker})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("div",{className:"text-sm text-gray-500",children:N.date?new Date(N.date).toLocaleDateString():"N/A"})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("button",{onClick:()=>I(N),className:"text-blue-600 hover:text-blue-900 font-semibold cursor-pointer",title:"Click to view IP addresses",children:N.views_count||0})}),l.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[l.jsx("button",{onClick:()=>D(N),className:"text-blue-600 hover:text-blue-900 mr-3",title:"View Details",children:"View"}),l.jsx("button",{onClick:()=>C(N),className:"text-amber-600 hover:text-amber-900 mr-3",children:"Edit"}),l.jsx("button",{onClick:()=>P(N.id),className:"text-red-600 hover:text-red-900",children:"Delete"})]})]},N.id))})]})}),i&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-white rounded-xl shadow-xl p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[l.jsx("h2",{className:"text-2xl font-bold mb-4",children:x?"Edit Dhamma Talk":"Create New Dhamma Talk"}),l.jsxs("form",{onSubmit:O,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title *"}),l.jsx("input",{type:"text",required:!0,value:S.title,onChange:N=>A({...S,title:N.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Speaker *"}),l.jsx("input",{type:"text",required:!0,value:S.speaker,onChange:N=>A({...S,speaker:N.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date *"}),l.jsx("input",{type:"date",required:!0,value:S.date,onChange:N=>A({...S,date:N.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Content *"}),l.jsx(Om,{value:S.content,onChange:N=>A({...S,content:N}),placeholder:"Write the dhamma talk content here..."})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Images"}),l.jsx(Gv,{images:S.images,onImagesChange:N=>A({...S,images:N}),maxImages:10}),x&&x.image&&S.images.length===0&&l.jsxs("div",{className:"mt-2",children:[l.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"Current Image:"}),l.jsx("img",{src:x.image,alt:"Current",className:"h-32 w-auto rounded-lg border border-gray-300"})]})]}),l.jsxs("div",{className:"flex gap-3 pt-4",children:[l.jsx("button",{type:"submit",className:"flex-1 bg-amber-600 text-white py-2 rounded-lg hover:bg-amber-700",children:x?"Update":"Create"}),l.jsx("button",{type:"button",onClick:()=>{o(!1),k()},className:"flex-1 bg-gray-300 text-gray-700 py-2 rounded-lg hover:bg-gray-400",children:"Cancel"})]})]})]})}),c&&f&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-white rounded-xl shadow-xl p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Dhamma Talk Details"}),l.jsx("button",{onClick:()=>{u(!1),g(null)},className:"text-gray-500 hover:text-gray-700",children:l.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),l.jsxs("div",{className:"space-y-6",children:[f.image&&l.jsx("div",{children:l.jsx("img",{src:f.image,alt:f.title,className:"w-full h-64 object-cover rounded-lg"})}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title"}),l.jsx("div",{className:"text-lg font-semibold text-gray-900",children:f.title})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Speaker"}),l.jsx("div",{className:"text-gray-900",children:f.speaker||"N/A"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date"}),l.jsx("div",{className:"text-gray-900",children:f.date?new Date(f.date).toLocaleDateString():"N/A"})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Created At"}),l.jsx("div",{className:"text-gray-900",children:f.created_at?new Date(f.created_at).toLocaleString():"N/A"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Updated At"}),l.jsx("div",{className:"text-gray-900",children:f.updated_at?new Date(f.updated_at).toLocaleString():"N/A"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Content"}),l.jsx("div",{className:"prose max-w-none p-4 bg-gray-50 rounded-lg border border-gray-200",dangerouslySetInnerHTML:{__html:f.content}})]}),l.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[l.jsx("button",{onClick:()=>{u(!1),C(f)},className:"flex-1 bg-amber-600 text-white py-2 rounded-lg hover:bg-amber-700",children:"Edit Dhamma Talk"}),l.jsx("button",{onClick:()=>{u(!1),g(null)},className:"flex-1 bg-gray-300 text-gray-700 py-2 rounded-lg hover:bg-gray-400",children:"Close"})]})]})]})}),l.jsx(fl,{isOpen:h,onClose:()=>{p(!1),_(null)},viewableType:w?"App\\Models\\Dhamma":null,viewableId:w?.id||null})]})},qE=()=>{const[r,e]=R.useState([]),[t,s]=R.useState(!0),[i,o]=R.useState(!1),[c,u]=R.useState(!1),[h,p]=R.useState(null),[f,g]=R.useState(null),[x,b]=R.useState({donor_name:"",amount:"",donation_type:"",date:"",status:"pending"});R.useEffect(()=>{w()},[]);const w=async()=>{try{const C=await da.getAll();e(C.data?.data||[])}catch(C){console.error("Error fetching donations:",C)}finally{s(!1)}},_=async C=>{C.preventDefault();try{h?await da.update(h.id,x):await da.create(x),o(!1),I(),w()}catch(P){console.error("Error saving donation:",P),alert("Error saving donation")}},S=async C=>{try{await da.approve(C),w()}catch(P){console.error("Error approving donation:",P),alert("Error approving donation")}},A=async C=>{try{await da.reject(C),w()}catch(P){console.error("Error rejecting donation:",P),alert("Error rejecting donation")}},L=C=>{p(C),b({donor_name:C.donor_name||"",amount:C.amount||"",donation_type:C.donation_type||"",date:C.date||"",status:C.status||"pending"}),o(!0)},O=C=>{g(C),u(!0)},D=async C=>{if(confirm("Are you sure you want to delete this donation?"))try{await da.delete(C),w()}catch(P){console.error("Error deleting donation:",P),alert("Error deleting donation")}},I=()=>{b({donor_name:"",amount:"",donation_type:"",date:"",status:"pending"}),p(null)};return t?l.jsx("div",{className:"flex items-center justify-center h-64",children:l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-600"})}):l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Donations"}),l.jsx("button",{onClick:()=>{I(),o(!0)},className:"bg-amber-600 text-white px-4 py-2 rounded-lg hover:bg-amber-700 transition",children:"+ Add New Donation"})]}),l.jsx("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Donor Name"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Amount"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Type"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Date"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Views"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.map(C=>l.jsxs("tr",{className:"hover:bg-gray-50",children:[l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("div",{className:"text-sm font-medium text-gray-900",children:C.donor_name})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsxs("div",{className:"text-sm text-gray-900",children:[C.amount," Ks"]})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("div",{className:"text-sm text-gray-500",children:C.donation_type})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("div",{className:"text-sm text-gray-500",children:C.date})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${C.status==="approved"?"bg-green-100 text-green-800":C.status==="rejected"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:C.status})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("button",{onClick:()=>O(C),className:"text-blue-600 hover:text-blue-900 font-semibold cursor-pointer",title:"Click to view IP addresses",children:C.views_count||0})}),l.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[C.status==="pending"&&l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:()=>S(C.id),className:"text-green-600 hover:text-green-900 mr-3",children:"Approve"}),l.jsx("button",{onClick:()=>A(C.id),className:"text-red-600 hover:text-red-900 mr-3",children:"Reject"})]}),l.jsx("button",{onClick:()=>L(C),className:"text-amber-600 hover:text-amber-900 mr-3",children:"Edit"}),l.jsx("button",{onClick:()=>D(C.id),className:"text-red-600 hover:text-red-900",children:"Delete"})]})]},C.id))})]})}),i&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-white rounded-xl shadow-xl p-6 w-full max-w-md",children:[l.jsx("h2",{className:"text-2xl font-bold mb-4",children:h?"Edit Donation":"Create New Donation"}),l.jsxs("form",{onSubmit:_,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Donor Name"}),l.jsx("input",{type:"text",required:!0,value:x.donor_name,onChange:C=>b({...x,donor_name:C.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Amount"}),l.jsx("input",{type:"number",required:!0,value:x.amount,onChange:C=>b({...x,amount:C.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Donation Type"}),l.jsx("input",{type:"text",required:!0,value:x.donation_type,onChange:C=>b({...x,donation_type:C.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date"}),l.jsx("input",{type:"date",required:!0,value:x.date,onChange:C=>b({...x,date:C.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),l.jsxs("select",{value:x.status,onChange:C=>b({...x,status:C.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500",children:[l.jsx("option",{value:"pending",children:"Pending"}),l.jsx("option",{value:"approved",children:"Approved"}),l.jsx("option",{value:"rejected",children:"Rejected"})]})]}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{type:"submit",className:"flex-1 bg-amber-600 text-white py-2 rounded-lg hover:bg-amber-700",children:h?"Update":"Create"}),l.jsx("button",{type:"button",onClick:()=>{o(!1),I()},className:"flex-1 bg-gray-300 text-gray-700 py-2 rounded-lg hover:bg-gray-400",children:"Cancel"})]})]})]})}),l.jsx(fl,{isOpen:c,onClose:()=>{u(!1),g(null)},viewableType:f?"App\\Models\\Donation":null,viewableId:f?.id||null})]})},Vc={getAll:()=>oe.get("/admin/biographies"),getById:r=>oe.get(`/admin/biographies/${r}`),create:r=>oe.post("/admin/biographies",r),update:(r,e)=>e instanceof FormData?(e.append("_method","PUT"),oe.post(`/admin/biographies/${r}`,e)):oe.put(`/admin/biographies/${r}`,e),delete:r=>oe.delete(`/admin/biographies/${r}`)},VE=()=>{const[r,e]=R.useState([]),[t,s]=R.useState(!0),[i,o]=R.useState(!1),[c,u]=R.useState(!1),[h,p]=R.useState(!1),[f,g]=R.useState(null),[x,b]=R.useState(null),[w,_]=R.useState(null),[S,A]=R.useState({name:"",birth_year:"",sangha_entry_year:"",disciples:"",teaching_monastery:"",sangha_dhamma:"",image:null});R.useEffect(()=>{L()},[]);const L=async()=>{try{const N=await Vc.getAll();e(N.data?.data||[])}catch(N){console.error("Error fetching biographies:",N)}finally{s(!1)}},O=async N=>{N.preventDefault();try{const M=new FormData;M.append("name",S.name.trim()),M.append("birth_year",S.birth_year||""),M.append("sangha_entry_year",S.sangha_entry_year||""),M.append("disciples",S.disciples||""),M.append("teaching_monastery",S.teaching_monastery||""),M.append("sangha_dhamma",S.sangha_dhamma||""),S.image&&M.append("image",S.image),x?(console.log("Updating biography:",x.id),await Vc.update(x.id,M),alert("Biography updated successfully!")):(await Vc.create(M),alert("Biography created successfully!")),o(!1),k(),L()}catch(M){if(console.error("Error saving biography:",M),M.response?.data?.message)alert(`Error saving biography: ${M.response.data.message}`);else if(M.response?.data?.errors){const H=M.response.data.errors;let F=`Validation failed:
`;for(const V in H)F+=`- ${H[V].join(", ")}
`;alert(F)}else alert("Error saving biography: "+(M.message||"Unknown error"))}},D=N=>{g(N),u(!0)},I=N=>{_(N),p(!0)},C=N=>{b(N),A({name:N.name||"",birth_year:N.birth_year||"",sangha_entry_year:N.sangha_entry_year||"",disciples:N.disciples||"",teaching_monastery:N.teaching_monastery||"",sangha_dhamma:N.sangha_dhamma||"",image:null}),o(!0)},P=async N=>{if(confirm("Are you sure you want to delete this biography?"))try{await Vc.delete(N),L()}catch(M){console.error("Error deleting biography:",M),alert("Error deleting biography")}},k=()=>{A({name:"",birth_year:"",sangha_entry_year:"",disciples:"",teaching_monastery:"",sangha_dhamma:"",image:null}),b(null)};return t?l.jsx("div",{className:"flex items-center justify-center h-64",children:l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-600"})}):l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Biographies"}),l.jsx("button",{onClick:()=>{k(),o(!0)},className:"bg-amber-600 text-white px-4 py-2 rounded-lg hover:bg-amber-700 transition",children:"+ Add New Biography"})]}),l.jsx("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Name"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Birth Year"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Sangha Entry"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Disciples"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Views"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.map(N=>l.jsxs("tr",{className:"hover:bg-gray-50",children:[l.jsx("td",{className:"px-6 py-4",children:l.jsx("div",{className:"text-sm font-medium text-gray-900 cursor-pointer hover:text-amber-600 transition",onClick:()=>D(N),title:"Click to view details",children:N.name})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("div",{className:"text-sm text-gray-500",children:N.birth_year})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("div",{className:"text-sm text-gray-500",children:N.sangha_entry_year})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("div",{className:"text-sm text-gray-500",children:N.disciples})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("button",{onClick:()=>I(N),className:"text-blue-600 hover:text-blue-900 font-semibold cursor-pointer",title:"Click to view IP addresses",children:N.views_count||0})}),l.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[l.jsx("button",{onClick:()=>D(N),className:"text-blue-600 hover:text-blue-900 mr-3",title:"View Details",children:"View"}),l.jsx("button",{onClick:()=>C(N),className:"text-amber-600 hover:text-amber-900 mr-3",children:"Edit"}),l.jsx("button",{onClick:()=>P(N.id),className:"text-red-600 hover:text-red-900",children:"Delete"})]})]},N.id))})]})}),i&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-white rounded-xl shadow-xl p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[l.jsx("h2",{className:"text-2xl font-bold mb-4",children:x?"Edit Biography":"Create New Biography"}),l.jsxs("form",{onSubmit:O,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),l.jsx("input",{type:"text",required:!0,value:S.name,onChange:N=>A({...S,name:N.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500"})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Birth Year"}),l.jsx("input",{type:"text",value:S.birth_year,onChange:N=>A({...S,birth_year:N.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sangha Entry Year"}),l.jsx("input",{type:"text",value:S.sangha_entry_year,onChange:N=>A({...S,sangha_entry_year:N.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Disciples"}),l.jsx("input",{type:"text",value:S.disciples,onChange:N=>A({...S,disciples:N.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Teaching Monastery"}),l.jsx("input",{type:"text",value:S.teaching_monastery,onChange:N=>A({...S,teaching_monastery:N.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sangha Dhamma"}),l.jsx("textarea",{rows:4,value:S.sangha_dhamma,onChange:N=>A({...S,sangha_dhamma:N.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Image"}),l.jsx("input",{type:"file",accept:"image/*",onChange:N=>A({...S,image:N.target.files[0]}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500"})]}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{type:"submit",className:"flex-1 bg-amber-600 text-white py-2 rounded-lg hover:bg-amber-700",children:x?"Update":"Create"}),l.jsx("button",{type:"button",onClick:()=>{o(!1),k()},className:"flex-1 bg-gray-300 text-gray-700 py-2 rounded-lg hover:bg-gray-400",children:"Cancel"})]})]})]})}),c&&f&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-white rounded-xl shadow-xl p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Biography Details"}),l.jsx("button",{onClick:()=>{u(!1),g(null)},className:"text-gray-500 hover:text-gray-700",children:l.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),l.jsxs("div",{className:"space-y-6",children:[f.image&&l.jsx("div",{className:"flex justify-center",children:l.jsx("img",{src:f.image,alt:f.name,className:"w-64 h-64 object-cover rounded-lg"})}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),l.jsx("div",{className:"text-lg font-semibold text-gray-900",children:f.name})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Birth Year"}),l.jsx("div",{className:"text-gray-900",children:f.birth_year||"N/A"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sangha Entry Year"}),l.jsx("div",{className:"text-gray-900",children:f.sangha_entry_year||"N/A"})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Disciples"}),l.jsx("div",{className:"text-gray-900",children:f.disciples||"N/A"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Teaching Monastery"}),l.jsx("div",{className:"text-gray-900",children:f.teaching_monastery||"N/A"})]})]}),f.sangha_dhamma&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sangha Dhamma"}),l.jsx("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200 whitespace-pre-wrap text-gray-900",children:f.sangha_dhamma})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Created At"}),l.jsx("div",{className:"text-gray-900",children:f.created_at?new Date(f.created_at).toLocaleString():"N/A"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Updated At"}),l.jsx("div",{className:"text-gray-900",children:f.updated_at?new Date(f.updated_at).toLocaleString():"N/A"})]})]}),l.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[l.jsx("button",{onClick:()=>{u(!1),C(f)},className:"flex-1 bg-amber-600 text-white py-2 rounded-lg hover:bg-amber-700",children:"Edit Biography"}),l.jsx("button",{onClick:()=>{u(!1),g(null)},className:"flex-1 bg-gray-300 text-gray-700 py-2 rounded-lg hover:bg-gray-400",children:"Close"})]})]})]})}),l.jsx(fl,{isOpen:h,onClose:()=>{p(!1),_(null)},viewableType:w?"App\\Models\\Biography":null,viewableId:w?.id||null})]})},Gc={getAll:()=>oe.get("/admin/monasteries"),getById:r=>oe.get(`/admin/monasteries/${r}`),create:r=>oe.post("/admin/monasteries",r),update:(r,e)=>oe.put(`/admin/monasteries/${r}`,e),delete:r=>oe.delete(`/admin/monasteries/${r}`)},GE=()=>{const[r,e]=R.useState([]),[t,s]=R.useState(!0),[i,o]=R.useState(!1),[c,u]=R.useState(null),[h,p]=R.useState({name:"",type:"monastery",monastery_name:"",monks:0,novices:0,order:0});R.useEffect(()=>{f()},[]);const f=async()=>{try{const A=await Gc.getAll();e(A.data?.data||[])}catch(A){console.error("Error fetching monasteries:",A)}finally{s(!1)}},g=async A=>{A.preventDefault();try{c?await Gc.update(c.id,h):await Gc.create(h),o(!1),w(),f()}catch(L){console.error("Error saving monastery:",L),alert("Error saving monastery")}},x=A=>{u(A),p({name:A.name||"",type:A.type||"monastery",monastery_name:A.monastery_name||"",monks:A.monks||0,novices:A.novices||0,order:A.order||0}),o(!0)},b=async A=>{if(confirm("Are you sure you want to delete this monastery?"))try{await Gc.delete(A),f()}catch(L){console.error("Error deleting monastery:",L),alert("Error deleting monastery")}},w=()=>{p({name:"",type:"monastery",monastery_name:"",monks:0,novices:0,order:0}),u(null)};if(t)return l.jsx("div",{className:"flex items-center justify-center h-64",children:l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-600"})});const _=r.filter(A=>A.type==="monastery"),S=r.filter(A=>A.type==="building");return l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Monasteries"}),l.jsx("button",{onClick:()=>{w(),o(!0)},className:"bg-amber-600 text-white px-4 py-2 rounded-lg hover:bg-amber-700 transition",children:"+ Add New Monastery"})]}),l.jsxs("div",{className:"mb-8",children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Monasteries"}),l.jsx("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Order"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Name"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Monks"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Novices"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Total"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:_.map(A=>l.jsxs("tr",{className:"hover:bg-gray-50",children:[l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("div",{className:"text-sm text-gray-900",children:A.order})}),l.jsx("td",{className:"px-6 py-4",children:l.jsx("div",{className:"text-sm font-medium text-gray-900",children:A.name})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("div",{className:"text-sm text-gray-900",children:A.monks})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("div",{className:"text-sm text-gray-900",children:A.novices})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("div",{className:"text-sm font-semibold text-amber-600",children:A.total})}),l.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[l.jsx("button",{onClick:()=>x(A),className:"text-amber-600 hover:text-amber-900 mr-3",children:"Edit"}),l.jsx("button",{onClick:()=>b(A.id),className:"text-red-600 hover:text-red-900",children:"Delete"})]})]},A.id))})]})})})]}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Buildings"}),l.jsx("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Order"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Name"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Monastery Name"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Monks"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Novices"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Total"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:S.map(A=>l.jsxs("tr",{className:"hover:bg-gray-50",children:[l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("div",{className:"text-sm text-gray-900",children:A.order})}),l.jsx("td",{className:"px-6 py-4",children:l.jsx("div",{className:"text-sm font-medium text-gray-900",children:A.name})}),l.jsx("td",{className:"px-6 py-4",children:l.jsx("div",{className:"text-sm text-gray-500",children:A.monastery_name||"N/A"})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("div",{className:"text-sm text-gray-900",children:A.monks})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("div",{className:"text-sm text-gray-900",children:A.novices})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("div",{className:"text-sm font-semibold text-amber-600",children:A.total})}),l.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[l.jsx("button",{onClick:()=>x(A),className:"text-amber-600 hover:text-amber-900 mr-3",children:"Edit"}),l.jsx("button",{onClick:()=>b(A.id),className:"text-red-600 hover:text-red-900",children:"Delete"})]})]},A.id))})]})})})]}),i&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-white rounded-xl shadow-xl p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[l.jsx("h2",{className:"text-2xl font-bold mb-4",children:c?"Edit Monastery":"Create New Monastery"}),l.jsxs("form",{onSubmit:g,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type"}),l.jsxs("select",{required:!0,value:h.type,onChange:A=>p({...h,type:A.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500",children:[l.jsx("option",{value:"monastery",children:"Monastery"}),l.jsx("option",{value:"building",children:"Building"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),l.jsx("input",{type:"text",required:!0,value:h.name,onChange:A=>p({...h,name:A.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500"})]}),h.type==="building"&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Monastery Name (Parent)"}),l.jsx("input",{type:"text",value:h.monastery_name,onChange:A=>p({...h,monastery_name:A.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500",placeholder:"Optional"})]}),l.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Monks"}),l.jsx("input",{type:"number",required:!0,min:"0",value:h.monks,onChange:A=>p({...h,monks:parseInt(A.target.value)||0}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Novices"}),l.jsx("input",{type:"number",required:!0,min:"0",value:h.novices,onChange:A=>p({...h,novices:parseInt(A.target.value)||0}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Order"}),l.jsx("input",{type:"number",min:"0",value:h.order,onChange:A=>p({...h,order:parseInt(A.target.value)||0}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500"})]})]}),l.jsx("div",{className:"bg-amber-50 p-3 rounded-lg",children:l.jsxs("p",{className:"text-sm text-gray-700",children:[l.jsx("strong",{children:"Total:"})," ",h.monks+h.novices," (Monks: ",h.monks," + Novices: ",h.novices,")"]})}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{type:"submit",className:"flex-1 bg-amber-600 text-white py-2 rounded-lg hover:bg-amber-700",children:c?"Update":"Create"}),l.jsx("button",{type:"button",onClick:()=>{o(!1),w()},className:"flex-1 bg-gray-300 text-gray-700 py-2 rounded-lg hover:bg-gray-400",children:"Cancel"})]})]})]})})]})},$c={getAll:()=>oe.get("/admin/monastery-building-donations"),getById:r=>oe.get(`/admin/monastery-building-donations/${r}`),create:r=>oe.post("/admin/monastery-building-donations",r),update:(r,e)=>oe.put(`/admin/monastery-building-donations/${r}`,e),delete:r=>oe.delete(`/admin/monastery-building-donations/${r}`)},$E=()=>{const[r,e]=R.useState([]),[t,s]=R.useState(!0),[i,o]=R.useState(!1),[c,u]=R.useState(null),[h,p]=R.useState({donor_name:"",amount:"",donation_purpose:"",date:"",description:""});R.useEffect(()=>{f()},[]);const f=async()=>{try{const _=await $c.getAll();e(_.data?.data||[])}catch(_){console.error("Error fetching monastery building donations:",_)}finally{s(!1)}},g=async _=>{_.preventDefault();try{c?await $c.update(c.id,h):await $c.create(h),o(!1),w(),f()}catch(S){console.error("Error saving monastery building donation:",S),alert("Error saving donation record")}},x=_=>{u(_),p({donor_name:_.donor_name||"",amount:_.amount||"",donation_purpose:_.donation_purpose||"",date:_.date||"",description:_.description||""}),o(!0)},b=async _=>{if(confirm("Are you sure you want to delete this donation record?"))try{await $c.delete(_),f()}catch(S){console.error("Error deleting donation:",S),alert("Error deleting donation record")}},w=()=>{p({donor_name:"",amount:"",donation_purpose:"",date:"",description:""}),u(null)};return t?l.jsx("div",{className:"flex items-center justify-center h-64",children:l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-600"})}):l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Monastery Building Donations"}),l.jsx("button",{onClick:()=>{w(),o(!0)},className:"bg-amber-600 text-white px-4 py-2 rounded-lg hover:bg-amber-700 transition",children:"+ Add New Record"})]}),l.jsx("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Donor Name"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Amount"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Purpose"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Date"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.map(_=>l.jsxs("tr",{className:"hover:bg-gray-50",children:[l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("div",{className:"text-sm font-medium text-gray-900",children:_.donor_name})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsxs("div",{className:"text-sm text-gray-900",children:[_.amount," Ks"]})}),l.jsx("td",{className:"px-6 py-4",children:l.jsx("div",{className:"text-sm text-gray-500",children:_.donation_purpose})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("div",{className:"text-sm text-gray-500",children:_.date})}),l.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[l.jsx("button",{onClick:()=>x(_),className:"text-amber-600 hover:text-amber-900 mr-3",children:"Edit"}),l.jsx("button",{onClick:()=>b(_.id),className:"text-red-600 hover:text-red-900",children:"Delete"})]})]},_.id))})]})}),i&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-white rounded-xl shadow-xl p-6 w-full max-w-md",children:[l.jsx("h2",{className:"text-2xl font-bold mb-4",children:c?"Edit Donation Record":"Create New Donation Record"}),l.jsxs("form",{onSubmit:g,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Donor Name"}),l.jsx("input",{type:"text",required:!0,value:h.donor_name,onChange:_=>p({...h,donor_name:_.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Amount"}),l.jsx("input",{type:"number",required:!0,value:h.amount,onChange:_=>p({...h,amount:_.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Donation Purpose"}),l.jsx("input",{type:"text",required:!0,value:h.donation_purpose,onChange:_=>p({...h,donation_purpose:_.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date"}),l.jsx("input",{type:"date",required:!0,value:h.date,onChange:_=>p({...h,date:_.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),l.jsx("textarea",{rows:4,value:h.description,onChange:_=>p({...h,description:_.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500"})]}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{type:"submit",className:"flex-1 bg-amber-600 text-white py-2 rounded-lg hover:bg-amber-700",children:c?"Update":"Create"}),l.jsx("button",{type:"button",onClick:()=>{o(!1),w()},className:"flex-1 bg-gray-300 text-gray-700 py-2 rounded-lg hover:bg-gray-400",children:"Cancel"})]})]})]})})]})},YE=()=>{const[r,e]=R.useState([]),[t,s]=R.useState(!0),[i,o]=R.useState(!1),[c,u]=R.useState(null);R.useEffect(()=>{h()},[]);const h=async()=>{try{const x=await xd.getAll();e(x.data?.data||[])}catch(x){console.error("Error fetching contacts:",x)}finally{s(!1)}},p=async x=>{try{await xd.markAsRead(x),h()}catch(b){console.error("Error marking as read:",b),alert("Error updating contact")}},f=x=>{u(x),o(!0),x.is_read||p(x.id)},g=async x=>{if(confirm("Are you sure you want to delete this contact?"))try{await xd.delete(x),h()}catch(b){console.error("Error deleting contact:",b),alert("Error deleting contact")}};return t?l.jsx("div",{className:"flex items-center justify-center h-64",children:l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-600"})}):l.jsxs("div",{children:[l.jsx("div",{className:"flex justify-between items-center mb-6",children:l.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Contacts"})}),l.jsx("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Name"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Email"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Subject"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Date"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.map(x=>l.jsxs("tr",{className:`hover:bg-gray-50 ${x.is_read?"":"bg-blue-50"}`,children:[l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("div",{className:"text-sm font-medium text-gray-900",children:x.name})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("div",{className:"text-sm text-gray-500",children:x.email})}),l.jsx("td",{className:"px-6 py-4",children:l.jsx("div",{className:"text-sm text-gray-500",children:x.subject||"N/A"})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("div",{className:"text-sm text-gray-500",children:new Date(x.created_at).toLocaleDateString()})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${x.is_read?"bg-green-100 text-green-800":"bg-blue-100 text-blue-800"}`,children:x.is_read?"Read":"New"})}),l.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[l.jsx("button",{onClick:()=>f(x),className:"text-amber-600 hover:text-amber-900 mr-3",children:"View"}),l.jsx("button",{onClick:()=>g(x.id),className:"text-red-600 hover:text-red-900",children:"Delete"})]})]},x.id))})]})}),i&&c&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-white rounded-xl shadow-xl p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[l.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Contact Details"}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),l.jsx("p",{className:"text-gray-900",children:c.name})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),l.jsx("p",{className:"text-gray-900",children:c.email})]}),c.phone&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),l.jsx("p",{className:"text-gray-900",children:c.phone})]}),c.subject&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Subject"}),l.jsx("p",{className:"text-gray-900",children:c.subject})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Message"}),l.jsx("p",{className:"text-gray-900 whitespace-pre-wrap",children:c.message})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date"}),l.jsx("p",{className:"text-gray-900",children:new Date(c.created_at).toLocaleString()})]})]}),l.jsx("div",{className:"mt-6",children:l.jsx("button",{onClick:()=>{o(!1),u(null)},className:"w-full bg-gray-300 text-gray-700 py-2 rounded-lg hover:bg-gray-400",children:"Close"})})]})})]})},Yc={getAll:()=>oe.get("/admin/banners"),getById:r=>oe.get(`/admin/banners/${r}`),create:r=>{const e=new FormData;return e.append("image",r.image),r.order!==void 0&&r.order!==null&&r.order!==""&&e.append("order",parseInt(r.order)||0),r.is_active!==void 0&&e.append("is_active",r.is_active?"1":"0"),oe.post("/admin/banners",e)},update:(r,e)=>{const t=new FormData;return e.image&&t.append("image",e.image),e.order!==void 0&&e.order!==null&&e.order!==""&&t.append("order",parseInt(e.order)||0),e.is_active!==void 0&&t.append("is_active",e.is_active?"1":"0"),t.append("_method","PUT"),oe.post(`/admin/banners/${r}`,t)},delete:r=>oe.delete(`/admin/banners/${r}`)},Xc={getAll:()=>oe.get("/admin/banner-texts"),getById:r=>oe.get(`/admin/banner-texts/${r}`),create:r=>oe.post("/admin/banner-texts",r),update:(r,e)=>oe.put(`/admin/banner-texts/${r}`,e),delete:r=>oe.delete(`/admin/banner-texts/${r}`)},XE=()=>{const[r,e]=R.useState([]),[t,s]=R.useState(!0),[i,o]=R.useState(!1),[c,u]=R.useState(null),[h,p]=R.useState({image:null,order:0,is_active:!0});R.useEffect(()=>{f()},[]);const f=async()=>{try{const _=await Yc.getAll();e(_.data?.data||[])}catch(_){console.error("Error fetching banners:",_)}finally{s(!1)}},g=async _=>{_.preventDefault();try{c?await Yc.update(c.id,h):await Yc.create(h),o(!1),w(),f()}catch(S){console.error("Error saving banner:",S),alert("Error saving banner")}},x=_=>{u(_),p({image:null,order:_.order||0,is_active:_.is_active!==void 0?_.is_active:!0}),o(!0)},b=async _=>{if(confirm("Are you sure you want to delete this banner?"))try{await Yc.delete(_),f()}catch(S){console.error("Error deleting banner:",S),alert("Error deleting banner")}},w=()=>{p({image:null,order:0,is_active:!0}),u(null)};return t?l.jsx("div",{className:"flex items-center justify-center h-64",children:l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-600"})}):l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Banners"}),l.jsx("button",{onClick:()=>{w(),o(!0)},className:"bg-amber-600 text-white px-4 py-2 rounded-lg hover:bg-amber-700 transition",children:"+ Add New Banner"})]}),l.jsx("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Image"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Order"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.map(_=>l.jsxs("tr",{className:"hover:bg-gray-50",children:[l.jsx("td",{className:"px-6 py-4",children:_.image&&l.jsx("img",{src:_.image,alt:"Banner",className:"h-20 w-32 object-cover rounded"})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("div",{className:"text-sm text-gray-900",children:_.order})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${_.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:_.is_active?"Active":"Inactive"})}),l.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[l.jsx("button",{onClick:()=>x(_),className:"text-amber-600 hover:text-amber-900 mr-3",children:"Edit"}),l.jsx("button",{onClick:()=>b(_.id),className:"text-red-600 hover:text-red-900",children:"Delete"})]})]},_.id))})]})}),i&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-white rounded-xl shadow-xl p-6 w-full max-w-md",children:[l.jsx("h2",{className:"text-2xl font-bold mb-4",children:c?"Edit Banner":"Create New Banner"}),l.jsxs("form",{onSubmit:g,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:c?"New Image (optional)":"Image *"}),l.jsx("input",{type:"file",accept:"image/*",required:!c,onChange:_=>p({...h,image:_.target.files[0]}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500"}),c&&c.image&&l.jsx("img",{src:c.image,alt:"Current",className:"mt-2 h-32 w-full object-cover rounded"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Order"}),l.jsx("input",{type:"number",min:"0",value:h.order,onChange:_=>p({...h,order:parseInt(_.target.value)||0}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500"})]}),l.jsx("div",{children:l.jsxs("label",{className:"flex items-center",children:[l.jsx("input",{type:"checkbox",checked:h.is_active,onChange:_=>p({...h,is_active:_.target.checked}),className:"mr-2"}),l.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Active"})]})}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{type:"submit",className:"flex-1 bg-amber-600 text-white py-2 rounded-lg hover:bg-amber-700",children:c?"Update":"Create"}),l.jsx("button",{type:"button",onClick:()=>{o(!1),w()},className:"flex-1 bg-gray-300 text-gray-700 py-2 rounded-lg hover:bg-gray-400",children:"Cancel"})]})]})]})})]})},WE=()=>{const[r,e]=R.useState([]),[t,s]=R.useState(!0),[i,o]=R.useState(!1),[c,u]=R.useState(null),[h,p]=R.useState({text:"",is_active:!0});R.useEffect(()=>{f()},[]);const f=async()=>{try{const _=await Xc.getAll();e(_.data?.data||[])}catch(_){console.error("Error fetching banner texts:",_)}finally{s(!1)}},g=async _=>{_.preventDefault();try{c?await Xc.update(c.id,h):await Xc.create(h),o(!1),w(),f()}catch(S){console.error("Error saving banner text:",S),alert("Error saving banner text")}},x=_=>{u(_),p({text:_.text||"",is_active:_.is_active!==void 0?_.is_active:!0}),o(!0)},b=async _=>{if(confirm("Are you sure you want to delete this banner text?"))try{await Xc.delete(_),f()}catch(S){console.error("Error deleting banner text:",S),alert("Error deleting banner text")}},w=()=>{p({text:"",is_active:!0}),u(null)};return t?l.jsx("div",{className:"flex items-center justify-center h-64",children:l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-600"})}):l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Banner Texts"}),l.jsx("button",{onClick:()=>{w(),o(!0)},className:"bg-amber-600 text-white px-4 py-2 rounded-lg hover:bg-amber-700 transition",children:"+ Add New Banner Text"})]}),l.jsx("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Text"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.map(_=>l.jsxs("tr",{className:"hover:bg-gray-50",children:[l.jsx("td",{className:"px-6 py-4",children:l.jsx("div",{className:"text-sm text-gray-900 max-w-md truncate",children:_.text})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${_.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:_.is_active?"Active":"Inactive"})}),l.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[l.jsx("button",{onClick:()=>x(_),className:"text-amber-600 hover:text-amber-900 mr-3",children:"Edit"}),l.jsx("button",{onClick:()=>b(_.id),className:"text-red-600 hover:text-red-900",children:"Delete"})]})]},_.id))})]})}),i&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:l.jsxs("div",{className:"bg-white rounded-xl shadow-xl p-6 w-full max-w-md",children:[l.jsx("h2",{className:"text-2xl font-bold mb-4",children:c?"Edit Banner Text":"Create New Banner Text"}),l.jsxs("form",{onSubmit:g,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Text *"}),l.jsx("textarea",{required:!0,rows:4,value:h.text,onChange:_=>p({...h,text:_.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500",placeholder:"Enter banner text for marquee..."})]}),l.jsx("div",{children:l.jsxs("label",{className:"flex items-center",children:[l.jsx("input",{type:"checkbox",checked:h.is_active,onChange:_=>p({...h,is_active:_.target.checked}),className:"mr-2"}),l.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Active"})]})}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{type:"submit",className:"flex-1 bg-amber-600 text-white py-2 rounded-lg hover:bg-amber-700",children:c?"Update":"Create"}),l.jsx("button",{type:"button",onClick:()=>{o(!1),w()},className:"flex-1 bg-gray-300 text-gray-700 py-2 rounded-lg hover:bg-gray-400",children:"Cancel"})]})]})]})})]})},Go={getAll:()=>oe.get("/admin/academic-years"),getById:r=>oe.get(`/admin/academic-years/${r}`),create:r=>oe.post("/admin/academic-years",r),update:(r,e)=>oe.put(`/admin/academic-years/${r}`,e),delete:r=>oe.delete(`/admin/academic-years/${r}`)},KE=()=>{const[r,e]=R.useState([]),[t,s]=R.useState(!0),[i,o]=R.useState(!1),[c,u]=R.useState(!1),[h,p]=R.useState(null),[f,g]=R.useState(null),[x,b]=R.useState({name:"",code:"",start_date:"",end_date:"",is_active:!1,description:""});R.useEffect(()=>{w()},[]);const w=async()=>{try{const D=await Go.getAll();e(D.data?.data||[])}catch(D){console.error("Error fetching academic years:",D)}finally{s(!1)}},_=async D=>{D.preventDefault();try{f?await Go.update(f.id,x):await Go.create(x),o(!1),O(),w()}catch(I){console.error("Error saving academic year:",I),alert("Error saving academic year")}},S=D=>{p(D),u(!0)},A=D=>{g(D),b({name:D.name||"",code:D.code||"",start_date:D.start_date||"",end_date:D.end_date||"",is_active:D.is_active||!1,description:D.description||""}),o(!0)},L=async D=>{if(confirm("Are you sure you want to delete this academic year?"))try{await Go.delete(D),w()}catch(I){console.error("Error deleting academic year:",I),alert("Error deleting academic year")}},O=()=>{b({name:"",code:"",start_date:"",end_date:"",is_active:!1,description:""}),g(null)};return t?l.jsx("div",{className:"flex items-center justify-center h-64",children:l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-600"})}):l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Academic Years"}),l.jsx("button",{onClick:()=>{O(),o(!0)},className:"bg-amber-600 text-white px-4 py-2 rounded-lg hover:bg-amber-700 transition",children:"+ Add New Academic Year"})]}),l.jsx("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Name"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Code"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Start Date"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"End Date"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.map(D=>l.jsxs("tr",{className:"hover:bg-gray-50",children:[l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("div",{className:"text-sm font-medium text-gray-900",children:D.name})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("div",{className:"text-sm text-gray-500",children:D.code})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("div",{className:"text-sm text-gray-500",children:D.start_date?new Date(D.start_date).toLocaleDateString():"N/A"})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("div",{className:"text-sm text-gray-500",children:D.end_date?new Date(D.end_date).toLocaleDateString():"N/A"})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${D.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:D.is_active?"Active":"Inactive"})}),l.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[l.jsx("button",{onClick:()=>S(D),className:"text-blue-600 hover:text-blue-900 mr-3",children:"View"}),l.jsx("button",{onClick:()=>A(D),className:"text-amber-600 hover:text-amber-900 mr-3",children:"Edit"}),l.jsx("button",{onClick:()=>L(D.id),className:"text-red-600 hover:text-red-900",children:"Delete"})]})]},D.id))})]})}),i&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-white rounded-xl shadow-xl p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[l.jsx("h2",{className:"text-2xl font-bold mb-4",children:f?"Edit Academic Year":"Create New Academic Year"}),l.jsxs("form",{onSubmit:_,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),l.jsx("input",{type:"text",required:!0,value:x.name,onChange:D=>b({...x,name:D.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500",placeholder:"e.g., 2024-2025"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Code *"}),l.jsx("input",{type:"text",required:!0,value:x.code,onChange:D=>b({...x,code:D.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500",placeholder:"e.g., AY2024-25"})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date *"}),l.jsx("input",{type:"date",required:!0,value:x.start_date,onChange:D=>b({...x,start_date:D.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date *"}),l.jsx("input",{type:"date",required:!0,value:x.end_date,onChange:D=>b({...x,end_date:D.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500"})]})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"flex items-center",children:[l.jsx("input",{type:"checkbox",checked:x.is_active,onChange:D=>b({...x,is_active:D.target.checked}),className:"mr-2"}),l.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Set as Active Academic Year"})]}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"(Activating this will deactivate all other academic years)"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),l.jsx("textarea",{rows:4,value:x.description,onChange:D=>b({...x,description:D.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500",placeholder:"Optional description..."})]}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{type:"submit",className:"flex-1 bg-amber-600 text-white py-2 rounded-lg hover:bg-amber-700",children:f?"Update":"Create"}),l.jsx("button",{type:"button",onClick:()=>{o(!1),O()},className:"flex-1 bg-gray-300 text-gray-700 py-2 rounded-lg hover:bg-gray-400",children:"Cancel"})]})]})]})}),c&&h&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-white rounded-xl shadow-xl p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Academic Year Details"}),l.jsx("button",{onClick:()=>{u(!1),p(null)},className:"text-gray-500 hover:text-gray-700",children:l.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),l.jsx("div",{className:"text-lg font-semibold text-gray-900",children:h.name})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Code"}),l.jsx("div",{className:"text-gray-900",children:h.code})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),l.jsx("div",{className:"text-gray-900",children:h.start_date?new Date(h.start_date).toLocaleDateString():"N/A"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"End Date"}),l.jsx("div",{className:"text-gray-900",children:h.end_date?new Date(h.end_date).toLocaleDateString():"N/A"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),l.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${h.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:h.is_active?"Active":"Inactive"})]}),h.description&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),l.jsx("div",{className:"text-gray-900",children:h.description})]}),l.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[l.jsx("button",{onClick:()=>{u(!1),A(h)},className:"flex-1 bg-amber-600 text-white py-2 rounded-lg hover:bg-amber-700",children:"Edit Academic Year"}),l.jsx("button",{onClick:()=>{u(!1),p(null)},className:"flex-1 bg-gray-300 text-gray-700 py-2 rounded-lg hover:bg-gray-400",children:"Close"})]})]})]})})]})},vr={getAll:r=>oe.get("/admin/subjects",{params:r}),getById:r=>oe.get(`/admin/subjects/${r}`),create:r=>oe.post("/admin/subjects",r),update:(r,e)=>oe.put(`/admin/subjects/${r}`,e),delete:r=>oe.delete(`/admin/subjects/${r}`)},QE=()=>{const[r,e]=R.useState([]),[t,s]=R.useState(!0),[i,o]=R.useState(!1),[c,u]=R.useState(!1),[h,p]=R.useState(null),[f,g]=R.useState(null),[x,b]=R.useState({name:"",code:"",description:"",credit_hours:1,is_active:!0});R.useEffect(()=>{w()},[]);const w=async()=>{try{const D=await vr.getAll();e(D.data?.data||[])}catch(D){console.error("Error fetching subjects:",D)}finally{s(!1)}},_=async D=>{D.preventDefault();try{f?await vr.update(f.id,x):await vr.create(x),o(!1),O(),w()}catch(I){console.error("Error saving subject:",I),alert("Error saving subject")}},S=D=>{p(D),u(!0)},A=D=>{g(D),b({name:D.name||"",code:D.code||"",description:D.description||"",credit_hours:D.credit_hours||1,is_active:D.is_active!==void 0?D.is_active:!0}),o(!0)},L=async D=>{if(confirm("Are you sure you want to delete this subject?"))try{await vr.delete(D),w()}catch(I){console.error("Error deleting subject:",I),alert("Error deleting subject")}},O=()=>{b({name:"",code:"",description:"",credit_hours:1,is_active:!0}),g(null)};return t?l.jsx("div",{className:"flex items-center justify-center h-64",children:l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-600"})}):l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Subjects"}),l.jsx("button",{onClick:()=>{O(),o(!0)},className:"bg-amber-600 text-white px-4 py-2 rounded-lg hover:bg-amber-700 transition",children:"+ Add New Subject"})]}),l.jsx("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Name"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Code"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Credit Hours"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.map(D=>l.jsxs("tr",{className:"hover:bg-gray-50",children:[l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("div",{className:"text-sm font-medium text-gray-900",children:D.name})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("div",{className:"text-sm text-gray-500",children:D.code})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("div",{className:"text-sm text-gray-500",children:D.credit_hours||1})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${D.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:D.is_active?"Active":"Inactive"})}),l.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[l.jsx("button",{onClick:()=>S(D),className:"text-blue-600 hover:text-blue-900 mr-3",children:"View"}),l.jsx("button",{onClick:()=>A(D),className:"text-amber-600 hover:text-amber-900 mr-3",children:"Edit"}),l.jsx("button",{onClick:()=>L(D.id),className:"text-red-600 hover:text-red-900",children:"Delete"})]})]},D.id))})]})}),i&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-white rounded-xl shadow-xl p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[l.jsx("h2",{className:"text-2xl font-bold mb-4",children:f?"Edit Subject":"Create New Subject"}),l.jsxs("form",{onSubmit:_,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),l.jsx("input",{type:"text",required:!0,value:x.name,onChange:D=>b({...x,name:D.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500",placeholder:"e.g., Mathematics"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Code *"}),l.jsx("input",{type:"text",required:!0,value:x.code,onChange:D=>b({...x,code:D.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500",placeholder:"e.g., MATH101"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Credit Hours"}),l.jsx("input",{type:"number",min:"1",value:x.credit_hours,onChange:D=>b({...x,credit_hours:parseInt(D.target.value)||1}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500"})]}),l.jsx("div",{children:l.jsxs("label",{className:"flex items-center",children:[l.jsx("input",{type:"checkbox",checked:x.is_active,onChange:D=>b({...x,is_active:D.target.checked}),className:"mr-2"}),l.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Active"})]})}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),l.jsx("textarea",{rows:4,value:x.description,onChange:D=>b({...x,description:D.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500",placeholder:"Optional description..."})]}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{type:"submit",className:"flex-1 bg-amber-600 text-white py-2 rounded-lg hover:bg-amber-700",children:f?"Update":"Create"}),l.jsx("button",{type:"button",onClick:()=>{o(!1),O()},className:"flex-1 bg-gray-300 text-gray-700 py-2 rounded-lg hover:bg-gray-400",children:"Cancel"})]})]})]})}),c&&h&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-white rounded-xl shadow-xl p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Subject Details"}),l.jsx("button",{onClick:()=>{u(!1),p(null)},className:"text-gray-500 hover:text-gray-700",children:l.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),l.jsx("div",{className:"text-lg font-semibold text-gray-900",children:h.name})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Code"}),l.jsx("div",{className:"text-gray-900",children:h.code})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Credit Hours"}),l.jsx("div",{className:"text-gray-900",children:h.credit_hours||1})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),l.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${h.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:h.is_active?"Active":"Inactive"})]}),h.description&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),l.jsx("div",{className:"text-gray-900",children:h.description})]}),l.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[l.jsx("button",{onClick:()=>{u(!1),A(h)},className:"flex-1 bg-amber-600 text-white py-2 rounded-lg hover:bg-amber-700",children:"Edit Subject"}),l.jsx("button",{onClick:()=>{u(!1),p(null)},className:"flex-1 bg-gray-300 text-gray-700 py-2 rounded-lg hover:bg-gray-400",children:"Close"})]})]})]})})]})},wr={getAll:r=>oe.get("/admin/classes",{params:r}),getById:r=>oe.get(`/admin/classes/${r}`),create:r=>oe.post("/admin/classes",r),update:(r,e)=>oe.put(`/admin/classes/${r}`,e),delete:r=>oe.delete(`/admin/classes/${r}`)},Fm={getAll:()=>oe.get("/admin/users"),getTeachers:()=>oe.get("/admin/users?role=teacher")},ZE=()=>{const[r,e]=R.useState([]),[t,s]=R.useState([]),[i,o]=R.useState([]),[c,u]=R.useState(!0),[h,p]=R.useState(!1),[f,g]=R.useState(!1),[x,b]=R.useState(null),[w,_]=R.useState(null),[S,A]=R.useState({name:"",code:"",grade_level:1,section:"",capacity:30,is_active:!0,academic_year_id:"",class_teacher_id:""});R.useEffect(()=>{L()},[]);const L=async()=>{try{const[k,N,M]=await Promise.all([wr.getAll(),Go.getAll(),Fm.getAll()]);e(k.data?.data||[]),s(N.data?.data||[]),o(M.data?.data||[])}catch(k){console.error("Error fetching data:",k)}finally{u(!1)}},O=async k=>{k.preventDefault();try{w?await wr.update(w.id,S):await wr.create(S),p(!1),P(),L()}catch(N){console.error("Error saving class:",N),alert("Error saving class")}},D=k=>{b(k),g(!0)},I=k=>{_(k),A({name:k.name||"",code:k.code||"",grade_level:k.grade_level||1,section:k.section||"",capacity:k.capacity||30,is_active:k.is_active!==void 0?k.is_active:!0,academic_year_id:k.academic_year_id||"",class_teacher_id:k.class_teacher_id||""}),p(!0)},C=async k=>{if(confirm("Are you sure you want to delete this class?"))try{await wr.delete(k),L()}catch(N){console.error("Error deleting class:",N),alert("Error deleting class")}},P=()=>{A({name:"",code:"",grade_level:1,section:"",capacity:30,is_active:!0,academic_year_id:"",class_teacher_id:""}),_(null)};return c?l.jsx("div",{className:"flex items-center justify-center h-64",children:l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-600"})}):l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Classes"}),l.jsx("button",{onClick:()=>{P(),p(!0)},className:"bg-amber-600 text-white px-4 py-2 rounded-lg hover:bg-amber-700 transition",children:"+ Add New Class"})]}),l.jsx("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Name"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Code"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Grade Level"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Section"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Academic Year"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.map(k=>l.jsxs("tr",{className:"hover:bg-gray-50",children:[l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("div",{className:"text-sm font-medium text-gray-900",children:k.name})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("div",{className:"text-sm text-gray-500",children:k.code})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("div",{className:"text-sm text-gray-500",children:k.grade_level})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("div",{className:"text-sm text-gray-500",children:k.section||"N/A"})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("div",{className:"text-sm text-gray-500",children:k.academic_year?.name||"N/A"})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${k.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:k.is_active?"Active":"Inactive"})}),l.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[l.jsx("button",{onClick:()=>D(k),className:"text-blue-600 hover:text-blue-900 mr-3",children:"View"}),l.jsx("button",{onClick:()=>I(k),className:"text-amber-600 hover:text-amber-900 mr-3",children:"Edit"}),l.jsx("button",{onClick:()=>C(k.id),className:"text-red-600 hover:text-red-900",children:"Delete"})]})]},k.id))})]})}),h&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-white rounded-xl shadow-xl p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[l.jsx("h2",{className:"text-2xl font-bold mb-4",children:w?"Edit Class":"Create New Class"}),l.jsxs("form",{onSubmit:O,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),l.jsx("input",{type:"text",required:!0,value:S.name,onChange:k=>A({...S,name:k.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500",placeholder:"e.g., Grade 1-A"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Code *"}),l.jsx("input",{type:"text",required:!0,value:S.code,onChange:k=>A({...S,code:k.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500",placeholder:"e.g., G1A"})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Grade Level *"}),l.jsx("input",{type:"number",min:"1",required:!0,value:S.grade_level,onChange:k=>A({...S,grade_level:parseInt(k.target.value)||1}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Section"}),l.jsx("input",{type:"text",value:S.section,onChange:k=>A({...S,section:k.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500",placeholder:"e.g., A, B, C"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Capacity"}),l.jsx("input",{type:"number",min:"1",value:S.capacity,onChange:k=>A({...S,capacity:parseInt(k.target.value)||30}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Academic Year *"}),l.jsxs("select",{required:!0,value:S.academic_year_id,onChange:k=>A({...S,academic_year_id:k.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500",children:[l.jsx("option",{value:"",children:"Select Academic Year"}),t.map(k=>l.jsxs("option",{value:k.id,children:[k.name," (",k.code,")"]},k.id))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Class Teacher"}),l.jsxs("select",{value:S.class_teacher_id,onChange:k=>A({...S,class_teacher_id:k.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500",children:[l.jsx("option",{value:"",children:"Select Teacher (Admin)"}),i.map(k=>l.jsxs("option",{value:k.id,children:[k.name," (",k.email,")"]},k.id))]})]}),l.jsx("div",{children:l.jsxs("label",{className:"flex items-center",children:[l.jsx("input",{type:"checkbox",checked:S.is_active,onChange:k=>A({...S,is_active:k.target.checked}),className:"mr-2"}),l.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Active"})]})}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{type:"submit",className:"flex-1 bg-amber-600 text-white py-2 rounded-lg hover:bg-amber-700",children:w?"Update":"Create"}),l.jsx("button",{type:"button",onClick:()=>{p(!1),P()},className:"flex-1 bg-gray-300 text-gray-700 py-2 rounded-lg hover:bg-gray-400",children:"Cancel"})]})]})]})}),f&&x&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-white rounded-xl shadow-xl p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Class Details"}),l.jsx("button",{onClick:()=>{g(!1),b(null)},className:"text-gray-500 hover:text-gray-700",children:l.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),l.jsx("div",{className:"text-lg font-semibold text-gray-900",children:x.name})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Code"}),l.jsx("div",{className:"text-gray-900",children:x.code})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Grade Level"}),l.jsx("div",{className:"text-gray-900",children:x.grade_level})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Section"}),l.jsx("div",{className:"text-gray-900",children:x.section||"N/A"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Capacity"}),l.jsx("div",{className:"text-gray-900",children:x.capacity})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Academic Year"}),l.jsxs("div",{className:"text-gray-900",children:[x.academic_year?.name||"N/A"," (",x.academic_year?.code||"N/A",")"]})]}),x.class_teacher&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Class Teacher"}),l.jsxs("div",{className:"text-gray-900",children:[x.class_teacher.name," (",x.class_teacher.email,")"]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),l.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${x.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:x.is_active?"Active":"Inactive"})]}),l.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[l.jsx("button",{onClick:()=>{g(!1),I(x)},className:"flex-1 bg-amber-600 text-white py-2 rounded-lg hover:bg-amber-700",children:"Edit Class"}),l.jsx("button",{onClick:()=>{g(!1),b(null)},className:"flex-1 bg-gray-300 text-gray-700 py-2 rounded-lg hover:bg-gray-400",children:"Close"})]})]})]})})]})},Wc={getAll:r=>oe.get("/admin/lessons",{params:r}),getById:r=>oe.get(`/admin/lessons/${r}`),create:r=>oe.post("/admin/lessons",r),update:(r,e)=>e instanceof FormData?(e.append("_method","PUT"),oe.post(`/admin/lessons/${r}`,e)):oe.put(`/admin/lessons/${r}`,e),delete:r=>oe.delete(`/admin/lessons/${r}`)},JE=()=>{const[r,e]=R.useState([]),[t,s]=R.useState([]),[i,o]=R.useState([]),[c,u]=R.useState([]),[h,p]=R.useState(!0),[f,g]=R.useState(!1),[x,b]=R.useState(!1),[w,_]=R.useState(!1),[S,A]=R.useState(null),[L,O]=R.useState(null),[D,I]=R.useState(null),[C,P]=R.useState(1),[k,N]=R.useState(null),[M,H]=R.useState({title:"",description:"",content:"",class_id:"",subject_id:"",teacher_id:"",lesson_date:"",duration_minutes:60,status:"draft",attachments:[]});R.useEffect(()=>{F(C)},[C]);const F=async(B=1)=>{try{const[$,K,Q,Z]=await Promise.all([Wc.getAll({page:B}),wr.getAll({all:!0}),vr.getAll({all:!0}),Fm.getAll()]);e($.data?.data||$.data||[]),N($.data?.pagination||null),s(K.data?.data||K.data||[]),o(Q.data?.data||Q.data||[]),u(Z.data?.data||[])}catch($){console.error("Error fetching data:",$)}finally{p(!1)}},V=async B=>{B.preventDefault();try{const $=new FormData;$.append("title",M.title.trim()),$.append("description",M.description||""),$.append("content",M.content||""),$.append("class_id",String(M.class_id||"")),$.append("subject_id",String(M.subject_id||"")),$.append("teacher_id",String(M.teacher_id||"")),$.append("lesson_date",M.lesson_date||""),$.append("duration_minutes",M.duration_minutes||60),$.append("status",M.status),M.attachments.forEach((K,Q)=>{$.append(`attachments[${Q}]`,K)}),L?(console.log("Updating lesson:",L.id),await Wc.update(L.id,$),alert("Lesson updated successfully!")):(await Wc.create($),alert("Lesson created successfully!")),g(!1),ee(),F(C)}catch($){if(console.error("Error saving lesson:",$),$.response?.data?.message)alert(`Error saving lesson: ${$.response.data.message}`);else if($.response?.data?.errors){const K=$.response.data.errors;let Q=`Validation failed:
`;for(const Z in K)Q+=`- ${K[Z].join(", ")}
`;alert(Q)}else alert("Error saving lesson: "+($.message||"Unknown error"))}},q=B=>{A(B),b(!0)},z=B=>{I(B),_(!0)},E=B=>{O(B);const $=B.content||"",K=B.description||"";H({title:B.title||"",description:K,content:$,class_id:B.class_id?String(B.class_id):"",subject_id:B.subject_id?String(B.subject_id):"",teacher_id:B.teacher_id?String(B.teacher_id):"",lesson_date:B.lesson_date?B.lesson_date.split("T")[0]:"",duration_minutes:B.duration_minutes||60,status:B.status||"draft",attachments:[]}),g(!0)},j=async B=>{if(confirm("Are you sure you want to delete this lesson?"))try{await Wc.delete(B),F(C)}catch($){console.error("Error deleting lesson:",$),alert("Error deleting lesson")}},G=B=>{const $=Array.from(B.target.files);H({...M,attachments:[...M.attachments,...$]})},Y=B=>{const $=M.attachments.filter((K,Q)=>Q!==B);H({...M,attachments:$})},ee=()=>{H({title:"",description:"",content:"",class_id:"",subject_id:"",teacher_id:"",lesson_date:"",duration_minutes:60,status:"draft",attachments:[]}),O(null)};return h?l.jsx("div",{className:"flex items-center justify-center h-64",children:l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-600"})}):l.jsxs("div",{children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Lessons"}),l.jsx("button",{onClick:()=>{ee(),g(!0)},className:"bg-amber-600 text-white px-4 py-2 rounded-lg hover:bg-amber-700 transition",children:"+ Add New Lesson"})]}),l.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:[l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Title"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Class"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Subject"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Teacher"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Date"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Views"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.map(B=>l.jsxs("tr",{className:"hover:bg-gray-50",children:[l.jsx("td",{className:"px-6 py-4",children:l.jsx("div",{className:"text-sm font-medium text-gray-900",children:B.title})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("div",{className:"text-sm text-gray-500",children:B.class?.name||"N/A"})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("div",{className:"text-sm text-gray-500",children:B.subject?.name||"N/A"})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("div",{className:"text-sm text-gray-500",children:B.teacher?.name||"N/A"})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("div",{className:"text-sm text-gray-500",children:B.lesson_date?new Date(B.lesson_date).toLocaleDateString():"N/A"})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${B.status==="published"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:B.status})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("button",{onClick:()=>z(B),className:"text-blue-600 hover:text-blue-900 font-semibold cursor-pointer",title:"Click to view IP addresses",children:B.views_count||0})}),l.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[l.jsx("button",{onClick:()=>q(B),className:"text-blue-600 hover:text-blue-900 mr-3",children:"View"}),l.jsx("button",{onClick:()=>E(B),className:"text-amber-600 hover:text-amber-900 mr-3",children:"Edit"}),l.jsx("button",{onClick:()=>j(B.id),className:"text-red-600 hover:text-red-900",children:"Delete"})]})]},B.id))})]}),k&&l.jsxs("div",{className:"flex items-center justify-between px-6 py-3 border-t border-gray-200",children:[l.jsx("button",{disabled:C<=1,onClick:()=>P(B=>Math.max(1,B-1)),className:"px-4 py-2 rounded-lg bg-gray-100 text-gray-700 disabled:opacity-50 hover:bg-gray-200 transition",children:"Previous"}),l.jsxs("span",{className:"text-sm text-gray-600",children:["Page ",k.current_page," of ",k.last_page]}),l.jsx("button",{disabled:!k.has_more_pages,onClick:()=>P(B=>B+1),className:"px-4 py-2 rounded-lg bg-amber-600 text-white disabled:opacity-50 hover:bg-amber-700 transition",children:"Next"})]})]}),f&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-5xl max-h-[95vh] overflow-hidden flex flex-col",children:[l.jsx("div",{className:"px-6 py-4 border-b border-gray-200 bg-gradient-to-r from-amber-50 to-amber-100",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:L?" Edit Lesson":" Create New Lesson"}),l.jsx("p",{className:"text-sm text-gray-600 mt-1",children:L?"Update lesson information":"Fill in the details to create a new lesson"})]}),l.jsx("button",{onClick:()=>{g(!1),ee()},className:"text-gray-500 hover:text-gray-700 transition-colors",children:l.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),l.jsxs("form",{onSubmit:V,className:"flex-1 overflow-y-auto p-6 space-y-6",children:[l.jsxs("div",{className:"bg-gray-50 rounded-lg p-5 border border-gray-200",children:[l.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[l.jsx("span",{className:"mr-2",children:""})," Basic Information"]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Lesson Title ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"text",required:!0,value:M.title,onChange:B=>H({...M,title:B.target.value}),placeholder:"Enter lesson title...",className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500 transition"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),l.jsx("textarea",{rows:3,value:M.description,onChange:B=>H({...M,description:B.target.value}),placeholder:"Brief description of the lesson...",className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500 transition resize-none"})]})]})]}),l.jsxs("div",{className:"bg-blue-50 rounded-lg p-5 border border-blue-200",children:[l.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[l.jsx("span",{className:"mr-2",children:""})," Class & Subject Details"]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Class ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsxs("select",{required:!0,value:M.class_id,onChange:B=>H({...M,class_id:B.target.value}),className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500 transition bg-white",children:[l.jsx("option",{value:"",children:"Select Class"}),t.map(B=>l.jsx("option",{value:B.id,children:B.name},B.id))]})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Subject ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsxs("select",{required:!0,value:M.subject_id,onChange:B=>H({...M,subject_id:B.target.value}),className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500 transition bg-white",children:[l.jsx("option",{value:"",children:"Select Subject"}),i.map(B=>l.jsx("option",{value:B.id,children:B.name},B.id))]})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Teacher (Admin) ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsxs("select",{required:!0,value:M.teacher_id,onChange:B=>H({...M,teacher_id:B.target.value}),className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500 transition bg-white",children:[l.jsx("option",{value:"",children:"Select Teacher"}),c.map(B=>l.jsxs("option",{value:B.id,children:[B.name," (",B.email,")"]},B.id))]})]})]})]}),l.jsxs("div",{className:"bg-green-50 rounded-lg p-5 border border-green-200",children:[l.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[l.jsx("span",{className:"mr-2",children:""})," Schedule & Duration"]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Lesson Date"}),l.jsx("input",{type:"date",value:M.lesson_date,onChange:B=>H({...M,lesson_date:B.target.value}),className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500 transition bg-white"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Duration (minutes)"}),l.jsx("input",{type:"number",min:"1",value:M.duration_minutes,onChange:B=>H({...M,duration_minutes:parseInt(B.target.value)||60}),className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500 transition bg-white"})]})]})]}),l.jsxs("div",{className:"bg-purple-50 rounded-lg p-5 border border-purple-200",children:[l.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[l.jsx("span",{className:"mr-2",children:""})," Lesson Content"]}),l.jsx("div",{className:"border-2 border-gray-300 rounded-lg overflow-hidden bg-white",children:l.jsx(Om,{value:M.content,onChange:B=>H({...M,content:B})})})]}),l.jsxs("div",{className:"bg-orange-50 rounded-lg p-5 border border-orange-200",children:[l.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[l.jsx("span",{className:"mr-2",children:""})," Attachments"]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Upload Files"}),l.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4 hover:border-amber-500 transition",children:l.jsx("input",{type:"file",multiple:!0,onChange:G,className:"w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-amber-50 file:text-amber-700 hover:file:bg-amber-100 cursor-pointer"})}),M.attachments.length>0&&l.jsxs("div",{className:"mt-4 space-y-2",children:[l.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Selected Files:"}),M.attachments.map((B,$)=>l.jsxs("div",{className:"flex items-center justify-between bg-white p-3 rounded-lg border border-gray-200 shadow-sm",children:[l.jsxs("div",{className:"flex items-center space-x-2",children:[l.jsx("span",{className:"text-amber-600",children:""}),l.jsx("span",{className:"text-sm text-gray-700 font-medium",children:B.name}),l.jsxs("span",{className:"text-xs text-gray-500",children:["(",(B.size/1024).toFixed(2)," KB)"]})]}),l.jsx("button",{type:"button",onClick:()=>Y($),className:"text-red-600 hover:text-red-800 hover:bg-red-50 px-3 py-1 rounded transition",children:" Remove"})]},$))]})]})]}),l.jsxs("div",{className:"bg-gray-50 rounded-lg p-5 border border-gray-200",children:[l.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[l.jsx("span",{className:"mr-2",children:""})," Status"]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Publication Status ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsxs("select",{required:!0,value:M.status,onChange:B=>H({...M,status:B.target.value}),className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-amber-500 transition bg-white",children:[l.jsx("option",{value:"draft",children:" Draft (Not visible to public)"}),l.jsx("option",{value:"published",children:" Published (Visible to public)"})]})]})]}),l.jsxs("div",{className:"flex gap-3 pt-4 border-t border-gray-200",children:[l.jsx("button",{type:"submit",className:"flex-1 bg-gradient-to-r from-amber-600 to-amber-700 text-white py-3 rounded-lg hover:from-amber-700 hover:to-amber-800 transition shadow-lg font-semibold",children:L?" Update Lesson":" Create Lesson"}),l.jsx("button",{type:"button",onClick:()=>{g(!1),ee()},className:"flex-1 bg-gray-200 text-gray-700 py-3 rounded-lg hover:bg-gray-300 transition font-semibold",children:" Cancel"})]})]})]})}),x&&S&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-white rounded-xl shadow-xl p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Lesson Details"}),l.jsx("button",{onClick:()=>{b(!1),A(null)},className:"text-gray-500 hover:text-gray-700",children:l.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title"}),l.jsx("div",{className:"text-lg font-semibold text-gray-900",children:S.title})]}),S.description&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),l.jsx("div",{className:"text-gray-900",children:S.description})]}),l.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Class"}),l.jsx("div",{className:"text-gray-900",children:S.class?.name||"N/A"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Subject"}),l.jsx("div",{className:"text-gray-900",children:S.subject?.name||"N/A"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Teacher"}),l.jsx("div",{className:"text-gray-900",children:S.teacher?.name||"N/A"})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Lesson Date"}),l.jsx("div",{className:"text-gray-900",children:S.lesson_date?new Date(S.lesson_date).toLocaleDateString():"N/A"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Duration"}),l.jsxs("div",{className:"text-gray-900",children:[S.duration_minutes||60," minutes"]})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),l.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${S.status==="published"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:S.status})]}),S.content&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Content"}),l.jsx("div",{className:"prose max-w-none p-4 bg-gray-50 rounded-lg border border-gray-200",dangerouslySetInnerHTML:{__html:S.content}})]}),S.attachments&&S.attachments.length>0&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Attachments"}),l.jsx("div",{className:"space-y-2",children:S.attachments.map((B,$)=>l.jsxs("a",{href:B,target:"_blank",rel:"noopener noreferrer",className:"block text-blue-600 hover:underline",children:["Attachment ",$+1]},$))})]}),l.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[l.jsx("button",{onClick:()=>{b(!1),E(S)},className:"flex-1 bg-amber-600 text-white py-2 rounded-lg hover:bg-amber-700",children:"Edit Lesson"}),l.jsx("button",{onClick:()=>{b(!1),A(null)},className:"flex-1 bg-gray-300 text-gray-700 py-2 rounded-lg hover:bg-gray-400",children:"Close"})]})]})]})}),l.jsx(fl,{isOpen:w,onClose:()=>{_(!1),I(null)},viewableType:D?"App\\Models\\Lesson":null,viewableId:D?.id||null})]})},ej=()=>{const{user:r,setUser:e}=hl(),[t,s]=R.useState("profile"),[i,o]=R.useState(!1),[c,u]=R.useState({type:"",text:""}),[h,p]=R.useState({name:"",email:"",phone:""}),[f,g]=R.useState({current_password:"",new_password:"",new_password_confirmation:""});R.useEffect(()=>{r&&p({name:r.name||"",email:r.email||"",phone:r.phone||""})},[r]);const x=async w=>{w.preventDefault(),o(!0),u({type:"",text:""});try{const _=await xr.updateProfile(h);e(_.user),u({type:"success",text:"Profile updated successfully!"}),localStorage.setItem("admin_user",JSON.stringify(_.user))}catch(_){u({type:"error",text:_.response?.data?.message||"Failed to update profile. Please try again."})}finally{o(!1)}},b=async w=>{if(w.preventDefault(),o(!0),u({type:"",text:""}),f.new_password!==f.new_password_confirmation){u({type:"error",text:"New passwords do not match."}),o(!1);return}try{await xr.changePassword({current_password:f.current_password,new_password:f.new_password,new_password_confirmation:f.new_password_confirmation}),u({type:"success",text:"Password changed successfully!"}),g({current_password:"",new_password:"",new_password_confirmation:""})}catch(_){u({type:"error",text:_.response?.data?.message||"Failed to change password. Please check your current password."})}finally{o(!1)}};return l.jsx("div",{className:"max-w-4xl mx-auto",children:l.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-6",children:"Admin Profile"}),l.jsx("div",{className:"border-b border-gray-200 mb-6",children:l.jsxs("nav",{className:"flex space-x-8",children:[l.jsx("button",{onClick:()=>{s("profile"),u({type:"",text:""})},className:`py-4 px-1 border-b-2 font-medium text-sm ${t==="profile"?"border-amber-600 text-amber-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Profile Information"}),l.jsx("button",{onClick:()=>{s("password"),u({type:"",text:""})},className:`py-4 px-1 border-b-2 font-medium text-sm ${t==="password"?"border-amber-600 text-amber-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Change Password"})]})}),c.text&&l.jsx("div",{className:`mb-6 p-4 rounded-lg ${c.type==="success"?"bg-green-100 border border-green-400 text-green-700":"bg-red-100 border border-red-400 text-red-700"}`,children:c.text}),t==="profile"&&l.jsxs("form",{onSubmit:x,className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"user_name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Username"}),l.jsx("input",{type:"text",id:"user_name",value:r?.user_name||"",disabled:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg bg-gray-100 text-gray-500 cursor-not-allowed"}),l.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Username cannot be changed"})]}),l.jsxs("div",{children:[l.jsxs("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-2",children:["Name ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"text",id:"name",required:!0,value:h.name,onChange:w=>p({...h,name:w.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent outline-none transition",placeholder:"Enter your name"})]}),l.jsxs("div",{children:[l.jsxs("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:["Email ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"email",id:"email",required:!0,value:h.email,onChange:w=>p({...h,email:w.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent outline-none transition",placeholder:"Enter your email"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone"}),l.jsx("input",{type:"text",id:"phone",value:h.phone||"",onChange:w=>p({...h,phone:w.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent outline-none transition",placeholder:"Enter your phone number"})]}),l.jsx("div",{className:"flex justify-end",children:l.jsx("button",{type:"submit",disabled:i,className:"px-6 py-2 bg-amber-600 text-white rounded-lg font-semibold hover:bg-amber-700 focus:outline-none focus:ring-2 focus:ring-amber-500 focus:ring-offset-2 transition disabled:opacity-50 disabled:cursor-not-allowed",children:i?"Updating...":"Update Profile"})})]}),t==="password"&&l.jsxs("form",{onSubmit:b,className:"space-y-6",children:[l.jsxs("div",{children:[l.jsxs("label",{htmlFor:"current_password",className:"block text-sm font-medium text-gray-700 mb-2",children:["Current Password ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"password",id:"current_password",required:!0,value:f.current_password,onChange:w=>g({...f,current_password:w.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent outline-none transition",placeholder:"Enter current password"})]}),l.jsxs("div",{children:[l.jsxs("label",{htmlFor:"new_password",className:"block text-sm font-medium text-gray-700 mb-2",children:["New Password ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"password",id:"new_password",required:!0,minLength:8,value:f.new_password,onChange:w=>g({...f,new_password:w.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent outline-none transition",placeholder:"Enter new password (min. 8 characters)"})]}),l.jsxs("div",{children:[l.jsxs("label",{htmlFor:"new_password_confirmation",className:"block text-sm font-medium text-gray-700 mb-2",children:["Confirm New Password ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"password",id:"new_password_confirmation",required:!0,minLength:8,value:f.new_password_confirmation,onChange:w=>g({...f,new_password_confirmation:w.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent outline-none transition",placeholder:"Confirm new password"})]}),l.jsx("div",{className:"flex justify-end",children:l.jsx("button",{type:"submit",disabled:i,className:"px-6 py-2 bg-amber-600 text-white rounded-lg font-semibold hover:bg-amber-700 focus:outline-none focus:ring-2 focus:ring-amber-500 focus:ring-offset-2 transition disabled:opacity-50 disabled:cursor-not-allowed",children:i?"Changing...":"Change Password"})})]})]})})};function $v(r){var e,t,s="";if(typeof r=="string"||typeof r=="number")s+=r;else if(typeof r=="object")if(Array.isArray(r)){var i=r.length;for(e=0;e<i;e++)r[e]&&(t=$v(r[e]))&&(s&&(s+=" "),s+=t)}else for(t in r)r[t]&&(s&&(s+=" "),s+=t);return s}function Yd(){for(var r,e,t=0,s="",i=arguments.length;t<i;t++)(r=arguments[t])&&(e=$v(r))&&(s&&(s+=" "),s+=e);return s}function tj(r){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t),t.styleSheet?t.styleSheet.cssText=r:t.appendChild(document.createTextNode(r))}tj(`:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`);var Um=r=>typeof r=="number"&&!isNaN(r),Jo=r=>typeof r=="string",Yv=r=>typeof r=="function",sj=r=>Jo(r)||Um(r),nj=r=>R.isValidElement(r)||Jo(r)||Yv(r)||Um(r),ij=1,Xv=()=>`${ij++}`,zn=new Map,am=[],Gy=new Set,Wv=()=>zn.size>0,aj=(r,{containerId:e})=>{var t;return(t=zn.get(e||1))==null?void 0:t.toasts.get(r)};function rj(r,e){var t;if(e)return!!((t=zn.get(e))!=null&&t.isToastActive(r));let s=!1;return zn.forEach(i=>{i.isToastActive(r)&&(s=!0)}),s}function oj(r){if(!Wv()){am=am.filter(e=>r!=null&&e.options.toastId!==r);return}if(r==null||sj(r))zn.forEach(e=>{e.removeToast(r)});else if(r&&("containerId"in r||"id"in r)){let e=zn.get(r.containerId);e?e.removeToast(r.id):zn.forEach(t=>{t.removeToast(r.id)})}}var lj=(r={})=>{zn.forEach(e=>{e.props.limit&&(!r.containerId||e.id===r.containerId)&&e.clearQueue()})};function cj(r,e){nj(r)&&(Wv()||am.push({content:r,options:e}),zn.forEach(t=>{t.buildToast(r,e)}))}function Kv(r,e){zn.forEach(t=>{(e==null||!(e!=null&&e.containerId)||e?.containerId===t.id)&&t.toggle(r,e?.id)})}function dj(r){return Gy.add(r),()=>{Gy.delete(r)}}function uj(r){return r&&(Jo(r.toastId)||Um(r.toastId))?r.toastId:Xv()}function ml(r,e){return cj(r,e),e.toastId}function Xd(r,e){return{...e,type:e&&e.type||r,toastId:uj(e)}}function Wd(r){return(e,t)=>ml(e,Xd(r,t))}function Ye(r,e){return ml(r,Xd("default",e))}Ye.loading=(r,e)=>ml(r,Xd("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...e}));function hj(r,{pending:e,error:t,success:s},i){let o;e&&(o=Jo(e)?Ye.loading(e,i):Ye.loading(e.render,{...i,...e}));let c={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},u=(p,f,g)=>{if(f==null){Ye.dismiss(o);return}let x={type:p,...c,...i,data:g},b=Jo(f)?{render:f}:f;return o?Ye.update(o,{...x,...b}):Ye(b.render,{...x,...b}),g},h=Yv(r)?r():r;return h.then(p=>u("success",s,p)).catch(p=>u("error",t,p)),h}Ye.promise=hj;Ye.success=Wd("success");Ye.info=Wd("info");Ye.error=Wd("error");Ye.warning=Wd("warning");Ye.warn=Ye.warning;Ye.dark=(r,e)=>ml(r,Xd("default",{theme:"dark",...e}));function fj(r){oj(r)}Ye.dismiss=fj;Ye.clearWaitingQueue=lj;Ye.isActive=rj;Ye.update=(r,e={})=>{let t=aj(r,e);if(t){let{props:s,content:i}=t,o={delay:100,...s,...e,toastId:e.toastId||r,updateId:Xv()};o.toastId!==r&&(o.staleId=r);let c=o.render||i;delete o.render,ml(c,o)}};Ye.done=r=>{Ye.update(r,{progress:1})};Ye.onChange=dj;Ye.play=r=>Kv(!0,r);Ye.pause=r=>Kv(!1,r);var Qv={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},$y=Ve.createContext&&Ve.createContext(Qv),mj=["attr","size","title"];function pj(r,e){if(r==null)return{};var t=gj(r,e),s,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(r);for(i=0;i<o.length;i++)s=o[i],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(r,s)&&(t[s]=r[s])}return t}function gj(r,e){if(r==null)return{};var t={};for(var s in r)if(Object.prototype.hasOwnProperty.call(r,s)){if(e.indexOf(s)>=0)continue;t[s]=r[s]}return t}function Td(){return Td=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(r[s]=t[s])}return r},Td.apply(this,arguments)}function Yy(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(r);e&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,s)}return t}function kd(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Yy(Object(t),!0).forEach(function(s){xj(r,s,t[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Yy(Object(t)).forEach(function(s){Object.defineProperty(r,s,Object.getOwnPropertyDescriptor(t,s))})}return r}function xj(r,e,t){return e=yj(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function yj(r){var e=bj(r,"string");return typeof e=="symbol"?e:e+""}function bj(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var s=t.call(r,e);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function Zv(r){return r&&r.map((e,t)=>Ve.createElement(e.tag,kd({key:t},e.attr),Zv(e.child)))}function pl(r){return e=>Ve.createElement(vj,Td({attr:kd({},r.attr)},e),Zv(r.child))}function vj(r){var e=t=>{var{attr:s,size:i,title:o}=r,c=pj(r,mj),u=i||t.size||"1em",h;return t.className&&(h=t.className),r.className&&(h=(h?h+" ":"")+r.className),Ve.createElement("svg",Td({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,s,c,{className:h,style:kd(kd({color:r.color||t.color},t.style),r.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),o&&Ve.createElement("title",null,o),r.children)};return $y!==void 0?Ve.createElement($y.Consumer,null,t=>e(t)):e(Qv)}function wj(r){return pl({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M405 136.798L375.202 107 256 226.202 136.798 107 107 136.798 226.202 256 107 375.202 136.798 405 256 285.798 375.202 405 405 375.202 285.798 256z"},child:[]}]})(r)}function Jv(r){return pl({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M48 448l416-192L48 64v149.333L346 256 48 298.667z"},child:[]}]})(r)}function _j(r){return pl({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M416 192c0-88.4-93.1-160-208-160S0 103.6 0 192c0 34.3 14.1 65.9 38 92-13.4 30.2-35.5 54.2-35.8 54.5-2.2 2.3-2.8 5.7-1.5 8.7S4.8 352 8 352c36.6 0 66.9-12.3 88.7-25 32.2 15.7 70.3 25 111.3 25 114.9 0 208-71.6 208-160zm122 220c23.9-26 38-57.7 38-92 0-66.9-53.5-124.2-129.3-148.1.9 6.6 1.3 13.3 1.3 20.1 0 105.9-107.7 192-240 192-10.8 0-21.3-.8-31.7-1.9C207.8 439.6 281.8 480 368 480c41 0 79.1-9.2 111.3-25 21.8 12.7 52.1 25 88.7 25 3.2 0 6.1-1.9 7.3-4.8 1.3-2.9.7-6.3-1.5-8.7-.3-.3-22.4-24.2-35.8-54.5z"},child:[]}]})(r)}function Aj(r){return pl({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},child:[]}]})(r)}function ua(r){return pl({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(r)}const ew="/assets/livechat-6RFbG7GF.mp3",tw="/assets/noti-XKgHEO6y.wav",Sj=()=>{const{user:r}=hl(),[e,t]=R.useState([]),[s,i]=R.useState(null),[o,c]=R.useState([]),[u,h]=R.useState(""),[p,f]=R.useState(!1),[g,x]=R.useState(!1),[b,w]=R.useState(!1),[_,S]=R.useState(1),A=R.useRef(null),L=R.useRef(null),[O,D]=R.useState(!1),I=R.useRef(0),C=()=>{try{const z=new Audio(ew);z.volume=.7,z.play().catch(E=>{console.warn("MP3 playback failed, trying WAV fallback:",E);try{const j=new Audio(tw);j.volume=.7,j.play().catch(G=>{console.error("Error playing fallback sound:",G)})}catch(j){console.error("Error creating fallback audio:",j)}})}catch(z){console.error("Error creating audio element:",z)}},P=()=>{A.current?.scrollIntoView({behavior:"smooth"})},k=async()=>{try{const z=await oe.get("/admin/chat/users");t(z.data.data||[])}catch(z){console.error("Error fetching users:",z),Ye.error("Failed to load users")}},N=async(z,E=1,j=!1)=>{if(z)try{E===1?f(!0):D(!0);const Y=(await oe.get(`/admin/chat/users/${z}/messages?per_page=20&page=${E}`)).data;if(Y&&Y.data){const ee=Y.data,B=Y.meta||{},$=ee.reverse(),K=I.current;j?c(Q=>[...$,...Q]):(K>0&&$.length>K&&$.slice(K).some(de=>de.sender_type==="player")&&C(),c($),I.current=$.length,setTimeout(P,100)),w(B.current_page<B.last_page),S(E)}}catch(G){console.error("Error fetching messages:",G),Ye.error("Failed to load messages")}finally{f(!1),D(!1)}},M=async z=>{if(z.preventDefault(),!u.trim()||g||!s)return;const E=u.trim();if(E.length>2e3){Ye.error("Message is too long (max 2000 characters)");return}x(!0),h("");try{const j=await oe.post(`/admin/chat/users/${s.id}/messages`,{message:E});j.data&&j.data.data&&(c(G=>[...G,j.data.data]),setTimeout(P,100),k())}catch(j){console.error("Error sending message:",j),Ye.error(j.response?.data?.message||"Failed to send message"),h(E)}finally{x(!1)}},H=z=>{i(z),c([]),S(1),I.current=0,N(z.id,1,!1)},F=()=>{b&&!O&&s&&N(s.id,_+1,!0)},V=z=>{const E=z.target;if(E.scrollTop===0&&b&&!O){const j=E.scrollHeight;F(),setTimeout(()=>{E.scrollTop=E.scrollHeight-j},100)}};R.useEffect(()=>{k()},[]),R.useEffect(()=>{const z=setInterval(()=>{k(),s&&N(s.id,1,!1)},5e3);return()=>clearInterval(z)},[s]),R.useEffect(()=>{o.length>0&&P()},[o.length]);const q=z=>{if(!z)return"";const E=new Date(z),j=new Date,G=j-E,Y=Math.floor(G/6e4);return Y<1?"Just now":Y<60?`${Y}m ago`:E.toDateString()===j.toDateString()?E.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}):E.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})};return l.jsxs("div",{className:"p-6",children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-6",children:"User Chat Management"}),l.jsx("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",style:{height:"calc(100vh - 200px)"},children:l.jsxs("div",{className:"flex h-full",children:[l.jsxs("div",{className:"w-80 border-r border-gray-200 flex flex-col bg-gray-50",children:[l.jsxs("div",{className:"p-4 border-b border-gray-200 bg-white",children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"Users"}),l.jsxs("p",{className:"text-sm text-gray-500",children:[e.length," users assigned"]})]}),l.jsx("div",{className:"flex-1 overflow-y-auto",children:e.length===0?l.jsxs("div",{className:"p-4 text-center text-gray-500",children:[l.jsx(ua,{className:"mx-auto mb-2 text-4xl text-gray-300"}),l.jsx("p",{children:"No users assigned"})]}):e.map(z=>l.jsx("button",{onClick:()=>H(z),className:`w-full p-4 text-left border-b border-gray-200 hover:bg-gray-100 transition ${s?.id===z.id?"bg-amber-50 border-l-4 border-l-amber-600":"bg-white"}`,children:l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-amber-400 to-orange-400 flex items-center justify-center flex-shrink-0",children:l.jsx(ua,{className:"text-white text-sm"})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("p",{className:"font-semibold text-gray-800 truncate",children:z.name}),l.jsxs("p",{className:"text-xs text-gray-500 truncate",children:["@",z.user_name]})]})]}),z.last_message&&l.jsx("p",{className:"text-sm text-gray-600 mt-2 truncate",children:z.last_message.message}),z.last_message&&l.jsx("p",{className:"text-xs text-gray-400 mt-1",children:q(z.last_message.created_at)})]}),z.unread_count>0&&l.jsx("span",{className:"ml-2 bg-red-500 text-white text-xs font-bold rounded-full w-6 h-6 flex items-center justify-center flex-shrink-0",children:z.unread_count>9?"9+":z.unread_count})]})},z.id))})]}),l.jsx("div",{className:"flex-1 flex flex-col bg-white",children:s?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"p-4 border-b border-gray-200 bg-gradient-to-r from-amber-50 to-white",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-amber-400 to-orange-400 flex items-center justify-center",children:l.jsx(ua,{className:"text-white text-sm"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold text-gray-800",children:s.name}),l.jsxs("p",{className:"text-xs text-gray-500",children:["@",s.user_name,"  ",s.phone]})]})]})}),l.jsxs("div",{ref:L,onScroll:V,className:"flex-1 overflow-y-auto p-4 space-y-3 bg-gray-50",style:{scrollbarWidth:"thin"},children:[O&&l.jsx("div",{className:"text-center text-amber-600 text-sm py-2",children:"Loading older messages..."}),p&&o.length===0?l.jsx("div",{className:"flex items-center justify-center h-full",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-amber-600 mx-auto mb-3"}),l.jsx("p",{className:"text-gray-400",children:"Loading messages..."})]})}):o.length===0?l.jsx("div",{className:"flex items-center justify-center h-full",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"w-16 h-16 rounded-full bg-amber-100 flex items-center justify-center mx-auto mb-3",children:l.jsx(ua,{className:"text-amber-600 text-2xl"})}),l.jsx("p",{className:"text-gray-400",children:"No messages yet"}),l.jsxs("p",{className:"text-gray-500 text-sm mt-1",children:["Start a conversation with ",s.name,"!"]})]})}):o.map(z=>{const E=z.sender_id===r?.id;return l.jsx("div",{className:`flex ${E?"justify-end":"justify-start"}`,children:l.jsxs("div",{className:`max-w-[75%] rounded-2xl px-4 py-2 ${E?"bg-gradient-to-r from-amber-400 to-orange-400 text-black":"bg-white text-gray-800 border border-gray-200"}`,children:[!E&&z.sender&&l.jsx("p",{className:"text-xs font-semibold mb-1 opacity-80",children:z.sender.name||z.sender.user_name}),l.jsx("p",{className:"text-sm whitespace-pre-wrap break-words",children:z.message}),l.jsx("p",{className:`text-xs mt-1 ${E?"text-black/60":"text-gray-400"}`,children:q(z.created_at)})]})},z.id)}),l.jsx("div",{ref:A})]}),l.jsxs("form",{onSubmit:M,className:"p-4 border-t border-gray-200 bg-white",children:[l.jsxs("div",{className:"flex items-end gap-2",children:[l.jsx("textarea",{value:u,onChange:z=>{h(z.target.value),z.target.style.height="auto",z.target.style.height=Math.min(z.target.scrollHeight,120)+"px"},onKeyDown:z=>{z.key==="Enter"&&!z.shiftKey&&(z.preventDefault(),M(z))},placeholder:"Type your message...",rows:1,maxLength:2e3,className:"flex-1 bg-gray-50 border border-gray-300 rounded-lg px-4 py-2 resize-none focus:outline-none focus:ring-2 focus:ring-amber-500 focus:border-transparent",style:{minHeight:"44px",maxHeight:"120px"}}),l.jsx("button",{type:"submit",disabled:!u.trim()||g,className:"bg-gradient-to-r from-amber-400 to-orange-400 text-black p-3 rounded-lg hover:opacity-90 transition disabled:opacity-50 disabled:cursor-not-allowed flex-shrink-0",children:g?l.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-black"}):l.jsx(Jv,{size:20})})]}),u.length>0&&l.jsxs("p",{className:"text-xs text-gray-500 mt-1 text-right",children:[u.length,"/2000"]})]})]}):l.jsx("div",{className:"flex-1 flex items-center justify-center bg-gray-50",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"w-20 h-20 rounded-full bg-gray-200 flex items-center justify-center mx-auto mb-4",children:l.jsx(ua,{className:"text-gray-400 text-3xl"})}),l.jsx("p",{className:"text-gray-500 text-lg",children:"Select a user to start chatting"}),l.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"Choose a user from the list to view and send messages"})]})})})]})})]})},hs={getPosts:r=>oe.get("/public/posts",{params:r}),getPost:r=>oe.get(`/public/posts/${r}`),getDhammas:()=>oe.get("/public/dhammas"),getDhamma:r=>oe.get(`/public/dhammas/${r}`),getBiographies:()=>oe.get("/public/biographies"),getBiography:r=>oe.get(`/public/biographies/${r}`),getDonations:()=>oe.get("/public/donations"),getMonasteryBuildingDonations:()=>oe.get("/public/monastery-building-donations"),toggleLike:r=>oe.post("/public/likes/toggle",r),getLikeCounts:r=>oe.get("/public/likes/counts",{params:r}),getComments:r=>oe.get("/public/comments",{params:r}),addComment:r=>oe.post("/public/comments",r),getBanners:()=>oe.get("/public/banners"),getBannerTexts:()=>oe.get("/public/banner-texts"),getMonasteries:()=>oe.get("/public/monasteries"),getLessons:r=>oe.get("/public/lessons",{params:r}),getLesson:r=>oe.get(`/public/lessons/${r}`),getTextBooks:r=>oe.get("/public/text-books",{params:r}),getTextBook:r=>oe.get(`/public/text-books/${r}`)},Nj=()=>{const[r,e]=R.useState([]),[t,s]=R.useState(0),[i,o]=R.useState(!0);R.useEffect(()=>{c()},[]),R.useEffect(()=>{if(r.length>1){const f=setInterval(()=>{s(g=>(g+1)%r.length)},5e3);return()=>clearInterval(f)}},[r.length]);const c=async()=>{try{const f=await hs.getBanners();e(f.data?.data||[])}catch(f){console.error("Error fetching banners:",f)}finally{o(!1)}},u=f=>{s(f)},h=()=>{s(f=>(f-1+r.length)%r.length)},p=()=>{s(f=>(f+1)%r.length)};return i?l.jsx("div",{className:"w-full h-64 bg-amber-800 animate-pulse rounded-lg"}):r.length===0?null:l.jsxs("div",{className:"relative w-full h-64 md:h-96 overflow-hidden rounded-lg shadow-xl mb-6",children:[l.jsx("div",{className:"relative w-full h-full",children:r.map((f,g)=>l.jsx("div",{className:`absolute inset-0 transition-opacity duration-1000 ${g===t?"opacity-100":"opacity-0"}`,children:l.jsx("img",{src:f.image,alt:`Banner ${g+1}`,className:"w-full h-full object-cover"})},f.id))}),r.length>1&&l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:h,className:"absolute left-4 top-1/2 transform -translate-y-1/2 bg-black bg-opacity-50 text-white p-2 rounded-full hover:bg-opacity-75 transition z-10","aria-label":"Previous slide",children:l.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),l.jsx("button",{onClick:p,className:"absolute right-4 top-1/2 transform -translate-y-1/2 bg-black bg-opacity-50 text-white p-2 rounded-full hover:bg-opacity-75 transition z-10","aria-label":"Next slide",children:l.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),r.length>1&&l.jsx("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 flex space-x-2 z-10",children:r.map((f,g)=>l.jsx("button",{onClick:()=>u(g),className:`w-3 h-3 rounded-full transition-all ${g===t?"bg-white w-8":"bg-white bg-opacity-50 hover:bg-opacity-75"}`,"aria-label":`Go to slide ${g+1}`},g))})]})},Ej=()=>{const[r,e]=R.useState([]),[t,s]=R.useState(!0);R.useEffect(()=>{i()},[]);const i=async()=>{try{const c=await hs.getBannerTexts();e(c.data?.data||[])}catch(c){console.error("Error fetching banner texts:",c)}finally{s(!1)}};if(t||r.length===0)return null;const o=r.map(c=>c.text).join("  ");return l.jsxs("div",{className:"bg-amber-700 text-white py-3 overflow-hidden relative",children:[l.jsx("div",{className:"marquee-container",children:l.jsxs("div",{className:"marquee-content",children:[l.jsx("span",{className:"marquee-text",children:o}),l.jsx("span",{className:"marquee-text","aria-hidden":"true",children:o})]})}),l.jsx("style",{children:`
        .marquee-container {
          overflow: hidden;
          white-space: nowrap;
        }
        .marquee-content {
          display: inline-flex;
          animation: marquee 30s linear infinite;
        }
        .marquee-text {
          padding-right: 50px;
          font-size: 1rem;
          font-weight: 500;
        }
        @keyframes marquee {
          0% {
            transform: translateX(0);
          }
          100% {
            transform: translateX(-50%);
          }
        }
        .marquee-content:hover {
          animation-play-state: paused;
        }
      `})]})},Pf=()=>{const{notifications:r,unreadCount:e,markAllAsRead:t,handleNotificationClick:s}=wE(),[i,o]=R.useState(!1),c=R.useRef(null);R.useEffect(()=>{const h=p=>{c.current&&!c.current.contains(p.target)&&o(!1)};return document.addEventListener("mousedown",h),()=>{document.removeEventListener("mousedown",h)}},[]);const u=()=>{o(!i),!i&&e>0&&t()};return l.jsxs("div",{className:"relative",ref:c,children:[l.jsxs("button",{onClick:u,className:"relative p-2 text-gray-700 hover:text-amber-600 transition-colors","aria-label":"Notifications",children:[l.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})}),e>0&&l.jsx("span",{className:"absolute top-0 right-0 block h-5 w-5 rounded-full bg-red-500 text-white text-xs font-bold flex items-center justify-center border-2 border-white shadow-md",children:e>99?"99+":e>9?"9+":e})]}),i&&l.jsxs("div",{className:"absolute right-0 mt-2 w-80 max-w-[calc(100vw-2rem)] bg-white rounded-lg shadow-xl z-50 border border-gray-200",children:[l.jsxs("div",{className:"p-4 border-b border-gray-200 flex justify-between items-center",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:""}),e>0&&l.jsx("button",{onClick:t,className:"text-sm text-amber-600 hover:text-amber-700",children:" "})]}),l.jsx("div",{className:"max-h-96 overflow-y-auto",children:r.length===0?l.jsx("div",{className:"p-4 text-center text-gray-500",children:" "}):r.map(h=>l.jsx("div",{onClick:()=>{s(h),o(!1)},className:`p-4 border-b border-gray-100 cursor-pointer hover:bg-gray-50 transition-colors ${h.read?"":"bg-amber-50"}`,children:l.jsxs("div",{className:"flex items-start",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("h4",{className:"font-semibold text-gray-800 mb-1",children:h.title}),l.jsx("p",{className:"text-sm text-gray-600 mb-2",children:h.body}),l.jsx("p",{className:"text-xs text-gray-400",children:new Date(h.timestamp).toLocaleString("my-MM",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),!h.read&&l.jsx("div",{className:"ml-2 w-2 h-2 bg-amber-600 rounded-full"})]})},h.id))})]})]})},jj="/assets/logo-IwCEHbY4.jpg",Gs=()=>{const[r,e]=R.useState(!1),[t,s]=R.useState(null),i=vn(),o=pi();R.useEffect(()=>{const p=ui.getCurrentUser();s(p)},[i]);const c=()=>{ui.logout(),s(null),o("/")},u=p=>i.pathname===p,h=[{to:"/",label:"Home",icon:""},{to:"/posts",label:"Posts",icon:""},{to:"/text-books",label:"Text Books",icon:""},{to:"/lessons",label:"Lessons",icon:""},{to:"/dictionary",label:"Dictionary",icon:""}];return l.jsxs(l.Fragment,{children:[l.jsx(Ej,{}),l.jsx("nav",{className:"bg-white shadow-lg sticky top-0 z-50",children:l.jsxs("div",{className:"container mx-auto px-4",children:[l.jsxs("div",{className:"flex items-center justify-between h-16",children:[l.jsxs(ct,{to:"/",className:"flex items-center space-x-3 hover:opacity-80 transition-opacity",children:[l.jsx("img",{src:jj,alt:"ThetThetWinnerSchool Dhamma Center Logo",className:"h-12 w-12 md:h-14 md:w-14 object-contain rounded-full"}),l.jsxs("div",{className:"hidden sm:block",children:[l.jsx("span",{className:"text-lg md:text-xl font-bold text-gray-800 block",children:"ThetThetWinnerSchool"}),l.jsx("span",{className:"text-xs md:text-sm text-gray-600",children:"ThetThetWinnerSchool"})]})]}),l.jsxs("div",{className:"hidden md:flex items-center space-x-1",children:[h.map(p=>l.jsxs(ct,{to:p.to,className:`px-4 py-2 rounded-lg transition-all duration-200 ${u(p.to)?"bg-amber-600 text-white shadow-md":"text-gray-700 hover:bg-amber-50 hover:text-amber-700"}`,children:[l.jsx("span",{className:"mr-2",children:p.icon}),p.label]},p.to)),l.jsx(Pf,{}),t?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"ml-4 px-4 py-2 text-gray-700 flex items-center space-x-2",children:l.jsxs("span",{className:"text-sm",children:[" ",t.name]})}),l.jsx("button",{onClick:c,className:"ml-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition",children:"Logout"})]}):l.jsxs(l.Fragment,{children:[l.jsx(ct,{to:"/register",className:"ml-4 px-4 py-2 bg-amber-600 text-white rounded-lg hover:bg-amber-700 transition",children:"Register"}),l.jsx(ct,{to:"/login",className:"ml-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition",children:"Login"})]}),l.jsxs("a",{href:"https://drive.google.com/file/d/16IH01drYj_Gf9D-tcfz2fx2XzDfKjsbQ/view?usp=sharing",download:!0,className:"ml-4 px-4 py-2 bg-amber-600 text-white rounded-lg hover:bg-amber-700 transition flex items-center space-x-2",rel:"noopener noreferrer",children:[l.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),l.jsx("span",{children:"App"})]}),l.jsx(ct,{to:"/admin/login",className:"ml-4 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition",children:"Admin"})]}),l.jsxs("div",{className:"md:hidden flex items-center space-x-2",children:[l.jsx(Pf,{}),l.jsx("button",{onClick:()=>e(!r),className:"p-2 rounded-lg text-gray-700 hover:bg-gray-100 transition","aria-label":"Toggle menu",children:l.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r?l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}):l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})]})]}),r&&l.jsxs("div",{className:"md:hidden py-4 border-t border-gray-200",children:[l.jsxs("div",{className:"px-4 py-2 flex items-center justify-between border-b border-gray-200 mb-2",children:[l.jsx("span",{className:"text-gray-700 font-semibold",children:"Notifications"}),l.jsx(Pf,{})]}),h.map(p=>l.jsxs(ct,{to:p.to,onClick:()=>e(!1),className:`block px-4 py-3 rounded-lg transition ${u(p.to)?"bg-amber-600 text-white":"text-gray-700 hover:bg-amber-50"}`,children:[l.jsx("span",{className:"mr-2",children:p.icon}),p.label]},p.to)),t?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"px-4 py-3 text-gray-700 border-b border-gray-200",children:l.jsxs("span",{className:"text-sm",children:[" ",t.name]})}),l.jsx("button",{onClick:()=>{c(),e(!1)},className:"block w-full text-left px-4 py-3 text-red-600 hover:bg-red-50 rounded-lg transition",children:"Logout"})]}):l.jsxs(l.Fragment,{children:[l.jsx(ct,{to:"/register",onClick:()=>e(!1),className:"block px-4 py-3 bg-amber-600 text-white rounded-lg hover:bg-amber-700 transition",children:"Register"}),l.jsx(ct,{to:"/login",onClick:()=>e(!1),className:"block px-4 py-3 text-gray-700 hover:bg-gray-100 rounded-lg transition",children:"Login"})]}),l.jsxs("a",{href:"https://goldencitycasino123.pro/assets/apk/app-release.apk",download:!0,onClick:()=>e(!1),className:"block px-4 py-3 bg-amber-600 text-white rounded-lg hover:bg-amber-700 transition flex items-center space-x-2",target:"_blank",rel:"noopener noreferrer",children:[l.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),l.jsx("span",{children:"Download App"})]}),l.jsx(ct,{to:"/admin/login",onClick:()=>e(!1),className:"block px-4 py-3 text-gray-700 hover:bg-gray-100 rounded-lg transition",children:"Admin"})]})]})})]})},_n=()=>{const r=new Date().getFullYear(),e={quickLinks:[{to:"/",label:"Home"},{to:"/posts",label:"Posts"},{to:"/dhammas",label:"Dhamma Talks"},{to:"/biographies",label:"Biographies"},{to:"/donations",label:"Donations"}],resources:[{to:"/posts",label:"Latest Posts"},{to:"/dhammas",label:"Dhamma Talks"},{to:"/biographies",label:"Biographies"},{to:"/donations",label:"Support Us"}]};return l.jsx("footer",{className:"bg-gradient-to-br from-gray-900 to-gray-800 text-white mt-16",children:l.jsxs("div",{className:"container mx-auto px-4 py-12",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[l.jsxs("div",{className:"col-span-1 md:col-span-2",children:[l.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[l.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-amber-600 to-amber-800 rounded-lg flex items-center justify-center",children:l.jsx("span",{className:"text-white text-xl font-bold",children:"TTWSC"})}),l.jsx("h3",{className:"text-xl font-bold",children:"ThetThetWinnerSchool"})]}),l.jsx("p",{className:"text-gray-300 mb-4 leading-relaxed",children:"A place of peace, wisdom, and compassion. We are dedicated to spreading the teachings of the Buddha and providing a peaceful environment for meditation and learning."}),l.jsxs("div",{className:"flex space-x-4",children:[l.jsx("a",{href:"#",className:"w-10 h-10 bg-gray-700 hover:bg-amber-600 rounded-full flex items-center justify-center transition","aria-label":"Facebook",children:l.jsx("span",{children:""})}),l.jsx("a",{href:"#",className:"w-10 h-10 bg-gray-700 hover:bg-amber-600 rounded-full flex items-center justify-center transition","aria-label":"YouTube",children:l.jsx("span",{children:""})}),l.jsx("a",{href:"#",className:"w-10 h-10 bg-gray-700 hover:bg-amber-600 rounded-full flex items-center justify-center transition","aria-label":"Contact",children:l.jsx("span",{children:""})})]})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"text-lg font-semibold mb-4",children:"Quick Links"}),l.jsx("ul",{className:"space-y-2",children:e.quickLinks.map(t=>l.jsx("li",{children:l.jsx(ct,{to:t.to,className:"text-gray-300 hover:text-amber-400 transition",children:t.label})},t.to))})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"text-lg font-semibold mb-4",children:"Resources"}),l.jsx("ul",{className:"space-y-2",children:e.resources.map(t=>l.jsx("li",{children:l.jsx(ct,{to:t.to,className:"text-gray-300 hover:text-amber-400 transition",children:t.label})},t.to))})]})]}),l.jsx("div",{className:"border-t border-gray-700 mt-8 pt-8",children:l.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center",children:[l.jsxs("p",{className:"text-gray-400 text-sm mb-4 md:mb-0",children:[" ",r,"  Dhamma Center Monastery. All rights reserved."]}),l.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-400",children:[l.jsx("span",{children:"Ashin Nandamala"}),l.jsx("span",{className:"hidden md:inline",children:""}),l.jsx(ct,{to:"/admin/login",className:"hover:text-amber-400 transition",children:"Admin Login"})]})]})})]})})},An=()=>{const[r,e]=R.useState(!1),t=vn(),s=o=>t.pathname===o,i=[{to:"/",label:"Home",icon:""},{to:"/posts",label:"Posts",icon:""},{to:"/text-books",label:"Text Books",icon:""},{to:"/lessons",label:"Lessons",icon:""},{to:"/dictionary",label:"Dictionary",icon:""},{to:"/lessons",label:"Lessons",icon:""}];return l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:()=>e(!r),className:"fixed left-4 top-20 z-40 md:hidden bg-white shadow-lg rounded-full p-3 hover:bg-gray-50 transition","aria-label":"Toggle sidebar",children:l.jsx("svg",{className:"w-6 h-6 text-gray-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r?l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}):l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),r&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-30 md:hidden",onClick:()=>e(!1)}),l.jsx("aside",{className:`fixed left-0 top-16 h-[calc(100vh-4rem)] bg-white shadow-2xl z-40 transform transition-transform duration-300 ${r?"translate-x-0":"-translate-x-full"} md:translate-x-0 md:static md:z-auto md:top-0 md:h-screen w-64`,children:l.jsxs("div",{className:"h-full flex flex-col",children:[l.jsx("div",{className:"p-6 border-b border-gray-200",children:l.jsxs("div",{className:"flex items-center space-x-3",children:[l.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-amber-600 to-amber-800 rounded-lg flex items-center justify-center",children:l.jsx("span",{className:"text-white text-xl font-bold",children:"TTWSC"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-bold text-gray-800",children:"ThetThetWinnerSchool"}),l.jsx("p",{className:"text-xs text-gray-500",children:"Navigation"})]})]})}),l.jsxs("nav",{className:"flex-1 overflow-y-auto p-4",children:[l.jsx("ul",{className:"space-y-2",children:i.map(o=>l.jsx("li",{children:l.jsxs(ct,{to:o.to,onClick:()=>e(!1),className:`flex items-center space-x-3 px-4 py-3 rounded-lg transition-all ${s(o.to)?"bg-amber-600 text-white shadow-md":"text-gray-700 hover:bg-amber-50 hover:text-amber-700"}`,children:[l.jsx("span",{className:"text-xl",children:o.icon}),l.jsx("span",{className:"font-medium",children:o.label})]})},o.to))}),l.jsxs("div",{className:"mt-8 p-4 bg-gradient-to-br from-amber-50 to-orange-50 rounded-lg",children:[l.jsx("h4",{className:"font-semibold text-gray-800 mb-2",children:"Quick Info"}),l.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:[l.jsx("strong",{children:"Meditation:"})," Daily 6:00 AM - 7:00 AM"]}),l.jsxs("p",{className:"text-sm text-gray-600",children:[l.jsx("strong",{children:"Evening:"})," 6:00 PM - 7:00 PM"]})]})]}),l.jsx("div",{className:"p-4 border-t border-gray-200",children:l.jsx(ct,{to:"/admin/login",className:"block w-full text-center px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition",children:"Admin Login"})})]})})]})},Cj=({isOpen:r,onClose:e})=>{const[t,s]=R.useState(null),[i,o]=R.useState([]),[c,u]=R.useState(""),[h,p]=R.useState(!1),[f,g]=R.useState(!1),[x,b]=R.useState(!1),[w,_]=R.useState(1),S=R.useRef(null),A=R.useRef(null),[L,O]=R.useState(!1),D=R.useRef(0),I=()=>{try{const F=new Audio(ew);F.volume=.7,F.play().catch(V=>{console.warn("MP3 playback failed, trying WAV fallback:",V);try{const q=new Audio(tw);q.volume=.7,q.play().catch(z=>{console.error("Error playing fallback sound:",z)})}catch(q){console.error("Error creating fallback audio:",q)}})}catch(F){console.error("Error creating audio element:",F)}};R.useEffect(()=>{const F=ui.getCurrentUser();s(F)},[]);const C=()=>{S.current?.scrollIntoView({behavior:"smooth"})},P=async(F=1,V=!1)=>{if(!(!t||!r))try{F===1?p(!0):O(!0);const q=localStorage.getItem("public_token"),z=await fetch(`${Ad}/public/chat/messages?per_page=20&page=${F}`,{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:`Bearer ${q}`}});if(z.status===401){ui.logout(),Ye.error("Session expired. Please login again.");return}if(!z.ok){const G=await z.json().catch(()=>({}));G.message?Ye.error(G.message):Ye.error("Failed to load messages"),p(!1),O(!1);return}const E=await z.json();let j=[];if(E&&Array.isArray(E))j=E,b(!1),_(1);else if(E&&E.data){j=E.data;const G=E.meta||{};b(G.current_page<G.last_page),_(F)}if(j.length>0){const G=j.reverse();if(V)o(Y=>[...G,...Y]);else{const Y=D.current;Y>0&&G.length>Y&&r&&G.slice(Y).some($=>$.sender_type==="agent"||$.sender_id!==t?.id)&&I(),o(G),D.current=G.length,setTimeout(C,100)}}}catch(q){console.error("Error fetching messages:",q),Ye.error("Failed to load messages")}finally{p(!1),O(!1)}},k=async F=>{if(F.preventDefault(),!c.trim()||f)return;const V=c.trim();if(V.length>2e3){Ye.error("Message is too long (max 2000 characters)");return}g(!0),u("");try{const q=localStorage.getItem("public_token"),z=await fetch(`${Ad}/public/chat/messages`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:`Bearer ${q}`},body:JSON.stringify({message:V})});if(z.status===401){ui.logout(),Ye.error("Session expired. Please login again.");return}if(!z.ok){const j=await z.json();Ye.error(j.message||"Failed to send message"),u(V);return}const E=await z.json();E&&E.data&&(o(j=>[...j,E.data]),setTimeout(C,100))}catch(q){console.error("Error sending message:",q),Ye.error("Failed to send message"),u(V)}finally{g(!1)}},N=()=>{x&&!L&&P(w+1,!0)};R.useEffect(()=>{if(r&&t){D.current=0,P(1,!1);const F=setInterval(()=>{P(1,!1)},3e3);return()=>clearInterval(F)}else D.current=0},[r,t]),R.useEffect(()=>{i.length>0&&C()},[i.length]);const M=F=>{const V=F.target;if(V.scrollTop===0&&x&&!L){const q=V.scrollHeight;N(),setTimeout(()=>{V.scrollTop=V.scrollHeight-q},100)}};if(!r)return null;const H=F=>{if(!F)return"";const V=new Date(F),q=new Date,z=q-V,E=Math.floor(z/6e4);return E<1?"Just now":E<60?`${E}m ago`:V.toDateString()===q.toDateString()?V.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}):V.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})};return l.jsx("div",{className:"fixed inset-0 z-[60] flex items-end sm:items-center justify-center bg-black bg-opacity-50 animate-fadeIn",children:l.jsxs("div",{className:"bg-gradient-to-br from-[#1a1d3a] to-[#101223] rounded-t-2xl sm:rounded-2xl shadow-2xl w-full sm:w-[400px] h-[calc(100vh-90px)] sm:h-[600px] max-h-[calc(100vh-90px)] sm:max-h-[600px] flex flex-col border border-yellow-400/20 mb-16 sm:mb-0",children:[l.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-yellow-400/20 bg-gradient-to-r from-yellow-400/10 to-transparent",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-r from-yellow-400 to-orange-400 flex items-center justify-center",children:l.jsx(ua,{className:"text-white text-lg"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-white font-bold text-lg",children:"Support Chat"}),l.jsx("p",{className:"text-yellow-400 text-xs",children:"Online"})]})]}),l.jsx("button",{onClick:e,className:"text-gray-400 hover:text-white transition p-2 hover:bg-white/10 rounded-lg","aria-label":"Close chat",children:l.jsx(wj,{size:24})})]}),l.jsxs("div",{ref:A,onScroll:M,className:"flex-1 overflow-y-auto p-4 space-y-3 scroll-smooth",style:{scrollbarWidth:"thin"},children:[L&&l.jsx("div",{className:"text-center text-yellow-400 text-sm py-2",children:"Loading older messages..."}),h&&i.length===0?l.jsx("div",{className:"flex items-center justify-center h-full",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-yellow-400 mx-auto mb-3"}),l.jsx("p",{className:"text-gray-400",children:"Loading messages..."})]})}):i.length===0?l.jsx("div",{className:"flex items-center justify-center h-full",children:l.jsxs("div",{className:"text-center",children:[l.jsx("div",{className:"w-16 h-16 rounded-full bg-yellow-400/20 flex items-center justify-center mx-auto mb-3",children:l.jsx(ua,{className:"text-yellow-400 text-2xl"})}),l.jsx("p",{className:"text-gray-400",children:"No messages yet"}),l.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Start a conversation!"})]})}):i.map(F=>{const V=F.sender_id===t?.id;return l.jsx("div",{className:`flex ${V?"justify-end":"justify-start"}`,children:l.jsxs("div",{className:`max-w-[75%] rounded-2xl px-4 py-2 ${V?"bg-gradient-to-r from-yellow-400 to-orange-400 text-black":"bg-[#23243a] text-white"}`,children:[!V&&F.sender&&l.jsx("p",{className:"text-xs font-semibold mb-1 opacity-80",children:F.sender.name||F.sender.user_name}),l.jsx("p",{className:"text-sm whitespace-pre-wrap break-words",children:F.message}),l.jsx("p",{className:`text-xs mt-1 ${V?"text-black/60":"text-gray-400"}`,children:H(F.created_at)})]})},F.id)}),l.jsx("div",{ref:S})]}),l.jsxs("form",{onSubmit:k,className:"p-4 pb-6 sm:pb-4 border-t border-yellow-400/20 bg-[#181A29] flex-shrink-0",children:[l.jsxs("div",{className:"flex items-end gap-2",children:[l.jsx("textarea",{value:c,onChange:F=>{u(F.target.value),F.target.style.height="auto",F.target.style.height=Math.min(F.target.scrollHeight,120)+"px"},onKeyDown:F=>{F.key==="Enter"&&!F.shiftKey&&(F.preventDefault(),k(F))},placeholder:"Type your message...",rows:1,maxLength:2e3,className:"flex-1 bg-[#23243a] text-white rounded-lg px-4 py-2 resize-none focus:outline-none focus:ring-2 focus:ring-yellow-400/50 border border-gray-700 overflow-y-auto",style:{minHeight:"44px",maxHeight:"120px"}}),l.jsx("button",{type:"submit",disabled:!c.trim()||f,className:"bg-gradient-to-r from-yellow-400 to-orange-400 text-black p-3 rounded-lg hover:opacity-90 transition disabled:opacity-50 disabled:cursor-not-allowed flex-shrink-0","aria-label":"Send message",children:f?l.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-black"}):l.jsx(Jv,{size:20})})]}),c.length>0&&l.jsxs("p",{className:"text-xs text-gray-500 mt-1 text-right",children:[c.length,"/2000"]})]})]})})},Tj=()=>{const r=pi(),[e,t]=R.useState(null),[s,i]=R.useState(!1),[o,c]=R.useState(0);R.useEffect(()=>{const p=ui.getCurrentUser();t(p)},[]);const u=async()=>{if(e)try{const p=localStorage.getItem("public_token"),f=await fetch(`${Ad}/public/chat/messages?per_page=50`,{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:`Bearer ${p}`}});if(f.ok){const g=await f.json();if(g&&g.data){const x=g.data.filter(b=>!b.read_at&&b.receiver_id===e.id);c(x.length)}}}catch{}},h=()=>{if(!e){r("/login");return}i(!s)};return R.useEffect(()=>{if(e&&!s){u();const p=setInterval(u,5e3);return()=>clearInterval(p)}else c(0)},[e,s]),l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:h,className:"fixed left-4 bottom-20 sm:bottom-6 z-40 bg-gradient-to-r from-yellow-400 to-orange-400 text-black rounded-full p-4 shadow-2xl hover:scale-110 transition-all duration-300 hover:shadow-yellow-400/50 group","aria-label":"Open chat",children:s?l.jsx(Aj,{size:24,className:"animate-spin-on-hover"}):l.jsxs("div",{className:"relative",children:[l.jsx(_j,{size:24}),e&&o>0&&l.jsx("span",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs font-bold rounded-full w-6 h-6 flex items-center justify-center animate-pulse",children:o>9?"9+":o})]})}),e&&l.jsx(Cj,{isOpen:s,onClose:()=>i(!1)})]})},kj=()=>{const[r,e]=R.useState([]),[t,s]=R.useState(!0),[i,o]=R.useState(1),[c,u]=R.useState(!1);R.useEffect(()=>{h(i)},[i]);const h=async(p=1)=>{try{const[f]=await Promise.all([hs.getPosts({page:p}).catch(b=>(console.error("Error fetching posts:",b),{data:{data:[]}}))]),g=f.data?.data||[];e(b=>p===1?g:[...b,...g]);const x=f.data?.pagination;u(x?.has_more_pages||!1)}catch(f){console.error("Error fetching data:",f)}finally{s(!1)}};return t?l.jsx("div",{className:"flex items-center justify-center min-h-screen",children:l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-600"})}):l.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-amber-50 to-orange-50 flex flex-col",children:[l.jsx(Gs,{}),l.jsxs("div",{className:"flex flex-1 relative",children:[l.jsx("div",{className:"hidden md:block md:relative",children:l.jsx(An,{})}),l.jsxs("main",{className:"flex-1 w-full md:w-[calc(100%-16rem)] container mx-auto px-4 py-8",children:[l.jsx(Nj,{}),l.jsxs("section",{className:"mb-12",children:[l.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-6",children:"Recent Posts"}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(p=>l.jsxs(ct,{to:`/posts/${p.id}`,className:"bg-white rounded-xl shadow-lg overflow-hidden hover:shadow-xl transition",children:[p.image&&l.jsx("img",{src:p.image,alt:p.title,className:"w-full h-48 object-cover"}),l.jsxs("div",{className:"p-6",children:[l.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:p.title}),l.jsxs("p",{className:"text-gray-600 text-sm mb-4 line-clamp-3",children:[p.content.substring(0,150),"..."]}),l.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[l.jsx("span",{children:p.category?.name||"Uncategorized"}),l.jsx("span",{children:new Date(p.created_at).toLocaleDateString()})]})]})]},p.id))}),c&&l.jsx("div",{className:"mt-6 flex justify-center",children:l.jsx("button",{onClick:()=>o(p=>p+1),className:"px-6 py-3 bg-amber-600 text-white rounded-lg hover:bg-amber-700 transition",children:"Load More"})})]})]})]}),l.jsx(_n,{}),l.jsx(Tj,{})]})},Kd=({likeableType:r,likeableId:e})=>{const[t,s]=R.useState(0),[i,o]=R.useState(0),[c,u]=R.useState(null),[h,p]=R.useState(!1);R.useEffect(()=>{f()},[r,e]);const f=async()=>{try{const x=await hs.getLikeCounts({likeable_type:r,likeable_id:e});s(x.data.likes),o(x.data.dislikes),u(x.data.user_action)}catch(x){console.error("Error fetching like counts:",x)}},g=async x=>{p(!0);try{await hs.toggleLike({likeable_type:r,likeable_id:e,type:x}),await f()}catch(b){console.error("Error toggling like:",b)}finally{p(!1)}};return l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsxs("button",{onClick:()=>g("like"),disabled:h,className:`flex items-center gap-2 px-4 py-2 rounded-lg transition ${c==="like"?"bg-green-500 text-white":"bg-gray-200 text-gray-700 hover:bg-green-100"}`,children:[l.jsx("span",{children:""}),l.jsx("span",{children:t})]}),l.jsxs("button",{onClick:()=>g("dislike"),disabled:h,className:`flex items-center gap-2 px-4 py-2 rounded-lg transition ${c==="dislike"?"bg-red-500 text-white":"bg-gray-200 text-gray-700 hover:bg-red-100"}`,children:[l.jsx("span",{children:""}),l.jsx("span",{children:i})]})]})},Qd=({commentableType:r,commentableId:e})=>{const[t,s]=R.useState([]),[i,o]=R.useState(!0),[c,u]=R.useState(!1),[h,p]=R.useState({comment:""});R.useEffect(()=>{f()},[r,e]);const f=async()=>{try{const x=await hs.getComments({commentable_type:r,commentable_id:e});s(x.data?.data||[])}catch(x){console.error("Error fetching comments:",x)}finally{o(!1)}},g=async x=>{x.preventDefault(),u(!0);try{await hs.addComment({commentable_type:r,commentable_id:e,comment:h.comment}),p({comment:""}),await f()}catch(b){console.error("Error adding comment:",b),alert("Error adding comment. Please try again.")}finally{u(!1)}};return i?l.jsx("div",{className:"text-center py-4",children:"Loading comments..."}):l.jsxs("div",{className:"mt-8",children:[l.jsxs("h3",{className:"text-2xl font-bold text-gray-800 mb-4",children:["Comments (",t.length,")"]}),l.jsxs("form",{onSubmit:g,className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Comment *"}),l.jsx("textarea",{required:!0,rows:4,value:h.comment,onChange:x=>p({...h,comment:x.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500",placeholder:"Write your comment here..."})]}),l.jsx("button",{type:"submit",disabled:c,className:"bg-amber-600 text-white px-6 py-2 rounded-lg hover:bg-amber-700 transition disabled:opacity-50",children:c?"Submitting...":"Post Comment"})]}),l.jsx("div",{className:"space-y-4",children:t.length===0?l.jsx("p",{className:"text-gray-500 text-center py-8",children:"No comments yet. Be the first to comment!"}):t.map(x=>l.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[l.jsx("div",{className:"flex items-start justify-between mb-2",children:l.jsx("span",{className:"text-sm text-gray-500",children:new Date(x.created_at).toLocaleDateString()})}),l.jsx("p",{className:"text-gray-700 whitespace-pre-wrap",children:x.comment})]},x.id))})]})},Rj=()=>{const{id:r}=Pd(),[e,t]=R.useState(null),[s,i]=R.useState(!0);R.useEffect(()=>{o()},[r]);const o=async()=>{try{const c=await hs.getPost(r);t(c.data?.data)}catch(c){console.error("Error fetching post:",c)}finally{i(!1)}};return s?l.jsx("div",{className:"flex items-center justify-center min-h-screen",children:l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-600"})}):e?l.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-amber-50 to-orange-50 flex flex-col",children:[l.jsx(Gs,{}),l.jsxs("div",{className:"flex flex-1 relative",children:[l.jsx("div",{className:"hidden md:block md:relative",children:l.jsx(An,{})}),l.jsx("main",{className:"flex-1 w-full md:w-[calc(100%-16rem)] container mx-auto px-4 py-8",children:l.jsxs("article",{className:"bg-white rounded-xl shadow-lg overflow-hidden max-w-4xl mx-auto",children:[e.image&&l.jsx("img",{src:e.image,alt:e.title,className:"w-full h-96 object-cover"}),l.jsxs("div",{className:"p-8",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("span",{className:"bg-amber-100 text-amber-800 px-3 py-1 rounded-full text-sm",children:e.category?.name||"Uncategorized"}),l.jsxs("div",{className:"flex items-center gap-4",children:[e.views_count!==void 0&&l.jsxs("span",{className:"flex items-center gap-1 text-gray-600 text-sm",children:[l.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),l.jsx("span",{className:"font-semibold",children:e.views_count||0}),l.jsx("span",{children:"views"})]}),l.jsx("span",{className:"text-gray-500 text-sm",children:new Date(e.created_at).toLocaleDateString()})]})]}),l.jsx("h1",{className:"text-4xl font-bold text-gray-800 mb-6",children:e.title}),l.jsx(Kd,{likeableType:"App\\Models\\Post",likeableId:e.id}),l.jsx("div",{className:"mt-8 prose max-w-none",children:l.jsx("div",{className:"text-gray-700 leading-relaxed",dangerouslySetInnerHTML:{__html:e.content}})}),l.jsx(Qd,{commentableType:"App\\Models\\Post",commentableId:e.id})]})]})})]}),l.jsx(_n,{})]}):l.jsx("div",{className:"min-h-screen flex items-center justify-center",children:l.jsxs("div",{className:"text-center",children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Post not found"}),l.jsx(ct,{to:"/",className:"text-amber-600 hover:underline",children:"Go back home"})]})})},Dj=()=>{const{id:r}=Pd(),[e,t]=R.useState(null),[s,i]=R.useState(!0);R.useEffect(()=>{o()},[r]);const o=async()=>{try{const c=await hs.getDhamma(r);t(c.data?.data)}catch(c){console.error("Error fetching dhamma:",c)}finally{i(!1)}};return s?l.jsx("div",{className:"flex items-center justify-center min-h-screen",children:l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-600"})}):e?l.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-amber-50 to-orange-50 flex flex-col",children:[l.jsx(Gs,{}),l.jsxs("div",{className:"flex flex-1 relative",children:[l.jsx("div",{className:"hidden md:block md:relative",children:l.jsx(An,{})}),l.jsx("main",{className:"flex-1 w-full md:w-[calc(100%-16rem)] container mx-auto px-4 py-8",children:l.jsxs("article",{className:"bg-white rounded-xl shadow-lg overflow-hidden max-w-4xl mx-auto",children:[e.image&&l.jsx("img",{src:e.image,alt:e.title,className:"w-full h-96 object-cover"}),l.jsxs("div",{className:"p-8",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsx("span",{className:"bg-amber-100 text-amber-800 px-3 py-1 rounded-full text-sm w-fit",children:"Dhamma Talk"}),e.speaker&&l.jsxs("span",{className:"text-gray-600 text-sm",children:[l.jsx("strong",{children:"Speaker:"})," ",e.speaker]})]}),l.jsxs("div",{className:"flex items-center gap-4",children:[e.views_count!==void 0&&l.jsxs("span",{className:"flex items-center gap-1 text-gray-600 text-sm",children:[l.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),l.jsx("span",{className:"font-semibold",children:e.views_count||0}),l.jsx("span",{children:"views"})]}),e.date&&l.jsx("span",{className:"text-gray-500 text-sm",children:new Date(e.date).toLocaleDateString()})]})]}),l.jsx("h1",{className:"text-4xl font-bold text-gray-800 mb-6",children:e.title}),l.jsx(Kd,{likeableType:"App\\Models\\Dhamma",likeableId:e.id}),l.jsx("div",{className:"mt-8 prose max-w-none",children:l.jsx("div",{className:"text-gray-700 leading-relaxed",dangerouslySetInnerHTML:{__html:e.content}})}),l.jsx(Qd,{commentableType:"App\\Models\\Dhamma",commentableId:e.id})]})]})})]}),l.jsx(_n,{})]}):l.jsx("div",{className:"min-h-screen flex items-center justify-center",children:l.jsxs("div",{className:"text-center",children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Dhamma Talk not found"}),l.jsx(ct,{to:"/",className:"text-amber-600 hover:underline",children:"Go back home"})]})})},Mj=()=>{const[r,e]=R.useState([]),[t,s]=R.useState(!0);R.useEffect(()=>{i()},[]);const i=async()=>{try{const o=await hs.getBiographies();e(o.data?.data||[])}catch(o){console.error("Error fetching biographies:",o)}finally{s(!1)}};return t?l.jsx("div",{className:"flex items-center justify-center min-h-screen",children:l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-600"})}):l.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-amber-50 to-orange-50 flex flex-col",children:[l.jsx(Gs,{}),l.jsxs("div",{className:"flex flex-1 relative",children:[l.jsx("div",{className:"hidden md:block md:relative",children:l.jsx(An,{})}),l.jsxs("main",{className:"flex-1 w-full md:w-[calc(100%-16rem)] container mx-auto px-4 py-8",children:[l.jsxs("div",{className:"mb-8",children:[l.jsx("h1",{className:"text-4xl font-bold text-gray-800 mb-2",children:"Biographies"}),l.jsx("p",{className:"text-gray-600",children:"Learn about the lives and teachings of great masters"})]}),r.length===0?l.jsx("div",{className:"bg-white rounded-xl shadow-lg p-12 text-center",children:l.jsx("p",{className:"text-gray-500 text-lg",children:"No biographies available at the moment."})}):l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(o=>l.jsxs(ct,{to:`/biographies/${o.id}`,className:"bg-white rounded-xl shadow-lg overflow-hidden hover:shadow-xl transition",children:[o.image&&l.jsx("img",{src:o.image,alt:o.name,className:"w-full h-64 object-cover"}),l.jsxs("div",{className:"p-6",children:[l.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:o.name}),o.title&&l.jsx("p",{className:"text-amber-600 text-sm font-medium mb-2",children:o.title}),o.birth_date&&l.jsxs("p",{className:"text-gray-500 text-sm mb-2",children:["Born: ",new Date(o.birth_date).toLocaleDateString()]}),o.biography&&l.jsxs("p",{className:"text-gray-600 text-sm line-clamp-3",children:[o.biography.substring(0,150),"..."]})]})]},o.id))})]})]}),l.jsx(_n,{})]})},Lj=()=>{const{id:r}=Pd(),[e,t]=R.useState(null),[s,i]=R.useState(!0);R.useEffect(()=>{o()},[r]);const o=async()=>{try{const c=await hs.getBiography(r);t(c.data?.data)}catch(c){console.error("Error fetching biography:",c)}finally{i(!1)}};return s?l.jsx("div",{className:"flex items-center justify-center min-h-screen",children:l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-600"})}):e?l.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-amber-50 to-orange-50 flex flex-col",children:[l.jsx(Gs,{}),l.jsxs("div",{className:"flex flex-1 relative",children:[l.jsx("div",{className:"hidden md:block md:relative",children:l.jsx(An,{})}),l.jsx("main",{className:"flex-1 w-full md:w-[calc(100%-16rem)] container mx-auto px-4 py-8",children:l.jsxs("article",{className:"bg-white rounded-xl shadow-lg overflow-hidden max-w-4xl mx-auto",children:[e.image&&l.jsx("img",{src:e.image,alt:e.name,className:"w-full h-96 object-cover"}),l.jsxs("div",{className:"p-8",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h1",{className:"text-4xl font-bold text-gray-800",children:e.name}),e.views_count!==void 0&&l.jsxs("span",{className:"flex items-center gap-1 text-gray-600 text-sm",children:[l.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),l.jsx("span",{className:"font-semibold",children:e.views_count||0}),l.jsx("span",{children:"views"})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6 text-sm text-gray-600",children:[e.birth_year&&l.jsxs("div",{children:[l.jsx("strong",{className:"text-gray-800",children:":"})," ",e.birth_year]}),e.sangha_entry_year&&l.jsxs("div",{children:[l.jsx("strong",{className:"text-gray-800",children:":"})," ",e.sangha_entry_year]}),e.disciples&&l.jsxs("div",{children:[l.jsx("strong",{className:"text-gray-800",children:":"})," ",e.disciples]}),e.teaching_monastery&&l.jsxs("div",{children:[l.jsx("strong",{className:"text-gray-800",children:" :"})," ",e.teaching_monastery]})]}),l.jsx(Kd,{likeableType:"App\\Models\\Biography",likeableId:e.id}),e.sangha_dhamma&&l.jsxs("div",{className:"mt-8 prose max-w-none",children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:""}),l.jsx("div",{className:"text-gray-700 whitespace-pre-wrap leading-relaxed",children:e.sangha_dhamma})]}),l.jsx(Qd,{commentableType:"App\\Models\\Biography",commentableId:e.id})]})]})})]}),l.jsx(_n,{})]}):l.jsx("div",{className:"min-h-screen flex items-center justify-center",children:l.jsxs("div",{className:"text-center",children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Biography not found"}),l.jsx(ct,{to:"/biographies",className:"text-amber-600 hover:underline",children:"Go back to biographies"})]})})},Oj=()=>{const[r,e]=R.useState([]),[t,s]=R.useState(!0);R.useEffect(()=>{i()},[]);const i=async()=>{try{const u=await hs.getDonations();e(u.data?.data||[])}catch(u){console.error("Error fetching donations:",u)}finally{s(!1)}};if(t)return l.jsx("div",{className:"flex items-center justify-center min-h-screen",children:l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-600"})});const o=r.reduce((u,h)=>u+parseFloat(h.amount||0),0),c=r.length;return l.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-amber-50 to-orange-50 flex flex-col",children:[l.jsx(Gs,{}),l.jsxs("div",{className:"flex flex-1 relative",children:[l.jsx("div",{className:"hidden md:block md:relative",children:l.jsx(An,{})}),l.jsxs("main",{className:"flex-1 w-full md:w-[calc(100%-16rem)] container mx-auto px-4 py-8",children:[l.jsxs("div",{className:"mb-8",children:[l.jsx("h1",{className:"text-4xl font-bold text-gray-800 mb-2",children:"Donations"}),l.jsx("p",{className:"text-gray-600",children:"Generosity helps spread the teachings of the Buddha"})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[l.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Total Donations"}),l.jsxs("p",{className:"text-3xl font-bold text-amber-600",children:[o.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:0})," MMK"]})]}),l.jsx("div",{className:"text-4xl",children:""})]})}),l.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Total Donors"}),l.jsx("p",{className:"text-3xl font-bold text-amber-600",children:c})]}),l.jsx("div",{className:"text-4xl",children:""})]})})]}),r.length===0?l.jsx("div",{className:"bg-white rounded-xl shadow-lg p-12 text-center",children:l.jsx("p",{className:"text-gray-500 text-lg",children:"No donations available at the moment."})}):l.jsx("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"w-full",children:[l.jsx("thead",{className:"bg-amber-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:"Donor Name"}),l.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:"Amount"}),l.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:"Date"}),l.jsx("th",{className:"px-6 py-4 text-left text-xs font-medium text-gray-700 uppercase tracking-wider",children:"Purpose"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.map(u=>l.jsxs("tr",{className:"hover:bg-amber-50 transition",children:[l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("div",{className:"text-sm font-medium text-gray-900",children:u.donor_name||"Anonymous"})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsxs("div",{className:"text-sm font-semibold text-amber-600",children:[parseFloat(u.amount||0).toLocaleString("en-US")," MMK"]})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("div",{className:"text-sm text-gray-500",children:new Date(u.created_at).toLocaleDateString()})}),l.jsx("td",{className:"px-6 py-4",children:l.jsx("div",{className:"text-sm text-gray-500",children:u.purpose||"General Donation"})})]},u.id))})]})})})]})]}),l.jsx(_n,{})]})},Bj=()=>{const[r,e]=R.useState(null),[t,s]=R.useState(!0);R.useEffect(()=>{i()},[]);const i=async()=>{try{const x=await hs.getMonasteries();e(x.data?.data)}catch(x){console.error("Error fetching monasteries:",x)}finally{s(!1)}};if(t)return l.jsx("div",{className:"flex items-center justify-center min-h-screen",children:l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-600"})});if(!r)return l.jsx("div",{className:"min-h-screen flex items-center justify-center",children:l.jsx("div",{className:"text-center",children:l.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"No data available"})})});const{title:o,subtitle:c,monasteries:u,buildings:h}=r,p=u.reduce((x,b)=>x+(b.monks||0),0)+h.reduce((x,b)=>x+(b.monks||0),0),f=u.reduce((x,b)=>x+(b.novices||0),0)+h.reduce((x,b)=>x+(b.novices||0),0),g=p+f;return l.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-amber-50 to-orange-50 flex flex-col",children:[l.jsx(Gs,{}),l.jsxs("div",{className:"flex flex-1 relative",children:[l.jsx("div",{className:"hidden md:block md:relative",children:l.jsx(An,{})}),l.jsxs("main",{className:"flex-1 w-full md:w-[calc(100%-16rem)] container mx-auto px-4 py-8",children:[l.jsxs("div",{className:"mb-8 text-center",children:[l.jsx("h1",{className:"text-4xl font-bold text-gray-800 mb-2",children:o}),l.jsx("p",{className:"text-lg text-gray-600",children:c})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[l.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Total Monks"}),l.jsx("p",{className:"text-3xl font-bold text-amber-600",children:p})]}),l.jsx("div",{className:"text-4xl",children:""})]})}),l.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Total Novices"}),l.jsx("p",{className:"text-3xl font-bold text-amber-600",children:f})]}),l.jsx("div",{className:"text-4xl",children:""})]})}),l.jsx("div",{className:"bg-white rounded-xl shadow-lg p-6",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Grand Total"}),l.jsx("p",{className:"text-3xl font-bold text-amber-600",children:g})]}),l.jsx("div",{className:"text-4xl",children:""})]})})]}),l.jsxs("div",{className:"mb-8",children:[l.jsxs("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:["Monasteries (",u.length,")"]}),l.jsx("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-amber-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:"No."}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:"Name"}),l.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-700 uppercase",children:"Monks"}),l.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-700 uppercase",children:"Novices"}),l.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-700 uppercase",children:"Total"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:u.map((x,b)=>l.jsxs("tr",{className:"hover:bg-amber-50 transition",children:[l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("div",{className:"text-sm font-medium text-gray-900",children:b+1})}),l.jsx("td",{className:"px-6 py-4",children:l.jsx("div",{className:"text-sm font-medium text-gray-900",children:x.name})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:l.jsx("div",{className:"text-sm text-gray-900",children:x.monks||0})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:l.jsx("div",{className:"text-sm text-gray-900",children:x.novices||0})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:l.jsx("div",{className:"text-sm font-semibold text-amber-600",children:x.total||0})})]},x.id))})]})})})]}),h&&h.length>0&&l.jsxs("div",{children:[l.jsxs("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:["Buildings (",h.length,")"]}),l.jsx("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:l.jsx("div",{className:"overflow-x-auto",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-amber-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:"No."}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:"Name"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-700 uppercase",children:"Monastery Name"}),l.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-700 uppercase",children:"Monks"}),l.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-700 uppercase",children:"Novices"}),l.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-700 uppercase",children:"Total"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:h.map((x,b)=>l.jsxs("tr",{className:"hover:bg-amber-50 transition",children:[l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("div",{className:"text-sm font-medium text-gray-900",children:b+1})}),l.jsx("td",{className:"px-6 py-4",children:l.jsx("div",{className:"text-sm font-medium text-gray-900",children:x.name})}),l.jsx("td",{className:"px-6 py-4",children:l.jsx("div",{className:"text-sm text-gray-500",children:x.monastery_name||"N/A"})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:l.jsx("div",{className:"text-sm text-gray-900",children:x.monks||0})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:l.jsx("div",{className:"text-sm text-gray-900",children:x.novices||0})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:l.jsx("div",{className:"text-sm font-semibold text-amber-600",children:x.total||0})})]},x.id))})]})})})]})]})]}),l.jsx(_n,{})]})},Pj=()=>{const[r,e]=R.useState([]),[t,s]=R.useState(!0),[i,o]=R.useState(1),[c,u]=R.useState(!1);R.useEffect(()=>{h(i)},[i]);const h=async(p=1)=>{try{const f=await hs.getLessons({page:p}),g=f.data?.data||[];e(b=>p===1?g:[...b,...g]);const x=f.data?.pagination;u(x?.has_more_pages||!1)}catch(f){console.error("Error fetching lessons:",f)}finally{s(!1)}};return t?l.jsx("div",{className:"flex items-center justify-center min-h-screen",children:l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-600"})}):l.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-amber-50 to-orange-50 flex flex-col",children:[l.jsx(Gs,{}),l.jsxs("div",{className:"flex flex-1 relative",children:[l.jsx("div",{className:"hidden md:block md:relative",children:l.jsx(An,{})}),l.jsxs("main",{className:"flex-1 w-full md:w-[calc(100%-16rem)] container mx-auto px-4 py-8",children:[l.jsxs("div",{className:"mb-8",children:[l.jsx("h1",{className:"text-4xl font-bold text-gray-800 mb-2",children:"Lessons"}),l.jsx("p",{className:"text-gray-600",children:"Browse all published lessons"})]}),r.length===0?l.jsx("div",{className:"bg-white rounded-xl shadow-lg p-8 text-center",children:l.jsx("p",{className:"text-gray-500",children:"No lessons available at the moment."})}):l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(p=>l.jsx(ct,{to:`/lessons/${p.id}`,className:"bg-white rounded-xl shadow-lg overflow-hidden hover:shadow-xl transition-shadow",children:l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-3",children:[l.jsx("span",{className:"bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-xs",children:p.class?.name||"N/A"}),l.jsx("span",{className:"text-gray-500 text-xs",children:p.lesson_date?new Date(p.lesson_date).toLocaleDateString():"N/A"})]}),l.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-2 line-clamp-2",children:p.title}),p.description&&l.jsx("p",{className:"text-gray-600 text-sm mb-3 line-clamp-3",children:p.description}),l.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[l.jsx("span",{children:p.subject?.name||"N/A"}),l.jsx("span",{children:p.teacher?.name||"N/A"})]}),p.duration_minutes&&l.jsxs("div",{className:"mt-2 text-xs text-gray-400",children:["Duration: ",p.duration_minutes," minutes"]})]})},p.id))}),c&&l.jsx("div",{className:"mt-8 flex justify-center",children:l.jsx("button",{onClick:()=>o(p=>p+1),className:"px-6 py-3 bg-amber-600 text-white rounded-lg hover:bg-amber-700 transition",children:"Load More"})})]})]})]}),l.jsx(_n,{})]})},Fj=()=>{const{id:r}=Pd(),[e,t]=R.useState(null),[s,i]=R.useState(!0),[o,c]=R.useState(null);R.useEffect(()=>{u()},[r]);const u=async()=>{try{const h=await hs.getLesson(r);t(h.data?.data)}catch(h){console.error("Error fetching lesson:",h)}finally{i(!1)}};return s?l.jsx("div",{className:"flex items-center justify-center min-h-screen",children:l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-600"})}):e?l.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-amber-50 to-orange-50 flex flex-col",children:[l.jsx(Gs,{}),l.jsxs("div",{className:"flex flex-1 relative",children:[l.jsx("div",{className:"hidden md:block md:relative",children:l.jsx(An,{})}),l.jsx("main",{className:"flex-1 w-full md:w-[calc(100%-16rem)] container mx-auto px-4 py-8",children:l.jsx("article",{className:"bg-white rounded-xl shadow-lg overflow-hidden max-w-4xl mx-auto",children:l.jsxs("div",{className:"p-8",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsxs("div",{className:"flex flex-wrap gap-2",children:[l.jsx("span",{className:"bg-blue-100 text-blue-800 px-3 py-1 rounded-full text-sm",children:e.class?.name||"N/A"}),l.jsx("span",{className:"bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm",children:e.subject?.name||"N/A"})]}),l.jsxs("div",{className:"flex items-center gap-4",children:[e.views_count!==void 0&&l.jsxs("span",{className:"flex items-center gap-1 text-gray-600 text-sm",children:[l.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),l.jsx("span",{className:"font-semibold",children:e.views_count||0}),l.jsx("span",{children:"views"})]}),e.lesson_date&&l.jsx("span",{className:"text-gray-500 text-sm",children:new Date(e.lesson_date).toLocaleDateString()})]})]}),l.jsx("h1",{className:"text-4xl font-bold text-gray-800 mb-4",children:e.title}),e.description&&l.jsx("p",{className:"text-lg text-gray-600 mb-4",children:e.description}),l.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6 text-sm",children:[e.teacher&&l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-500",children:"Teacher:"}),l.jsx("p",{className:"font-semibold text-gray-800",children:e.teacher.name})]}),e.duration_minutes&&l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-500",children:"Duration:"}),l.jsxs("p",{className:"font-semibold text-gray-800",children:[e.duration_minutes," minutes"]})]}),e.class&&l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-500",children:"Class:"}),l.jsx("p",{className:"font-semibold text-gray-800",children:e.class.name})]}),e.subject&&l.jsxs("div",{children:[l.jsx("span",{className:"text-gray-500",children:"Subject:"}),l.jsx("p",{className:"font-semibold text-gray-800",children:e.subject.name})]})]}),l.jsx(Kd,{likeableType:"App\\Models\\Lesson",likeableId:e.id}),e.content&&l.jsx("div",{className:"mt-8 prose max-w-none",children:l.jsx("div",{className:"text-gray-700 leading-relaxed",dangerouslySetInnerHTML:{__html:e.content}})}),e.attachments&&e.attachments.length>0&&l.jsxs("div",{className:"mt-8",children:[l.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-4",children:"Attachments"}),l.jsx("div",{className:"space-y-2",children:e.attachments.map((h,p)=>l.jsx("button",{onClick:()=>c(h),className:"w-full text-left p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}),l.jsxs("span",{className:"text-blue-600 hover:underline",children:["Attachment ",p+1]})]})},p))})]}),l.jsx(Qd,{commentableType:"App\\Models\\Lesson",commentableId:e.id})]})})})]}),l.jsx(_n,{}),o&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 p-0",children:l.jsxs("div",{className:"bg-white w-full h-full flex flex-col overflow-hidden",children:[l.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-gray-200",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Text Book PDF"}),l.jsx("button",{onClick:()=>c(null),className:"text-gray-500 hover:text-gray-700",children:""})]}),l.jsx("div",{className:"flex-1 bg-gray-50",children:l.jsx("iframe",{src:`${o}#toolbar=1&navpanes=0`,title:"Attachment Preview",className:"w-full h-full",frameBorder:"0"})})]})})]}):l.jsx("div",{className:"min-h-screen flex items-center justify-center",children:l.jsxs("div",{className:"text-center",children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Lesson not found"}),l.jsx(ct,{to:"/lessons",className:"text-amber-600 hover:underline",children:"Go back to lessons"})]})})},Uj=()=>{const[r,e]=R.useState({name:"",age:"",phone:"",password:"",password_confirmation:""}),[t,s]=R.useState(""),[i,o]=R.useState(!1);pi();const c=async u=>{if(u.preventDefault(),s(""),r.password!==r.password_confirmation){s("Passwords do not match");return}if(parseInt(r.age)<1||parseInt(r.age)>150){s("Please enter a valid age");return}o(!0);try{(await ui.register({name:r.name,age:parseInt(r.age),phone:r.phone,password:r.password,password_confirmation:r.password_confirmation})).token&&(window.location.href="/")}catch(h){const p=h.response?.data?.message||h.response?.data?.errors?.phone?.[0]||h.response?.data?.errors?.password?.[0]||"Registration failed. Please try again.";s(p)}finally{o(!1)}};return l.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-amber-50 to-orange-50 flex flex-col",children:[l.jsx(Gs,{}),l.jsx("div",{className:"flex-1 flex items-center justify-center py-12 px-4",children:l.jsxs("div",{className:"max-w-md w-full bg-white rounded-2xl shadow-xl p-8",children:[l.jsxs("div",{className:"text-center mb-8",children:[l.jsx("h1",{className:"text-3xl font-bold text-amber-800 mb-2",children:"Register"}),l.jsx("p",{className:"text-gray-600",children:"Create your account"})]}),t&&l.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded-lg",children:t}),l.jsxs("form",{onSubmit:c,className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Name *"}),l.jsx("input",{id:"name",type:"text",required:!0,value:r.name,onChange:u=>e({...r,name:u.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent outline-none transition",placeholder:"Enter your name"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"age",className:"block text-sm font-medium text-gray-700 mb-2",children:"Age *"}),l.jsx("input",{id:"age",type:"number",required:!0,min:"1",max:"150",value:r.age,onChange:u=>e({...r,age:u.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent outline-none transition",placeholder:"Enter your age"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number *"}),l.jsx("input",{id:"phone",type:"tel",required:!0,value:r.phone,onChange:u=>e({...r,phone:u.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent outline-none transition",placeholder:"Enter your phone number"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Password *"}),l.jsx("input",{id:"password",type:"password",required:!0,minLength:"8",value:r.password,onChange:u=>e({...r,password:u.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent outline-none transition",placeholder:"Enter your password (min 8 characters)"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"password_confirmation",className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm Password *"}),l.jsx("input",{id:"password_confirmation",type:"password",required:!0,value:r.password_confirmation,onChange:u=>e({...r,password_confirmation:u.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent outline-none transition",placeholder:"Confirm your password"})]}),l.jsx("button",{type:"submit",disabled:i,className:"w-full bg-amber-600 text-white py-3 rounded-lg font-semibold hover:bg-amber-700 focus:outline-none focus:ring-2 focus:ring-amber-500 focus:ring-offset-2 transition disabled:opacity-50 disabled:cursor-not-allowed",children:i?"Registering...":"Register"}),l.jsx("div",{className:"text-center",children:l.jsxs("p",{className:"text-gray-600",children:["Already have an account?"," ",l.jsx(ct,{to:"/login",className:"text-amber-600 hover:text-amber-700 font-semibold",children:"Login"})]})})]})]})})]})},Ij=()=>{const[r,e]=R.useState({phone:"",password:""}),[t,s]=R.useState(""),[i,o]=R.useState(!1);pi();const c=async u=>{u.preventDefault(),s(""),o(!0);try{await ui.login(r),window.location.href="/"}catch(h){s(h.response?.data?.message||"Login failed. Please check your credentials.")}finally{o(!1)}};return l.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-amber-50 to-orange-50 flex flex-col",children:[l.jsx(Gs,{}),l.jsx("div",{className:"flex-1 flex items-center justify-center py-12 px-4",children:l.jsxs("div",{className:"max-w-md w-full bg-white rounded-2xl shadow-xl p-8",children:[l.jsxs("div",{className:"text-center mb-8",children:[l.jsx("h1",{className:"text-3xl font-bold text-amber-800 mb-2",children:"Login"}),l.jsx("p",{className:"text-gray-600",children:"Sign in to your account"})]}),t&&l.jsx("div",{className:"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded-lg",children:t}),l.jsxs("form",{onSubmit:c,className:"space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),l.jsx("input",{id:"phone",type:"tel",required:!0,value:r.phone,onChange:u=>e({...r,phone:u.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent outline-none transition",placeholder:"Enter your phone number"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),l.jsx("input",{id:"password",type:"password",required:!0,value:r.password,onChange:u=>e({...r,password:u.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent outline-none transition",placeholder:"Enter your password"})]}),l.jsx("button",{type:"submit",disabled:i,className:"w-full bg-amber-600 text-white py-3 rounded-lg font-semibold hover:bg-amber-700 focus:outline-none focus:ring-2 focus:ring-amber-500 focus:ring-offset-2 transition disabled:opacity-50 disabled:cursor-not-allowed",children:i?"Logging in...":"Login"}),l.jsx("div",{className:"text-center",children:l.jsxs("p",{className:"text-gray-600",children:["Don't have an account?"," ",l.jsx(ct,{to:"/register",className:"text-amber-600 hover:text-amber-700 font-semibold",children:"Register"})]})})]})]})})]})},ps=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),rm=[.001,0,0,.001,0,0],Ff=1.35,Is={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Un={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},el="pdfjs_internal_editor_",je={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},Ue={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},sw={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},ss={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Ko={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},kt={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},pr={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},gl={ERRORS:0,WARNINGS:1,INFOS:5},Rr={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},Kc={moveTo:0,lineTo:1,curveTo:2,closePath:3},nw={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let Zd=gl.WARNINGS;function zj(r){Number.isInteger(r)&&(Zd=r)}function Hj(){return Zd}function Jd(r){Zd>=gl.INFOS&&console.info(`Info: ${r}`)}function Ce(r){Zd>=gl.WARNINGS&&console.warn(`Warning: ${r}`)}function dt(r){throw new Error(r)}function $e(r,e){r||dt(e)}function qj(r){switch(r?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function Im(r,e=null,t=null){if(!r)return null;if(t&&typeof r=="string"&&(t.addDefaultProtocol&&r.startsWith("www.")&&r.match(/\./g)?.length>=2&&(r=`http://${r}`),t.tryConvertEncoding))try{r=Xj(r)}catch{}const s=e?URL.parse(r,e):URL.parse(r);return qj(s)?s:null}function zm(r,e,t=!1){const s=URL.parse(r);return s?(s.hash=e,s.href):t&&Im(r,"http://example.com")?r.split("#",1)[0]+`${e?`#${e}`:""}`:""}function Le(r,e,t,s=!1){return Object.defineProperty(r,e,{value:t,enumerable:!s,configurable:!0,writable:!1}),t}const Sa=(function(){function e(t,s){this.message=t,this.name=s}return e.prototype=new Error,e.constructor=e,e})();class Xy extends Sa{constructor(e,t){super(e,"PasswordException"),this.code=t}}class Uf extends Sa{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class Rd extends Sa{constructor(e){super(e,"InvalidPDFException")}}class tl extends Sa{constructor(e,t,s){super(e,"ResponseException"),this.status=t,this.missing=s}}class Vj extends Sa{constructor(e){super(e,"FormatError")}}class fi extends Sa{constructor(e){super(e,"AbortException")}}function iw(r){(typeof r!="object"||r?.length===void 0)&&dt("Invalid argument for bytesToString");const e=r.length,t=8192;if(e<t)return String.fromCharCode.apply(null,r);const s=[];for(let i=0;i<e;i+=t){const o=Math.min(i+t,e),c=r.subarray(i,o);s.push(String.fromCharCode.apply(null,c))}return s.join("")}function xl(r){typeof r!="string"&&dt("Invalid argument for stringToBytes");const e=r.length,t=new Uint8Array(e);for(let s=0;s<e;++s)t[s]=r.charCodeAt(s)&255;return t}function Gj(r){return String.fromCharCode(r>>24&255,r>>16&255,r>>8&255,r&255)}function $j(){const r=new Uint8Array(4);return r[0]=1,new Uint32Array(r.buffer,0,1)[0]===1}function Yj(){try{return new Function(""),!0}catch{return!1}}class Yt{static get isLittleEndian(){return Le(this,"isLittleEndian",$j())}static get isEvalSupported(){return Le(this,"isEvalSupported",Yj())}static get isOffscreenCanvasSupported(){return Le(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return Le(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:e,userAgent:t}=navigator;return Le(this,"platform",{isAndroid:t.includes("Android"),isLinux:e.includes("Linux"),isMac:e.includes("Mac"),isWindows:e.includes("Win"),isFirefox:t.includes("Firefox")})}static get isCSSRoundSupported(){return Le(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const If=Array.from(Array(256).keys(),r=>r.toString(16).padStart(2,"0"));class fe{static makeHexColor(e,t,s){return`#${If[e]}${If[t]}${If[s]}`}static domMatrixToTransform(e){return[e.a,e.b,e.c,e.d,e.e,e.f]}static scaleMinMax(e,t){let s;e[0]?(e[0]<0&&(s=t[0],t[0]=t[2],t[2]=s),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(s=t[1],t[1]=t[3],t[3]=s),t[1]*=e[3],t[3]*=e[3]):(s=t[0],t[0]=t[1],t[1]=s,s=t[2],t[2]=t[3],t[3]=s,e[1]<0&&(s=t[1],t[1]=t[3],t[3]=s),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(s=t[0],t[0]=t[2],t[2]=s),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static multiplyByDOMMatrix(e,t){return[e[0]*t.a+e[2]*t.b,e[1]*t.a+e[3]*t.b,e[0]*t.c+e[2]*t.d,e[1]*t.c+e[3]*t.d,e[0]*t.e+e[2]*t.f+e[4],e[1]*t.e+e[3]*t.f+e[5]]}static applyTransform(e,t,s=0){const i=e[s],o=e[s+1];e[s]=i*t[0]+o*t[2]+t[4],e[s+1]=i*t[1]+o*t[3]+t[5]}static applyTransformToBezier(e,t,s=0){const i=t[0],o=t[1],c=t[2],u=t[3],h=t[4],p=t[5];for(let f=0;f<6;f+=2){const g=e[s+f],x=e[s+f+1];e[s+f]=g*i+x*c+h,e[s+f+1]=g*o+x*u+p}}static applyInverseTransform(e,t){const s=e[0],i=e[1],o=t[0]*t[3]-t[1]*t[2];e[0]=(s*t[3]-i*t[2]+t[2]*t[5]-t[4]*t[3])/o,e[1]=(-s*t[1]+i*t[0]+t[4]*t[1]-t[5]*t[0])/o}static axialAlignedBoundingBox(e,t,s){const i=t[0],o=t[1],c=t[2],u=t[3],h=t[4],p=t[5],f=e[0],g=e[1],x=e[2],b=e[3];let w=i*f+h,_=w,S=i*x+h,A=S,L=u*g+p,O=L,D=u*b+p,I=D;if(o!==0||c!==0){const C=o*f,P=o*x,k=c*g,N=c*b;w+=k,A+=k,S+=N,_+=N,L+=C,I+=C,D+=P,O+=P}s[0]=Math.min(s[0],w,S,_,A),s[1]=Math.min(s[1],L,D,O,I),s[2]=Math.max(s[2],w,S,_,A),s[3]=Math.max(s[3],L,D,O,I)}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e,t){const s=e[0],i=e[1],o=e[2],c=e[3],u=s**2+i**2,h=s*o+i*c,p=o**2+c**2,f=(u+p)/2,g=Math.sqrt(f**2-(u*p-h**2));t[0]=Math.sqrt(f+g||1),t[1]=Math.sqrt(f-g||1)}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const s=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),i=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(s>i)return null;const o=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),c=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return o>c?null:[s,o,i,c]}static pointBoundingBox(e,t,s){s[0]=Math.min(s[0],e),s[1]=Math.min(s[1],t),s[2]=Math.max(s[2],e),s[3]=Math.max(s[3],t)}static rectBoundingBox(e,t,s,i,o){o[0]=Math.min(o[0],e,s),o[1]=Math.min(o[1],t,i),o[2]=Math.max(o[2],e,s),o[3]=Math.max(o[3],t,i)}static#e(e,t,s,i,o,c,u,h,p,f){if(p<=0||p>=1)return;const g=1-p,x=p*p,b=x*p,w=g*(g*(g*e+3*p*t)+3*x*s)+b*i,_=g*(g*(g*o+3*p*c)+3*x*u)+b*h;f[0]=Math.min(f[0],w),f[1]=Math.min(f[1],_),f[2]=Math.max(f[2],w),f[3]=Math.max(f[3],_)}static#t(e,t,s,i,o,c,u,h,p,f,g,x){if(Math.abs(p)<1e-12){Math.abs(f)>=1e-12&&this.#e(e,t,s,i,o,c,u,h,-g/f,x);return}const b=f**2-4*g*p;if(b<0)return;const w=Math.sqrt(b),_=2*p;this.#e(e,t,s,i,o,c,u,h,(-f+w)/_,x),this.#e(e,t,s,i,o,c,u,h,(-f-w)/_,x)}static bezierBoundingBox(e,t,s,i,o,c,u,h,p){p[0]=Math.min(p[0],e,u),p[1]=Math.min(p[1],t,h),p[2]=Math.max(p[2],e,u),p[3]=Math.max(p[3],t,h),this.#t(e,s,o,u,t,i,c,h,3*(-e+3*(s-o)+u),6*(e-2*s+o),3*(s-e),p),this.#t(e,s,o,u,t,i,c,h,3*(-t+3*(i-c)+h),6*(t-2*i+c),3*(i-t),p)}}function Xj(r){return decodeURIComponent(escape(r))}let zf=null,Wy=null;function aw(r){return zf||(zf=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Wy=new Map([["","t"]])),r.replaceAll(zf,(e,t,s)=>t?t.normalize("NFKC"):Wy.get(s))}function Hm(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const r=new Uint8Array(32);return crypto.getRandomValues(r),iw(r)}const qm="pdfjs_internal_id_";function Wj(r,e,t){if(!Array.isArray(t)||t.length<2)return!1;const[s,i,...o]=t;if(!r(s)&&!Number.isInteger(s)||!e(i))return!1;const c=o.length;let u=!0;switch(i.name){case"XYZ":if(c<2||c>3)return!1;break;case"Fit":case"FitB":return c===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(c>1)return!1;break;case"FitR":if(c!==4)return!1;u=!1;break;default:return!1}for(const h of o)if(!(typeof h=="number"||u&&h===null))return!1;return!0}function cs(r,e,t){return Math.min(Math.max(r,e),t)}function rw(r){return Uint8Array.prototype.toBase64?r.toBase64():btoa(iw(r))}function Kj(r){return Uint8Array.fromBase64?Uint8Array.fromBase64(r):xl(atob(r))}typeof Promise.try!="function"&&(Promise.try=function(r,...e){return new Promise(t=>{t(r(...e))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(r){return r.reduce((e,t)=>e+t,0)});class sl{static textContent(e){const t=[],s={items:t,styles:Object.create(null)};function i(o){if(!o)return;let c=null;const u=o.name;if(u==="#text")c=o.value;else if(sl.shouldBuildText(u))o?.attributes?.textContent?c=o.attributes.textContent:o.value&&(c=o.value);else return;if(c!==null&&t.push({str:c}),!!o.children)for(const h of o.children)i(h)}return i(e),s}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}class Vm{static setupStorage(e,t,s,i,o){const c=i.getValue(t,{value:null});switch(s.name){case"textarea":if(c.value!==null&&(e.textContent=c.value),o==="print")break;e.addEventListener("input",u=>{i.setValue(t,{value:u.target.value})});break;case"input":if(s.attributes.type==="radio"||s.attributes.type==="checkbox"){if(c.value===s.attributes.xfaOn?e.setAttribute("checked",!0):c.value===s.attributes.xfaOff&&e.removeAttribute("checked"),o==="print")break;e.addEventListener("change",u=>{i.setValue(t,{value:u.target.checked?u.target.getAttribute("xfaOn"):u.target.getAttribute("xfaOff")})})}else{if(c.value!==null&&e.setAttribute("value",c.value),o==="print")break;e.addEventListener("input",u=>{i.setValue(t,{value:u.target.value})})}break;case"select":if(c.value!==null){e.setAttribute("value",c.value);for(const u of s.children)u.attributes.value===c.value?u.attributes.selected=!0:u.attributes.hasOwnProperty("selected")&&delete u.attributes.selected}e.addEventListener("input",u=>{const h=u.target.options,p=h.selectedIndex===-1?"":h[h.selectedIndex].value;i.setValue(t,{value:p})});break}}static setAttributes({html:e,element:t,storage:s=null,intent:i,linkService:o}){const{attributes:c}=t,u=e instanceof HTMLAnchorElement;c.type==="radio"&&(c.name=`${c.name}-${i}`);for(const[h,p]of Object.entries(c))if(p!=null)switch(h){case"class":p.length&&e.setAttribute(h,p.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",p);break;case"style":Object.assign(e.style,p);break;case"textContent":e.textContent=p;break;default:(!u||h!=="href"&&h!=="newWindow")&&e.setAttribute(h,p)}u&&o.addLinkAttributes(e,c.href,c.newWindow),s&&c.dataId&&this.setupStorage(e,c.dataId,t,s)}static render(e){const t=e.annotationStorage,s=e.linkService,i=e.xfaHtml,o=e.intent||"display",c=document.createElement(i.name);i.attributes&&this.setAttributes({html:c,element:i,intent:o,linkService:s});const u=o!=="richText",h=e.div;if(h.append(c),e.viewport){const g=`matrix(${e.viewport.transform.join(",")})`;h.style.transform=g}u&&h.setAttribute("class","xfaLayer xfaFont");const p=[];if(i.children.length===0){if(i.value){const g=document.createTextNode(i.value);c.append(g),u&&sl.shouldBuildText(i.name)&&p.push(g)}return{textDivs:p}}const f=[[i,-1,c]];for(;f.length>0;){const[g,x,b]=f.at(-1);if(x+1===g.children.length){f.pop();continue}const w=g.children[++f.at(-1)[1]];if(w===null)continue;const{name:_}=w;if(_==="#text"){const A=document.createTextNode(w.value);p.push(A),b.append(A);continue}const S=w?.attributes?.xmlns?document.createElementNS(w.attributes.xmlns,_):document.createElement(_);if(b.append(S),w.attributes&&this.setAttributes({html:S,element:w,storage:t,intent:o,linkService:s}),w.children?.length>0)f.push([w,-1,S]);else if(w.value){const A=document.createTextNode(w.value);u&&sl.shouldBuildText(_)&&p.push(A),S.append(A)}}for(const g of h.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))g.setAttribute("readOnly",!0);return{textDivs:p}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const li="http://www.w3.org/2000/svg";class wa{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}async function Ir(r,e="text"){if($o(r,document.baseURI)){const t=await fetch(r);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,s)=>{const i=new XMLHttpRequest;i.open("GET",r,!0),i.responseType=e,i.onreadystatechange=()=>{if(i.readyState===XMLHttpRequest.DONE){if(i.status===200||i.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(i.response);return}t(i.responseText);return}s(new Error(i.statusText))}},i.send(null)})}class yl{constructor({viewBox:e,userUnit:t,scale:s,rotation:i,offsetX:o=0,offsetY:c=0,dontFlip:u=!1}){this.viewBox=e,this.userUnit=t,this.scale=s,this.rotation=i,this.offsetX=o,this.offsetY=c,s*=t;const h=(e[2]+e[0])/2,p=(e[3]+e[1])/2;let f,g,x,b;switch(i%=360,i<0&&(i+=360),i){case 180:f=-1,g=0,x=0,b=1;break;case 90:f=0,g=1,x=1,b=0;break;case 270:f=0,g=-1,x=-1,b=0;break;case 0:f=1,g=0,x=0,b=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}u&&(x=-x,b=-b);let w,_,S,A;f===0?(w=Math.abs(p-e[1])*s+o,_=Math.abs(h-e[0])*s+c,S=(e[3]-e[1])*s,A=(e[2]-e[0])*s):(w=Math.abs(h-e[0])*s+o,_=Math.abs(p-e[1])*s+c,S=(e[2]-e[0])*s,A=(e[3]-e[1])*s),this.transform=[f*s,g*s,x*s,b*s,w-f*s*h-x*s*p,_-g*s*h-b*s*p],this.width=S,this.height=A}get rawDims(){const e=this.viewBox;return Le(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:s=this.offsetX,offsetY:i=this.offsetY,dontFlip:o=!1}={}){return new yl({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:t,offsetX:s,offsetY:i,dontFlip:o})}convertToViewportPoint(e,t){const s=[e,t];return fe.applyTransform(s,this.transform),s}convertToViewportRectangle(e){const t=[e[0],e[1]];fe.applyTransform(t,this.transform);const s=[e[2],e[3]];return fe.applyTransform(s,this.transform),[t[0],t[1],s[0],s[1]]}convertToPdfPoint(e,t){const s=[e,t];return fe.applyInverseTransform(s,this.transform),s}}class eu extends Sa{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function bl(r){const e=r.length;let t=0;for(;t<e&&r[t].trim()==="";)t++;return r.substring(t,t+5).toLowerCase()==="data:"}function tu(r){return typeof r=="string"&&/\.pdf$/i.test(r)}function ow(r){return[r]=r.split(/[#?]/,1),r.substring(r.lastIndexOf("/")+1)}function lw(r,e="document.pdf"){if(typeof r!="string")return e;if(bl(r))return Ce('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const s=(u=>{try{return new URL(u)}catch{try{return new URL(decodeURIComponent(u))}catch{try{return new URL(u,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(u),"https://foo.bar")}catch{return null}}}}})(r);if(!s)return e;const i=u=>{try{let h=decodeURIComponent(u);return h.includes("/")?(h=h.split("/").at(-1),h.test(/^\.pdf$/i)?h:u):h}catch{return u}},o=/\.pdf$/i,c=s.pathname.split("/").at(-1);if(o.test(c))return i(c);if(s.searchParams.size>0){const u=Array.from(s.searchParams.values()).reverse();for(const p of u)if(o.test(p))return i(p);const h=Array.from(s.searchParams.keys()).reverse();for(const p of h)if(o.test(p))return i(p)}if(s.hash){const h=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(s.hash);if(h)return i(h[0])}return e}class Ky{started=Object.create(null);times=[];time(e){e in this.started&&Ce(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||Ce(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:s}of this.times)t=Math.max(s.length,t);for(const{name:s,start:i,end:o}of this.times)e.push(`${s.padEnd(t)} ${o-i}ms
`);return e.join("")}}function $o(r,e){const t=e?URL.parse(r,e):URL.parse(r);return t?.protocol==="http:"||t?.protocol==="https:"}function qs(r){r.preventDefault()}function St(r){r.preventDefault(),r.stopPropagation()}function Qj(r){console.log("Deprecated API usage: "+r)}class Dd{static#e;static toDateObject(e){if(e instanceof Date)return e;if(!e||typeof e!="string")return null;this.#e||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const t=this.#e.exec(e);if(!t)return null;const s=parseInt(t[1],10);let i=parseInt(t[2],10);i=i>=1&&i<=12?i-1:0;let o=parseInt(t[3],10);o=o>=1&&o<=31?o:1;let c=parseInt(t[4],10);c=c>=0&&c<=23?c:0;let u=parseInt(t[5],10);u=u>=0&&u<=59?u:0;let h=parseInt(t[6],10);h=h>=0&&h<=59?h:0;const p=t[7]||"Z";let f=parseInt(t[8],10);f=f>=0&&f<=23?f:0;let g=parseInt(t[9],10)||0;return g=g>=0&&g<=59?g:0,p==="-"?(c+=f,u+=g):p==="+"&&(c-=f,u-=g),new Date(Date.UTC(s,i,o,c,u,h))}}function cw(r,{scale:e=1,rotation:t=0}){const{width:s,height:i}=r.attributes.style,o=[0,0,parseInt(s),parseInt(i)];return new yl({viewBox:o,userUnit:1,scale:e,rotation:t})}function zr(r){if(r.startsWith("#")){const e=parseInt(r.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return r.startsWith("rgb(")?r.slice(4,-1).split(",").map(e=>parseInt(e)):r.startsWith("rgba(")?r.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(Ce(`Not a valid color format: "${r}"`),[0,0,0])}function Zj(r){const e=document.createElement("span");e.style.visibility="hidden",e.style.colorScheme="only light",document.body.append(e);for(const t of r.keys()){e.style.color=t;const s=window.getComputedStyle(e).color;r.set(t,zr(s))}e.remove()}function At(r){const{a:e,b:t,c:s,d:i,e:o,f:c}=r.getTransform();return[e,t,s,i,o,c]}function Mn(r){const{a:e,b:t,c:s,d:i,e:o,f:c}=r.getTransform().invertSelf();return[e,t,s,i,o,c]}function Gi(r,e,t=!1,s=!0){if(e instanceof yl){const{pageWidth:i,pageHeight:o}=e.rawDims,{style:c}=r,u=Yt.isCSSRoundSupported,h=`var(--total-scale-factor) * ${i}px`,p=`var(--total-scale-factor) * ${o}px`,f=u?`round(down, ${h}, var(--scale-round-x))`:`calc(${h})`,g=u?`round(down, ${p}, var(--scale-round-y))`:`calc(${p})`;!t||e.rotation%180===0?(c.width=f,c.height=g):(c.width=g,c.height=f)}s&&r.setAttribute("data-main-rotation",e.rotation)}class yn{constructor(){const{pixelRatio:e}=yn;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(e,t,s,i,o=-1){let c=1/0,u=1/0,h=1/0;s=yn.capPixels(s,o),s>0&&(c=Math.sqrt(s/(e*t))),i!==-1&&(u=i/e,h=i/t);const p=Math.min(c,u,h);return this.sx>p||this.sy>p?(this.sx=p,this.sy=p,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(e,t){if(t>=0){const s=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+t/100));return e>0?Math.min(e,s):s}return e}}const Md=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class Jj{static get isDarkMode(){return Le(this,"isDarkMode",!!window?.matchMedia?.("(prefers-color-scheme: dark)").matches)}}class dw{static get commentForegroundColor(){const e=document.createElement("span");e.classList.add("comment","sidebar");const{style:t}=e;t.width=t.height="0",t.display="none",t.color="var(--comment-fg-color)",document.body.append(e);const{color:s}=window.getComputedStyle(e);return e.remove(),Le(this,"commentForegroundColor",zr(s))}}function uw(r,e,t,s){s=Math.min(Math.max(s??1,0),1);const i=255*(1-s);return r=Math.round(r*s+i),e=Math.round(e*s+i),t=Math.round(t*s+i),[r,e,t]}function Qy(r,e){const t=r[0]/255,s=r[1]/255,i=r[2]/255,o=Math.max(t,s,i),c=Math.min(t,s,i),u=(o+c)/2;if(o===c)e[0]=e[1]=0;else{const h=o-c;switch(e[1]=u<.5?h/(o+c):h/(2-o-c),o){case t:e[0]=((s-i)/h+(s<i?6:0))*60;break;case s:e[0]=((i-t)/h+2)*60;break;case i:e[0]=((t-s)/h+4)*60;break}}e[2]=u}function om(r,e){const t=r[0],s=r[1],i=r[2],o=(1-Math.abs(2*i-1))*s,c=o*(1-Math.abs(t/60%2-1)),u=i-o/2;switch(Math.floor(t/60)){case 0:e[0]=o+u,e[1]=c+u,e[2]=u;break;case 1:e[0]=c+u,e[1]=o+u,e[2]=u;break;case 2:e[0]=u,e[1]=o+u,e[2]=c+u;break;case 3:e[0]=u,e[1]=c+u,e[2]=o+u;break;case 4:e[0]=c+u,e[1]=u,e[2]=o+u;break;case 5:case 6:e[0]=o+u,e[1]=u,e[2]=c+u;break}}function Zy(r){return r<=.03928?r/12.92:((r+.055)/1.055)**2.4}function Jy(r,e,t){om(r,t),t.map(Zy);const s=.2126*t[0]+.7152*t[1]+.0722*t[2];om(e,t),t.map(Zy);const i=.2126*t[0]+.7152*t[1]+.0722*t[2];return s>i?(s+.05)/(i+.05):(i+.05)/(s+.05)}const eb=new Map;function hw(r,e){const t=r[0]+r[1]*256+r[2]*65536+e[0]*16777216+e[1]*4294967296+e[2]*1099511627776;let s=eb.get(t);if(s)return s;const i=new Float32Array(9),o=i.subarray(0,3),c=i.subarray(3,6);Qy(r,c);const u=i.subarray(6,9);Qy(e,u);const h=u[2]<.5,p=h?12:4.5;if(c[2]=h?Math.sqrt(c[2]):1-Math.sqrt(1-c[2]),Jy(c,u,o)<p){let f,g;h?(f=c[2],g=1):(f=0,g=c[2]);const x=.005;for(;g-f>x;){const b=c[2]=(f+g)/2;h===Jy(c,u,o)<p?f=b:g=b}c[2]=h?g:f}return om(c,o),s=fe.makeHexColor(Math.round(o[0]*255),Math.round(o[1]*255),Math.round(o[2]*255)),eb.set(t,s),s}function Gm({html:r,dir:e,className:t},s){const i=document.createDocumentFragment();if(typeof r=="string"){const o=document.createElement("p");o.dir=e||"auto";const c=r.split(/(?:\r\n?|\n)/);for(let u=0,h=c.length;u<h;++u){const p=c[u];o.append(document.createTextNode(p)),u<h-1&&o.append(document.createElement("br"))}i.append(o)}else Vm.render({xfaHtml:r,div:i,intent:"richText"});i.firstChild.classList.add("richText",t),s.append(i)}class Qo{#e=null;#t=null;#n;#s=null;#r=null;#i=null;#a=null;#o=null;static#c=null;constructor(e){this.#n=e,Qo.#c||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"})}render(){const e=this.#e=document.createElement("div");e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=this.#n._uiManager._signal;t instanceof AbortSignal&&!t.aborted&&(e.addEventListener("contextmenu",qs,{signal:t}),e.addEventListener("pointerdown",Qo.#l,{signal:t}));const s=this.#s=document.createElement("div");s.className="buttons",e.append(s);const i=this.#n.toolbarPosition;if(i){const{style:o}=e,c=this.#n._uiManager.direction==="ltr"?1-i[0]:i[0];o.insetInlineEnd=`${100*c}%`,o.top=`calc(${100*i[1]}% + var(--editor-toolbar-vert-offset))`}return e}get div(){return this.#e}static#l(e){e.stopPropagation()}#h(e){this.#n._focusEventsAllowed=!1,St(e)}#u(e){this.#n._focusEventsAllowed=!0,St(e)}#f(e){const t=this.#n._uiManager._signal;return!(t instanceof AbortSignal)||t.aborted?!1:(e.addEventListener("focusin",this.#h.bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",this.#u.bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",qs,{signal:t}),!0)}hide(){this.#e.classList.add("hidden"),this.#t?.hideDropdown()}show(){this.#e.classList.remove("hidden"),this.#r?.shown(),this.#i?.shown()}addDeleteButton(){const{editorType:e,_uiManager:t}=this.#n,s=document.createElement("button");s.classList.add("basic","deleteButton"),s.tabIndex=0,s.setAttribute("data-l10n-id",Qo.#c[e]),this.#f(s)&&s.addEventListener("click",i=>{t.delete()},{signal:t._signal}),this.#s.append(s)}get#g(){const e=document.createElement("div");return e.className="divider",e}async addAltText(e){const t=await e.render();this.#f(t),this.#s.append(t,this.#g),this.#r=e}addComment(e,t=null){if(this.#i)return;const s=e.renderForToolbar();if(!s)return;this.#f(s);const i=this.#a=this.#g;t?(this.#s.insertBefore(s,t),this.#s.insertBefore(i,t)):this.#s.append(s,i),this.#i=e,e.toolbar=this}addColorPicker(e){if(this.#t)return;this.#t=e;const t=e.renderButton();this.#f(t),this.#s.append(t,this.#g)}async addEditSignatureButton(e){const t=this.#o=await e.renderEditButton(this.#n);this.#f(t),this.#s.append(t,this.#g)}removeButton(e){e==="comment"&&(this.#i?.removeToolbarCommentButton(),this.#i=null,this.#a?.remove(),this.#a=null)}async addButton(e,t){switch(e){case"colorPicker":this.addColorPicker(t);break;case"altText":await this.addAltText(t);break;case"editSignature":await this.addEditSignatureButton(t);break;case"delete":this.addDeleteButton();break;case"comment":this.addComment(t);break}}async addButtonBefore(e,t,s){const i=this.#s.querySelector(s);i&&e==="comment"&&this.addComment(t,i)}updateEditSignatureButton(e){this.#o&&(this.#o.title=e)}remove(){this.#e.remove(),this.#t?.destroy(),this.#t=null}}class eC{#e=null;#t=null;#n;constructor(e){this.#n=e}#s(){const e=this.#t=document.createElement("div");e.className="editToolbar",e.setAttribute("role","toolbar");const t=this.#n._signal;t instanceof AbortSignal&&!t.aborted&&e.addEventListener("contextmenu",qs,{signal:t});const s=this.#e=document.createElement("div");return s.className="buttons",e.append(s),this.#n.hasCommentManager()&&this.#i("commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{this.#n.commentSelection("floating_button")}),this.#i("highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{this.#n.highlightSelection("floating_button")}),e}#r(e,t){let s=0,i=0;for(const o of e){const c=o.y+o.height;if(c<s)continue;const u=o.x+(t?o.width:0);if(c>s){i=u,s=c;continue}t?u>i&&(i=u):u<i&&(i=u)}return[t?1-i:i,s]}show(e,t,s){const[i,o]=this.#r(t,s),{style:c}=this.#t||=this.#s();e.append(this.#t),c.insetInlineEnd=`${100*i}%`,c.top=`calc(${100*o}% + var(--editor-toolbar-vert-offset))`}hide(){this.#t.remove()}#i(e,t,s,i){const o=document.createElement("button");o.classList.add("basic",e),o.tabIndex=0,o.setAttribute("data-l10n-id",t);const c=document.createElement("span");o.append(c),c.className="visuallyHidden",c.setAttribute("data-l10n-id",s);const u=this.#n._signal;u instanceof AbortSignal&&!u.aborted&&(o.addEventListener("contextmenu",qs,{signal:u}),o.addEventListener("click",i,{signal:u})),this.#e.append(o)}}function fw(r,e,t){for(const s of t)e.addEventListener(s,r[s].bind(r))}class tC{#e=0;get id(){return`${el}${this.#e++}`}}class $m{#e=Hm();#t=0;#n=null;static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',s=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),i=new Image;i.src=e;const o=i.decode().then(()=>(s.drawImage(i,0,0,1,1,0,0,1,3),new Uint32Array(s.getImageData(0,0,1,1).data.buffer)[0]===0));return Le(this,"_isSVGFittingCanvas",o)}async#s(e,t){this.#n||=new Map;let s=this.#n.get(e);if(s===null)return null;if(s?.bitmap)return s.refCounter+=1,s;try{s||={bitmap:null,id:`image_${this.#e}_${this.#t++}`,refCounter:0,isSvg:!1};let i;if(typeof t=="string"?(s.url=t,i=await Ir(t,"blob")):t instanceof File?i=s.file=t:t instanceof Blob&&(i=t),i.type==="image/svg+xml"){const o=$m._isSVGFittingCanvas,c=new FileReader,u=new Image,h=new Promise((p,f)=>{u.onload=()=>{s.bitmap=u,s.isSvg=!0,p()},c.onload=async()=>{const g=s.svgUrl=c.result;u.src=await o?`${g}#svgView(preserveAspectRatio(none))`:g},u.onerror=c.onerror=f});c.readAsDataURL(i),await h}else s.bitmap=await createImageBitmap(i);s.refCounter=1}catch(i){Ce(i),s=null}return this.#n.set(e,s),s&&this.#n.set(s.id,s),s}async getFromFile(e){const{lastModified:t,name:s,size:i,type:o}=e;return this.#s(`${t}_${s}_${i}_${o}`,e)}async getFromUrl(e){return this.#s(e,e)}async getFromBlob(e,t){const s=await t;return this.#s(e,s)}async getFromId(e){this.#n||=new Map;const t=this.#n.get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:s}=t;return delete t.blobPromise,this.getFromBlob(t.id,s)}return this.getFromUrl(t.url)}getFromCanvas(e,t){this.#n||=new Map;let s=this.#n.get(e);if(s?.bitmap)return s.refCounter+=1,s;const i=new OffscreenCanvas(t.width,t.height);return i.getContext("2d").drawImage(t,0,0),s={bitmap:i.transferToImageBitmap(),id:`image_${this.#e}_${this.#t++}`,refCounter:1,isSvg:!1},this.#n.set(e,s),this.#n.set(s.id,s),s}getSvgUrl(e){const t=this.#n.get(e);return t?.isSvg?t.svgUrl:null}deleteId(e){this.#n||=new Map;const t=this.#n.get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:s}=t;if(!t.url&&!t.file){const i=new OffscreenCanvas(s.width,s.height);i.getContext("bitmaprenderer").transferFromImageBitmap(s),t.blobPromise=i.convertToBlob()}s.close?.(),t.bitmap=null}isValidId(e){return e.startsWith(`image_${this.#e}_`)}}class sC{#e=[];#t=!1;#n;#s=-1;constructor(e=128){this.#n=e}add({cmd:e,undo:t,post:s,mustExec:i,type:o=NaN,overwriteIfSameType:c=!1,keepUndo:u=!1}){if(i&&e(),this.#t)return;const h={cmd:e,undo:t,post:s,type:o};if(this.#s===-1){this.#e.length>0&&(this.#e.length=0),this.#s=0,this.#e.push(h);return}if(c&&this.#e[this.#s].type===o){u&&(h.undo=this.#e[this.#s].undo),this.#e[this.#s]=h;return}const p=this.#s+1;p===this.#n?this.#e.splice(0,1):(this.#s=p,p<this.#e.length&&this.#e.splice(p)),this.#e.push(h)}undo(){if(this.#s===-1)return;this.#t=!0;const{undo:e,post:t}=this.#e[this.#s];e(),t?.(),this.#t=!1,this.#s-=1}redo(){if(this.#s<this.#e.length-1){this.#s+=1,this.#t=!0;const{cmd:e,post:t}=this.#e[this.#s];e(),t?.(),this.#t=!1}}hasSomethingToUndo(){return this.#s!==-1}hasSomethingToRedo(){return this.#s<this.#e.length-1}cleanType(e){if(this.#s!==-1){for(let t=this.#s;t>=0;t--)if(this.#e[t].type!==e){this.#e.splice(t+1,this.#s-t),this.#s=t;return}this.#e.length=0,this.#s=-1}}destroy(){this.#e=null}}class vl{constructor(e){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=Yt.platform;for(const[s,i,o={}]of e)for(const c of s){const u=c.startsWith("mac+");t&&u?(this.callbacks.set(c.slice(4),{callback:i,options:o}),this.allKeys.add(c.split("+").at(-1))):!t&&!u&&(this.callbacks.set(c,{callback:i,options:o}),this.allKeys.add(c.split("+").at(-1)))}}#e(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t}exec(e,t){if(!this.allKeys.has(t.key))return;const s=this.callbacks.get(this.#e(t));if(!s)return;const{callback:i,options:{bubbles:o=!1,args:c=[],checker:u=null}}=s;u&&!u(e,t)||(i.bind(e,...c,t)(),o||St(t))}}class Ym{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return Zj(e),Le(this,"_colors",e)}convert(e){const t=zr(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[s,i]of this._colors)if(i.every((o,c)=>o===t[c]))return Ym._colorsMapping.get(s);return t}getHexCode(e){const t=this._colors.get(e);return t?fe.makeHexColor(...t):e}}class mi{#e=new AbortController;#t=null;#n=null;#s=new Map;#r=new Map;#i=null;#a=null;#o=null;#c=new sC;#l=null;#h=null;#u=null;#f=0;#g=new Set;#m=null;#d=null;#p=new Set;_editorUndoBar=null;#x=!1;#b=!1;#y=!1;#N=null;#A=null;#v=null;#j=null;#_=!1;#S=null;#k=new tC;#C=!1;#T=!1;#P=!1;#D=null;#L=null;#F=null;#O=null;#V=null;#E=je.NONE;#w=new Set;#M=null;#U=null;#z=null;#Y=null;#$=null;#X={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#H=[0,0];#B=null;#G=null;#Z=null;#J=null;#I=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const e=mi.prototype,t=c=>c.#G.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&c.hasSomethingToControl(),s=(c,{target:u})=>{if(u instanceof HTMLInputElement){const{type:h}=u;return h!=="text"&&h!=="number"}return!0},i=this.TRANSLATE_SMALL,o=this.TRANSLATE_BIG;return Le(this,"_keyboardManager",new vl([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:s}],[["ctrl+z","mac+meta+z"],e.undo,{checker:s}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:s}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:s}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(c,{target:u})=>!(u instanceof HTMLButtonElement)&&c.#G.contains(u)&&!c.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(c,{target:u})=>!(u instanceof HTMLButtonElement)&&c.#G.contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-i,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-o,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[i,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[o,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-i],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-o],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,i],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,o],checker:t}]]))}constructor(e,t,s,i,o,c,u,h,p,f,g,x,b,w,_,S){const A=this._signal=this.#e.signal;this.#G=e,this.#Z=t,this.#J=s,this.#i=i,this.#l=o,this.#U=c,this.#$=h,this._eventBus=u,u._on("editingaction",this.onEditingAction.bind(this),{signal:A}),u._on("pagechanging",this.onPageChanging.bind(this),{signal:A}),u._on("scalechanging",this.onScaleChanging.bind(this),{signal:A}),u._on("rotationchanging",this.onRotationChanging.bind(this),{signal:A}),u._on("setpreference",this.onSetPreference.bind(this),{signal:A}),u._on("switchannotationeditorparams",L=>this.updateParams(L.type,L.value),{signal:A}),window.addEventListener("pointerdown",()=>{this.#T=!0},{capture:!0,signal:A}),window.addEventListener("pointerup",()=>{this.#T=!1},{capture:!0,signal:A}),this.#le(),this.#he(),this.#te(),this.#a=h.annotationStorage,this.#N=h.filterFactory,this.#z=p,this.#j=f||null,this.#x=g,this.#b=x,this.#y=b,this.#V=w||null,this.viewParameters={realScale:wa.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=_||null,this._supportsPinchToZoom=S!==!1,o?.setSidebarUiManager(this)}destroy(){this.#I?.resolve(),this.#I=null,this.#e?.abort(),this.#e=null,this._signal=null;for(const e of this.#r.values())e.destroy();this.#r.clear(),this.#s.clear(),this.#p.clear(),this.#O?.clear(),this.#t=null,this.#w.clear(),this.#c.destroy(),this.#i?.destroy(),this.#l?.destroy(),this.#U?.destroy(),this.#S?.hide(),this.#S=null,this.#F?.destroy(),this.#F=null,this.#n=null,this.#A&&(clearTimeout(this.#A),this.#A=null),this.#B&&(clearTimeout(this.#B),this.#B=null),this._editorUndoBar?.destroy(),this.#$=null}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return this.#V}get useNewAltTextFlow(){return this.#b}get useNewAltTextWhenAddingImage(){return this.#y}get hcmFilter(){return Le(this,"hcmFilter",this.#z?this.#N.addHCMFilter(this.#z.foreground,this.#z.background):"none")}get direction(){return Le(this,"direction",getComputedStyle(this.#G).direction)}get _highlightColors(){return Le(this,"_highlightColors",this.#j?new Map(this.#j.split(",").map(e=>(e=e.split("=").map(t=>t.trim()),e[1]=e[1].toUpperCase(),e))):null)}get highlightColors(){const{_highlightColors:e}=this;if(!e)return Le(this,"highlightColors",null);const t=new Map,s=!!this.#z;for(const[i,o]of e){const c=i.endsWith("_HCM");if(s&&c){t.set(i.replace("_HCM",""),o);continue}!s&&!c&&t.set(i,o)}return Le(this,"highlightColors",t)}get highlightColorNames(){return Le(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}getNonHCMColor(e){if(!this._highlightColors)return e;const t=this.highlightColorNames.get(e);return this._highlightColors.get(t)||e}getNonHCMColorName(e){return this.highlightColorNames.get(e)||e}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),this.#u=e}setMainHighlightColorPicker(e){this.#F=e}editAltText(e,t=!1){this.#i?.editAltText(this,e,t)}hasCommentManager(){return!!this.#l}editComment(e,t,s,i){this.#l?.showDialog(this,e,t,s,i)}selectComment(e,t){this.#r.get(e)?.getEditorByUID(t)?.toggleComment(!0,!0)}updateComment(e){this.#l?.updateComment(e.getData())}updatePopupColor(e){this.#l?.updatePopupColor(e)}removeComment(e){this.#l?.removeComments([e.uid])}toggleComment(e,t,s=void 0){this.#l?.toggleCommentPopup(e,t,s)}makeCommentColor(e,t){return e&&this.#l?.makeCommentColor(e,t)||null}getCommentDialogElement(){return this.#l?.dialogElement||null}async waitForEditorsRendered(e){if(this.#r.has(e-1))return;const{resolve:t,promise:s}=Promise.withResolvers(),i=o=>{o.pageNumber===e&&(this._eventBus._off("editorsrendered",i),t())};this._eventBus.on("editorsrendered",i),await s}getSignature(e){this.#U?.getSignature({uiManager:this,editor:e})}get signatureManager(){return this.#U}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){e==="enableNewAltTextWhenAddingImage"&&(this.#y=t)}onPageChanging({pageNumber:e}){this.#f=e-1}focusMainContainer(){this.#G.focus()}findParent(e,t){for(const s of this.#r.values()){const{x:i,y:o,width:c,height:u}=s.div.getBoundingClientRect();if(e>=i&&e<=i+c&&t>=o&&t<=o+u)return s}return null}disableUserSelect(e=!1){this.#Z.classList.toggle("noUserSelect",e)}addShouldRescale(e){this.#p.add(e)}removeShouldRescale(e){this.#p.delete(e)}onScaleChanging({scale:e}){this.commitOrRemove(),this.viewParameters.realScale=e*wa.PDF_TO_CSS_UNITS;for(const t of this.#p)t.onScaleChanging();this.#u?.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}#Q({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e}#ee(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const s of this.#r.values())if(s.hasTextLayer(e))return s;return null}highlightSelection(e="",t=!1){const s=document.getSelection();if(!s||s.isCollapsed)return;const{anchorNode:i,anchorOffset:o,focusNode:c,focusOffset:u}=s,h=s.toString(),f=this.#Q(s).closest(".textLayer"),g=this.getSelectionBoxes(f);if(!g)return;s.empty();const x=this.#ee(f),b=this.#E===je.NONE,w=()=>{const _=x?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:g,anchorNode:i,anchorOffset:o,focusNode:c,focusOffset:u,text:h});b&&this.showAllEditors("highlight",!0,!0),t&&_?.editComment()};if(b){this.switchToMode(je.HIGHLIGHT,w);return}w()}commentSelection(e=""){this.highlightSelection(e,!0)}#re(){const e=document.getSelection();if(!e||e.isCollapsed)return;const s=this.#Q(e).closest(".textLayer"),i=this.getSelectionBoxes(s);i&&(this.#S||=new eC(this),this.#S.show(s,i,this.direction==="ltr"))}getAndRemoveDataFromAnnotationStorage(e){if(!this.#a)return null;const t=`${el}${e}`,s=this.#a.getRawValue(t);return s&&this.#a.remove(t),s}addToAnnotationStorage(e){!e.isEmpty()&&this.#a&&!this.#a.has(e.id)&&this.#a.setValue(e.id,e)}a11yAlert(e,t=null){const s=this.#J;s&&(s.setAttribute("data-l10n-id",e),t?s.setAttribute("data-l10n-args",JSON.stringify(t)):s.removeAttribute("data-l10n-args"))}#oe(){const e=document.getSelection();if(!e||e.isCollapsed){this.#M&&(this.#S?.hide(),this.#M=null,this.#R({hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===this.#M)return;const i=this.#Q(e).closest(".textLayer");if(!i){this.#M&&(this.#S?.hide(),this.#M=null,this.#R({hasSelectedText:!1}));return}if(this.#S?.hide(),this.#M=t,this.#R({hasSelectedText:!0}),!(this.#E!==je.HIGHLIGHT&&this.#E!==je.NONE)&&(this.#E===je.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#_=this.isShiftKeyDown,!this.isShiftKeyDown)){const o=this.#E===je.HIGHLIGHT?this.#ee(i):null;if(o?.toggleDrawing(),this.#T){const c=new AbortController,u=this.combinedSignal(c),h=p=>{p.type==="pointerup"&&p.button!==0||(c.abort(),o?.toggleDrawing(!0),p.type==="pointerup"&&this.#W("main_toolbar"))};window.addEventListener("pointerup",h,{signal:u}),window.addEventListener("blur",h,{signal:u})}else o?.toggleDrawing(!0),this.#W("main_toolbar")}}#W(e=""){this.#E===je.HIGHLIGHT?this.highlightSelection(e):this.#x&&this.#re()}#le(){document.addEventListener("selectionchange",this.#oe.bind(this),{signal:this._signal})}#ce(){if(this.#v)return;this.#v=new AbortController;const e=this.combinedSignal(this.#v);window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})}#de(){this.#v?.abort(),this.#v=null}blur(){if(this.isShiftKeyDown=!1,this.#_&&(this.#_=!1,this.#W("main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of this.#w)if(t.div.contains(e)){this.#L=[t,e],t._focusEventsAllowed=!1;break}}focus(){if(!this.#L)return;const[e,t]=this.#L;this.#L=null,t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}#te(){if(this.#D)return;this.#D=new AbortController;const e=this.combinedSignal(this.#D);window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})}#ue(){this.#D?.abort(),this.#D=null}#se(){if(this.#h)return;this.#h=new AbortController;const e=this.combinedSignal(this.#h);document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})}#ne(){this.#h?.abort(),this.#h=null}#he(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})}addEditListeners(){this.#te(),this.#se()}removeEditListeners(){this.#ue(),this.#ne()}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const s of this.#d)if(s.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const s of this.#d)if(s.isHandlingMimeForPasting(t.type)){s.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){if(e.preventDefault(),this.#t?.commitOrRemove(),!this.hasSelection)return;const t=[];for(const s of this.#w){const i=s.serialize(!0);i&&t.push(i)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const o of t.items)for(const c of this.#d)if(c.isHandlingMimeForPasting(o.type)){c.paste(o,this.currentLayer);return}let s=t.getData("application/pdfjs");if(!s)return;try{s=JSON.parse(s)}catch(o){Ce(`paste: "${o.message}".`);return}if(!Array.isArray(s))return;this.unselectAll();const i=this.currentLayer;try{const o=[];for(const h of s){const p=await i.deserialize(h);if(!p)return;o.push(p)}const c=()=>{for(const h of o)this.#ie(h);this.#ae(o)},u=()=>{for(const h of o)h.remove()};this.addCommands({cmd:c,undo:u,mustExec:!0})}catch(o){Ce(`paste: "${o.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),this.#E!==je.NONE&&!this.isEditorHandlingKeyboard&&mi._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,this.#_&&(this.#_=!1,this.#W("main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}#R(e){Object.entries(e).some(([s,i])=>this.#X[s]!==i)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#X,e)}),this.#E===je.HIGHLIGHT&&e.hasSelectedEditor===!1&&this.#q([[Ue.HIGHLIGHT_FREE,!0]]))}#q(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})}setEditingState(e){e?(this.#ce(),this.#se(),this.#R({isEditing:this.#E!==je.NONE,isEmpty:this.#K(),hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:this.#c.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#de(),this.#ne(),this.#R({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!this.#d){this.#d=e;for(const t of this.#d)this.#q(t.defaultPropertiesToUpdate)}}getId(){return this.#k.id}get currentLayer(){return this.#r.get(this.#f)}getLayer(e){return this.#r.get(e)}get currentPageIndex(){return this.#f}addLayer(e){this.#r.set(e.pageIndex,e),this.#C?e.enable():e.disable()}removeLayer(e){this.#r.delete(e.pageIndex)}async updateMode(e,t=null,s=!1,i=!1,o=!1){if(this.#E!==e&&!(this.#I&&(await this.#I.promise,!this.#I))){if(this.#I=Promise.withResolvers(),this.#u?.commitOrRemove(),this.#E===je.POPUP&&this.#l?.hideSidebar(),this.#l?.destroyPopup(),this.#E=e,e===je.NONE){this.setEditingState(!1),this.#me();for(const c of this.#s.values())c.hideStandaloneCommentButton();this._editorUndoBar?.hide(),this.toggleComment(null),this.#I.resolve();return}for(const c of this.#s.values())c.addStandaloneCommentButton();e===je.SIGNATURE&&await this.#U?.loadSignatures(),this.setEditingState(!0),await this.#fe(),this.unselectAll();for(const c of this.#r.values())c.updateMode(e);if(e===je.POPUP){this.#n||=await this.#$.getAnnotationsByType(new Set(this.#d.map(h=>h._editorType)));const c=new Set,u=[];for(const h of this.#s.values()){const{annotationElementId:p,hasComment:f,deleted:g}=h;p&&c.add(p),f&&!g&&u.push(h.getData())}for(const h of this.#n){const{id:p,popupRef:f,contentsObj:g}=h;f&&g?.str&&!c.has(p)&&!this.#g.has(p)&&u.push(h)}this.#l?.showSidebar(u)}if(!t){s&&this.addNewEditorFromKeyboard(),this.#I.resolve();return}for(const c of this.#s.values())c.uid===t?(this.setSelected(c),o?c.editComment():i?c.enterInEditMode():c.focus()):c.unselect();this.#I.resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e.mode!==this.#E&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...e})}updateParams(e,t){if(this.#d){switch(e){case Ue.CREATE:this.currentLayer.addNewEditor(t);return;case Ue.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#Y||=new Map).set(e,t),this.showAllEditors("highlight",t);break}if(this.hasSelection)for(const s of this.#w)s.updateParams(e,t);else for(const s of this.#d)s.updateDefaultParams(e,t)}}showAllEditors(e,t,s=!1){for(const o of this.#s.values())o.editorType===e&&o.show(t);(this.#Y?.get(Ue.HIGHLIGHT_SHOW_ALL)??!0)!==t&&this.#q([[Ue.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(this.#P!==e){this.#P=e;for(const t of this.#r.values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}async#fe(){if(!this.#C){this.#C=!0;const e=[];for(const t of this.#r.values())e.push(t.enable());await Promise.all(e);for(const t of this.#s.values())t.enable()}}#me(){if(this.unselectAll(),this.#C){this.#C=!1;for(const e of this.#r.values())e.disable();for(const e of this.#s.values())e.disable()}}*getEditors(e){for(const t of this.#s.values())t.pageIndex===e&&(yield t)}getEditor(e){return this.#s.get(e)}addEditor(e){this.#s.set(e.id,e)}removeEditor(e){e.div.contains(document.activeElement)&&(this.#A&&clearTimeout(this.#A),this.#A=setTimeout(()=>{this.focusMainContainer(),this.#A=null},0)),this.#s.delete(e.id),e.annotationElementId&&this.#O?.delete(e.annotationElementId),this.unselect(e),(!e.annotationElementId||!this.#g.has(e.annotationElementId))&&this.#a?.remove(e.id)}addDeletedAnnotationElement(e){this.#g.add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return this.#g.has(e)}removeDeletedAnnotationElement(e){this.#g.delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}#ie(e){const t=this.#r.get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))}setActiveEditor(e){this.#t!==e&&(this.#t=e,e&&this.#q(e.propertiesToUpdate))}get#pe(){let e=null;for(e of this.#w);return e}updateUI(e){this.#pe===e&&this.#q(e.propertiesToUpdate)}updateUIForDefaultProperties(e){this.#q(e.defaultPropertiesToUpdate)}toggleSelected(e){if(this.#w.has(e)){this.#w.delete(e),e.unselect(),this.#R({hasSelectedEditor:this.hasSelection});return}this.#w.add(e),e.select(),this.#q(e.propertiesToUpdate),this.#R({hasSelectedEditor:!0})}setSelected(e){this.updateToolbar({mode:e.mode,editId:e.id}),this.#u?.commitOrRemove();for(const t of this.#w)t!==e&&t.unselect();this.#w.clear(),this.#w.add(e),e.select(),this.#q(e.propertiesToUpdate),this.#R({hasSelectedEditor:!0})}isSelected(e){return this.#w.has(e)}get firstSelectedEditor(){return this.#w.values().next().value}unselect(e){e.unselect(),this.#w.delete(e),this.#R({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#w.size!==0}get isEnterHandled(){return this.#w.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#c.undo(),this.#R({hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#K()}),this._editorUndoBar?.hide()}redo(){this.#c.redo(),this.#R({hasSomethingToUndo:!0,hasSomethingToRedo:this.#c.hasSomethingToRedo(),isEmpty:this.#K()})}addCommands(e){this.#c.add(e),this.#R({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#K()})}cleanUndoStack(e){this.#c.cleanType(e)}#K(){if(this.#s.size===0)return!0;if(this.#s.size===1)for(const e of this.#s.values())return e.isEmpty();return!1}delete(){this.commitOrRemove();const e=this.currentLayer?.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const t=e?[e]:[...this.#w],s=()=>{this._editorUndoBar?.show(i,t.length===1?t[0].editorType:t.length);for(const o of t)o.remove()},i=()=>{for(const o of t)this.#ie(o)};this.addCommands({cmd:s,undo:i,mustExec:!0})}commitOrRemove(){this.#t?.commitOrRemove()}hasSomethingToControl(){return this.#t||this.hasSelection}#ae(e){for(const t of this.#w)t.unselect();this.#w.clear();for(const t of e)t.isEmpty()||(this.#w.add(t),t.select());this.#R({hasSelectedEditor:this.hasSelection})}selectAll(){for(const e of this.#w)e.commit();this.#ae(this.#s.values())}unselectAll(){if(!(this.#t&&(this.#t.commitOrRemove(),this.#E!==je.NONE))&&!this.#u?.commitOrRemove()&&this.hasSelection){for(const e of this.#w)e.unselect();this.#w.clear(),this.#R({hasSelectedEditor:!1})}}translateSelectedEditors(e,t,s=!1){if(s||this.commitOrRemove(),!this.hasSelection)return;this.#H[0]+=e,this.#H[1]+=t;const[i,o]=this.#H,c=[...this.#w],u=1e3;this.#B&&clearTimeout(this.#B),this.#B=setTimeout(()=>{this.#B=null,this.#H[0]=this.#H[1]=0,this.addCommands({cmd:()=>{for(const h of c)this.#s.has(h.id)&&(h.translateInPage(i,o),h.translationDone())},undo:()=>{for(const h of c)this.#s.has(h.id)&&(h.translateInPage(-i,-o),h.translationDone())},mustExec:!1})},u);for(const h of c)h.translateInPage(e,t),h.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#m=new Map;for(const e of this.#w)this.#m.set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#m)return!1;this.disableUserSelect(!1);const e=this.#m;this.#m=null;let t=!1;for(const[{x:i,y:o,pageIndex:c},u]of e)u.newX=i,u.newY=o,u.newPageIndex=c,t||=i!==u.savedX||o!==u.savedY||c!==u.savedPageIndex;if(!t)return!1;const s=(i,o,c,u)=>{if(this.#s.has(i.id)){const h=this.#r.get(u);h?i._setParentAndPosition(h,o,c):(i.pageIndex=u,i.x=o,i.y=c)}};return this.addCommands({cmd:()=>{for(const[i,{newX:o,newY:c,newPageIndex:u}]of e)s(i,o,c,u)},undo:()=>{for(const[i,{savedX:o,savedY:c,savedPageIndex:u}]of e)s(i,o,c,u)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(this.#m)for(const s of this.#m.keys())s.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#w.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return this.#t===e}getActive(){return this.#t}getMode(){return this.#E}isEditingMode(){return this.#E!==je.NONE}get imageManager(){return Le(this,"imageManager",new $m)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let p=0,f=t.rangeCount;p<f;p++)if(!e.contains(t.getRangeAt(p).commonAncestorContainer))return null;const{x:s,y:i,width:o,height:c}=e.getBoundingClientRect();let u;switch(e.getAttribute("data-main-rotation")){case"90":u=(p,f,g,x)=>({x:(f-i)/c,y:1-(p+g-s)/o,width:x/c,height:g/o});break;case"180":u=(p,f,g,x)=>({x:1-(p+g-s)/o,y:1-(f+x-i)/c,width:g/o,height:x/c});break;case"270":u=(p,f,g,x)=>({x:1-(f+x-i)/c,y:(p-s)/o,width:x/c,height:g/o});break;default:u=(p,f,g,x)=>({x:(p-s)/o,y:(f-i)/c,width:g/o,height:x/c});break}const h=[];for(let p=0,f=t.rangeCount;p<f;p++){const g=t.getRangeAt(p);if(!g.collapsed)for(const{x,y:b,width:w,height:_}of g.getClientRects())w===0||_===0||h.push(u(x,b,w,_))}return h.length===0?null:h}addChangedExistingAnnotation({annotationElementId:e,id:t}){(this.#o||=new Map).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){this.#o?.delete(e)}renderAnnotationElement(e){const t=this.#o?.get(e.data.id);if(!t)return;const s=this.#a.getRawValue(t);s&&(this.#E===je.NONE&&!s.hasBeenModified||s.renderAnnotationElement(e))}setMissingCanvas(e,t,s){const i=this.#O?.get(e);i&&(i.setCanvas(t,s),this.#O.delete(e))}addMissingCanvas(e,t){(this.#O||=new Map).set(e,t)}}class Bn{#e=null;#t=!1;#n=null;#s=null;#r=null;#i=null;#a=!1;#o=null;#c=null;#l=null;#h=null;#u=!1;static#f=null;static _l10n=null;constructor(e){this.#c=e,this.#u=e._uiManager.useNewAltTextFlow,Bn.#f||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(e){Bn._l10n??=e}async render(){const e=this.#n=document.createElement("button");e.className="altText",e.tabIndex="0";const t=this.#s=document.createElement("span");e.append(t),this.#u?(e.classList.add("new"),e.setAttribute("data-l10n-id",Bn.#f.missing),t.setAttribute("data-l10n-id",Bn.#f["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const s=this.#c._uiManager._signal;e.addEventListener("contextmenu",qs,{signal:s}),e.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:s});const i=o=>{o.preventDefault(),this.#c._uiManager.editAltText(this.#c),this.#u&&this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#g}})};return e.addEventListener("click",i,{capture:!0,signal:s}),e.addEventListener("keydown",o=>{o.target===e&&o.key==="Enter"&&(this.#a=!0,i(o))},{signal:s}),await this.#m(),e}get#g(){return this.#e&&"added"||this.#e===null&&this.guessedText&&"review"||"missing"}finish(){this.#n&&(this.#n.focus({focusVisible:this.#a}),this.#a=!1)}isEmpty(){return this.#u?this.#e===null:!this.#e&&!this.#t}hasData(){return this.#u?this.#e!==null||!!this.#l:this.isEmpty()}get guessedText(){return this.#l}async setGuessedText(e){this.#e===null&&(this.#l=e,this.#h=await Bn._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e}),this.#m())}toggleAltTextBadge(e=!1){if(!this.#u||this.#e){this.#o?.remove(),this.#o=null;return}if(!this.#o){const t=this.#o=document.createElement("div");t.className="noAltTextBadge",this.#c.div.append(t)}this.#o.classList.toggle("hidden",!e)}serialize(e){let t=this.#e;return!e&&this.#l===t&&(t=this.#h),{altText:t,decorative:this.#t,guessedText:this.#l,textWithDisclaimer:this.#h}}get data(){return{altText:this.#e,decorative:this.#t}}set data({altText:e,decorative:t,guessedText:s,textWithDisclaimer:i,cancel:o=!1}){s&&(this.#l=s,this.#h=i),!(this.#e===e&&this.#t===t)&&(o||(this.#e=e,this.#t=t),this.#m())}toggle(e=!1){this.#n&&(!e&&this.#i&&(clearTimeout(this.#i),this.#i=null),this.#n.disabled=!e)}shown(){this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#g}})}destroy(){this.#n?.remove(),this.#n=null,this.#s=null,this.#r=null,this.#o?.remove(),this.#o=null}async#m(){const e=this.#n;if(!e)return;if(this.#u){if(e.classList.toggle("done",!!this.#e),e.setAttribute("data-l10n-id",Bn.#f[this.#g]),this.#s?.setAttribute("data-l10n-id",Bn.#f[`${this.#g}-label`]),!this.#e){this.#r?.remove();return}}else{if(!this.#e&&!this.#t){e.classList.remove("done"),this.#r?.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=this.#r;if(!t){this.#r=t=document.createElement("span"),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${this.#c.id}`;const i=100,o=this.#c._uiManager._signal;o.addEventListener("abort",()=>{clearTimeout(this.#i),this.#i=null},{once:!0}),e.addEventListener("mouseenter",()=>{this.#i=setTimeout(()=>{this.#i=null,this.#r.classList.add("show"),this.#c._reportTelemetry({action:"alt_text_tooltip"})},i)},{signal:o}),e.addEventListener("mouseleave",()=>{this.#i&&(clearTimeout(this.#i),this.#i=null),this.#r?.classList.remove("show")},{signal:o})}this.#t?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=this.#e),t.parentNode||e.append(t),this.#c.getElementForAltText()?.setAttribute("aria-describedby",t.id)}}class Qc{#e=null;#t=null;#n=!1;#s=null;#r=null;#i=null;#a=null;#o=null;#c=!1;#l=null;constructor(e){this.#s=e}renderForToolbar(){const e=this.#t=document.createElement("button");return e.className="comment",this.#h(e,!1)}renderForStandalone(){const e=this.#e=document.createElement("button");e.className="annotationCommentButton";const t=this.#s.commentButtonPosition;if(t){const{style:s}=e;s.insetInlineEnd=`calc(${100*(this.#s._uiManager.direction==="ltr"?1-t[0]:t[0])}% - var(--comment-button-dim))`,s.top=`calc(${100*t[1]}% - var(--comment-button-dim))`;const i=this.#s.commentButtonColor;i&&(s.backgroundColor=i)}return this.#h(e,!0)}focusButton(){setTimeout(()=>{(this.#e??this.#t)?.focus()},0)}onUpdatedColor(){if(!this.#e)return;const e=this.#s.commentButtonColor;e&&(this.#e.style.backgroundColor=e),this.#s._uiManager.updatePopupColor(this.#s)}get commentButtonWidth(){return(this.#e?.getBoundingClientRect().width??0)/this.#s.parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(this.#l)return this.#l;if(!this.#e)return null;const{x:e,y:t,height:s}=this.#e.getBoundingClientRect(),{x:i,y:o,width:c,height:u}=this.#s.parent.boundingClientRect;return[(e-i)/c,(t+s-o)/u]}set commentPopupPositionInLayer(e){this.#l=e}hasDefaultPopupPosition(){return this.#l===null}removeStandaloneCommentButton(){this.#e?.remove(),this.#e=null}removeToolbarCommentButton(){this.#t?.remove(),this.#t=null}setCommentButtonStates({selected:e,hasPopup:t}){this.#e&&(this.#e.classList.toggle("selected",e),this.#e.ariaExpanded=t)}#h(e,t){if(!this.#s._uiManager.hasCommentManager())return null;e.tabIndex="0",e.ariaHasPopup="dialog",t?(e.ariaControls="commentPopup",e.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(e.ariaControlsElements=[this.#s._uiManager.getCommentDialogElement()],e.setAttribute("data-l10n-id","pdfjs-editor-edit-comment-button"));const s=this.#s._uiManager._signal;if(!(s instanceof AbortSignal)||s.aborted)return e;e.addEventListener("contextmenu",qs,{signal:s}),t&&(e.addEventListener("focusin",o=>{this.#s._focusEventsAllowed=!1,St(o)},{capture:!0,signal:s}),e.addEventListener("focusout",o=>{this.#s._focusEventsAllowed=!0,St(o)},{capture:!0,signal:s})),e.addEventListener("pointerdown",o=>o.stopPropagation(),{signal:s});const i=o=>{o.preventDefault(),e===this.#t?this.edit():this.#s.toggleComment(!0)};return e.addEventListener("click",i,{capture:!0,signal:s}),e.addEventListener("keydown",o=>{o.target===e&&o.key==="Enter"&&(this.#n=!0,i(o))},{signal:s}),e.addEventListener("pointerenter",()=>{this.#s.toggleComment(!1,!0)},{signal:s}),e.addEventListener("pointerleave",()=>{this.#s.toggleComment(!1,!1)},{signal:s}),e}edit(e){const t=this.commentPopupPositionInLayer;let s,i;if(t)[s,i]=t;else{[s,i]=this.#s.commentButtonPosition;const{width:f,height:g,x,y:b}=this.#s;s=x+s*f,i=b+i*g}const o=this.#s.parent.boundingClientRect,{x:c,y:u,width:h,height:p}=o;this.#s._uiManager.editComment(this.#s,c+s*h,u+i*p,{...e,parentDimensions:o})}finish(){this.#t&&(this.#t.focus({focusVisible:this.#n}),this.#n=!1)}isDeleted(){return this.#c||this.#a===""}isEmpty(){return this.#a===null}hasBeenEdited(){return this.isDeleted()||this.#a!==this.#r}serialize(){return this.data}get data(){return{text:this.#a,richText:this.#i,date:this.#o,deleted:this.isDeleted()}}set data(e){if(e!==this.#a&&(this.#i=null),e===null){this.#a="",this.#c=!0;return}this.#a=e,this.#o=new Date,this.#c=!1}setInitialText(e,t=null){this.#r=e,this.data=e,this.#o=null,this.#i=t}shown(){}destroy(){this.#t?.remove(),this.#t=null,this.#e?.remove(),this.#e=null,this.#a="",this.#i=null,this.#o=null,this.#s=null,this.#n=!1,this.#c=!1}}class wl{#e;#t=!1;#n=null;#s;#r;#i;#a;#o=null;#c;#l=null;#h;#u=null;constructor({container:e,isPinchingDisabled:t=null,isPinchingStopped:s=null,onPinchStart:i=null,onPinching:o=null,onPinchEnd:c=null,signal:u}){this.#e=e,this.#n=s,this.#s=t,this.#r=i,this.#i=o,this.#a=c,this.#h=new AbortController,this.#c=AbortSignal.any([u,this.#h.signal]),e.addEventListener("touchstart",this.#f.bind(this),{passive:!1,signal:this.#c})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/yn.pixelRatio}#f(e){if(this.#s?.())return;if(e.touches.length===1){if(this.#o)return;const i=this.#o=new AbortController,o=AbortSignal.any([this.#c,i.signal]),c=this.#e,u={capture:!0,signal:o,passive:!1},h=p=>{p.pointerType==="touch"&&(this.#o?.abort(),this.#o=null)};c.addEventListener("pointerdown",p=>{p.pointerType==="touch"&&(St(p),h(p))},u),c.addEventListener("pointerup",h,u),c.addEventListener("pointercancel",h,u);return}if(!this.#u){this.#u=new AbortController;const i=AbortSignal.any([this.#c,this.#u.signal]),o=this.#e,c={signal:i,capture:!1,passive:!1};o.addEventListener("touchmove",this.#g.bind(this),c);const u=this.#m.bind(this);o.addEventListener("touchend",u,c),o.addEventListener("touchcancel",u,c),c.capture=!0,o.addEventListener("pointerdown",St,c),o.addEventListener("pointermove",St,c),o.addEventListener("pointercancel",St,c),o.addEventListener("pointerup",St,c),this.#r?.()}if(St(e),e.touches.length!==2||this.#n?.()){this.#l=null;return}let[t,s]=e.touches;t.identifier>s.identifier&&([t,s]=[s,t]),this.#l={touch0X:t.screenX,touch0Y:t.screenY,touch1X:s.screenX,touch1Y:s.screenY}}#g(e){if(!this.#l||e.touches.length!==2)return;St(e);let[t,s]=e.touches;t.identifier>s.identifier&&([t,s]=[s,t]);const{screenX:i,screenY:o}=t,{screenX:c,screenY:u}=s,h=this.#l,{touch0X:p,touch0Y:f,touch1X:g,touch1Y:x}=h,b=g-p,w=x-f,_=c-i,S=u-o,A=Math.hypot(_,S)||1,L=Math.hypot(b,w)||1;if(!this.#t&&Math.abs(L-A)<=wl.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(h.touch0X=i,h.touch0Y=o,h.touch1X=c,h.touch1Y=u,!this.#t){this.#t=!0;return}const O=[(i+c)/2,(o+u)/2];this.#i?.(O,L,A)}#m(e){e.touches.length>=2||(this.#u&&(this.#u.abort(),this.#u=null,this.#a?.()),this.#l&&(St(e),this.#l=null,this.#t=!1))}destroy(){this.#h?.abort(),this.#h=null,this.#o?.abort(),this.#o=null}}class be{#e=null;#t=null;#n=null;#s=null;#r=null;#i=!1;#a=null;#o="";#c=null;#l=null;#h=null;#u=null;#f=null;#g="";#m=!1;#d=null;#p=!1;#x=!1;#b=!1;#y=null;#N=0;#A=0;#v=null;#j=null;isSelected=!1;_isCopy=!1;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#_=!1;#S=be._zIndex++;static _borderLineWidth=-1;static _colorManager=new Ym;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const e=be.prototype._resizeWithKeyboard,t=mi.TRANSLATE_SMALL,s=mi.TRANSLATE_BIG;return Le(this,"_resizerKeyboardManager",new vl([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-s,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[s,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-s]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,s]}],[["Escape","mac+Escape"],be.prototype._stopResizingWithKeyboard]]))}constructor(e){this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null,this.annotationElementId=e.annotationElementId||null,this.creationDate=e.creationDate||new Date,this.modificationDate=e.modificationDate||null;const{rotation:t,rawDims:{pageWidth:s,pageHeight:i,pageX:o,pageY:c}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[s,i],this.pageTranslation=[o,c];const[u,h]=this.parentDimensions;this.x=e.x/u,this.y=e.y/h,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return Le(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new nC({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(be._l10n??=e,be._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),be._borderLineWidth!==-1)return;const s=getComputedStyle(document.documentElement);be._borderLineWidth=parseFloat(s.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){dt("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#_}set _isDraggable(e){this.#_=e,this.div?.classList.toggle("draggable",e)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#S}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):(this.#B(),this.#u?.remove(),this.#u=null),this.parent=e}focusin(e){this._focusEventsAllowed&&(this.#m?this.#m=!1:this.parent.setSelected(this))}focusout(e){!this._focusEventsAllowed||!this.isAttachedToDOM||e.relatedTarget?.closest(`#${this.id}`)||(e.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,s,i){const[o,c]=this.parentDimensions;[s,i]=this.screenToPageTranslation(s,i),this.x=(e+s)/o,this.y=(t+i)/c,this.fixAndSetPosition()}_moveAfterPaste(e,t){const[s,i]=this.parentDimensions;this.setAt(e*s,t*i,this.width*s,this.height*i),this._onTranslated()}#k([e,t],s,i){[s,i]=this.screenToPageTranslation(s,i),this.x+=s/e,this.y+=i/t,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}translate(e,t){this.#k(this.parentDimensions,e,t)}translateInPage(e,t){this.#d||=[this.x,this.y,this.width,this.height],this.#k(this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(e,t){this.#d||=[this.x,this.y,this.width,this.height];const{div:s,parentDimensions:[i,o]}=this;if(this.x+=e/i,this.y+=t/o,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:g,y:x}=this.div.getBoundingClientRect();this.parent.findNewParent(this,g,x)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:c,y:u}=this;const[h,p]=this.getBaseTranslation();c+=h,u+=p;const{style:f}=s;f.left=`${(100*c).toFixed(2)}%`,f.top=`${(100*u).toFixed(2)}%`,this._onTranslating(c,u),s.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!this.#d&&(this.#d[0]!==this.x||this.#d[1]!==this.y)}get _hasBeenResized(){return!!this.#d&&(this.#d[2]!==this.width||this.#d[3]!==this.height)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:s}=be,i=s/e,o=s/t;switch(this.rotation){case 90:return[-i,o];case 180:return[i,o];case 270:return[i,-o];default:return[-i,-o]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const{div:{style:t},pageDimensions:[s,i]}=this;let{x:o,y:c,width:u,height:h}=this;if(u*=s,h*=i,o*=s,c*=i,this._mustFixPosition)switch(e){case 0:o=cs(o,0,s-u),c=cs(c,0,i-h);break;case 90:o=cs(o,0,s-h),c=cs(c,u,i);break;case 180:o=cs(o,u,s),c=cs(c,h,i);break;case 270:o=cs(o,h,s),c=cs(c,0,i-u);break}this.x=o/=s,this.y=c/=i;const[p,f]=this.getBaseTranslation();o+=p,c+=f,t.left=`${(100*o).toFixed(2)}%`,t.top=`${(100*c).toFixed(2)}%`,this.moveInDOM()}static#C(e,t,s){switch(s){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}}screenToPageTranslation(e,t){return be.#C(e,t,this.parentRotation)}pageTranslationToScreen(e,t){return be.#C(e,t,360-this.parentRotation)}#T(e){switch(e){case 90:{const[t,s]=this.pageDimensions;return[0,-t/s,s/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,s]=this.pageDimensions;return[0,t/s,-s/t,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,s]}=this;return[t*e,s*e]}setDims(){const{div:{style:e},width:t,height:s}=this;e.width=`${(100*t).toFixed(2)}%`,e.height=`${(100*s).toFixed(2)}%`}getInitialTranslation(){return[0,0]}#P(){if(this.#c)return;this.#c=document.createElement("div"),this.#c.classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const s of e){const i=document.createElement("div");this.#c.append(i),i.classList.add("resizer",s),i.setAttribute("data-resizer-name",s),i.addEventListener("pointerdown",this.#D.bind(this,s),{signal:t}),i.addEventListener("contextmenu",qs,{signal:t}),i.tabIndex=-1}this.div.prepend(this.#c)}#D(e,t){t.preventDefault();const{isMac:s}=Yt.platform;if(t.button!==0||t.ctrlKey&&s)return;this.#n?.toggle(!1);const i=this._isDraggable;this._isDraggable=!1,this.#l=[t.screenX,t.screenY];const o=new AbortController,c=this._uiManager.combinedSignal(o);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#O.bind(this,e),{passive:!0,capture:!0,signal:c}),window.addEventListener("touchmove",St,{passive:!1,signal:c}),window.addEventListener("contextmenu",qs,{signal:c}),this.#h={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const u=this.parent.div.style.cursor,h=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const p=()=>{o.abort(),this.parent.togglePointerEvents(!0),this.#n?.toggle(!0),this._isDraggable=i,this.parent.div.style.cursor=u,this.div.style.cursor=h,this.#F()};window.addEventListener("pointerup",p,{signal:c}),window.addEventListener("blur",p,{signal:c})}#L(e,t,s,i){this.width=s,this.height=i,this.x=e,this.y=t,this.setDims(),this.fixAndSetPosition(),this._onResized()}_onResized(){}#F(){if(!this.#h)return;const{savedX:e,savedY:t,savedWidth:s,savedHeight:i}=this.#h;this.#h=null;const o=this.x,c=this.y,u=this.width,h=this.height;o===e&&c===t&&u===s&&h===i||this.addCommands({cmd:this.#L.bind(this,o,c,u,h),undo:this.#L.bind(this,e,t,s,i),mustExec:!0})}static _round(e){return Math.round(e*1e4)/1e4}#O(e,t){const[s,i]=this.parentDimensions,o=this.x,c=this.y,u=this.width,h=this.height,p=be.MIN_SIZE/s,f=be.MIN_SIZE/i,g=this.#T(this.rotation),x=(E,j)=>[g[0]*E+g[2]*j,g[1]*E+g[3]*j],b=this.#T(360-this.rotation),w=(E,j)=>[b[0]*E+b[2]*j,b[1]*E+b[3]*j];let _,S,A=!1,L=!1;switch(e){case"topLeft":A=!0,_=(E,j)=>[0,0],S=(E,j)=>[E,j];break;case"topMiddle":_=(E,j)=>[E/2,0],S=(E,j)=>[E/2,j];break;case"topRight":A=!0,_=(E,j)=>[E,0],S=(E,j)=>[0,j];break;case"middleRight":L=!0,_=(E,j)=>[E,j/2],S=(E,j)=>[0,j/2];break;case"bottomRight":A=!0,_=(E,j)=>[E,j],S=(E,j)=>[0,0];break;case"bottomMiddle":_=(E,j)=>[E/2,j],S=(E,j)=>[E/2,0];break;case"bottomLeft":A=!0,_=(E,j)=>[0,j],S=(E,j)=>[E,0];break;case"middleLeft":L=!0,_=(E,j)=>[0,j/2],S=(E,j)=>[E,j/2];break}const O=_(u,h),D=S(u,h);let I=x(...D);const C=be._round(o+I[0]),P=be._round(c+I[1]);let k=1,N=1,M,H;if(t.fromKeyboard)({deltaX:M,deltaY:H}=t);else{const{screenX:E,screenY:j}=t,[G,Y]=this.#l;[M,H]=this.screenToPageTranslation(E-G,j-Y),this.#l[0]=E,this.#l[1]=j}if([M,H]=w(M/s,H/i),A){const E=Math.hypot(u,h);k=N=Math.max(Math.min(Math.hypot(D[0]-O[0]-M,D[1]-O[1]-H)/E,1/u,1/h),p/u,f/h)}else L?k=cs(Math.abs(D[0]-O[0]-M),p,1)/u:N=cs(Math.abs(D[1]-O[1]-H),f,1)/h;const F=be._round(u*k),V=be._round(h*N);I=x(...S(F,V));const q=C-I[0],z=P-I[1];this.#d||=[this.x,this.y,this.width,this.height],this.width=F,this.height=V,this.x=q,this.y=z,this.setDims(),this.fixAndSetPosition(),this._onResizing()}_onResizing(){}altTextFinish(){this.#n?.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||this.#x)return this._editToolbar;this._editToolbar=new Qo(this),this.div.append(this._editToolbar.render());const{toolbarButtons:e}=this;if(e)for(const[t,s]of e)await this._editToolbar.addButton(t,s);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){this._editToolbar?.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){this._editToolbar?.removeButton("comment")}removeEditToolbar(){this._editToolbar?.remove(),this._editToolbar=null,this.#n?.destroy()}addContainer(e){const t=this._editToolbar?.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return this.#n||(Bn.initialize(be._l10n),this.#n=new Bn(this),this.#e&&(this.#n.data=this.#e,this.#e=null)),this.#n}get altTextData(){return this.#n?.data}set altTextData(e){this.#n&&(this.#n.data=e)}get guessedAltText(){return this.#n?.guessedText}async setGuessedAltText(e){await this.#n?.setGuessedText(e)}serializeAltText(e){return this.#n?.serialize(e)}hasAltText(){return!!this.#n&&!this.#n.isEmpty()}hasAltTextData(){return this.#n?.hasData()??!1}focusCommentButton(){this.#s?.focusButton()}addCommentButton(){return this.#s||=new Qc(this)}addStandaloneCommentButton(){if(this.#r){this._uiManager.isEditingMode()&&this.#r.classList.remove("hidden");return}this.hasComment&&(this.#r=this.#s.renderForStandalone(),this.div.append(this.#r))}removeStandaloneCommentButton(){this.#s.removeStandaloneCommentButton(),this.#r=null}hideStandaloneCommentButton(){this.#r?.classList.add("hidden")}get comment(){const{data:{richText:e,text:t,date:s,deleted:i}}=this.#s;return{text:t,richText:e,date:s,deleted:i,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(e){this.#s||=new Qc(this),this.#s.data=e,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:e,popupRef:t,richText:s}){if(!t||(this.#s||=new Qc(this),this.#s.setInitialText(e,s),!this.annotationElementId))return;const i=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);i&&this.updateFromAnnotationLayer(i)}get hasEditedComment(){return this.#s?.hasBeenEdited()}get hasDeletedComment(){return this.#s?.isDeleted()}get hasComment(){return!!this.#s&&!this.#s.isEmpty()&&!this.#s.isDeleted()}async editComment(e){this.#s||=new Qc(this),this.#s.edit(e)}toggleComment(e,t=void 0){this.hasComment&&this._uiManager.toggleComment(this,e,t)}setSelectedCommentButton(e){this.#s.setSelectedButton(e)}addComment(e){if(this.hasEditedComment){const[,,,i]=e.rect,[o]=this.pageDimensions,[c]=this.pageTranslation,u=c+o+1,h=i-100,p=u+180;e.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[u,h,p,i]}}}updateFromAnnotationLayer({popup:{contents:e,deleted:t}}){this.#s.data=t?null:e}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){const e=this.div=document.createElement("div");e.setAttribute("data-editor-rotation",(360-this.rotation)%360),e.className=this.name,e.setAttribute("id",this.id),e.tabIndex=this.#i?-1:0,e.setAttribute("role","application"),this.defaultL10nId&&e.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||e.classList.add("hidden"),this.setInForeground(),this.#z();const[t,s]=this.parentDimensions;this.parentRotation%180!==0&&(e.style.maxWidth=`${(100*s/t).toFixed(2)}%`,e.style.maxHeight=`${(100*t/s).toFixed(2)}%`);const[i,o]=this.getInitialTranslation();return this.translate(i,o),fw(this,e,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(this.#j||=new wl({container:e,isPinchingDisabled:()=>!this.isSelected,onPinchStart:this.#V.bind(this),onPinching:this.#E.bind(this),onPinchEnd:this.#w.bind(this),signal:this._uiManager._signal})),this.addStandaloneCommentButton(),this._uiManager._editorUndoBar?.hide(),e}#V(){this.#h={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height},this.#n?.toggle(!1),this.parent.togglePointerEvents(!1)}#E(e,t,s){let o=.7*(s/t)+1-.7;if(o===1)return;const c=this.#T(this.rotation),u=(C,P)=>[c[0]*C+c[2]*P,c[1]*C+c[3]*P],[h,p]=this.parentDimensions,f=this.x,g=this.y,x=this.width,b=this.height,w=be.MIN_SIZE/h,_=be.MIN_SIZE/p;o=Math.max(Math.min(o,1/x,1/b),w/x,_/b);const S=be._round(x*o),A=be._round(b*o);if(S===x&&A===b)return;this.#d||=[f,g,x,b];const L=u(x/2,b/2),O=be._round(f+L[0]),D=be._round(g+L[1]),I=u(S/2,A/2);this.x=O-I[0],this.y=D-I[1],this.width=S,this.height=A,this.setDims(),this.fixAndSetPosition(),this._onResizing()}#w(){this.#n?.toggle(!0),this.parent.togglePointerEvents(!0),this.#F()}pointerdown(e){const{isMac:t}=Yt.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(this.#m=!0,this._isDraggable){this.#U(e);return}this.#M(e)}#M(e){const{isMac:t}=Yt.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)}#U(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();let s=!1;const i=new AbortController,o=this._uiManager.combinedSignal(i),c={capture:!0,passive:!1,signal:o},u=p=>{i.abort(),this.#a=null,this.#m=!1,this._uiManager.endDragSession()||this.#M(p),s&&this._onStopDragging()};t&&(this.#N=e.clientX,this.#A=e.clientY,this.#a=e.pointerId,this.#o=e.pointerType,window.addEventListener("pointermove",p=>{s||(s=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:f,clientY:g,pointerId:x}=p;if(x!==this.#a){St(p);return}const[b,w]=this.screenToPageTranslation(f-this.#N,g-this.#A);this.#N=f,this.#A=g,this._uiManager.dragSelectedEditors(b,w)},c),window.addEventListener("touchmove",St,c),window.addEventListener("pointerdown",p=>{p.pointerType===this.#o&&(this.#j||p.isPrimary)&&u(p),St(p)},c));const h=p=>{if(!this.#a||this.#a===p.pointerId){u(p);return}St(p)};window.addEventListener("pointerup",h,{signal:o}),window.addEventListener("blur",h,{signal:o})}_onStartDragging(){}_onStopDragging(){}moveInDOM(){this.#y&&clearTimeout(this.#y),this.#y=setTimeout(()=>{this.#y=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(e,t,s){e.changeParent(this),this.x=t,this.y=s,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t,s=this.rotation){const i=this.parentScale,[o,c]=this.pageDimensions,[u,h]=this.pageTranslation,p=e/i,f=t/i,g=this.x*o,x=this.y*c,b=this.width*o,w=this.height*c;switch(s){case 0:return[g+p+u,c-x-f-w+h,g+p+b+u,c-x-f+h];case 90:return[g+f+u,c-x+p+h,g+f+w+u,c-x+p+b+h];case 180:return[g-p-b+u,c-x+f+h,g-p+u,c-x+f+w+h];case 270:return[g-f-w+u,c-x-p-b+h,g-f+u,c-x-p+h];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[s,i,o,c]=e,u=o-s,h=c-i;switch(this.rotation){case 0:return[s,t-c,u,h];case 90:return[s,t-i,h,u];case 180:return[o,t-i,u,h];case 270:return[o,t-c,h,u];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&be._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){this.#s?.onUpdatedColor()}getData(){const{comment:{text:e,color:t,date:s,opacity:i,deleted:o,richText:c},uid:u,pageIndex:h,creationDate:p,modificationDate:f}=this;return{id:u,pageIndex:h,rect:this.getPDFRect(),richText:c,contentsObj:{str:e},creationDate:p,modificationDate:s||f,popupRef:!o,color:t,opacity:i}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),this.#x=!0,!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),this.#x=!1,!0):!1}isInEditMode(){return this.#x}shouldGetKeyboardEvents(){return this.#b}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:t,bottom:s,right:i}=this.getClientDimensions(),{innerHeight:o,innerWidth:c}=window;return t<c&&i>0&&e<o&&s>0}#z(){if(this.#f||!this.div)return;this.#f=new AbortController;const e=this._uiManager.combinedSignal(this.#f);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})}rebuild(){this.#z()}rotate(e){}resize(){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(e=!1,t=null){return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:this._initialData?.popupRef||""}}static async deserialize(e,t,s){const i=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:s,annotationElementId:e.annotationElementId,creationDate:e.creationDate,modificationDate:e.modificationDate});i.rotation=e.rotation,i.#e=e.accessibilityData,i._isCopy=e.isCopy||!1;const[o,c]=i.pageDimensions,[u,h,p,f]=i.getRectInCurrentCoords(e.rect,c);return i.x=u/o,i.y=h/c,i.width=p/o,i.height=f/c,i}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#f?.abort(),this.#f=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#y&&(clearTimeout(this.#y),this.#y=null),this.#B(),this.removeEditToolbar(),this.#v){for(const e of this.#v.values())clearTimeout(e);this.#v=null}this.parent=null,this.#j?.destroy(),this.#j=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#P(),this.#c.classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[e,t]}=this,[s,i,o,c]=this.getPDFRect();return[be._round(s+(o-s)*e),be._round(i+(c-i)*(1-t))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return this.#s.commentPopupPositionInLayer}set commentPopupPosition(e){this.#s.commentPopupPositionInLayer=e}hasDefaultPopupPosition(){return this.#s.hasDefaultPopupPosition()}get commentButtonWidth(){return this.#s.commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(e){this.#s.setCommentButtonStates(e)}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),this.#h={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const t=this.#c.children;if(!this.#t){this.#t=Array.from(t);const c=this.#Y.bind(this),u=this.#$.bind(this),h=this._uiManager._signal;for(const p of this.#t){const f=p.getAttribute("data-resizer-name");p.setAttribute("role","spinbutton"),p.addEventListener("keydown",c,{signal:h}),p.addEventListener("blur",u,{signal:h}),p.addEventListener("focus",this.#X.bind(this,f),{signal:h}),p.setAttribute("data-l10n-id",be._l10nResizer[f])}}const s=this.#t[0];let i=0;for(const c of t){if(c===s)break;i++}const o=(360-this.rotation+this.parentRotation)%360/90*(this.#t.length/4);if(o!==i){if(o<i)for(let u=0;u<i-o;u++)this.#c.append(this.#c.firstChild);else if(o>i)for(let u=0;u<o-i;u++)this.#c.firstChild.before(this.#c.lastChild);let c=0;for(const u of t){const p=this.#t[c++].getAttribute("data-resizer-name");u.setAttribute("data-l10n-id",be._l10nResizer[p])}}this.#H(0),this.#b=!0,this.#c.firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}#Y(e){be._resizerKeyboardManager.exec(this,e)}#$(e){this.#b&&e.relatedTarget?.parentNode!==this.#c&&this.#B()}#X(e){this.#g=this.#b?e:""}#H(e){if(this.#t)for(const t of this.#t)t.tabIndex=e}_resizeWithKeyboard(e,t){this.#b&&this.#O(this.#g,{deltaX:e,deltaY:t,fromKeyboard:!0})}#B(){this.#b=!1,this.#H(-1),this.#F()}_stopResizingWithKeyboard(){this.#B(),this.div.focus()}select(){if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#n?.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>this.div?.focus({preventScroll:!0}),0)}unselect(){this.isSelected&&(this.isSelected=!1,this.#c?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#n?.toggleAltTextBadge(!0),this.hasComment&&this._uiManager.toggleComment(this,!1,!1))}updateParams(e,t){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(e){e.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return this.#p}set isEditing(e){this.#p=e,this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){this.#v||=new Map;const{action:s}=e;let i=this.#v.get(s);i&&clearTimeout(i),i=setTimeout(()=>{this._reportTelemetry(e),this.#v.delete(s),this.#v.size===0&&(this.#v=null)},be._telemetryTimeout),this.#v.set(s,i);return}e.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),this.#i=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#i=!0}updateFakeAnnotationElement(e){if(!this.#u&&!this.deleted){this.#u=e.addFakeAnnotation(this);return}if(this.deleted){this.#u.remove(),this.#u=null;return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&this.#u.updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const s=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),s.before(t)}return t}resetAnnotationElement(e){const{firstChild:t}=e.container;t?.nodeName==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}}class nC extends be{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const tb=3285377520,sn=4294901760,Ln=65535;class mw{constructor(e){this.h1=e?e&4294967295:tb,this.h2=e?e&4294967295:tb}update(e){let t,s;if(typeof e=="string"){t=new Uint8Array(e.length*2),s=0;for(let _=0,S=e.length;_<S;_++){const A=e.charCodeAt(_);A<=255?t[s++]=A:(t[s++]=A>>>8,t[s++]=A&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),s=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const i=s>>2,o=s-i*4,c=new Uint32Array(t.buffer,0,i);let u=0,h=0,p=this.h1,f=this.h2;const g=3432918353,x=461845907,b=g&Ln,w=x&Ln;for(let _=0;_<i;_++)_&1?(u=c[_],u=u*g&sn|u*b&Ln,u=u<<15|u>>>17,u=u*x&sn|u*w&Ln,p^=u,p=p<<13|p>>>19,p=p*5+3864292196):(h=c[_],h=h*g&sn|h*b&Ln,h=h<<15|h>>>17,h=h*x&sn|h*w&Ln,f^=h,f=f<<13|f>>>19,f=f*5+3864292196);switch(u=0,o){case 3:u^=t[i*4+2]<<16;case 2:u^=t[i*4+1]<<8;case 1:u^=t[i*4],u=u*g&sn|u*b&Ln,u=u<<15|u>>>17,u=u*x&sn|u*w&Ln,i&1?p^=u:f^=u}this.h1=p,this.h2=f}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&sn|e*36045&Ln,t=t*4283543511&sn|((t<<16|e>>>16)*2950163797&sn)>>>16,e^=t>>>1,e=e*444984403&sn|e*60499&Ln,t=t*3301882366&sn|((t<<16|e>>>16)*3120437893&sn)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const lm=Object.freeze({map:null,hash:"",transfer:void 0});class Xm{#e=!1;#t=null;#n=null;#s=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const s=this.#s.get(e);return s===void 0?t:Object.assign(t,s)}getRawValue(e){return this.#s.get(e)}remove(e){const t=this.#s.get(e);if(t!==void 0&&(t instanceof be&&this.#n.delete(t.annotationElementId),this.#s.delete(e),this.#s.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const s of this.#s.values())if(s instanceof be)return;this.onAnnotationEditor(null)}}setValue(e,t){const s=this.#s.get(e);let i=!1;if(s!==void 0)for(const[o,c]of Object.entries(t))s[o]!==c&&(i=!0,s[o]=c);else i=!0,this.#s.set(e,t);i&&this.#r(),t instanceof be&&((this.#n||=new Map).set(t.annotationElementId,t),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type))}has(e){return this.#s.has(e)}get size(){return this.#s.size}#r(){this.#e||(this.#e=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#e&&(this.#e=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new pw(this)}get serializable(){if(this.#s.size===0)return lm;const e=new Map,t=new mw,s=[],i=Object.create(null);let o=!1;for(const[c,u]of this.#s){const h=u instanceof be?u.serialize(!1,i):u;h&&(e.set(c,h),t.update(`${c}:${JSON.stringify(h)}`),o||=!!h.bitmap)}if(o)for(const c of e.values())c.bitmap&&s.push(c.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:s}:lm}get editorStats(){let e=null;const t=new Map;let s=0,i=0;for(const o of this.#s.values()){if(!(o instanceof be)){o.popup&&(o.popup.deleted?i+=1:s+=1);continue}o.isCommentDeleted?i+=1:o.hasEditedComment&&(s+=1);const c=o.telemetryFinalData;if(!c)continue;const{type:u}=c;t.has(u)||t.set(u,Object.getPrototypeOf(o).constructor),e||=Object.create(null);const h=e[u]||=new Map;for(const[p,f]of Object.entries(c)){if(p==="type")continue;let g=h.get(p);g||(g=new Map,h.set(p,g));const x=g.get(f)??0;g.set(f,x+1)}}if((i>0||s>0)&&(e||=Object.create(null),e.comments={deleted:i,edited:s}),!e)return null;for(const[o,c]of t)e[o]=c.computeTelemetryFinalData(e[o]);return e}resetModifiedIds(){this.#t=null}updateEditor(e,t){const s=this.#n?.get(e);return s?(s.updateFromAnnotationLayer(t),!0):!1}getEditor(e){return this.#n?.get(e)||null}get modifiedIds(){if(this.#t)return this.#t;const e=[];if(this.#n)for(const t of this.#n.values())t.serialize()&&e.push(t.annotationElementId);return this.#t={ids:new Set(e),hash:e.join(",")}}[Symbol.iterator](){return this.#s.entries()}}class pw extends Xm{#e;constructor(e){super();const{map:t,hash:s,transfer:i}=e.serializable,o=structuredClone(t,i?{transfer:i}:null);this.#e={map:o,hash:s,transfer:i}}get print(){dt("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#e}get modifiedIds(){return Le(this,"modifiedIds",{ids:new Set,hash:""})}}class iC{#e=new Set;constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),this.#e.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,disableFontFace:t,_inspectFont:s}){if(!(!e||this.#e.has(e.loadedName))){if($e(!t,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:i,src:o,style:c}=e,u=new FontFace(i,o,c);this.addNativeFontFace(u);try{await u.load(),this.#e.add(i),s?.(e)}catch{Ce(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(u)}return}dt("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const s=e.createNativeFontFace();if(s){this.addNativeFontFace(s);try{await s.loaded}catch(i){throw Ce(`Failed to load font '${s.family}': '${i}'.`),e.disableFontFace=!0,i}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(s=>{const i=this._queueLoadingCallback(s);this._prepareFontLoadEvent(e,i)})}}get isFontLoadingAPISupported(){const e=!!this._document?.fonts;return Le(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){return Le(this,"isSyncFontLoadingSupported",ps||Yt.platform.isFirefox)}_queueLoadingCallback(e){function t(){for($e(!i.done,"completeRequest() cannot be called twice."),i.done=!0;s.length>0&&s[0].done;){const o=s.shift();setTimeout(o.callback,0)}}const{loadingRequests:s}=this,i={done:!1,complete:t,callback:e};return s.push(i),i}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Le(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function s(D,I){return D.charCodeAt(I)<<24|D.charCodeAt(I+1)<<16|D.charCodeAt(I+2)<<8|D.charCodeAt(I+3)&255}function i(D,I,C,P){const k=D.substring(0,I),N=D.substring(I+C);return k+P+N}let o,c;const u=this._document.createElement("canvas");u.width=1,u.height=1;const h=u.getContext("2d");let p=0;function f(D,I){if(++p>30){Ce("Load test font never loaded."),I();return}if(h.font="30px "+D,h.fillText(".",0,20),h.getImageData(0,0,1,1).data[3]>0){I();return}setTimeout(f.bind(null,D,I))}const g=`lt${Date.now()}${this.loadTestFontId++}`;let x=this._loadTestFont;x=i(x,976,g.length,g);const w=16,_=1482184792;let S=s(x,w);for(o=0,c=g.length-3;o<c;o+=4)S=S-_+s(g,o)|0;o<g.length&&(S=S-_+s(g+"XXX",o)|0),x=i(x,w,4,Gj(S));const A=`url(data:font/opentype;base64,${btoa(x)});`,L=`@font-face {font-family:"${g}";src:${A}}`;this.insertRule(L);const O=this._document.createElement("div");O.style.visibility="hidden",O.style.width=O.style.height="10px",O.style.position="absolute",O.style.top=O.style.left="0px";for(const D of[e.loadedName,g]){const I=this._document.createElement("span");I.textContent="Hi",I.style.fontFamily=D,O.append(I)}this._document.body.append(O),f(g,()=>{O.remove(),t.complete()})}}class aC{#e;constructor(e,t=null,s,i){this.compiledGlyphs=Object.create(null),this.#e=e,this._inspectFont=t,s&&Object.assign(this,s),i&&(this.charProcOperatorList=i)}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const t={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(t.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,t)}return this._inspectFont?.(this),e}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${rw(this.data)});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let s=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(s+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${s}src:${e}}`}return this._inspectFont?.(this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];const s=this.loadedName+"_path_"+t;let i;try{i=e.get(s)}catch(c){Ce(`getPathGenerator - ignoring character: "${c}".`)}const o=new Path2D(i||"");return this.fontExtraProperties||e.delete(s),this.compiledGlyphs[t]=o}get black(){return this.#e.black}get bold(){return this.#e.bold}get disableFontFace(){return this.#e.disableFontFace??!1}get fontExtraProperties(){return this.#e.fontExtraProperties??!1}get isInvalidPDFjsFont(){return this.#e.isInvalidPDFjsFont}get isType3Font(){return this.#e.isType3Font}get italic(){return this.#e.italic}get missingFile(){return this.#e.missingFile}get remeasure(){return this.#e.remeasure}get vertical(){return this.#e.vertical}get ascent(){return this.#e.ascent}get defaultWidth(){return this.#e.defaultWidth}get descent(){return this.#e.descent}get bbox(){return this.#e.bbox}get fontMatrix(){return this.#e.fontMatrix}get fallbackName(){return this.#e.fallbackName}get loadedName(){return this.#e.loadedName}get mimetype(){return this.#e.mimetype}get name(){return this.#e.name}get data(){return this.#e.data}clearData(){this.#e.clearData()}get cssFontInfo(){return this.#e.cssFontInfo}get systemFontInfo(){return this.#e.systemFontInfo}get defaultVMetrics(){return this.#e.defaultVMetrics}}function rC(r){if(r instanceof URL)return r.href;if(typeof r=="string"){if(ps)return r;const e=URL.parse(r,window.location);if(e)return e.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function oC(r){if(ps&&typeof Buffer<"u"&&r instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength)return r;if(typeof r=="string")return xl(r);if(r instanceof ArrayBuffer||ArrayBuffer.isView(r)||typeof r=="object"&&!isNaN(r?.length))return new Uint8Array(r);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function Zc(r){if(typeof r!="string")return null;if(r.endsWith("/"))return r;throw new Error(`Invalid factory url: "${r}" must include trailing slash.`)}const cm=r=>typeof r=="object"&&Number.isInteger(r?.num)&&r.num>=0&&Number.isInteger(r?.gen)&&r.gen>=0,lC=r=>typeof r=="object"&&typeof r?.name=="string",gw=Wj.bind(null,cm,lC);class cC{#e=new Map;#t=Promise.resolve();postMessage(e,t){const s={data:structuredClone(e,t?{transfer:t}:null)};this.#t.then(()=>{for(const[i]of this.#e)i.call(this,s)})}addEventListener(e,t,s=null){let i=null;if(s?.signal instanceof AbortSignal){const{signal:o}=s;if(o.aborted){Ce("LoopbackPort - cannot use an `aborted` signal.");return}const c=()=>this.removeEventListener(e,t);i=()=>o.removeEventListener("abort",c),o.addEventListener("abort",c)}this.#e.set(t,i)}removeEventListener(e,t){this.#e.get(t)?.(),this.#e.delete(t)}terminate(){for(const[,e]of this.#e)e?.();this.#e.clear()}}const Jc={DATA:1,ERROR:2},Ft={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function sb(){}function Es(r){if(r instanceof fi||r instanceof Rd||r instanceof Xy||r instanceof tl||r instanceof Uf)return r;switch(r instanceof Error||typeof r=="object"&&r!==null||dt('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),r.name){case"AbortException":return new fi(r.message);case"InvalidPDFException":return new Rd(r.message);case"PasswordException":return new Xy(r.message,r.code);case"ResponseException":return new tl(r.message,r.status,r.missing);case"UnknownErrorException":return new Uf(r.message,r.details)}return new Uf(r.message,r.toString())}class Yo{#e=new AbortController;constructor(e,t,s){this.sourceName=e,this.targetName=t,this.comObj=s,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),s.addEventListener("message",this.#t.bind(this),{signal:this.#e.signal})}#t({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){this.#s(e);return}if(e.callback){const s=e.callbackId,i=this.callbackCapabilities[s];if(!i)throw new Error(`Cannot resolve callback ${s}`);if(delete this.callbackCapabilities[s],e.callback===Jc.DATA)i.resolve(e.data);else if(e.callback===Jc.ERROR)i.reject(Es(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const s=this.sourceName,i=e.sourceName,o=this.comObj;Promise.try(t,e.data).then(function(c){o.postMessage({sourceName:s,targetName:i,callback:Jc.DATA,callbackId:e.callbackId,data:c})},function(c){o.postMessage({sourceName:s,targetName:i,callback:Jc.ERROR,callbackId:e.callbackId,reason:Es(c)})});return}if(e.streamId){this.#n(e);return}t(e.data)}on(e,t){const s=this.actionHandler;if(s[e])throw new Error(`There is already an actionName called "${e}"`);s[e]=t}send(e,t,s){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},s)}sendWithPromise(e,t,s){const i=this.callbackId++,o=Promise.withResolvers();this.callbackCapabilities[i]=o;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:i,data:t},s)}catch(c){o.reject(c)}return o.promise}sendWithStream(e,t,s,i){const o=this.streamId++,c=this.sourceName,u=this.targetName,h=this.comObj;return new ReadableStream({start:p=>{const f=Promise.withResolvers();return this.streamControllers[o]={controller:p,startCall:f,pullCall:null,cancelCall:null,isClosed:!1},h.postMessage({sourceName:c,targetName:u,action:e,streamId:o,data:t,desiredSize:p.desiredSize},i),f.promise},pull:p=>{const f=Promise.withResolvers();return this.streamControllers[o].pullCall=f,h.postMessage({sourceName:c,targetName:u,stream:Ft.PULL,streamId:o,desiredSize:p.desiredSize}),f.promise},cancel:p=>{$e(p instanceof Error,"cancel must have a valid reason");const f=Promise.withResolvers();return this.streamControllers[o].cancelCall=f,this.streamControllers[o].isClosed=!0,h.postMessage({sourceName:c,targetName:u,stream:Ft.CANCEL,streamId:o,reason:Es(p)}),f.promise}},s)}#n(e){const t=e.streamId,s=this.sourceName,i=e.sourceName,o=this.comObj,c=this,u=this.actionHandler[e.action],h={enqueue(p,f=1,g){if(this.isCancelled)return;const x=this.desiredSize;this.desiredSize-=f,x>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),o.postMessage({sourceName:s,targetName:i,stream:Ft.ENQUEUE,streamId:t,chunk:p},g)},close(){this.isCancelled||(this.isCancelled=!0,o.postMessage({sourceName:s,targetName:i,stream:Ft.CLOSE,streamId:t}),delete c.streamSinks[t])},error(p){$e(p instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,o.postMessage({sourceName:s,targetName:i,stream:Ft.ERROR,streamId:t,reason:Es(p)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};h.sinkCapability.resolve(),h.ready=h.sinkCapability.promise,this.streamSinks[t]=h,Promise.try(u,e.data,h).then(function(){o.postMessage({sourceName:s,targetName:i,stream:Ft.START_COMPLETE,streamId:t,success:!0})},function(p){o.postMessage({sourceName:s,targetName:i,stream:Ft.START_COMPLETE,streamId:t,reason:Es(p)})})}#s(e){const t=e.streamId,s=this.sourceName,i=e.sourceName,o=this.comObj,c=this.streamControllers[t],u=this.streamSinks[t];switch(e.stream){case Ft.START_COMPLETE:e.success?c.startCall.resolve():c.startCall.reject(Es(e.reason));break;case Ft.PULL_COMPLETE:e.success?c.pullCall.resolve():c.pullCall.reject(Es(e.reason));break;case Ft.PULL:if(!u){o.postMessage({sourceName:s,targetName:i,stream:Ft.PULL_COMPLETE,streamId:t,success:!0});break}u.desiredSize<=0&&e.desiredSize>0&&u.sinkCapability.resolve(),u.desiredSize=e.desiredSize,Promise.try(u.onPull||sb).then(function(){o.postMessage({sourceName:s,targetName:i,stream:Ft.PULL_COMPLETE,streamId:t,success:!0})},function(p){o.postMessage({sourceName:s,targetName:i,stream:Ft.PULL_COMPLETE,streamId:t,reason:Es(p)})});break;case Ft.ENQUEUE:if($e(c,"enqueue should have stream controller"),c.isClosed)break;c.controller.enqueue(e.chunk);break;case Ft.CLOSE:if($e(c,"close should have stream controller"),c.isClosed)break;c.isClosed=!0,c.controller.close(),this.#r(c,t);break;case Ft.ERROR:$e(c,"error should have stream controller"),c.controller.error(Es(e.reason)),this.#r(c,t);break;case Ft.CANCEL_COMPLETE:e.success?c.cancelCall.resolve():c.cancelCall.reject(Es(e.reason)),this.#r(c,t);break;case Ft.CANCEL:if(!u)break;const h=Es(e.reason);Promise.try(u.onCancel||sb,h).then(function(){o.postMessage({sourceName:s,targetName:i,stream:Ft.CANCEL_COMPLETE,streamId:t,success:!0})},function(p){o.postMessage({sourceName:s,targetName:i,stream:Ft.CANCEL_COMPLETE,streamId:t,reason:Es(p)})}),u.sinkCapability.reject(h),u.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}}async#r(e,t){await Promise.allSettled([e.startCall?.promise,e.pullCall?.promise,e.cancelCall?.promise]),delete this.streamControllers[t]}destroy(){this.#e?.abort(),this.#e=null}}class xw{#e=!1;constructor({enableHWA:e=!1}){this.#e=e}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const s=this._createCanvas(e,t);return{canvas:s,context:s.getContext("2d",{willReadFrequently:!this.#e})}}reset(e,t,s){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||s<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=s}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){dt("Abstract method `_createCanvas` called.")}}class dC extends xw{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const s=this._document.createElement("canvas");return s.width=e,s.height=t,s}}class yw{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(s=>({cMapData:s,isCompressed:this.isCompressed})).catch(s=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){dt("Abstract method `_fetch` called.")}}class nb extends yw{async _fetch(e){const t=await Ir(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):xl(t)}}class bw{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,s,i,o){return"none"}destroy(e=!1){}}class uC extends bw{#e;#t;#n;#s;#r;#i;#a=0;constructor({docId:e,ownerDocument:t=globalThis.document}){super(),this.#s=e,this.#r=t}get#o(){return this.#t||=new Map}get#c(){return this.#i||=new Map}get#l(){if(!this.#n){const e=this.#r.createElement("div"),{style:t}=e;t.visibility="hidden",t.contain="strict",t.width=t.height=0,t.position="absolute",t.top=t.left=0,t.zIndex=-1;const s=this.#r.createElementNS(li,"svg");s.setAttribute("width",0),s.setAttribute("height",0),this.#n=this.#r.createElementNS(li,"defs"),e.append(s),s.append(this.#n),this.#r.body.append(e)}return this.#n}#h(e){if(e.length===1){const h=e[0],p=new Array(256);for(let g=0;g<256;g++)p[g]=h[g]/255;const f=p.join(",");return[f,f,f]}const[t,s,i]=e,o=new Array(256),c=new Array(256),u=new Array(256);for(let h=0;h<256;h++)o[h]=t[h]/255,c[h]=s[h]/255,u[h]=i[h]/255;return[o.join(","),c.join(","),u.join(",")]}#u(e){if(this.#e===void 0){this.#e="";const t=this.#r.URL;t!==this.#r.baseURI&&(bl(t)?Ce('#createUrl: ignore "data:"-URL for performance reasons.'):this.#e=zm(t,""))}return`url(${this.#e}#${e})`}addFilter(e){if(!e)return"none";let t=this.#o.get(e);if(t)return t;const[s,i,o]=this.#h(e),c=e.length===1?s:`${s}${i}${o}`;if(t=this.#o.get(c),t)return this.#o.set(e,t),t;const u=`g_${this.#s}_transfer_map_${this.#a++}`,h=this.#u(u);this.#o.set(e,h),this.#o.set(c,h);const p=this.#m(u);return this.#p(s,i,o,p),h}addHCMFilter(e,t){const s=`${e}-${t}`,i="base";let o=this.#c.get(i);if(o?.key===s||(o?(o.filter?.remove(),o.key=s,o.url="none",o.filter=null):(o={key:s,url:"none",filter:null},this.#c.set(i,o)),!e||!t))return o.url;const c=this.#b(e);e=fe.makeHexColor(...c);const u=this.#b(t);if(t=fe.makeHexColor(...u),this.#l.style.color="",e==="#000000"&&t==="#ffffff"||e===t)return o.url;const h=new Array(256);for(let b=0;b<=255;b++){const w=b/255;h[b]=w<=.03928?w/12.92:((w+.055)/1.055)**2.4}const p=h.join(","),f=`g_${this.#s}_hcm_filter`,g=o.filter=this.#m(f);this.#p(p,p,p,g),this.#g(g);const x=(b,w)=>{const _=c[b]/255,S=u[b]/255,A=new Array(w+1);for(let L=0;L<=w;L++)A[L]=_+L/w*(S-_);return A.join(",")};return this.#p(x(0,5),x(1,5),x(2,5),g),o.url=this.#u(f),o.url}addAlphaFilter(e){let t=this.#o.get(e);if(t)return t;const[s]=this.#h([e]),i=`alpha_${s}`;if(t=this.#o.get(i),t)return this.#o.set(e,t),t;const o=`g_${this.#s}_alpha_map_${this.#a++}`,c=this.#u(o);this.#o.set(e,c),this.#o.set(i,c);const u=this.#m(o);return this.#x(s,u),c}addLuminosityFilter(e){let t=this.#o.get(e||"luminosity");if(t)return t;let s,i;if(e?([s]=this.#h([e]),i=`luminosity_${s}`):i="luminosity",t=this.#o.get(i),t)return this.#o.set(e,t),t;const o=`g_${this.#s}_luminosity_map_${this.#a++}`,c=this.#u(o);this.#o.set(e,c),this.#o.set(i,c);const u=this.#m(o);return this.#f(u),e&&this.#x(s,u),c}addHighlightHCMFilter(e,t,s,i,o){const c=`${t}-${s}-${i}-${o}`;let u=this.#c.get(e);if(u?.key===c||(u?(u.filter?.remove(),u.key=c,u.url="none",u.filter=null):(u={key:c,url:"none",filter:null},this.#c.set(e,u)),!t||!s))return u.url;const[h,p]=[t,s].map(this.#b.bind(this));let f=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),g=Math.round(.2126*p[0]+.7152*p[1]+.0722*p[2]),[x,b]=[i,o].map(this.#b.bind(this));g<f&&([f,g,x,b]=[g,f,b,x]),this.#l.style.color="";const w=(A,L,O)=>{const D=new Array(256),I=(g-f)/O,C=A/255,P=(L-A)/(255*O);let k=0;for(let N=0;N<=O;N++){const M=Math.round(f+N*I),H=C+N*P;for(let F=k;F<=M;F++)D[F]=H;k=M+1}for(let N=k;N<256;N++)D[N]=D[k-1];return D.join(",")},_=`g_${this.#s}_hcm_${e}_filter`,S=u.filter=this.#m(_);return this.#g(S),this.#p(w(x[0],b[0],5),w(x[1],b[1],5),w(x[2],b[2],5),S),u.url=this.#u(_),u.url}destroy(e=!1){e&&this.#i?.size||(this.#n?.parentNode.parentNode.remove(),this.#n=null,this.#t?.clear(),this.#t=null,this.#i?.clear(),this.#i=null,this.#a=0)}#f(e){const t=this.#r.createElementNS(li,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(t)}#g(e){const t=this.#r.createElementNS(li,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(t)}#m(e){const t=this.#r.createElementNS(li,"filter");return t.setAttribute("color-interpolation-filters","sRGB"),t.setAttribute("id",e),this.#l.append(t),t}#d(e,t,s){const i=this.#r.createElementNS(li,t);i.setAttribute("type","discrete"),i.setAttribute("tableValues",s),e.append(i)}#p(e,t,s,i){const o=this.#r.createElementNS(li,"feComponentTransfer");i.append(o),this.#d(o,"feFuncR",e),this.#d(o,"feFuncG",t),this.#d(o,"feFuncB",s)}#x(e,t){const s=this.#r.createElementNS(li,"feComponentTransfer");t.append(s),this.#d(s,"feFuncA",e)}#b(e){return this.#l.style.color=e,zr(getComputedStyle(this.#l).getPropertyValue("color"))}}class vw{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(s=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){dt("Abstract method `_fetch` called.")}}class ib extends vw{async _fetch(e){const t=await Ir(e,"arraybuffer");return new Uint8Array(t)}}class ww{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!e)throw new Error("Wasm filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(s=>{throw new Error(`Unable to load wasm data at: ${t}`)})}async _fetch(e){dt("Abstract method `_fetch` called.")}}class ab extends ww{async _fetch(e){const t=await Ir(e,"arraybuffer");return new Uint8Array(t)}}ps&&Ce("Please use the `legacy` build in Node.js environments.");async function Wm(r){const t=await process.getBuiltinModule("fs").promises.readFile(r);return new Uint8Array(t)}class hC extends bw{}class fC extends xw{_createCanvas(e,t){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,t)}}class mC extends yw{async _fetch(e){return Wm(e)}}class pC extends vw{async _fetch(e){return Wm(e)}}class gC extends ww{async _fetch(e){return Wm(e)}}const mr="__forcedDependency",{floor:rb,ceil:ob}=Math;function ed(r,e,t,s,i,o){r[e*4+0]=Math.min(r[e*4+0],t),r[e*4+1]=Math.min(r[e*4+1],s),r[e*4+2]=Math.max(r[e*4+2],i),r[e*4+3]=Math.max(r[e*4+3],o)}const dm=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];class xC{#e;#t;constructor(e,t){this.#e=e,this.#t=t}get length(){return this.#e.length}isEmpty(e){return this.#e[e]===dm}minX(e){return this.#t[e*4+0]/256}minY(e){return this.#t[e*4+1]/256}maxX(e){return(this.#t[e*4+2]+1)/256}maxY(e){return(this.#t[e*4+3]+1)/256}}const td=(r,e)=>{if(!r)return;let t=r.get(e);return t||(t={dependencies:new Set,isRenderingOperation:!1},r.set(e,t)),t};class yC{#e={__proto__:null};#t={__proto__:null,transform:[],moveText:[],sameLineText:[],[mr]:[]};#n=new Map;#s=[];#r=[];#i=[[1,0,0,1,0,0]];#a=[-1/0,-1/0,1/0,1/0];#o=new Float64Array([1/0,1/0,-1/0,-1/0]);#c=-1;#l=new Set;#h=new Map;#u=new Map;#f;#g;#m;#d;#p;constructor(e,t,s=!1){this.#f=e.width,this.#g=e.height,this.#x(t),s&&(this.#p=new Map)}growOperationsCount(e){e>=this.#d.length&&this.#x(e,this.#d)}#x(e,t){const s=new ArrayBuffer(e*4);this.#m=new Uint8ClampedArray(s),this.#d=new Uint32Array(s),t&&t.length>0?(this.#d.set(t),this.#d.fill(dm,t.length)):this.#d.fill(dm)}save(e){return this.#e={__proto__:this.#e},this.#t={__proto__:this.#t,transform:{__proto__:this.#t.transform},moveText:{__proto__:this.#t.moveText},sameLineText:{__proto__:this.#t.sameLineText},[mr]:{__proto__:this.#t[mr]}},this.#a={__proto__:this.#a},this.#s.push(e),this}restore(e){const t=Object.getPrototypeOf(this.#e);if(t===null)return this;this.#e=t,this.#t=Object.getPrototypeOf(this.#t),this.#a=Object.getPrototypeOf(this.#a);const s=this.#s.pop();return s!==void 0&&(td(this.#p,e)?.dependencies.add(s),this.#d[e]=this.#d[s]),this}recordOpenMarker(e){return this.#s.push(e),this}getOpenMarker(){return this.#s.length===0?null:this.#s.at(-1)}recordCloseMarker(e){const t=this.#s.pop();return t!==void 0&&(td(this.#p,e)?.dependencies.add(t),this.#d[e]=this.#d[t]),this}beginMarkedContent(e){return this.#r.push(e),this}endMarkedContent(e){const t=this.#r.pop();return t!==void 0&&(td(this.#p,e)?.dependencies.add(t),this.#d[e]=this.#d[t]),this}pushBaseTransform(e){return this.#i.push(fe.multiplyByDOMMatrix(this.#i.at(-1),e.getTransform())),this}popBaseTransform(){return this.#i.length>1&&this.#i.pop(),this}recordSimpleData(e,t){return this.#e[e]=t,this}recordIncrementalData(e,t){return this.#t[e].push(t),this}resetIncrementalData(e,t){return this.#t[e].length=0,this}recordNamedData(e,t){return this.#n.set(e,t),this}recordSimpleDataFromNamed(e,t,s){this.#e[e]=this.#n.get(t)??s}recordFutureForcedDependency(e,t){return this.recordIncrementalData(mr,t),this}inheritSimpleDataAsFutureForcedDependencies(e){for(const t of e)t in this.#e&&this.recordFutureForcedDependency(t,this.#e[t]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const e of this.#l)this.recordFutureForcedDependency(mr,e);return this}resetBBox(e){return this.#c!==e&&(this.#c=e,this.#o[0]=1/0,this.#o[1]=1/0,this.#o[2]=-1/0,this.#o[3]=-1/0),this}recordClipBox(e,t,s,i,o,c){const u=fe.multiplyByDOMMatrix(this.#i.at(-1),t.getTransform()),h=[1/0,1/0,-1/0,-1/0];fe.axialAlignedBoundingBox([s,o,i,c],u,h);const p=fe.intersect(this.#a,h);return p?(this.#a[0]=p[0],this.#a[1]=p[1],this.#a[2]=p[2],this.#a[3]=p[3]):(this.#a[0]=this.#a[1]=1/0,this.#a[2]=this.#a[3]=-1/0),this}recordBBox(e,t,s,i,o,c){const u=this.#a;if(u[0]===1/0)return this;const h=fe.multiplyByDOMMatrix(this.#i.at(-1),t.getTransform());if(u[0]===-1/0)return fe.axialAlignedBoundingBox([s,o,i,c],h,this.#o),this;const p=[1/0,1/0,-1/0,-1/0];return fe.axialAlignedBoundingBox([s,o,i,c],h,p),this.#o[0]=Math.min(this.#o[0],Math.max(p[0],u[0])),this.#o[1]=Math.min(this.#o[1],Math.max(p[1],u[1])),this.#o[2]=Math.max(this.#o[2],Math.min(p[2],u[2])),this.#o[3]=Math.max(this.#o[3],Math.min(p[3],u[3])),this}recordCharacterBBox(e,t,s,i=1,o=0,c=0,u){const h=s.bbox;let p,f;if(h&&(p=h[2]!==h[0]&&h[3]!==h[1]&&this.#u.get(s),p!==!1&&(f=[0,0,0,0],fe.axialAlignedBoundingBox(h,s.fontMatrix,f),(i!==1||o!==0||c!==0)&&fe.scaleMinMax([i,0,0,-i,o,c],f),p)))return this.recordBBox(e,t,f[0],f[2],f[1],f[3]);if(!u)return this.recordFullPageBBox(e);const g=u();return h&&f&&p===void 0&&(p=f[0]<=o-g.actualBoundingBoxLeft&&f[2]>=o+g.actualBoundingBoxRight&&f[1]<=c-g.actualBoundingBoxAscent&&f[3]>=c+g.actualBoundingBoxDescent,this.#u.set(s,p),p)?this.recordBBox(e,t,f[0],f[2],f[1],f[3]):this.recordBBox(e,t,o-g.actualBoundingBoxLeft,o+g.actualBoundingBoxRight,c-g.actualBoundingBoxAscent,c+g.actualBoundingBoxDescent)}recordFullPageBBox(e){return this.#o[0]=Math.max(0,this.#a[0]),this.#o[1]=Math.max(0,this.#a[1]),this.#o[2]=Math.min(this.#f,this.#a[2]),this.#o[3]=Math.min(this.#g,this.#a[3]),this}getSimpleIndex(e){return this.#e[e]}recordDependencies(e,t){const s=this.#l,i=this.#e,o=this.#t;for(const c of t)c in this.#e?s.add(i[c]):c in o&&o[c].forEach(s.add,s);return this}recordNamedDependency(e,t){return this.#n.has(t)&&this.#l.add(this.#n.get(t)),this}recordOperation(e,t=!1){if(this.recordDependencies(e,[mr]),this.#p){const s=td(this.#p,e),{dependencies:i}=s;this.#l.forEach(i.add,i),this.#s.forEach(i.add,i),this.#r.forEach(i.add,i),i.delete(e),s.isRenderingOperation=!0}if(this.#c===e){const s=rb(this.#o[0]*256/this.#f),i=rb(this.#o[1]*256/this.#g),o=ob(this.#o[2]*256/this.#f),c=ob(this.#o[3]*256/this.#g);ed(this.#m,e,s,i,o,c);for(const u of this.#l)u!==e&&ed(this.#m,u,s,i,o,c);for(const u of this.#s)u!==e&&ed(this.#m,u,s,i,o,c);for(const u of this.#r)u!==e&&ed(this.#m,u,s,i,o,c);t||(this.#l.clear(),this.#c=-1)}return this}recordShowTextOperation(e,t=!1){const s=Array.from(this.#l);this.recordOperation(e,t),this.recordIncrementalData("sameLineText",e);for(const i of s)this.recordIncrementalData("sameLineText",i);return this}bboxToClipBoxDropOperation(e,t=!1){return this.#c===e&&(this.#c=-1,this.#a[0]=Math.max(this.#a[0],this.#o[0]),this.#a[1]=Math.max(this.#a[1],this.#o[1]),this.#a[2]=Math.min(this.#a[2],this.#o[2]),this.#a[3]=Math.min(this.#a[3],this.#o[3]),t||this.#l.clear()),this}_takePendingDependencies(){const e=this.#l;return this.#l=new Set,e}_extractOperation(e){const t=this.#h.get(e);return this.#h.delete(e),t}_pushPendingDependencies(e){for(const t of e)this.#l.add(t)}take(){return this.#u.clear(),new xC(this.#d,this.#m)}takeDebugMetadata(){return this.#p}}class Ld{#e;#t;#n;#s=0;#r=0;constructor(e,t,s){if(e instanceof Ld&&e.#n===!!s)return e;this.#e=e,this.#t=t,this.#n=!!s}growOperationsCount(){throw new Error("Unreachable")}save(e){return this.#r++,this.#e.save(this.#t),this}restore(e){return this.#r>0&&(this.#e.restore(this.#t),this.#r--),this}recordOpenMarker(e){return this.#s++,this}getOpenMarker(){return this.#s>0?this.#t:this.#e.getOpenMarker()}recordCloseMarker(e){return this.#s--,this}beginMarkedContent(e){return this}endMarkedContent(e){return this}pushBaseTransform(e){return this.#e.pushBaseTransform(e),this}popBaseTransform(){return this.#e.popBaseTransform(),this}recordSimpleData(e,t){return this.#e.recordSimpleData(e,this.#t),this}recordIncrementalData(e,t){return this.#e.recordIncrementalData(e,this.#t),this}resetIncrementalData(e,t){return this.#e.resetIncrementalData(e,this.#t),this}recordNamedData(e,t){return this}recordSimpleDataFromNamed(e,t,s){return this.#e.recordSimpleDataFromNamed(e,t,this.#t),this}recordFutureForcedDependency(e,t){return this.#e.recordFutureForcedDependency(e,this.#t),this}inheritSimpleDataAsFutureForcedDependencies(e){return this.#e.inheritSimpleDataAsFutureForcedDependencies(e),this}inheritPendingDependenciesAsFutureForcedDependencies(){return this.#e.inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(e){return this.#n||this.#e.resetBBox(this.#t),this}recordClipBox(e,t,s,i,o,c){return this.#n||this.#e.recordClipBox(this.#t,t,s,i,o,c),this}recordBBox(e,t,s,i,o,c){return this.#n||this.#e.recordBBox(this.#t,t,s,i,o,c),this}recordCharacterBBox(e,t,s,i,o,c,u){return this.#n||this.#e.recordCharacterBBox(this.#t,t,s,i,o,c,u),this}recordFullPageBBox(e){return this.#n||this.#e.recordFullPageBBox(this.#t),this}getSimpleIndex(e){return this.#e.getSimpleIndex(e)}recordDependencies(e,t){return this.#e.recordDependencies(this.#t,t),this}recordNamedDependency(e,t){return this.#e.recordNamedDependency(this.#t,t),this}recordOperation(e){return this.#e.recordOperation(this.#t,!0),this}recordShowTextOperation(e){return this.#e.recordShowTextOperation(this.#t,!0),this}bboxToClipBoxDropOperation(e){return this.#n||this.#e.bboxToClipBoxDropOperation(this.#t,!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}}const nn={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},ns={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function um(r,e){if(!e)return;const t=e[2]-e[0],s=e[3]-e[1],i=new Path2D;i.rect(e[0],e[1],t,s),r.clip(i)}class Km{isModifyingCurrentTransform(){return!1}getPattern(){dt("Abstract method `getPattern` called.")}}class bC extends Km{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const s of this._colorStops)t.addColorStop(s[0],s[1]);return t}getPattern(e,t,s,i){let o;if(i===ns.STROKE||i===ns.FILL){const c=t.current.getClippedPathBoundingBox(i,At(e))||[0,0,0,0],u=Math.ceil(c[2]-c[0])||1,h=Math.ceil(c[3]-c[1])||1,p=t.cachedCanvases.getCanvas("pattern",u,h),f=p.context;f.clearRect(0,0,f.canvas.width,f.canvas.height),f.beginPath(),f.rect(0,0,f.canvas.width,f.canvas.height),f.translate(-c[0],-c[1]),s=fe.transform(s,[1,0,0,1,c[0],c[1]]),f.transform(...t.baseTransform),this.matrix&&f.transform(...this.matrix),um(f,this._bbox),f.fillStyle=this._createGradient(f),f.fill(),o=e.createPattern(p.canvas,"no-repeat");const g=new DOMMatrix(s);o.setTransform(g)}else um(e,this._bbox),o=this._createGradient(e);return o}}function Hf(r,e,t,s,i,o,c,u){const h=e.coords,p=e.colors,f=r.data,g=r.width*4;let x;h[t+1]>h[s+1]&&(x=t,t=s,s=x,x=o,o=c,c=x),h[s+1]>h[i+1]&&(x=s,s=i,i=x,x=c,c=u,u=x),h[t+1]>h[s+1]&&(x=t,t=s,s=x,x=o,o=c,c=x);const b=(h[t]+e.offsetX)*e.scaleX,w=(h[t+1]+e.offsetY)*e.scaleY,_=(h[s]+e.offsetX)*e.scaleX,S=(h[s+1]+e.offsetY)*e.scaleY,A=(h[i]+e.offsetX)*e.scaleX,L=(h[i+1]+e.offsetY)*e.scaleY;if(w>=L)return;const O=p[o],D=p[o+1],I=p[o+2],C=p[c],P=p[c+1],k=p[c+2],N=p[u],M=p[u+1],H=p[u+2],F=Math.round(w),V=Math.round(L);let q,z,E,j,G,Y,ee,B;for(let $=F;$<=V;$++){if($<S){const ue=$<w?0:(w-$)/(w-S);q=b-(b-_)*ue,z=O-(O-C)*ue,E=D-(D-P)*ue,j=I-(I-k)*ue}else{let ue;$>L?ue=1:S===L?ue=0:ue=(S-$)/(S-L),q=_-(_-A)*ue,z=C-(C-N)*ue,E=P-(P-M)*ue,j=k-(k-H)*ue}let K;$<w?K=0:$>L?K=1:K=(w-$)/(w-L),G=b-(b-A)*K,Y=O-(O-N)*K,ee=D-(D-M)*K,B=I-(I-H)*K;const Q=Math.round(Math.min(q,G)),Z=Math.round(Math.max(q,G));let de=g*$+Q*4;for(let ue=Q;ue<=Z;ue++)K=(q-ue)/(q-G),K<0?K=0:K>1&&(K=1),f[de++]=z-(z-Y)*K|0,f[de++]=E-(E-ee)*K|0,f[de++]=j-(j-B)*K|0,f[de++]=255}}function vC(r,e,t){const s=e.coords,i=e.colors;let o,c;switch(e.type){case"lattice":const u=e.verticesPerRow,h=Math.floor(s.length/u)-1,p=u-1;for(o=0;o<h;o++){let f=o*u;for(let g=0;g<p;g++,f++)Hf(r,t,s[f],s[f+1],s[f+u],i[f],i[f+1],i[f+u]),Hf(r,t,s[f+u+1],s[f+1],s[f+u],i[f+u+1],i[f+1],i[f+u])}break;case"triangles":for(o=0,c=s.length;o<c;o+=3)Hf(r,t,s[o],s[o+1],s[o+2],i[o],i[o+1],i[o+2]);break;default:throw new Error("illegal figure")}}class wC extends Km{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[6],this._background=e[7],this.matrix=null}_createMeshCanvas(e,t,s){const u=Math.floor(this._bounds[0]),h=Math.floor(this._bounds[1]),p=Math.ceil(this._bounds[2])-u,f=Math.ceil(this._bounds[3])-h,g=Math.min(Math.ceil(Math.abs(p*e[0]*1.1)),3e3),x=Math.min(Math.ceil(Math.abs(f*e[1]*1.1)),3e3),b=p/g,w=f/x,_={coords:this._coords,colors:this._colors,offsetX:-u,offsetY:-h,scaleX:1/b,scaleY:1/w},S=g+4,A=x+4,L=s.getCanvas("mesh",S,A),O=L.context,D=O.createImageData(g,x);if(t){const C=D.data;for(let P=0,k=C.length;P<k;P+=4)C[P]=t[0],C[P+1]=t[1],C[P+2]=t[2],C[P+3]=255}for(const C of this._figures)vC(D,C,_);return O.putImageData(D,2,2),{canvas:L.canvas,offsetX:u-2*b,offsetY:h-2*w,scaleX:b,scaleY:w}}isModifyingCurrentTransform(){return!0}getPattern(e,t,s,i){um(e,this._bbox);const o=new Float32Array(2);if(i===ns.SHADING)fe.singularValueDecompose2dScale(At(e),o);else if(this.matrix){fe.singularValueDecompose2dScale(this.matrix,o);const[u,h]=o;fe.singularValueDecompose2dScale(t.baseTransform,o),o[0]*=u,o[1]*=h}else fe.singularValueDecompose2dScale(t.baseTransform,o);const c=this._createMeshCanvas(o,i===ns.SHADING?null:this._background,t.cachedCanvases);return i!==ns.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(c.offsetX,c.offsetY),e.scale(c.scaleX,c.scaleY),e.createPattern(c.canvas,"no-repeat")}}class _C extends Km{getPattern(){return"hotpink"}}function AC(r){switch(r[0]){case"RadialAxial":return new bC(r);case"Mesh":return new wC(r);case"Dummy":return new _C}throw new Error(`Unknown IR type: ${r[0]}`)}const lb={COLORED:1,UNCOLORED:2};class Qm{static MAX_PATTERN_SIZE=3e3;constructor(e,t,s,i){this.color=e[1],this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.ctx=t,this.canvasGraphicsFactory=s,this.baseTransform=i}createPatternCanvas(e,t){const{bbox:s,operatorList:i,paintType:o,tilingType:c,color:u,canvasGraphicsFactory:h}=this;let{xstep:p,ystep:f}=this;p=Math.abs(p),f=Math.abs(f),Jd("TilingType: "+c);const g=s[0],x=s[1],b=s[2],w=s[3],_=b-g,S=w-x,A=new Float32Array(2);fe.singularValueDecompose2dScale(this.matrix,A);const[L,O]=A;fe.singularValueDecompose2dScale(this.baseTransform,A);const D=L*A[0],I=O*A[1];let C=_,P=S,k=!1,N=!1;const M=Math.ceil(p*D),H=Math.ceil(f*I),F=Math.ceil(_*D),V=Math.ceil(S*I);M>=F?C=p:k=!0,H>=V?P=f:N=!0;const q=this.getSizeAndScale(C,this.ctx.canvas.width,D),z=this.getSizeAndScale(P,this.ctx.canvas.height,I),E=e.cachedCanvases.getCanvas("pattern",q.size,z.size),j=E.context,G=h.createCanvasGraphics(j,t);if(G.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(G,o,u),j.translate(-q.scale*g,-z.scale*x),G.transform(0,q.scale,0,0,z.scale,0,0),j.save(),G.dependencyTracker?.save(),this.clipBbox(G,g,x,b,w),G.baseTransform=At(G.ctx),G.executeOperatorList(i),G.endDrawing(),G.dependencyTracker?.restore(),j.restore(),k||N){const Y=E.canvas;k&&(C=p),N&&(P=f);const ee=this.getSizeAndScale(C,this.ctx.canvas.width,D),B=this.getSizeAndScale(P,this.ctx.canvas.height,I),$=ee.size,K=B.size,Q=e.cachedCanvases.getCanvas("pattern-workaround",$,K),Z=Q.context,de=k?Math.floor(_/p):0,ue=N?Math.floor(S/f):0;for(let xe=0;xe<=de;xe++)for(let pe=0;pe<=ue;pe++)Z.drawImage(Y,$*xe,K*pe,$,K,0,0,$,K);return{canvas:Q.canvas,scaleX:ee.scale,scaleY:B.scale,offsetX:g,offsetY:x}}return{canvas:E.canvas,scaleX:q.scale,scaleY:z.scale,offsetX:g,offsetY:x}}getSizeAndScale(e,t,s){const i=Math.max(Qm.MAX_PATTERN_SIZE,t);let o=Math.ceil(e*s);return o>=i?o=i:s=o/e,{scale:s,size:o}}clipBbox(e,t,s,i,o){const c=i-t,u=o-s;e.ctx.rect(t,s,c,u),fe.axialAlignedBoundingBox([t,s,i,o],At(e.ctx),e.current.minMax),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,s){const i=e.ctx,o=e.current;switch(t){case lb.COLORED:const{fillStyle:c,strokeStyle:u}=this.ctx;i.fillStyle=o.fillColor=c,i.strokeStyle=o.strokeColor=u;break;case lb.UNCOLORED:i.fillStyle=i.strokeStyle=s,o.fillColor=o.strokeColor=s;break;default:throw new Vj(`Unsupported paint type: ${t}`)}}isModifyingCurrentTransform(){return!1}getPattern(e,t,s,i,o){let c=s;i!==ns.SHADING&&(c=fe.transform(c,t.baseTransform),this.matrix&&(c=fe.transform(c,this.matrix)));const u=this.createPatternCanvas(t,o);let h=new DOMMatrix(c);h=h.translate(u.offsetX,u.offsetY),h=h.scale(1/u.scaleX,1/u.scaleY);const p=e.createPattern(u.canvas,"repeat");return p.setTransform(h),p}}function SC({src:r,srcPos:e=0,dest:t,width:s,height:i,nonBlackColor:o=4294967295,inverseDecode:c=!1}){const u=Yt.isLittleEndian?4278190080:255,[h,p]=c?[o,u]:[u,o],f=s>>3,g=s&7,x=r.length;t=new Uint32Array(t.buffer);let b=0;for(let w=0;w<i;w++){for(const S=e+f;e<S;e++){const A=e<x?r[e]:255;t[b++]=A&128?p:h,t[b++]=A&64?p:h,t[b++]=A&32?p:h,t[b++]=A&16?p:h,t[b++]=A&8?p:h,t[b++]=A&4?p:h,t[b++]=A&2?p:h,t[b++]=A&1?p:h}if(g===0)continue;const _=e<x?r[e++]:255;for(let S=0;S<g;S++)t[b++]=_&1<<7-S?p:h}return{srcPos:e,destPos:b}}const cb=16,db=100,NC=15,ub=10,js=16,qf=new DOMMatrix,Hs=new Float32Array(2),_r=new Float32Array([1/0,1/0,-1/0,-1/0]);function EC(r,e){if(r._removeMirroring)throw new Error("Context is already forwarding operations.");r.__originalSave=r.save,r.__originalRestore=r.restore,r.__originalRotate=r.rotate,r.__originalScale=r.scale,r.__originalTranslate=r.translate,r.__originalTransform=r.transform,r.__originalSetTransform=r.setTransform,r.__originalResetTransform=r.resetTransform,r.__originalClip=r.clip,r.__originalMoveTo=r.moveTo,r.__originalLineTo=r.lineTo,r.__originalBezierCurveTo=r.bezierCurveTo,r.__originalRect=r.rect,r.__originalClosePath=r.closePath,r.__originalBeginPath=r.beginPath,r._removeMirroring=()=>{r.save=r.__originalSave,r.restore=r.__originalRestore,r.rotate=r.__originalRotate,r.scale=r.__originalScale,r.translate=r.__originalTranslate,r.transform=r.__originalTransform,r.setTransform=r.__originalSetTransform,r.resetTransform=r.__originalResetTransform,r.clip=r.__originalClip,r.moveTo=r.__originalMoveTo,r.lineTo=r.__originalLineTo,r.bezierCurveTo=r.__originalBezierCurveTo,r.rect=r.__originalRect,r.closePath=r.__originalClosePath,r.beginPath=r.__originalBeginPath,delete r._removeMirroring},r.save=function(){e.save(),this.__originalSave()},r.restore=function(){e.restore(),this.__originalRestore()},r.translate=function(t,s){e.translate(t,s),this.__originalTranslate(t,s)},r.scale=function(t,s){e.scale(t,s),this.__originalScale(t,s)},r.transform=function(t,s,i,o,c,u){e.transform(t,s,i,o,c,u),this.__originalTransform(t,s,i,o,c,u)},r.setTransform=function(t,s,i,o,c,u){e.setTransform(t,s,i,o,c,u),this.__originalSetTransform(t,s,i,o,c,u)},r.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},r.rotate=function(t){e.rotate(t),this.__originalRotate(t)},r.clip=function(t){e.clip(t),this.__originalClip(t)},r.moveTo=function(t,s){e.moveTo(t,s),this.__originalMoveTo(t,s)},r.lineTo=function(t,s){e.lineTo(t,s),this.__originalLineTo(t,s)},r.bezierCurveTo=function(t,s,i,o,c,u){e.bezierCurveTo(t,s,i,o,c,u),this.__originalBezierCurveTo(t,s,i,o,c,u)},r.rect=function(t,s,i,o){e.rect(t,s,i,o),this.__originalRect(t,s,i,o)},r.closePath=function(){e.closePath(),this.__originalClosePath()},r.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class jC{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,s){let i;return this.cache[e]!==void 0?(i=this.cache[e],this.canvasFactory.reset(i,t,s)):(i=this.canvasFactory.create(t,s),this.cache[e]=i),i}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function sd(r,e,t,s,i,o,c,u,h,p){const[f,g,x,b,w,_]=At(r);if(g===0&&x===0){const L=c*f+w,O=Math.round(L),D=u*b+_,I=Math.round(D),C=(c+h)*f+w,P=Math.abs(Math.round(C)-O)||1,k=(u+p)*b+_,N=Math.abs(Math.round(k)-I)||1;return r.setTransform(Math.sign(f),0,0,Math.sign(b),O,I),r.drawImage(e,t,s,i,o,0,0,P,N),r.setTransform(f,g,x,b,w,_),[P,N]}if(f===0&&b===0){const L=u*x+w,O=Math.round(L),D=c*g+_,I=Math.round(D),C=(u+p)*x+w,P=Math.abs(Math.round(C)-O)||1,k=(c+h)*g+_,N=Math.abs(Math.round(k)-I)||1;return r.setTransform(0,Math.sign(g),Math.sign(x),0,O,I),r.drawImage(e,t,s,i,o,0,0,N,P),r.setTransform(f,g,x,b,w,_),[N,P]}r.drawImage(e,t,s,i,o,c,u,h,p);const S=Math.hypot(f,g),A=Math.hypot(x,b);return[S*h,A*p]}class hb{alphaIsShape=!1;fontSize=0;fontSizeScale=1;textMatrix=null;textMatrixScale=1;fontMatrix=rm;leading=0;x=0;y=0;lineX=0;lineY=0;charSpacing=0;wordSpacing=0;textHScale=1;textRenderingMode=ss.FILL;textRise=0;fillColor="#000000";strokeColor="#000000";patternFill=!1;patternStroke=!1;fillAlpha=1;strokeAlpha=1;lineWidth=1;activeSMask=null;transferMaps="none";constructor(e,t,s){s?.(this),this.clipBox=new Float32Array([0,0,e,t]),this.minMax=_r.slice()}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e.minMax=this.minMax.slice(),e}getPathBoundingBox(e=ns.FILL,t=null){const s=this.minMax.slice();if(e===ns.STROKE){t||dt("Stroke bounding box must include transform."),fe.singularValueDecompose2dScale(t,Hs);const i=Hs[0]*this.lineWidth/2,o=Hs[1]*this.lineWidth/2;s[0]-=i,s[1]-=o,s[2]+=i,s[3]+=o}return s}updateClipFromPath(){const e=fe.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(e){this.clipBox.set(e,0),this.minMax.set(_r,0)}getClippedPathBoundingBox(e=ns.FILL,t=null){return fe.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function fb(r,e){if(e instanceof ImageData){r.putImageData(e,0,0);return}const t=e.height,s=e.width,i=t%js,o=(t-i)/js,c=i===0?o:o+1,u=r.createImageData(s,js);let h=0,p;const f=e.data,g=u.data;let x,b,w,_;if(e.kind===Ko.GRAYSCALE_1BPP){const S=f.byteLength,A=new Uint32Array(g.buffer,0,g.byteLength>>2),L=A.length,O=s+7>>3,D=4294967295,I=Yt.isLittleEndian?4278190080:255;for(x=0;x<c;x++){for(w=x<o?js:i,p=0,b=0;b<w;b++){const C=S-h;let P=0;const k=C>O?s:C*8-7,N=k&-8;let M=0,H=0;for(;P<N;P+=8)H=f[h++],A[p++]=H&128?D:I,A[p++]=H&64?D:I,A[p++]=H&32?D:I,A[p++]=H&16?D:I,A[p++]=H&8?D:I,A[p++]=H&4?D:I,A[p++]=H&2?D:I,A[p++]=H&1?D:I;for(;P<k;P++)M===0&&(H=f[h++],M=128),A[p++]=H&M?D:I,M>>=1}for(;p<L;)A[p++]=0;r.putImageData(u,0,x*js)}}else if(e.kind===Ko.RGBA_32BPP){for(b=0,_=s*js*4,x=0;x<o;x++)g.set(f.subarray(h,h+_)),h+=_,r.putImageData(u,0,b),b+=js;x<c&&(_=s*i*4,g.set(f.subarray(h,h+_)),r.putImageData(u,0,b))}else if(e.kind===Ko.RGB_24BPP)for(w=js,_=s*w,x=0;x<c;x++){for(x>=o&&(w=i,_=s*w),p=0,b=_;b--;)g[p++]=f[h++],g[p++]=f[h++],g[p++]=f[h++],g[p++]=255;r.putImageData(u,0,x*js)}else throw new Error(`bad image kind: ${e.kind}`)}function mb(r,e){if(e.bitmap){r.drawImage(e.bitmap,0,0);return}const t=e.height,s=e.width,i=t%js,o=(t-i)/js,c=i===0?o:o+1,u=r.createImageData(s,js);let h=0;const p=e.data,f=u.data;for(let g=0;g<c;g++){const x=g<o?js:i;({srcPos:h}=SC({src:p,srcPos:h,dest:f,width:s,height:x,nonBlackColor:0})),r.putImageData(u,0,g*js)}}function Uo(r,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const s of t)r[s]!==void 0&&(e[s]=r[s]);r.setLineDash!==void 0&&(e.setLineDash(r.getLineDash()),e.lineDashOffset=r.lineDashOffset)}function nd(r){r.strokeStyle=r.fillStyle="#000000",r.fillRule="nonzero",r.globalAlpha=1,r.lineWidth=1,r.lineCap="butt",r.lineJoin="miter",r.miterLimit=10,r.globalCompositeOperation="source-over",r.font="10px sans-serif",r.setLineDash!==void 0&&(r.setLineDash([]),r.lineDashOffset=0);const{filter:e}=r;e!=="none"&&e!==""&&(r.filter="none")}function pb(r,e){if(e)return!0;fe.singularValueDecompose2dScale(r,Hs);const t=Math.fround(yn.pixelRatio*wa.PDF_TO_CSS_UNITS);return Hs[0]<=t&&Hs[1]<=t}const CC=["butt","round","square"],TC=["miter","round","bevel"],kC={},gb={};class Sr{constructor(e,t,s,i,o,{optionalContentConfig:c,markedContentStack:u=null},h,p,f){this.ctx=e,this.current=new hb(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=s,this.canvasFactory=i,this.filterFactory=o,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=u||[],this.optionalContentConfig=c,this.cachedCanvases=new jC(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=h,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=p,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=f??null}getObject(e,t,s=null){return typeof t=="string"?(this.dependencyTracker?.recordNamedDependency(e,t),t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t)):s}beginDrawing({transform:e,viewport:t,transparency:s=!1,background:i=null}){const o=this.ctx.canvas.width,c=this.ctx.canvas.height,u=this.ctx.fillStyle;if(this.ctx.fillStyle=i||"#ffffff",this.ctx.fillRect(0,0,o,c),this.ctx.fillStyle=u,s){const h=this.cachedCanvases.getCanvas("transparent",o,c);this.compositeCtx=this.ctx,this.transparentCanvas=h.canvas,this.ctx=h.context,this.ctx.save(),this.ctx.transform(...At(this.compositeCtx))}this.ctx.save(),nd(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=At(this.ctx)}executeOperatorList(e,t,s,i,o){const c=e.argsArray,u=e.fnArray;let h=t||0;const p=c.length;if(p===h)return h;const f=p-h>ub&&typeof s=="function",g=f?Date.now()+NC:0;let x=0;const b=this.commonObjs,w=this.objs;let _,S;for(;;){if(i!==void 0&&h===i.nextBreakPoint)return i.breakIt(h,s),h;if(!o||o(h))if(_=u[h],S=c[h]??null,_!==Rr.dependency)S===null?this[_](h):this[_](h,...S);else for(const A of S){this.dependencyTracker?.recordNamedData(A,h);const L=A.startsWith("g_")?b:w;if(!L.has(A))return L.get(A,s),h}if(h++,h===p)return h;if(f&&++x>ub){if(Date.now()>g)return s(),h;x=0}}}#e(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#e(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),this.#t()}#t(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}}_scaleImage(e,t){const s=e.width??e.displayWidth,i=e.height??e.displayHeight;let o=Math.max(Math.hypot(t[0],t[1]),1),c=Math.max(Math.hypot(t[2],t[3]),1),u=s,h=i,p="prescale1",f,g;for(;o>2&&u>1||c>2&&h>1;){let x=u,b=h;o>2&&u>1&&(x=u>=16384?Math.floor(u/2)-1||1:Math.ceil(u/2),o/=u/x),c>2&&h>1&&(b=h>=16384?Math.floor(h/2)-1||1:Math.ceil(h)/2,c/=h/b),f=this.cachedCanvases.getCanvas(p,x,b),g=f.context,g.clearRect(0,0,x,b),g.drawImage(e,0,0,u,h,0,0,x,b),e=f.canvas,u=x,h=b,p=p==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:u,paintHeight:h}}_createMaskCanvas(e,t){const s=this.ctx,{width:i,height:o}=t,c=this.current.fillColor,u=this.current.patternFill,h=At(s);let p,f,g,x;if((t.bitmap||t.data)&&t.count>1){const M=t.bitmap||t.data.buffer;f=JSON.stringify(u?h:[h.slice(0,4),c]),p=this._cachedBitmapsMap.get(M),p||(p=new Map,this._cachedBitmapsMap.set(M,p));const H=p.get(f);if(H&&!u){const F=Math.round(Math.min(h[0],h[2])+h[4]),V=Math.round(Math.min(h[1],h[3])+h[5]);return this.dependencyTracker?.recordDependencies(e,nn.transformAndFill),{canvas:H,offsetX:F,offsetY:V}}g=H}g||(x=this.cachedCanvases.getCanvas("maskCanvas",i,o),mb(x.context,t));let b=fe.transform(h,[1/i,0,0,-1/o,0,0]);b=fe.transform(b,[1,0,0,1,0,-o]);const w=_r.slice();fe.axialAlignedBoundingBox([0,0,i,o],b,w);const[_,S,A,L]=w,O=Math.round(A-_)||1,D=Math.round(L-S)||1,I=this.cachedCanvases.getCanvas("fillCanvas",O,D),C=I.context,P=_,k=S;C.translate(-P,-k),C.transform(...b),g||(g=this._scaleImage(x.canvas,Mn(C)),g=g.img,p&&u&&p.set(f,g)),C.imageSmoothingEnabled=pb(At(C),t.interpolate),sd(C,g,0,0,g.width,g.height,0,0,i,o),C.globalCompositeOperation="source-in";const N=fe.transform(Mn(C),[1,0,0,1,-P,-k]);return C.fillStyle=u?c.getPattern(s,this,N,ns.FILL,e):c,C.fillRect(0,0,i,o),p&&!u&&(this.cachedCanvases.delete("fillCanvas"),p.set(f,I.canvas)),this.dependencyTracker?.recordDependencies(e,nn.transformAndFill),{canvas:I.canvas,offsetX:Math.round(P),offsetY:Math.round(k)}}setLineWidth(e,t){this.dependencyTracker?.recordSimpleData("lineWidth",e),t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(e,t){this.dependencyTracker?.recordSimpleData("lineCap",e),this.ctx.lineCap=CC[t]}setLineJoin(e,t){this.dependencyTracker?.recordSimpleData("lineJoin",e),this.ctx.lineJoin=TC[t]}setMiterLimit(e,t){this.dependencyTracker?.recordSimpleData("miterLimit",e),this.ctx.miterLimit=t}setDash(e,t,s){this.dependencyTracker?.recordSimpleData("dash",e);const i=this.ctx;i.setLineDash!==void 0&&(i.setLineDash(t),i.lineDashOffset=s)}setRenderingIntent(e,t){}setFlatness(e,t){}setGState(e,t){for(const[s,i]of t)switch(s){case"LW":this.setLineWidth(e,i);break;case"LC":this.setLineCap(e,i);break;case"LJ":this.setLineJoin(e,i);break;case"ML":this.setMiterLimit(e,i);break;case"D":this.setDash(e,i[0],i[1]);break;case"RI":this.setRenderingIntent(e,i);break;case"FL":this.setFlatness(e,i);break;case"Font":this.setFont(e,i[0],i[1]);break;case"CA":this.dependencyTracker?.recordSimpleData("strokeAlpha",e),this.current.strokeAlpha=i;break;case"ca":this.dependencyTracker?.recordSimpleData("fillAlpha",e),this.ctx.globalAlpha=this.current.fillAlpha=i;break;case"BM":this.dependencyTracker?.recordSimpleData("globalCompositeOperation",e),this.ctx.globalCompositeOperation=i;break;case"SMask":this.dependencyTracker?.recordSimpleData("SMask",e),this.current.activeSMask=i?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.dependencyTracker?.recordSimpleData("filter",e),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(i);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(e){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,s=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel,o=this.cachedCanvases.getCanvas(i,t,s);this.suspendedCtx=this.ctx;const c=this.ctx=o.context;c.setTransform(this.suspendedCtx.getTransform()),Uo(this.suspendedCtx,c),EC(c,this.suspendedCtx),this.setGState(e,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Uo(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,s=this.suspendedCtx;this.composeSMask(s,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,s,i){const o=i[0],c=i[1],u=i[2]-o,h=i[3]-c;u===0||h===0||(this.genericComposeSMask(t.context,s,u,h,t.subtype,t.backdrop,t.transferMap,o,c,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(s.canvas,0,0),e.restore())}genericComposeSMask(e,t,s,i,o,c,u,h,p,f,g){let x=e.canvas,b=h-f,w=p-g;if(c)if(b<0||w<0||b+s>x.width||w+i>x.height){const S=this.cachedCanvases.getCanvas("maskExtension",s,i),A=S.context;A.drawImage(x,-b,-w),A.globalCompositeOperation="destination-atop",A.fillStyle=c,A.fillRect(0,0,s,i),A.globalCompositeOperation="source-over",x=S.canvas,b=w=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const S=new Path2D;S.rect(b,w,s,i),e.clip(S),e.globalCompositeOperation="destination-atop",e.fillStyle=c,e.fillRect(b,w,s,i),e.restore()}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),o==="Alpha"&&u?t.filter=this.filterFactory.addAlphaFilter(u):o==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(u));const _=new Path2D;_.rect(h,p,s,i),t.clip(_),t.globalCompositeOperation="destination-in",t.drawImage(x,b,w,s,i,h,p,s,i),t.restore()}save(e){this.inSMaskMode&&Uo(this.ctx,this.suspendedCtx),this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone(),this.dependencyTracker?.save(e)}restore(e){if(this.dependencyTracker?.restore(e),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&Uo(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(e,t,s,i,o,c,u){this.dependencyTracker?.recordIncrementalData("transform",e),this.ctx.transform(t,s,i,o,c,u),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,s,i){let[o]=s;if(!i){o||=s[0]=new Path2D,this[t](e,o);return}if(this.dependencyTracker!==null){const c=t===Rr.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(e).recordBBox(e,this.ctx,i[0]-c,i[2]+c,i[1]-c,i[3]+c).recordDependencies(e,["transform"])}if(!(o instanceof Path2D)){const c=s[0]=new Path2D;for(let u=0,h=o.length;u<h;)switch(o[u++]){case Kc.moveTo:c.moveTo(o[u++],o[u++]);break;case Kc.lineTo:c.lineTo(o[u++],o[u++]);break;case Kc.curveTo:c.bezierCurveTo(o[u++],o[u++],o[u++],o[u++],o[u++],o[u++]);break;case Kc.closePath:c.closePath();break;default:Ce(`Unrecognized drawing path operator: ${o[u-1]}`);break}o=c}fe.axialAlignedBoundingBox(i,At(this.ctx),this.current.minMax),this[t](e,o),this._pathStartIdx=e}closePath(e){this.ctx.closePath()}stroke(e,t,s=!0){const i=this.ctx,o=this.current.strokeColor;if(i.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof o=="object"&&o?.getPattern){const c=o.isModifyingCurrentTransform()?i.getTransform():null;if(i.save(),i.strokeStyle=o.getPattern(i,this,Mn(i),ns.STROKE,e),c){const u=new Path2D;u.addPath(t,i.getTransform().invertSelf().multiplySelf(c)),t=u}this.rescaleAndStroke(t,!1),i.restore()}else this.rescaleAndStroke(t,!0);this.dependencyTracker?.recordDependencies(e,nn.stroke),s&&this.consumePath(e,t,this.current.getClippedPathBoundingBox(ns.STROKE,At(this.ctx))),i.globalAlpha=this.current.fillAlpha}closeStroke(e,t){this.stroke(e,t)}fill(e,t,s=!0){const i=this.ctx,o=this.current.fillColor,c=this.current.patternFill;let u=!1;if(c){const p=o.isModifyingCurrentTransform()?i.getTransform():null;if(this.dependencyTracker?.save(e),i.save(),i.fillStyle=o.getPattern(i,this,Mn(i),ns.FILL,e),p){const f=new Path2D;f.addPath(t,i.getTransform().invertSelf().multiplySelf(p)),t=f}u=!0}const h=this.current.getClippedPathBoundingBox();this.contentVisible&&h!==null&&(this.pendingEOFill?(i.fill(t,"evenodd"),this.pendingEOFill=!1):i.fill(t)),this.dependencyTracker?.recordDependencies(e,nn.fill),u&&(i.restore(),this.dependencyTracker?.restore(e)),s&&this.consumePath(e,t,h)}eoFill(e,t){this.pendingEOFill=!0,this.fill(e,t)}fillStroke(e,t){this.fill(e,t,!1),this.stroke(e,t,!1),this.consumePath(e,t)}eoFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}closeFillStroke(e,t){this.fillStroke(e,t)}closeEOFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}endPath(e,t){this.consumePath(e,t)}rawFillPath(e,t){this.ctx.fill(t),this.dependencyTracker?.recordDependencies(e,nn.rawFillPath).recordOperation(e)}clip(e){this.dependencyTracker?.recordFutureForcedDependency("clipMode",e),this.pendingClip=kC}eoClip(e){this.dependencyTracker?.recordFutureForcedDependency("clipMode",e),this.pendingClip=gb}beginText(e){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,this.dependencyTracker?.recordOpenMarker(e).resetIncrementalData("sameLineText").resetIncrementalData("moveText",e)}endText(e){const t=this.pendingTextPaths,s=this.ctx;if(this.dependencyTracker){const{dependencyTracker:i}=this;t!==void 0&&i.recordFutureForcedDependency("textClip",i.getOpenMarker()).recordFutureForcedDependency("textClip",e),i.recordCloseMarker(e)}if(t!==void 0){const i=new Path2D,o=s.getTransform().invertSelf();for(const{transform:c,x:u,y:h,fontSize:p,path:f}of t)f&&i.addPath(f,new DOMMatrix(c).preMultiplySelf(o).translate(u,h).scale(p,-p));s.clip(i)}delete this.pendingTextPaths}setCharSpacing(e,t){this.dependencyTracker?.recordSimpleData("charSpacing",e),this.current.charSpacing=t}setWordSpacing(e,t){this.dependencyTracker?.recordSimpleData("wordSpacing",e),this.current.wordSpacing=t}setHScale(e,t){this.dependencyTracker?.recordSimpleData("hScale",e),this.current.textHScale=t/100}setLeading(e,t){this.dependencyTracker?.recordSimpleData("leading",e),this.current.leading=-t}setFont(e,t,s){this.dependencyTracker?.recordSimpleData("font",e).recordSimpleDataFromNamed("fontObj",t,e);const i=this.commonObjs.get(t),o=this.current;if(!i)throw new Error(`Can't find font for ${t}`);if(o.fontMatrix=i.fontMatrix||rm,(o.fontMatrix[0]===0||o.fontMatrix[3]===0)&&Ce("Invalid font matrix for font "+t),s<0?(s=-s,o.fontDirection=-1):o.fontDirection=1,this.current.font=i,this.current.fontSize=s,i.isType3Font)return;const c=i.loadedName||"sans-serif",u=i.systemFontInfo?.css||`"${c}", ${i.fallbackName}`;let h="normal";i.black?h="900":i.bold&&(h="bold");const p=i.italic?"italic":"normal";let f=s;s<cb?f=cb:s>db&&(f=db),this.current.fontSizeScale=s/f,this.ctx.font=`${p} ${h} ${f}px ${u}`}setTextRenderingMode(e,t){this.dependencyTracker?.recordSimpleData("textRenderingMode",e),this.current.textRenderingMode=t}setTextRise(e,t){this.dependencyTracker?.recordSimpleData("textRise",e),this.current.textRise=t}moveText(e,t,s){this.dependencyTracker?.resetIncrementalData("sameLineText").recordIncrementalData("moveText",e),this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=s}setLeadingMoveText(e,t,s){this.setLeading(e,-s),this.moveText(e,t,s)}setTextMatrix(e,t){this.dependencyTracker?.recordSimpleData("textMatrix",e);const{current:s}=this;s.textMatrix=t,s.textMatrixScale=Math.hypot(t[0],t[1]),s.x=s.lineX=0,s.y=s.lineY=0}nextLine(e){this.moveText(e,0,this.current.leading),this.dependencyTracker?.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??e)}#n(e,t,s){const i=new Path2D;return i.addPath(e,new DOMMatrix(s).invertSelf().multiplySelf(t)),i}paintChar(e,t,s,i,o,c){const u=this.ctx,h=this.current,p=h.font,f=h.textRenderingMode,g=h.fontSize/h.fontSizeScale,x=f&ss.FILL_STROKE_MASK,b=!!(f&ss.ADD_TO_PATH_FLAG),w=h.patternFill&&!p.missingFile,_=h.patternStroke&&!p.missingFile;let S;if((p.disableFontFace||b||w||_)&&!p.missingFile&&(S=p.getPathGenerator(this.commonObjs,t)),S&&(p.disableFontFace||w||_)){u.save(),u.translate(s,i),u.scale(g,-g),this.dependencyTracker?.recordCharacterBBox(e,u,p);let A;if(x===ss.FILL||x===ss.FILL_STROKE)if(o){A=u.getTransform(),u.setTransform(...o);const L=this.#n(S,A,o);u.fill(L)}else u.fill(S);if(x===ss.STROKE||x===ss.FILL_STROKE)if(c){A||=u.getTransform(),u.setTransform(...c);const{a:L,b:O,c:D,d:I}=A,C=fe.inverseTransform(c),P=fe.transform([L,O,D,I,0,0],C);fe.singularValueDecompose2dScale(P,Hs),u.lineWidth*=Math.max(Hs[0],Hs[1])/g,u.stroke(this.#n(S,A,c))}else u.lineWidth/=g,u.stroke(S);u.restore()}else(x===ss.FILL||x===ss.FILL_STROKE)&&(u.fillText(t,s,i),this.dependencyTracker?.recordCharacterBBox(e,u,p,g,s,i,()=>u.measureText(t))),(x===ss.STROKE||x===ss.FILL_STROKE)&&(this.dependencyTracker&&this.dependencyTracker?.recordCharacterBBox(e,u,p,g,s,i,()=>u.measureText(t)).recordDependencies(e,nn.stroke),u.strokeText(t,s,i));b&&((this.pendingTextPaths||=[]).push({transform:At(u),x:s,y:i,fontSize:g,path:S}),this.dependencyTracker?.recordCharacterBBox(e,u,p,g,s,i))}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let s=!1;for(let i=3;i<t.length;i+=4)if(t[i]>0&&t[i]<255){s=!0;break}return Le(this,"isFontSubpixelAAEnabled",s)}showText(e,t){this.dependencyTracker&&(this.dependencyTracker.recordDependencies(e,nn.showText).resetBBox(e),this.current.textRenderingMode&ss.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",e).inheritPendingDependenciesAsFutureForcedDependencies());const s=this.current,i=s.font;if(i.isType3Font){this.showType3Text(e,t),this.dependencyTracker?.recordShowTextOperation(e);return}const o=s.fontSize;if(o===0){this.dependencyTracker?.recordOperation(e);return}const c=this.ctx,u=s.fontSizeScale,h=s.charSpacing,p=s.wordSpacing,f=s.fontDirection,g=s.textHScale*f,x=t.length,b=i.vertical,w=b?1:-1,_=i.defaultVMetrics,S=o*s.fontMatrix[0],A=s.textRenderingMode===ss.FILL&&!i.disableFontFace&&!s.patternFill;c.save(),s.textMatrix&&c.transform(...s.textMatrix),c.translate(s.x,s.y+s.textRise),f>0?c.scale(g,-1):c.scale(g,1);let L,O;if(s.patternFill){c.save();const k=s.fillColor.getPattern(c,this,Mn(c),ns.FILL,e);L=At(c),c.restore(),c.fillStyle=k}if(s.patternStroke){c.save();const k=s.strokeColor.getPattern(c,this,Mn(c),ns.STROKE,e);O=At(c),c.restore(),c.strokeStyle=k}let D=s.lineWidth;const I=s.textMatrixScale;if(I===0||D===0){const k=s.textRenderingMode&ss.FILL_STROKE_MASK;(k===ss.STROKE||k===ss.FILL_STROKE)&&(D=this.getSinglePixelWidth())}else D/=I;if(u!==1&&(c.scale(u,u),D/=u),c.lineWidth=D,i.isInvalidPDFjsFont){const k=[];let N=0;for(const H of t)k.push(H.unicode),N+=H.width;const M=k.join("");if(c.fillText(M,0,0),this.dependencyTracker!==null){const H=c.measureText(M);this.dependencyTracker.recordBBox(e,this.ctx,-H.actualBoundingBoxLeft,H.actualBoundingBoxRight,-H.actualBoundingBoxAscent,H.actualBoundingBoxDescent).recordShowTextOperation(e)}s.x+=N*S*g,c.restore(),this.compose();return}let C=0,P;for(P=0;P<x;++P){const k=t[P];if(typeof k=="number"){C+=w*k*o/1e3;continue}let N=!1;const M=(k.isSpace?p:0)+h,H=k.fontChar,F=k.accent;let V,q,z=k.width;if(b){const G=k.vmetric||_,Y=-(k.vmetric?G[1]:z*.5)*S,ee=G[2]*S;z=G?-G[0]:z,V=Y/u,q=(C+ee)/u}else V=C/u,q=0;let E;if(i.remeasure&&z>0){E=c.measureText(H);const G=E.width*1e3/o*u;if(z<G&&this.isFontSubpixelAAEnabled){const Y=z/G;N=!0,c.save(),c.scale(Y,1),V/=Y}else z!==G&&(V+=(z-G)/2e3*o/u)}if(this.contentVisible&&(k.isInFont||i.missingFile)){if(A&&!F)c.fillText(H,V,q),this.dependencyTracker?.recordCharacterBBox(e,c,E?{bbox:null}:i,o/u,V,q,()=>E??c.measureText(H));else if(this.paintChar(e,H,V,q,L,O),F){const G=V+o*F.offset.x/u,Y=q-o*F.offset.y/u;this.paintChar(e,F.fontChar,G,Y,L,O)}}const j=b?z*S-M*f:z*S+M*f;C+=j,N&&c.restore()}b?s.y-=C:s.x+=C*g,c.restore(),this.compose(),this.dependencyTracker?.recordShowTextOperation(e)}showType3Text(e,t){const s=this.ctx,i=this.current,o=i.font,c=i.fontSize,u=i.fontDirection,h=o.vertical?1:-1,p=i.charSpacing,f=i.wordSpacing,g=i.textHScale*u,x=i.fontMatrix||rm,b=t.length,w=i.textRenderingMode===ss.INVISIBLE;let _,S,A,L;if(w||c===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,s.save(),i.textMatrix&&s.transform(...i.textMatrix),s.translate(i.x,i.y+i.textRise),s.scale(g,u);const O=this.dependencyTracker;for(this.dependencyTracker=O?new Ld(O,e):null,_=0;_<b;++_){if(S=t[_],typeof S=="number"){L=h*S*c/1e3,this.ctx.translate(L,0),i.x+=L*g;continue}const D=(S.isSpace?f:0)+p,I=o.charProcOperatorList[S.operatorListId];I?this.contentVisible&&(this.save(),s.scale(c,c),s.transform(...x),this.executeOperatorList(I),this.restore()):Ce(`Type3 character "${S.operatorListId}" is not available.`);const C=[S.width,0];fe.applyTransform(C,x),A=C[0]*c+D,s.translate(A,0),i.x+=A*g}s.restore(),O&&(this.dependencyTracker=O)}setCharWidth(e,t,s){}setCharWidthAndBounds(e,t,s,i,o,c,u){const h=new Path2D;h.rect(i,o,c-i,u-o),this.ctx.clip(h),this.dependencyTracker?.recordBBox(e,this.ctx,i,c,o,u).recordClipBox(e,this.ctx,i,c,o,u),this.endPath(e)}getColorN_Pattern(e,t){let s;if(t[0]==="TilingPattern"){const i=this.baseTransform||At(this.ctx),o={createCanvasGraphics:(c,u)=>new Sr(c,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new Ld(this.dependencyTracker,u,!0):null)};s=new Qm(t,this.ctx,o,i)}else s=this._getPattern(e,t[1],t[2]);return s}setStrokeColorN(e,...t){this.dependencyTracker?.recordSimpleData("strokeColor",e),this.current.strokeColor=this.getColorN_Pattern(e,t),this.current.patternStroke=!0}setFillColorN(e,...t){this.dependencyTracker?.recordSimpleData("fillColor",e),this.current.fillColor=this.getColorN_Pattern(e,t),this.current.patternFill=!0}setStrokeRGBColor(e,t){this.dependencyTracker?.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor=t,this.current.patternStroke=!1}setStrokeTransparent(e){this.dependencyTracker?.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e,t){this.dependencyTracker?.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor=t,this.current.patternFill=!1}setFillTransparent(e){this.dependencyTracker?.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t,s=null){let i;return this.cachedPatterns.has(t)?i=this.cachedPatterns.get(t):(i=AC(this.getObject(e,t)),this.cachedPatterns.set(t,i)),s&&(i.matrix=s),i}shadingFill(e,t){if(!this.contentVisible)return;const s=this.ctx;this.save(e);const i=this._getPattern(e,t);s.fillStyle=i.getPattern(s,this,Mn(s),ns.SHADING,e);const o=Mn(s);if(o){const{width:c,height:u}=s.canvas,h=_r.slice();fe.axialAlignedBoundingBox([0,0,c,u],o,h);const[p,f,g,x]=h;this.ctx.fillRect(p,f,g-p,x-f)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.dependencyTracker?.resetBBox(e).recordFullPageBBox(e).recordDependencies(e,nn.transform).recordDependencies(e,nn.fill).recordOperation(e),this.compose(this.current.getClippedPathBoundingBox()),this.restore(e)}beginInlineImage(){dt("Should not call beginInlineImage")}beginImageData(){dt("Should not call beginImageData")}paintFormXObjectBegin(e,t,s){if(this.contentVisible&&(this.save(e),this.baseTransformStack.push(this.baseTransform),t&&this.transform(e,...t),this.baseTransform=At(this.ctx),s)){fe.axialAlignedBoundingBox(s,this.baseTransform,this.current.minMax);const[i,o,c,u]=s,h=new Path2D;h.rect(i,o,c-i,u-o),this.ctx.clip(h),this.dependencyTracker?.recordClipBox(e,this.ctx,i,c,o,u),this.endPath(e)}}paintFormXObjectEnd(e){this.contentVisible&&(this.restore(e),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e,t){if(!this.contentVisible)return;this.save(e),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const s=this.ctx;t.isolated||Jd("TODO: Support non-isolated groups."),t.knockout&&Ce("Knockout groups not supported.");const i=At(s);if(t.matrix&&s.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let o=_r.slice();fe.axialAlignedBoundingBox(t.bbox,At(s),o);const c=[0,0,s.canvas.width,s.canvas.height];o=fe.intersect(o,c)||[0,0,0,0];const u=Math.floor(o[0]),h=Math.floor(o[1]),p=Math.max(Math.ceil(o[2])-u,1),f=Math.max(Math.ceil(o[3])-h,1);this.current.startNewPathAndClipBox([0,0,p,f]);let g="groupAt"+this.groupLevel;t.smask&&(g+="_smask_"+this.smaskCounter++%2);const x=this.cachedCanvases.getCanvas(g,p,f),b=x.context;b.translate(-u,-h),b.transform(...i);let w=new Path2D;const[_,S,A,L]=t.bbox;if(w.rect(_,S,A-_,L-S),t.matrix){const O=new Path2D;O.addPath(w,new DOMMatrix(t.matrix)),w=O}b.clip(w),t.smask&&this.smaskStack.push({canvas:x.canvas,context:b,offsetX:u,offsetY:h,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}),(!t.smask||this.dependencyTracker)&&(s.setTransform(1,0,0,1,0,0),s.translate(u,h),s.save()),Uo(s,b),this.ctx=b,this.dependencyTracker?.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(s),this.setGState(e,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(s),this.groupLevel++}endGroup(e,t){if(!this.contentVisible)return;this.groupLevel--;const s=this.ctx,i=this.groupStack.pop();if(this.ctx=i,this.ctx.imageSmoothingEnabled=!1,this.dependencyTracker?.popBaseTransform(),t.smask)this.tempSMask=this.smaskStack.pop(),this.restore(e),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const o=At(this.ctx);this.restore(e),this.ctx.save(),this.ctx.setTransform(...o);const c=_r.slice();fe.axialAlignedBoundingBox([0,0,s.canvas.width,s.canvas.height],o,c),this.ctx.drawImage(s.canvas,0,0),this.ctx.restore(),this.compose(c)}}beginAnnotation(e,t,s,i,o,c){if(this.#e(),nd(this.ctx),this.ctx.save(),this.save(e),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),s){const u=s[2]-s[0],h=s[3]-s[1];if(c&&this.annotationCanvasMap){i=i.slice(),i[4]-=s[0],i[5]-=s[1],s=s.slice(),s[0]=s[1]=0,s[2]=u,s[3]=h,fe.singularValueDecompose2dScale(At(this.ctx),Hs);const{viewportScale:p}=this,f=Math.ceil(u*this.outputScaleX*p),g=Math.ceil(h*this.outputScaleY*p);this.annotationCanvas=this.canvasFactory.create(f,g);const{canvas:x,context:b}=this.annotationCanvas;this.annotationCanvasMap.set(t,x),this.annotationCanvas.savedCtx=this.ctx,this.ctx=b,this.ctx.save(),this.ctx.setTransform(Hs[0],0,0,-Hs[1],0,h*Hs[1]),nd(this.ctx)}else{nd(this.ctx),this.endPath(e);const p=new Path2D;p.rect(s[0],s[1],u,h),this.ctx.clip(p)}}this.current=new hb(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(e,...i),this.transform(e,...o)}endAnnotation(e){this.annotationCanvas&&(this.ctx.restore(),this.#t(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e,t){if(!this.contentVisible)return;const s=t.count;t=this.getObject(e,t.data,t),t.count=s;const i=this.ctx,o=this._createMaskCanvas(e,t),c=o.canvas;i.save(),i.setTransform(1,0,0,1,0,0),i.drawImage(c,o.offsetX,o.offsetY),this.dependencyTracker?.resetBBox(e).recordBBox(e,this.ctx,o.offsetX,o.offsetX+c.width,o.offsetY,o.offsetY+c.height).recordOperation(e),i.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,s,i=0,o=0,c,u){if(!this.contentVisible)return;t=this.getObject(e,t.data,t);const h=this.ctx;h.save();const p=At(h);h.transform(s,i,o,c,0,0);const f=this._createMaskCanvas(e,t);h.setTransform(1,0,0,1,f.offsetX-p[4],f.offsetY-p[5]),this.dependencyTracker?.resetBBox(e);for(let g=0,x=u.length;g<x;g+=2){const b=fe.transform(p,[s,i,o,c,u[g],u[g+1]]);h.drawImage(f.canvas,b[4],b[5]),this.dependencyTracker?.recordBBox(e,this.ctx,b[4],b[4]+f.canvas.width,b[5],b[5]+f.canvas.height)}h.restore(),this.compose(),this.dependencyTracker?.recordOperation(e)}paintImageMaskXObjectGroup(e,t){if(!this.contentVisible)return;const s=this.ctx,i=this.current.fillColor,o=this.current.patternFill;this.dependencyTracker?.resetBBox(e).recordDependencies(e,nn.transformAndFill);for(const c of t){const{data:u,width:h,height:p,transform:f}=c,g=this.cachedCanvases.getCanvas("maskCanvas",h,p),x=g.context;x.save();const b=this.getObject(e,u,c);mb(x,b),x.globalCompositeOperation="source-in",x.fillStyle=o?i.getPattern(x,this,Mn(s),ns.FILL,e):i,x.fillRect(0,0,h,p),x.restore(),s.save(),s.transform(...f),s.scale(1,-1),sd(s,g.canvas,0,0,h,p,0,-1,1,1),this.dependencyTracker?.recordBBox(e,s,0,h,0,p),s.restore()}this.compose(),this.dependencyTracker?.recordOperation(e)}paintImageXObject(e,t){if(!this.contentVisible)return;const s=this.getObject(e,t);if(!s){Ce("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e,s)}paintImageXObjectRepeat(e,t,s,i,o){if(!this.contentVisible)return;const c=this.getObject(e,t);if(!c){Ce("Dependent image isn't ready yet");return}const u=c.width,h=c.height,p=[];for(let f=0,g=o.length;f<g;f+=2)p.push({transform:[s,0,0,i,o[f],o[f+1]],x:0,y:0,w:u,h});this.paintInlineImageXObjectGroup(e,c,p)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:s,height:i}=e,o=this.cachedCanvases.getCanvas("inlineImage",s,i),c=o.context;return c.filter=this.current.transferMaps,c.drawImage(t,0,0),c.filter="none",o.canvas}paintInlineImageXObject(e,t){if(!this.contentVisible)return;const s=t.width,i=t.height,o=this.ctx;this.save(e);const{filter:c}=o;c!=="none"&&c!==""&&(o.filter="none"),o.scale(1/s,-1/i);let u;if(t.bitmap)u=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)u=t;else{const f=this.cachedCanvases.getCanvas("inlineImage",s,i).context;fb(f,t),u=this.applyTransferMapsToCanvas(f)}const h=this._scaleImage(u,Mn(o));o.imageSmoothingEnabled=pb(At(o),t.interpolate),this.dependencyTracker?.resetBBox(e).recordBBox(e,o,0,s,-i,0).recordDependencies(e,nn.imageXObject).recordOperation(e),sd(o,h.img,0,0,h.paintWidth,h.paintHeight,0,-i,s,i),this.compose(),this.restore(e)}paintInlineImageXObjectGroup(e,t,s){if(!this.contentVisible)return;const i=this.ctx;let o;if(t.bitmap)o=t.bitmap;else{const c=t.width,u=t.height,p=this.cachedCanvases.getCanvas("inlineImage",c,u).context;fb(p,t),o=this.applyTransferMapsToCanvas(p)}this.dependencyTracker?.resetBBox(e);for(const c of s)i.save(),i.transform(...c.transform),i.scale(1,-1),sd(i,o,c.x,c.y,c.w,c.h,0,-1,1,1),this.dependencyTracker?.recordBBox(e,i,0,1,-1,0),i.restore();this.dependencyTracker?.recordOperation(e),this.compose()}paintSolidColorImageMask(e){this.contentVisible&&(this.dependencyTracker?.resetBBox(e).recordBBox(e,this.ctx,0,1,0,1).recordDependencies(e,nn.fill).recordOperation(e),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e,t){}markPointProps(e,t,s){}beginMarkedContent(e,t){this.dependencyTracker?.beginMarkedContent(e),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t,s){this.dependencyTracker?.beginMarkedContent(e),t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(s)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(e){this.dependencyTracker?.endMarkedContent(e),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(e){}endCompat(e){}consumePath(e,t,s){const i=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(s);const o=this.ctx;this.pendingClip?(i||(this.pendingClip===gb?o.clip(t,"evenodd"):o.clip(t)),this.pendingClip=null,this.dependencyTracker?.bboxToClipBoxDropOperation(e).recordFutureForcedDependency("clipPath",e)):this.dependencyTracker?.recordOperation(e),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=At(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),s=Math.hypot(e[0],e[2]),i=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(s,i)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:s,c:i,d:o}=this.ctx.getTransform();let c,u;if(s===0&&i===0){const h=Math.abs(t),p=Math.abs(o);if(h===p)if(e===0)c=u=1/h;else{const f=h*e;c=u=f<1?1/f:1}else if(e===0)c=1/h,u=1/p;else{const f=h*e,g=p*e;c=f<1?1/f:1,u=g<1?1/g:1}}else{const h=Math.abs(t*o-s*i),p=Math.hypot(t,s),f=Math.hypot(i,o);if(e===0)c=f/h,u=p/h;else{const g=e*h;c=f>g?f/g:1,u=p>g?p/g:1}}this._cachedScaleForStroking[0]=c,this._cachedScaleForStroking[1]=u}return this._cachedScaleForStroking}rescaleAndStroke(e,t){const{ctx:s,current:{lineWidth:i}}=this,[o,c]=this.getScaleForStroking();if(o===c){s.lineWidth=(i||1)*o,s.stroke(e);return}const u=s.getLineDash();t&&s.save(),s.scale(o,c),qf.a=1/o,qf.d=1/c;const h=new Path2D;if(h.addPath(e,qf),u.length>0){const p=Math.max(o,c);s.setLineDash(u.map(f=>f/p)),s.lineDashOffset/=p}s.lineWidth=i||1,s.stroke(h),t&&s.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}}for(const r in Rr)Sr.prototype[r]!==void 0&&(Sr.prototype[Rr[r]]=Sr.prototype[r]);class Nr{#e;#t;#n;static strings=["fontFamily","fontWeight","italicAngle"];static write(e){const t=new TextEncoder,s={};let i=0;for(const p of Nr.strings){const f=t.encode(e[p]);s[p]=f,i+=4+f.length}const o=new ArrayBuffer(i),c=new Uint8Array(o),u=new DataView(o);let h=0;for(const p of Nr.strings){const f=s[p],g=f.length;u.setUint32(h,g),c.set(f,h+4),h+=4+g}return $e(h===o.byteLength,"CssFontInfo.write: Buffer overflow"),o}constructor(e){this.#e=e,this.#t=new DataView(this.#e),this.#n=new TextDecoder}#s(e){$e(e<Nr.strings.length,"Invalid string index");let t=0;for(let i=0;i<e;i++)t+=this.#t.getUint32(t)+4;const s=this.#t.getUint32(t);return this.#n.decode(new Uint8Array(this.#e,t+4,s))}get fontFamily(){return this.#s(0)}get fontWeight(){return this.#s(1)}get italicAngle(){return this.#s(2)}}class Er{#e;#t;#n;static strings=["css","loadedName","baseFontName","src"];static write(e){const t=new TextEncoder,s={};let i=0;for(const x of Er.strings){const b=t.encode(e[x]);s[x]=b,i+=4+b.length}i+=4;let o,c,u=1+i;e.style&&(o=t.encode(e.style.style),c=t.encode(e.style.weight),u+=4+o.length+4+c.length);const h=new ArrayBuffer(u),p=new Uint8Array(h),f=new DataView(h);let g=0;f.setUint8(g++,e.guessFallback?1:0),f.setUint32(g,0),g+=4,i=0;for(const x of Er.strings){const b=s[x],w=b.length;i+=4+w,f.setUint32(g,w),p.set(b,g+4),g+=4+w}return f.setUint32(g-i-4,i),e.style&&(f.setUint32(g,o.length),p.set(o,g+4),g+=4+o.length,f.setUint32(g,c.length),p.set(c,g+4),g+=4+c.length),$e(g<=h.byteLength,"SubstitionInfo.write: Buffer overflow"),h.transferToFixedLength(g)}constructor(e){this.#e=e,this.#t=new DataView(this.#e),this.#n=new TextDecoder}get guessFallback(){return this.#t.getUint8(0)!==0}#s(e){$e(e<Er.strings.length,"Invalid string index");let t=5;for(let i=0;i<e;i++)t+=this.#t.getUint32(t)+4;const s=this.#t.getUint32(t);return this.#n.decode(new Uint8Array(this.#e,t+4,s))}get css(){return this.#s(0)}get loadedName(){return this.#s(1)}get baseFontName(){return this.#s(2)}get src(){return this.#s(3)}get style(){let e=1;e+=4+this.#t.getUint32(e);const t=this.#t.getUint32(e),s=this.#n.decode(new Uint8Array(this.#e,e+4,t));e+=4+t;const i=this.#t.getUint32(e),o=this.#n.decode(new Uint8Array(this.#e,e+4,i));return{style:s,weight:o}}}class at{static bools=["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"];static numbers=["ascent","defaultWidth","descent"];static strings=["fallbackName","loadedName","mimetype","name"];static#e=Math.ceil(this.bools.length*2/8);static#t=this.#e+this.numbers.length*8;static#n=this.#t+1+8;static#s=this.#n+1+48;static#r=this.#s+1+6;#i;#a;#o;constructor({data:e,extra:t}){this.#i=e,this.#a=new TextDecoder,this.#o=new DataView(this.#i),t&&Object.assign(this,t)}#c(e){$e(e<at.bools.length,"Invalid boolean index");const t=Math.floor(e/4),s=e*2%8,i=this.#o.getUint8(t)>>s&3;return i===0?void 0:i===2}get black(){return this.#c(0)}get bold(){return this.#c(1)}get disableFontFace(){return this.#c(2)}get fontExtraProperties(){return this.#c(3)}get isInvalidPDFjsFont(){return this.#c(4)}get isType3Font(){return this.#c(5)}get italic(){return this.#c(6)}get missingFile(){return this.#c(7)}get remeasure(){return this.#c(8)}get vertical(){return this.#c(9)}#l(e){return $e(e<at.numbers.length,"Invalid number index"),this.#o.getFloat64(at.#e+e*8)}get ascent(){return this.#l(0)}get defaultWidth(){return this.#l(1)}get descent(){return this.#l(2)}get bbox(){let e=at.#t;if(this.#o.getUint8(e)===0)return;e+=1;const s=[];for(let i=0;i<4;i++)s.push(this.#o.getInt16(e,!0)),e+=2;return s}get fontMatrix(){let e=at.#n;if(this.#o.getUint8(e)===0)return;e+=1;const s=[];for(let i=0;i<6;i++)s.push(this.#o.getFloat64(e,!0)),e+=8;return s}get defaultVMetrics(){let e=at.#s;if(this.#o.getUint8(e)===0)return;e+=1;const s=[];for(let i=0;i<3;i++)s.push(this.#o.getInt16(e,!0)),e+=2;return s}#h(e){$e(e<at.strings.length,"Invalid string index");let t=at.#r+4;for(let o=0;o<e;o++)t+=this.#o.getUint32(t)+4;const s=this.#o.getUint32(t),i=new Uint8Array(s);return i.set(new Uint8Array(this.#i,t+4,s)),this.#a.decode(i)}get fallbackName(){return this.#h(0)}get loadedName(){return this.#h(1)}get mimetype(){return this.#h(2)}get name(){return this.#h(3)}get data(){let e=at.#r;const t=this.#o.getUint32(e);e+=4+t;const s=this.#o.getUint32(e);e+=4+s;const i=this.#o.getUint32(e);e+=4+i;const o=this.#o.getUint32(e);if(o!==0)return new Uint8Array(this.#i,e+4,o)}clearData(){let e=at.#r;const t=this.#o.getUint32(e);e+=4+t;const s=this.#o.getUint32(e);e+=4+s;const i=this.#o.getUint32(e);e+=4+i;const o=this.#o.getUint32(e);new Uint8Array(this.#i,e+4,o).fill(0),this.#o.setUint32(e,0)}get cssFontInfo(){let e=at.#r;const t=this.#o.getUint32(e);e+=4+t;const s=this.#o.getUint32(e);e+=4+s;const i=this.#o.getUint32(e);if(i===0)return null;const o=new Uint8Array(i);return o.set(new Uint8Array(this.#i,e+4,i)),new Nr(o.buffer)}get systemFontInfo(){let e=at.#r;const t=this.#o.getUint32(e);e+=4+t;const s=this.#o.getUint32(e);if(s===0)return null;const i=new Uint8Array(s);return i.set(new Uint8Array(this.#i,e+4,s)),new Er(i.buffer)}static write(e){const t=e.systemFontInfo?Er.write(e.systemFontInfo):null,s=e.cssFontInfo?Nr.write(e.cssFontInfo):null,i=new TextEncoder,o={};let c=0;for(const _ of at.strings)o[_]=i.encode(e[_]),c+=4+o[_].length;const u=at.#r+4+c+4+(t?t.byteLength:0)+4+(s?s.byteLength:0)+4+(e.data?e.data.length:0),h=new ArrayBuffer(u),p=new Uint8Array(h),f=new DataView(h);let g=0;const x=at.bools.length;let b=0,w=0;for(let _=0;_<x;_++){const S=e[at.bools[_]];b|=(S===void 0?0:S?2:1)<<w,w+=2,(w===8||_===x-1)&&(f.setUint8(g++,b),b=0,w=0)}$e(g===at.#e,"FontInfo.write: Boolean properties offset mismatch");for(const _ of at.numbers)f.setFloat64(g,e[_]),g+=8;if($e(g===at.#t,"FontInfo.write: Number properties offset mismatch"),e.bbox){f.setUint8(g++,4);for(const _ of e.bbox)f.setInt16(g,_,!0),g+=2}else f.setUint8(g++,0),g+=8;if($e(g===at.#n,"FontInfo.write: BBox properties offset mismatch"),e.fontMatrix){f.setUint8(g++,6);for(const _ of e.fontMatrix)f.setFloat64(g,_,!0),g+=8}else f.setUint8(g++,0),g+=48;if($e(g===at.#s,"FontInfo.write: FontMatrix properties offset mismatch"),e.defaultVMetrics){f.setUint8(g++,1);for(const _ of e.defaultVMetrics)f.setInt16(g,_,!0),g+=2}else f.setUint8(g++,0),g+=6;$e(g===at.#r,"FontInfo.write: DefaultVMetrics properties offset mismatch"),f.setUint32(at.#r,0),g+=4;for(const _ of at.strings){const S=o[_],A=S.length;f.setUint32(g,A),p.set(S,g+4),g+=4+A}if(f.setUint32(at.#r,g-at.#r-4),!t)f.setUint32(g,0),g+=4;else{const _=t.byteLength;f.setUint32(g,_),$e(g+4+_<=h.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),p.set(new Uint8Array(t),g+4),g+=4+_}if(!s)f.setUint32(g,0),g+=4;else{const _=s.byteLength;f.setUint32(g,_),$e(g+4+_<=h.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),p.set(new Uint8Array(s),g+4),g+=4+_}return e.data===void 0?(f.setUint32(g,0),g+=4):(f.setUint32(g,e.data.length),p.set(e.data,g+4),g+=4+e.data.length),$e(g<=h.byteLength,"FontInfo.write: Buffer overflow"),h.transferToFixedLength(g)}}class Vi{static#e=null;static#t="";static get workerPort(){return this.#e}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");this.#e=e}static get workerSrc(){return this.#t}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");this.#t=e}}class RC{#e;#t;constructor({parsedData:e,rawData:t}){this.#e=e,this.#t=t}getRaw(){return this.#t}get(e){return this.#e.get(e)??null}[Symbol.iterator](){return this.#e.entries()}}const gr=Symbol("INTERNAL");class DC{#e=!1;#t=!1;#n=!1;#s=!0;constructor(e,{name:t,intent:s,usage:i,rbGroups:o}){this.#e=!!(e&Is.DISPLAY),this.#t=!!(e&Is.PRINT),this.name=t,this.intent=s,this.usage=i,this.rbGroups=o}get visible(){if(this.#n)return this.#s;if(!this.#s)return!1;const{print:e,view:t}=this.usage;return this.#e?t?.viewState!=="OFF":this.#t?e?.printState!=="OFF":!0}_setVisible(e,t,s=!1){e!==gr&&dt("Internal method `_setVisible` called."),this.#n=s,this.#s=t}}class MC{#e=null;#t=new Map;#n=null;#s=null;constructor(e,t=Is.DISPLAY){if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,this.#s=e.order;for(const s of e.groups)this.#t.set(s.id,new DC(t,s));if(e.baseState==="OFF")for(const s of this.#t.values())s._setVisible(gr,!1);for(const s of e.on)this.#t.get(s)._setVisible(gr,!0);for(const s of e.off)this.#t.get(s)._setVisible(gr,!1);this.#n=this.getHash()}}#r(e){const t=e.length;if(t<2)return!0;const s=e[0];for(let i=1;i<t;i++){const o=e[i];let c;if(Array.isArray(o))c=this.#r(o);else if(this.#t.has(o))c=this.#t.get(o).visible;else return Ce(`Optional content group not found: ${o}`),!0;switch(s){case"And":if(!c)return!1;break;case"Or":if(c)return!0;break;case"Not":return!c;default:return!0}}return s==="And"}isVisible(e){if(this.#t.size===0)return!0;if(!e)return Jd("Optional content group not defined."),!0;if(e.type==="OCG")return this.#t.has(e.id)?this.#t.get(e.id).visible:(Ce(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return this.#r(e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!this.#t.has(t))return Ce(`Optional content group not found: ${t}`),!0;if(this.#t.get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!this.#t.has(t))return Ce(`Optional content group not found: ${t}`),!0;if(!this.#t.get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!this.#t.has(t))return Ce(`Optional content group not found: ${t}`),!0;if(!this.#t.get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!this.#t.has(t))return Ce(`Optional content group not found: ${t}`),!0;if(this.#t.get(t).visible)return!1}return!0}return Ce(`Unknown optional content policy ${e.policy}.`),!0}return Ce(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,s=!0){const i=this.#t.get(e);if(!i){Ce(`Optional content group not found: ${e}`);return}if(s&&t&&i.rbGroups.length)for(const o of i.rbGroups)for(const c of o)c!==e&&this.#t.get(c)?._setVisible(gr,!1,!0);i._setVisible(gr,!!t,!0),this.#e=null}setOCGState({state:e,preserveRB:t}){let s;for(const i of e){switch(i){case"ON":case"OFF":case"Toggle":s=i;continue}const o=this.#t.get(i);if(o)switch(s){case"ON":this.setVisibility(i,!0,t);break;case"OFF":this.setVisibility(i,!1,t);break;case"Toggle":this.setVisibility(i,!o.visible,t);break}}this.#e=null}get hasInitialVisibility(){return this.#n===null||this.getHash()===this.#n}getOrder(){return this.#t.size?this.#s?this.#s.slice():[...this.#t.keys()]:null}getGroup(e){return this.#t.get(e)||null}getHash(){if(this.#e!==null)return this.#e;const e=new mw;for(const[t,s]of this.#t)e.update(`${t}:${s.visible}`);return this.#e=e.hexdigest()}[Symbol.iterator](){return this.#t.entries()}}class LC{constructor(e,{disableRange:t=!1,disableStream:s=!1}){$e(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:i,initialData:o,progressiveDone:c,contentDispositionFilename:u}=e;if(this._queuedChunks=[],this._progressiveDone=c,this._contentDispositionFilename=u,o?.length>0){const h=o instanceof Uint8Array&&o.byteLength===o.buffer.byteLength?o.buffer:new Uint8Array(o).buffer;this._queuedChunks.push(h)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!s,this._isRangeSupported=!t,this._contentLength=i,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((h,p)=>{this._onReceiveData({begin:h,chunk:p})}),e.addProgressListener((h,p)=>{this._onProgress({loaded:h,total:p})}),e.addProgressiveReadListener(h=>{this._onReceiveData({chunk:h})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const s=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(s):this._queuedChunks.push(s);else{const i=this._rangeReaders.some(function(o){return o._begin!==e?!1:(o._enqueue(s),!0)});$e(i,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(e){e.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:e.loaded}):this._fullRequestReader?.onProgress?.({loaded:e.loaded,total:e.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){$e(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new OC(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const s=new BC(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(s),s}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeReaders.slice(0))t.cancel(e);this._pdfDataRangeTransport.abort()}}class OC{constructor(e,t,s=!1,i=null){this._stream=e,this._done=s||!1,this._filename=tu(i)?i:null,this._queuedChunks=t||[],this._loaded=0;for(const o of this._queuedChunks)this._loaded+=o.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class BC{constructor(e,t,s){this._stream=e,this._begin=t,this._end=s,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function PC(r){let e=!0,t=s("filename\\*","i").exec(r);if(t){t=t[1];let f=u(t);return f=unescape(f),f=h(f),f=p(f),o(f)}if(t=c(r),t){const f=p(t);return o(f)}if(t=s("filename","i").exec(r),t){t=t[1];let f=u(t);return f=p(f),o(f)}function s(f,g){return new RegExp("(?:^|;)\\s*"+f+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',g)}function i(f,g){if(f){if(!/^[\x00-\xFF]+$/.test(g))return g;try{const x=new TextDecoder(f,{fatal:!0}),b=xl(g);g=x.decode(b),e=!1}catch{}}return g}function o(f){return e&&/[\x80-\xff]/.test(f)&&(f=i("utf-8",f),e&&(f=i("iso-8859-1",f))),f}function c(f){const g=[];let x;const b=s("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(x=b.exec(f))!==null;){let[,_,S,A]=x;if(_=parseInt(_,10),_ in g){if(_===0)break;continue}g[_]=[S,A]}const w=[];for(let _=0;_<g.length&&_ in g;++_){let[S,A]=g[_];A=u(A),S&&(A=unescape(A),_===0&&(A=h(A))),w.push(A)}return w.join("")}function u(f){if(f.startsWith('"')){const g=f.slice(1).split('\\"');for(let x=0;x<g.length;++x){const b=g[x].indexOf('"');b!==-1&&(g[x]=g[x].slice(0,b),g.length=x+1),g[x]=g[x].replaceAll(/\\(.)/g,"$1")}f=g.join('"')}return f}function h(f){const g=f.indexOf("'");if(g===-1)return f;const x=f.slice(0,g),w=f.slice(g+1).replace(/^[^']*'/,"");return i(x,w)}function p(f){return!f.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(f)?f:f.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(g,x,b,w){if(b==="q"||b==="Q")return w=w.replaceAll("_"," "),w=w.replaceAll(/=([0-9a-fA-F]{2})/g,function(_,S){return String.fromCharCode(parseInt(S,16))}),i(x,w);try{w=atob(w)}catch{}return i(x,w)})}return""}function _w(r,e){const t=new Headers;if(!r||!e||typeof e!="object")return t;for(const s in e){const i=e[s];i!==void 0&&t.append(s,i)}return t}function su(r){return URL.parse(r)?.origin??null}function Aw({responseHeaders:r,isHttp:e,rangeChunkSize:t,disableRange:s}){const i={allowRangeRequests:!1,suggestedLength:void 0},o=parseInt(r.get("Content-Length"),10);return!Number.isInteger(o)||(i.suggestedLength=o,o<=2*t)||s||!e||r.get("Accept-Ranges")!=="bytes"||(r.get("Content-Encoding")||"identity")!=="identity"||(i.allowRangeRequests=!0),i}function Sw(r){const e=r.get("Content-Disposition");if(e){let t=PC(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(tu(t))return t}return null}function _l(r,e){return new tl(`Unexpected server response (${r}) while retrieving PDF "${e}".`,r,r===404||r===0&&e.startsWith("file:"))}function Nw(r){return r===200||r===206}function Ew(r,e,t){return{method:"GET",headers:r,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function jw(r){return r instanceof Uint8Array?r.buffer:r instanceof ArrayBuffer?r:(Ce(`getArrayBuffer - unexpected data format: ${r}`),new Uint8Array(r).buffer)}class FC{_responseOrigin=null;constructor(e){this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=_w(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return $e(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new UC(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const s=new IC(this,e,t);return this._rangeRequestReaders.push(s),s}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeRequestReaders.slice(0))t.cancel(e)}}class UC{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const s=new Headers(e.headers),i=t.url;fetch(i,Ew(s,this._withCredentials,this._abortController)).then(o=>{if(e._responseOrigin=su(o.url),!Nw(o.status))throw _l(o.status,i);this._reader=o.body.getReader(),this._headersCapability.resolve();const c=o.headers,{allowRangeRequests:u,suggestedLength:h}=Aw({responseHeaders:c,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=u,this._contentLength=h||this._contentLength,this._filename=Sw(c),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new fi("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:jw(e),done:!1})}cancel(e){this._reader?.cancel(e),this._abortController.abort()}}class IC{constructor(e,t,s){this._stream=e,this._reader=null,this._loaded=0;const i=e.source;this._withCredentials=i.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!i.disableStream,this._abortController=new AbortController;const o=new Headers(e.headers);o.append("Range",`bytes=${t}-${s-1}`);const c=i.url;fetch(c,Ew(o,this._withCredentials,this._abortController)).then(u=>{const h=su(u.url);if(h!==e._responseOrigin)throw new Error(`Expected range response-origin "${h}" to match "${e._responseOrigin}".`);if(!Nw(u.status))throw _l(u.status,c);this._readCapability.resolve(),this._reader=u.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,this.onProgress?.({loaded:this._loaded}),{value:jw(e),done:!1})}cancel(e){this._reader?.cancel(e),this._abortController.abort()}}const Vf=200,Gf=206;function zC(r){const e=r.response;return typeof e!="string"?e:xl(e).buffer}class HC{_responseOrigin=null;constructor({url:e,httpHeaders:t,withCredentials:s}){this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=_w(this.isHttp,t),this.withCredentials=s||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){const t=new XMLHttpRequest,s=this.currXhrId++,i=this.pendingRequests[s]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[o,c]of this.headers)t.setRequestHeader(o,c);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),i.expectedStatus=Gf):i.expectedStatus=Vf,t.responseType="arraybuffer",$e(e.onError,"Expected `onError` callback to be provided."),t.onerror=()=>{e.onError(t.status)},t.onreadystatechange=this.onStateChange.bind(this,s),t.onprogress=this.onProgress.bind(this,s),i.onHeadersReceived=e.onHeadersReceived,i.onDone=e.onDone,i.onError=e.onError,i.onProgress=e.onProgress,t.send(null),s}onProgress(e,t){const s=this.pendingRequests[e];s&&s.onProgress?.(t)}onStateChange(e,t){const s=this.pendingRequests[e];if(!s)return;const i=s.xhr;if(i.readyState>=2&&s.onHeadersReceived&&(s.onHeadersReceived(),delete s.onHeadersReceived),i.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],i.status===0&&this.isHttp){s.onError(i.status);return}const o=i.status||Vf;if(!(o===Vf&&s.expectedStatus===Gf)&&o!==s.expectedStatus){s.onError(i.status);return}const u=zC(i);if(o===Gf){const h=i.getResponseHeader("Content-Range"),p=/bytes (\d+)-(\d+)\/(\d+)/.exec(h);p?s.onDone({begin:parseInt(p[1],10),chunk:u}):(Ce('Missing or invalid "Content-Range" header.'),s.onError(0))}else u?s.onDone({begin:0,chunk:u}):s.onError(i.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class qC{constructor(e){this._source=e,this._manager=new HC(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return $e(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new VC(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const s=new GC(this._manager,e,t);return s.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(s),s}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeRequestReaders.slice(0))t.cancel(e)}}class VC{constructor(e,t){this._manager=e,this._url=t.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e);this._manager._responseOrigin=su(t.responseURL);const s=t.getAllResponseHeaders(),i=new Headers(s?s.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(u=>{const[h,...p]=u.split(": ");return[h,p.join(": ")]}):[]),{allowRangeRequests:o,suggestedLength:c}=Aw({responseHeaders:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});o&&(this._isRangeSupported=!0),this._contentLength=c||this._contentLength,this._filename=Sw(i),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=_l(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){this.onProgress?.({loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class GC{constructor(e,t,s){this._manager=e,this._url=e.url,this._requestId=e.request({begin:t,end:s,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){const e=su(this._manager.getRequestXhr(this._requestId)?.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${e}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){this.onClosed?.(this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError??=_l(e,this._url);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){this.isStreamingSupported||this.onProgress?.({loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const $C=/^[a-z][a-z0-9\-+.]+:/i;function YC(r){if($C.test(r))return new URL(r);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(r))}class XC{constructor(e){this.source=e,this.url=YC(e.url),$e(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return $e(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new WC(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const s=new KC(this,e,t);return this._rangeRequestReaders.push(s),s}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeRequestReaders.slice(0))t.cancel(e)}}class WC{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const s=process.getBuiltinModule("fs");s.promises.lstat(this._url).then(i=>{this._contentLength=i.size,this._setReadableStream(s.createReadStream(this._url)),this._headersCapability.resolve()},i=>{i.code==="ENOENT"&&(i=_l(0,this._url.href)),this._storedError=i,this._headersCapability.reject(i)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new fi("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class KC{constructor(e,t,s){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const i=e.source;this._isStreamingSupported=!i.disableStream;const o=process.getBuiltinModule("fs");this._setReadableStream(o.createReadStream(this._url,{start:t,end:s-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const Io=Symbol("INITIAL_DATA");class Cw{#e=Object.create(null);#t(e){return this.#e[e]||={...Promise.withResolvers(),data:Io}}get(e,t=null){if(t){const i=this.#t(e);return i.promise.then(()=>t(i.data)),null}const s=this.#e[e];if(!s||s.data===Io)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return s.data}has(e){const t=this.#e[e];return!!t&&t.data!==Io}delete(e){const t=this.#e[e];return!t||t.data===Io?!1:(delete this.#e[e],!0)}resolve(e,t=null){const s=this.#t(e);s.data=t,s.resolve()}clear(){for(const e in this.#e){const{data:t}=this.#e[e];t?.bitmap?.close()}this.#e=Object.create(null)}*[Symbol.iterator](){for(const e in this.#e){const{data:t}=this.#e[e];t!==Io&&(yield[e,t])}}}const QC=1e5,xb=30;let nl=class an{#e=Promise.withResolvers();#t=null;#n=!1;#s=!!globalThis.FontInspector?.enabled;#r=null;#i=null;#a=0;#o=0;#c=null;#l=null;#h=0;#u=0;#f=Object.create(null);#g=[];#m=null;#d=[];#p=new WeakMap;#x=null;static#b=new Map;static#y=new Map;static#N=new WeakMap;static#A=null;static#v=new Set;constructor({textContentSource:e,container:t,viewport:s}){if(e instanceof ReadableStream)this.#m=e;else if(typeof e=="object")this.#m=new ReadableStream({start(h){h.enqueue(e),h.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#t=this.#l=t,this.#u=s.scale*yn.pixelRatio,this.#h=s.rotation,this.#i={div:null,properties:null,ctx:null};const{pageWidth:i,pageHeight:o,pageX:c,pageY:u}=s.rawDims;this.#x=[1,0,0,-1,-c,u+o],this.#o=i,this.#a=o,an.#T(),Gi(t,s),this.#e.promise.finally(()=>{an.#v.delete(this),this.#i=null,this.#f=null}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=Yt.platform;return Le(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{this.#c.read().then(({value:t,done:s})=>{if(s){this.#e.resolve();return}this.#r??=t.lang,Object.assign(this.#f,t.styles),this.#j(t.items),e()},this.#e.reject)};return this.#c=this.#m.getReader(),an.#v.add(this),e(),this.#e.promise}update({viewport:e,onBefore:t=null}){const s=e.scale*yn.pixelRatio,i=e.rotation;if(i!==this.#h&&(t?.(),this.#h=i,Gi(this.#l,{rotation:i})),s!==this.#u){t?.(),this.#u=s;const o={div:null,properties:null,ctx:an.#k(this.#r)};for(const c of this.#d)o.properties=this.#p.get(c),o.div=c,this.#S(o)}}cancel(){const e=new fi("TextLayer task cancelled.");this.#c?.cancel(e).catch(()=>{}),this.#c=null,this.#e.reject(e)}get textDivs(){return this.#d}get textContentItemsStr(){return this.#g}#j(e){if(this.#n)return;this.#i.ctx??=an.#k(this.#r);const t=this.#d,s=this.#g;for(const i of e){if(t.length>QC){Ce("Ignoring additional textDivs for performance reasons."),this.#n=!0;return}if(i.str===void 0){if(i.type==="beginMarkedContentProps"||i.type==="beginMarkedContent"){const o=this.#t;this.#t=document.createElement("span"),this.#t.classList.add("markedContent"),i.id&&this.#t.setAttribute("id",`${i.id}`),o.append(this.#t)}else i.type==="endMarkedContent"&&(this.#t=this.#t.parentNode);continue}s.push(i.str),this.#_(i)}}#_(e){const t=document.createElement("span"),s={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};this.#d.push(t);const i=fe.transform(this.#x,e.transform);let o=Math.atan2(i[1],i[0]);const c=this.#f[e.fontName];c.vertical&&(o+=Math.PI/2);let u=this.#s&&c.fontSubstitution||c.fontFamily;u=an.fontFamilyMap.get(u)||u;const h=Math.hypot(i[2],i[3]),p=h*an.#P(u,c,this.#r);let f,g;o===0?(f=i[4],g=i[5]-p):(f=i[4]+p*Math.sin(o),g=i[5]-p*Math.cos(o));const x="calc(var(--total-scale-factor) *",b=t.style;this.#t===this.#l?(b.left=`${(100*f/this.#o).toFixed(2)}%`,b.top=`${(100*g/this.#a).toFixed(2)}%`):(b.left=`${x}${f.toFixed(2)}px)`,b.top=`${x}${g.toFixed(2)}px)`),b.fontSize=`${x}${(an.#A*h).toFixed(2)}px)`,b.fontFamily=u,s.fontSize=h,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,this.#s&&(t.dataset.fontName=c.fontSubstitutionLoadedName||e.fontName),o!==0&&(s.angle=o*(180/Math.PI));let w=!1;if(e.str.length>1)w=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const _=Math.abs(e.transform[0]),S=Math.abs(e.transform[3]);_!==S&&Math.max(_,S)/Math.min(_,S)>1.5&&(w=!0)}if(w&&(s.canvasWidth=c.vertical?e.height:e.width),this.#p.set(t,s),this.#i.div=t,this.#i.properties=s,this.#S(this.#i),s.hasText&&this.#t.append(t),s.hasEOL){const _=document.createElement("br");_.setAttribute("role","presentation"),this.#t.append(_)}}#S(e){const{div:t,properties:s,ctx:i}=e,{style:o}=t;let c="";if(an.#A>1&&(c=`scale(${1/an.#A})`),s.canvasWidth!==0&&s.hasText){const{fontFamily:u}=o,{canvasWidth:h,fontSize:p}=s;an.#C(i,p*this.#u,u);const{width:f}=i.measureText(t.textContent);f>0&&(c=`scaleX(${h*this.#u/f}) ${c}`)}s.angle!==0&&(c=`rotate(${s.angle}deg) ${c}`),c.length>0&&(o.transform=c)}static cleanup(){if(!(this.#v.size>0)){this.#b.clear();for(const{canvas:e}of this.#y.values())e.remove();this.#y.clear()}}static#k(e=null){let t=this.#y.get(e||="");if(!t){const s=document.createElement("canvas");s.className="hiddenCanvasElement",s.lang=e,document.body.append(s),t=s.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#y.set(e,t),this.#N.set(t,{size:0,family:""})}return t}static#C(e,t,s){const i=this.#N.get(e);t===i.size&&s===i.family||(e.font=`${t}px ${s}`,i.size=t,i.family=s)}static#T(){if(this.#A!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),this.#A=e.getBoundingClientRect().height,e.remove()}static#P(e,t,s){const i=this.#b.get(e);if(i)return i;const o=this.#k(s);o.canvas.width=o.canvas.height=xb,this.#C(o,xb,e);const c=o.measureText(""),u=c.fontBoundingBoxAscent,h=Math.abs(c.fontBoundingBoxDescent);o.canvas.width=o.canvas.height=0;let p=.8;return u?p=u/(u+h):(Yt.platform.isFirefox&&Ce("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),t.ascent?p=t.ascent:t.descent&&(p=1+t.descent)),this.#b.set(e,p),p}};const ZC=100;function Zm(r={}){typeof r=="string"||r instanceof URL?r={url:r}:(r instanceof ArrayBuffer||ArrayBuffer.isView(r))&&(r={data:r});const e=new Jm,{docId:t}=e,s=r.url?rC(r.url):null,i=r.data?oC(r.data):null,o=r.httpHeaders||null,c=r.withCredentials===!0,u=r.password??null,h=r.range instanceof ep?r.range:null,p=Number.isInteger(r.rangeChunkSize)&&r.rangeChunkSize>0?r.rangeChunkSize:2**16;let f=r.worker instanceof Dr?r.worker:null;const g=r.verbosity,x=typeof r.docBaseUrl=="string"&&!bl(r.docBaseUrl)?r.docBaseUrl:null,b=Zc(r.cMapUrl),w=r.cMapPacked!==!1,_=r.CMapReaderFactory||(ps?mC:nb),S=Zc(r.iccUrl),A=Zc(r.standardFontDataUrl),L=r.StandardFontDataFactory||(ps?pC:ib),O=Zc(r.wasmUrl),D=r.WasmFactory||(ps?gC:ab),I=r.stopAtErrors!==!0,C=Number.isInteger(r.maxImageSize)&&r.maxImageSize>-1?r.maxImageSize:-1,P=r.isEvalSupported!==!1,k=typeof r.isOffscreenCanvasSupported=="boolean"?r.isOffscreenCanvasSupported:!ps,N=typeof r.isImageDecoderSupported=="boolean"?r.isImageDecoderSupported:!ps&&(Yt.platform.isFirefox||!globalThis.chrome),M=Number.isInteger(r.canvasMaxAreaInBytes)?r.canvasMaxAreaInBytes:-1,H=typeof r.disableFontFace=="boolean"?r.disableFontFace:ps,F=r.fontExtraProperties===!0,V=r.enableXfa===!0,q=r.ownerDocument||globalThis.document,z=r.disableRange===!0,E=r.disableStream===!0,j=r.disableAutoFetch===!0,G=r.pdfBug===!0,Y=r.CanvasFactory||(ps?fC:dC),ee=r.FilterFactory||(ps?hC:uC),B=r.enableHWA===!0,$=r.useWasm!==!1,K=h?h.length:r.length??NaN,Q=typeof r.useSystemFonts=="boolean"?r.useSystemFonts:!ps&&!H,Z=typeof r.useWorkerFetch=="boolean"?r.useWorkerFetch:!!(_===nb&&L===ib&&D===ab&&b&&A&&O&&$o(b,document.baseURI)&&$o(A,document.baseURI)&&$o(O,document.baseURI)),de=null;zj(g);const ue={canvasFactory:new Y({ownerDocument:q,enableHWA:B}),filterFactory:new ee({docId:t,ownerDocument:q}),cMapReaderFactory:Z?null:new _({baseUrl:b,isCompressed:w}),standardFontDataFactory:Z?null:new L({baseUrl:A}),wasmFactory:Z?null:new D({baseUrl:O})};f||(f=Dr.create({verbosity:g,port:Vi.workerPort}),e._worker=f);const xe={docId:t,apiVersion:"5.4.296",data:i,password:u,disableAutoFetch:j,rangeChunkSize:p,length:K,docBaseUrl:x,enableXfa:V,evaluatorOptions:{maxImageSize:C,disableFontFace:H,ignoreErrors:I,isEvalSupported:P,isOffscreenCanvasSupported:k,isImageDecoderSupported:N,canvasMaxAreaInBytes:M,fontExtraProperties:F,useSystemFonts:Q,useWasm:$,useWorkerFetch:Z,cMapUrl:b,iccUrl:S,standardFontDataUrl:A,wasmUrl:O}},pe={ownerDocument:q,pdfBug:G,styleElement:de,loadingParams:{disableAutoFetch:j,enableXfa:V}};return f.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(f.destroyed)throw new Error("Worker was destroyed");const Re=f.messageHandler.sendWithPromise("GetDocRequest",xe,i?[i.buffer]:null);let ve;if(h)ve=new LC(h,{disableRange:z,disableStream:E});else if(!i){if(!s)throw new Error("getDocument - no `url` parameter provided.");const Xe=$o(s)?FC:ps?XC:qC;ve=new Xe({url:s,length:K,httpHeaders:o,withCredentials:c,rangeChunkSize:p,disableRange:z,disableStream:E})}return Re.then(Xe=>{if(e.destroyed)throw new Error("Loading aborted");if(f.destroyed)throw new Error("Worker was destroyed");const Ie=new Yo(t,Xe,f.port),Se=new tT(Ie,e,ve,pe,ue,B);e._transport=Se,Ie.send("Ready",null)})}).catch(e._capability.reject),e}class Jm{static#e=0;_capability=Promise.withResolvers();_transport=null;_worker=null;docId=`d${Jm.#e++}`;destroyed=!1;onPassword=null;onProgress=null;get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(e){throw this._worker?.port&&delete this._worker._pendingDestroy,e}this._transport=null,this._worker?.destroy(),this._worker=null}async getData(){return this._transport.getData()}}let ep=class{#e=Promise.withResolvers();#t=[];#n=[];#s=[];#r=[];constructor(e,t,s=!1,i=null){this.length=e,this.initialData=t,this.progressiveDone=s,this.contentDispositionFilename=i}addRangeListener(e){this.#r.push(e)}addProgressListener(e){this.#s.push(e)}addProgressiveReadListener(e){this.#n.push(e)}addProgressiveDoneListener(e){this.#t.push(e)}onDataRange(e,t){for(const s of this.#r)s(e,t)}onDataProgress(e,t){this.#e.promise.then(()=>{for(const s of this.#s)s(e,t)})}onDataProgressiveRead(e){this.#e.promise.then(()=>{for(const t of this.#n)t(e)})}onDataProgressiveDone(){this.#e.promise.then(()=>{for(const e of this.#t)e()})}transportReady(){this.#e.resolve()}requestDataRange(e,t){dt("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}};class JC{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Le(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(e,t){return this._transport.getAnnotationsByType(e,t)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class eT{#e=!1;constructor(e,t,s,i=!1){this._pageIndex=e,this._pageInfo=t,this._transport=s,this._stats=i?new Ky:null,this._pdfBug=i,this.commonObjs=s.commonObjs,this.objs=new Cw,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:s=0,offsetY:i=0,dontFlip:o=!1}={}){return new yl({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:t,offsetX:s,offsetY:i,dontFlip:o})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Le(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:e,canvas:t=e.canvas,viewport:s,intent:i="display",annotationMode:o=Un.ENABLE,transform:c=null,background:u=null,optionalContentConfigPromise:h=null,annotationCanvasMap:p=null,pageColors:f=null,printAnnotationStorage:g=null,isEditing:x=!1,recordOperations:b=!1,operationsFilter:w=null}){this._stats?.time("Overall");const _=this._transport.getRenderingIntent(i,o,g,x),{renderingIntent:S,cacheKey:A}=_;this.#e=!1,h||=this._transport.getOptionalContentConfig(S);let L=this._intentStates.get(A);L||(L=Object.create(null),this._intentStates.set(A,L)),L.streamReaderCancelTimeout&&(clearTimeout(L.streamReaderCancelTimeout),L.streamReaderCancelTimeout=null);const O=!!(S&Is.PRINT);L.displayReadyCapability||(L.displayReadyCapability=Promise.withResolvers(),L.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(_));const D=!!(this._pdfBug&&globalThis.StepperManager?.enabled),I=!this.recordedBBoxes&&(b||D),C=N=>{if(L.renderTasks.delete(P),I){const M=P.gfx?.dependencyTracker.take();M&&(P.stepper&&P.stepper.setOperatorBBoxes(M,P.gfx.dependencyTracker.takeDebugMetadata()),b&&(this.recordedBBoxes=M))}O&&(this.#e=!0),this.#t(),N?(P.capability.reject(N),this._abortOperatorList({intentState:L,reason:N instanceof Error?N:new Error(N)})):P.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},P=new Ar({callback:C,params:{canvas:t,canvasContext:e,dependencyTracker:I?new yC(t,L.operatorList.length,D):null,viewport:s,transform:c,background:u},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:p,operatorList:L.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!O,pdfBug:this._pdfBug,pageColors:f,enableHWA:this._transport.enableHWA,operationsFilter:w});(L.renderTasks||=new Set).add(P);const k=P.task;return Promise.all([L.displayReadyCapability.promise,h]).then(([N,M])=>{if(this.destroyed){C();return}if(this._stats?.time("Rendering"),!(M.renderingIntent&S))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");P.initializeGraphics({transparency:N,optionalContentConfig:M}),P.operatorListChanged()}).catch(C),k}getOperatorList({intent:e="display",annotationMode:t=Un.ENABLE,printAnnotationStorage:s=null,isEditing:i=!1}={}){function o(){u.operatorList.lastChunk&&(u.opListReadCapability.resolve(u.operatorList),u.renderTasks.delete(h))}const c=this._transport.getRenderingIntent(e,t,s,i,!0);let u=this._intentStates.get(c.cacheKey);u||(u=Object.create(null),this._intentStates.set(c.cacheKey,u));let h;return u.opListReadCapability||(h=Object.create(null),h.operatorListChanged=o,u.opListReadCapability=Promise.withResolvers(),(u.renderTasks||=new Set).add(h),u.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(c)),u.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(i){return i.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(s=>sl.textContent(s));const t=this.streamTextContent(e);return new Promise(function(s,i){function o(){c.read().then(function({value:h,done:p}){if(p){s(u);return}u.lang??=h.lang,Object.assign(u.styles,h.styles),u.items.push(...h.items),o()},i)}const c=t.getReader(),u={items:[],styles:Object.create(null),lang:null};o()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const s of t.renderTasks)e.push(s.completed),s.cancel();return this.objs.clear(),this.#e=!1,Promise.all(e)}cleanup(e=!1){this.#e=!0;const t=this.#t();return e&&t&&(this._stats&&=new Ky),t}#t(){if(!this.#e||this.destroyed)return!1;for(const{renderTasks:e,operatorList:t}of this._intentStates.values())if(e.size>0||!t.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#e=!1,!0}_startRenderPage(e,t){const s=this._intentStates.get(t);s&&(this._stats?.timeEnd("Page Request"),s.displayReadyCapability?.resolve(e))}_renderPageChunk(e,t){for(let s=0,i=e.length;s<i;s++)t.operatorList.fnArray.push(e.fnArray[s]),t.operatorList.argsArray.push(e.argsArray[s]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const s of t.renderTasks)s.operatorListChanged();e.lastChunk&&this.#t()}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:s,modifiedIds:i}){const{map:o,transfer:c}=s,h=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:o,modifiedIds:i},c).getReader(),p=this._intentStates.get(t);p.streamReader=h;const f=()=>{h.read().then(({value:g,done:x})=>{if(x){p.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(g,p),f())},g=>{if(p.streamReader=null,!this._transport.destroyed){if(p.operatorList){p.operatorList.lastChunk=!0;for(const x of p.renderTasks)x.operatorListChanged();this.#t()}if(p.displayReadyCapability)p.displayReadyCapability.reject(g);else if(p.opListReadCapability)p.opListReadCapability.reject(g);else throw g}})};f()}_abortOperatorList({intentState:e,reason:t,force:s=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!s){if(e.renderTasks.size>0)return;if(t instanceof eu){let i=ZC;t.extraDelay>0&&t.extraDelay<1e3&&(i+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},i);return}}if(e.streamReader.cancel(new fi(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[i,o]of this._intentStates)if(o===e){this._intentStates.delete(i);break}this.cleanup()}}}get stats(){return this._stats}}var Hi,gn,ci,ga,Od,xa,ya,gs,bd,Tw,kw,Xo,Tr,vd;const yt=class yt{constructor({name:e=null,port:t=null,verbosity:s=Hj()}={}){kn(this,gs);kn(this,Hi,Promise.withResolvers());kn(this,gn,null);kn(this,ci,null);kn(this,ga,null);if(this.name=e,this.destroyed=!1,this.verbosity=s,t){if(xt(yt,ya).has(t))throw new Error("Cannot use more than one PDFWorker per port.");xt(yt,ya).set(t,this),Rn(this,gs,Tw).call(this,t)}else Rn(this,gs,kw).call(this)}get promise(){return xt(this,Hi).promise}get port(){return xt(this,ci)}get messageHandler(){return xt(this,gn)}destroy(){this.destroyed=!0,xt(this,ga)?.terminate(),Ns(this,ga,null),xt(yt,ya).delete(xt(this,ci)),Ns(this,ci,null),xt(this,gn)?.destroy(),Ns(this,gn,null)}static create(e){const t=xt(this,ya).get(e?.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new yt(e)}static get workerSrc(){if(Vi.workerSrc)return Vi.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Le(this,"_setupFakeWorkerGlobal",(async()=>xt(this,Tr,vd)?xt(this,Tr,vd):(await import(this.workerSrc)).WorkerMessageHandler)())}};Hi=new WeakMap,gn=new WeakMap,ci=new WeakMap,ga=new WeakMap,Od=new WeakMap,xa=new WeakMap,ya=new WeakMap,gs=new WeakSet,bd=function(){xt(this,Hi).resolve(),xt(this,gn).send("configure",{verbosity:this.verbosity})},Tw=function(e){Ns(this,ci,e),Ns(this,gn,new Yo("main","worker",e)),xt(this,gn).on("ready",()=>{}),Rn(this,gs,bd).call(this)},kw=function(){if(xt(yt,xa)||xt(yt,Tr,vd)){Rn(this,gs,Xo).call(this);return}let{workerSrc:e}=yt;try{yt._isSameOrigin(window.location,e)||(e=yt._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),s=new Yo("main","worker",t),i=()=>{o.abort(),s.destroy(),t.terminate(),this.destroyed?xt(this,Hi).reject(new Error("Worker was destroyed")):Rn(this,gs,Xo).call(this)},o=new AbortController;t.addEventListener("error",()=>{xt(this,ga)||i()},{signal:o.signal}),s.on("test",u=>{if(o.abort(),this.destroyed||!u){i();return}Ns(this,gn,s),Ns(this,ci,t),Ns(this,ga,t),Rn(this,gs,bd).call(this)}),s.on("ready",u=>{if(o.abort(),this.destroyed){i();return}try{c()}catch{Rn(this,gs,Xo).call(this)}});const c=()=>{const u=new Uint8Array;s.send("test",u,[u.buffer])};c();return}catch{Jd("The worker has been disabled.")}Rn(this,gs,Xo).call(this)},Xo=function(){xt(yt,xa)||(Ce("Setting up fake worker."),Ns(yt,xa,!0)),yt._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){xt(this,Hi).reject(new Error("Worker was destroyed"));return}const t=new cC;Ns(this,ci,t);const s=`fake${ny(yt,Od)._++}`,i=new Yo(s+"_worker",s,t);e.setup(i,t),Ns(this,gn,new Yo(s,s+"_worker",t)),Rn(this,gs,bd).call(this)}).catch(e=>{xt(this,Hi).reject(new Error(`Setting up fake worker failed: "${e.message}".`))})},Tr=new WeakSet,vd=function(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}},kn(yt,Tr),kn(yt,Od,0),kn(yt,xa,!1),kn(yt,ya,new WeakMap),ps&&(Ns(yt,xa,!0),Vi.workerSrc||="./pdf.worker.mjs"),yt._isSameOrigin=(e,t)=>{const s=URL.parse(e);if(!s?.origin||s.origin==="null")return!1;const i=new URL(t,s);return s.origin===i.origin},yt._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))},yt.fromPort=e=>{if(Qj("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!e?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return yt.create(e)};let Dr=yt;class tT{#e=new Map;#t=new Map;#n=new Map;#s=new Map;#r=null;constructor(e,t,s,i,o,c){this.messageHandler=e,this.loadingTask=t,this.commonObjs=new Cw,this.fontLoader=new iC({ownerDocument:i.ownerDocument,styleElement:i.styleElement}),this.loadingParams=i.loadingParams,this._params=i,this.canvasFactory=o.canvasFactory,this.filterFactory=o.filterFactory,this.cMapReaderFactory=o.cMapReaderFactory,this.standardFontDataFactory=o.standardFontDataFactory,this.wasmFactory=o.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=s,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=c,this.setupMessageHandler()}#i(e,t=null){const s=this.#e.get(e);if(s)return s;const i=this.messageHandler.sendWithPromise(e,t);return this.#e.set(e,i),i}get annotationStorage(){return Le(this,"annotationStorage",new Xm)}getRenderingIntent(e,t=Un.ENABLE,s=null,i=!1,o=!1){let c=Is.DISPLAY,u=lm;switch(e){case"any":c=Is.ANY;break;case"display":break;case"print":c=Is.PRINT;break;default:Ce(`getRenderingIntent - invalid intent: ${e}`)}const h=c&Is.PRINT&&s instanceof pw?s:this.annotationStorage;switch(t){case Un.DISABLE:c+=Is.ANNOTATIONS_DISABLE;break;case Un.ENABLE:break;case Un.ENABLE_FORMS:c+=Is.ANNOTATIONS_FORMS;break;case Un.ENABLE_STORAGE:c+=Is.ANNOTATIONS_STORAGE,u=h.serializable;break;default:Ce(`getRenderingIntent - invalid annotationMode: ${t}`)}i&&(c+=Is.IS_EDITING),o&&(c+=Is.OPLIST);const{ids:p,hash:f}=h.modifiedIds,g=[c,u.hash,f];return{renderingIntent:c,cacheKey:g.join("_"),annotationStorageSerializable:u,modifiedIds:p}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#r?.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const s of this.#t.values())e.push(s._destroy());this.#t.clear(),this.#n.clear(),this.#s.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(),nl.cleanup(),this._networkStream?.cancelAllRequests(new fi("Worker was terminated.")),this.messageHandler?.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(s,i)=>{$e(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=o=>{this._lastProgress={loaded:o.loaded,total:o.total}},i.onPull=()=>{this._fullReader.read().then(function({value:o,done:c}){if(c){i.close();return}$e(o instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{i.error(o)})},i.onCancel=o=>{this._fullReader.cancel(o),i.ready.catch(c=>{if(!this.destroyed)throw c})}}),e.on("ReaderHeadersReady",async s=>{await this._fullReader.headersReady;const{isStreamingSupported:i,isRangeSupported:o,contentLength:c}=this._fullReader;return(!i||!o)&&(this._lastProgress&&t.onProgress?.(this._lastProgress),this._fullReader.onProgress=u=>{t.onProgress?.({loaded:u.loaded,total:u.total})}),{isStreamingSupported:i,isRangeSupported:o,contentLength:c}}),e.on("GetRangeReader",(s,i)=>{$e(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const o=this._networkStream.getRangeReader(s.begin,s.end);if(!o){i.close();return}i.onPull=()=>{o.read().then(function({value:c,done:u}){if(u){i.close();return}$e(c instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(c),1,[c])}).catch(c=>{i.error(c)})},i.onCancel=c=>{o.cancel(c),i.ready.catch(u=>{if(!this.destroyed)throw u})}}),e.on("GetDoc",({pdfInfo:s})=>{this._numPages=s.numPages,this._htmlForXfa=s.htmlForXfa,delete s.htmlForXfa,t._capability.resolve(new JC(s,this))}),e.on("DocException",s=>{t._capability.reject(Es(s))}),e.on("PasswordRequest",s=>{this.#r=Promise.withResolvers();try{if(!t.onPassword)throw Es(s);const i=o=>{o instanceof Error?this.#r.reject(o):this.#r.resolve({password:o})};t.onPassword(i,s.code)}catch(i){this.#r.reject(i)}return this.#r.promise}),e.on("DataLoaded",s=>{t.onProgress?.({loaded:s.length,total:s.length}),this.downloadInfoCapability.resolve(s)}),e.on("StartRenderPage",s=>{if(this.destroyed)return;this.#t.get(s.pageIndex)._startRenderPage(s.transparency,s.cacheKey)}),e.on("commonobj",([s,i,o])=>{if(this.destroyed||this.commonObjs.has(s))return null;switch(i){case"Font":if("error"in o){const f=o.error;Ce(`Error during font loading: ${f}`),this.commonObjs.resolve(s,f);break}const c=new at(o),u=this._params.pdfBug&&globalThis.FontInspector?.enabled?(f,g)=>globalThis.FontInspector.fontAdded(f,g):null,h=new aC(c,u,o.extra,o.charProcOperatorList);this.fontLoader.bind(h).catch(()=>e.sendWithPromise("FontFallback",{id:s})).finally(()=>{!h.fontExtraProperties&&h.data&&h.clearData(),this.commonObjs.resolve(s,h)});break;case"CopyLocalImage":const{imageRef:p}=o;$e(p,"The imageRef must be defined.");for(const f of this.#t.values())for(const[,g]of f.objs)if(g?.ref===p)return g.dataLen?(this.commonObjs.resolve(s,structuredClone(g)),g.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(s,o);break;default:throw new Error(`Got unknown common object type ${i}`)}return null}),e.on("obj",([s,i,o,c])=>{if(this.destroyed)return;const u=this.#t.get(i);if(!u.objs.has(s)){if(u._intentStates.size===0){c?.bitmap?.close();return}switch(o){case"Image":case"Pattern":u.objs.resolve(s,c);break;default:throw new Error(`Got unknown object type ${o}`)}}}),e.on("DocProgress",s=>{this.destroyed||t.onProgress?.({loaded:s.loaded,total:s.total})}),e.on("FetchBinaryData",async s=>{if(this.destroyed)throw new Error("Worker was destroyed.");const i=this[s.type];if(!i)throw new Error(`${s.type} not initialized, see the \`useWorkerFetch\` parameter.`);return i.fetch(s)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&Ce("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:this._fullReader?.filename??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,s=this.#n.get(t);if(s)return s;const i=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(o=>{if(this.destroyed)throw new Error("Transport destroyed");o.refStr&&this.#s.set(o.refStr,e);const c=new eT(t,o,this,this._params.pdfBug);return this.#t.set(t,c),c});return this.#n.set(t,i),i}getPageIndex(e){return cm(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return this.#i("GetFieldObjects")}hasJSActions(){return this.#i("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(e,t){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:e,pageIndexesToSkip:t})}getDocJSActions(){return this.#i("GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return this.#i("GetOptionalContentConfig").then(t=>new MC(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=this.#e.get(e);if(t)return t;const s=this.messageHandler.sendWithPromise(e,null).then(i=>({info:i[0],metadata:i[1]?new RC(i[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#e.set(e,s),s}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of this.#t.values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(!0),nl.cleanup()}}cachedPageNumber(e){if(!cm(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return this.#s.get(t)??null}}class sT{#e=null;onContinue=null;onError=null;constructor(e){this.#e=e}get promise(){return this.#e.capability.promise}cancel(e=0){this.#e.cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=this.#e.operatorList;if(!e)return!1;const{annotationCanvasMap:t}=this.#e;return e.form||e.canvas&&t?.size>0}}class Ar{#e=null;static#t=new WeakSet;constructor({callback:e,params:t,objs:s,commonObjs:i,annotationCanvasMap:o,operatorList:c,pageIndex:u,canvasFactory:h,filterFactory:p,useRequestAnimationFrame:f=!1,pdfBug:g=!1,pageColors:x=null,enableHWA:b=!1,operationsFilter:w=null}){this.callback=e,this.params=t,this.objs=s,this.commonObjs=i,this.annotationCanvasMap=o,this.operatorListIdx=null,this.operatorList=c,this._pageIndex=u,this.canvasFactory=h,this.filterFactory=p,this._pdfBug=g,this.pageColors=x,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=f===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new sT(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvas,this._canvasContext=t.canvas?null:t.canvasContext,this._enableHWA=b,this._dependencyTracker=t.dependencyTracker,this._operationsFilter=w}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){if(this.cancelled)return;if(this._canvas){if(Ar.#t.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");Ar.#t.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:s,transform:i,background:o,dependencyTracker:c}=this.params,u=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new Sr(u,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors,c),this.gfx.beginDrawing({transform:i,viewport:s,transparency:e,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(e=null,t=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#e&&(window.cancelAnimationFrame(this.#e),this.#e=null),Ar.#t.delete(this._canvas),e||=new eu(`Rendering cancelled, page ${this._pageIndex+1}`,t),this.callback(e),this.task.onError?.(e)}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.gfx.dependencyTracker?.growOperationsCount(this.operatorList.fnArray.length),this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#e=window.requestAnimationFrame(()=>{this.#e=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),Ar.#t.delete(this._canvas),this.callback())))}}const Rw="5.4.296",Dw="f56dc8601";class zs{#e=null;#t=null;#n;#s=null;#r=!1;#i=!1;#a=null;#o;#c=null;#l=null;static#h=null;static get _keyboardManager(){return Le(this,"_keyboardManager",new vl([[["Escape","mac+Escape"],zs.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],zs.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],zs.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],zs.prototype._moveToPrevious],[["Home","mac+Home"],zs.prototype._moveToBeginning],[["End","mac+End"],zs.prototype._moveToEnd]]))}constructor({editor:e=null,uiManager:t=null}){e?(this.#i=!1,this.#a=e):this.#i=!0,this.#l=e?._uiManager||t,this.#o=this.#l._eventBus,this.#n=e?.color?.toUpperCase()||this.#l?.highlightColors.values().next().value||"#FFFF98",zs.#h||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){const e=this.#e=document.createElement("button");e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.ariaHasPopup="true",this.#a&&(e.ariaControls=`${this.#a.id}_colorpicker_dropdown`);const t=this.#l._signal;e.addEventListener("click",this.#m.bind(this),{signal:t}),e.addEventListener("keydown",this.#g.bind(this),{signal:t});const s=this.#t=document.createElement("span");return s.className="swatch",s.ariaHidden="true",s.style.backgroundColor=this.#n,e.append(s),e}renderMainDropdown(){const e=this.#s=this.#u();return e.ariaOrientation="horizontal",e.ariaLabelledBy="highlightColorPickerLabel",e}#u(){const e=document.createElement("div"),t=this.#l._signal;e.addEventListener("contextmenu",qs,{signal:t}),e.className="dropdown",e.role="listbox",e.ariaMultiSelectable="false",e.ariaOrientation="vertical",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),this.#a&&(e.id=`${this.#a.id}_colorpicker_dropdown`);for(const[s,i]of this.#l.highlightColors){const o=document.createElement("button");o.tabIndex="0",o.role="option",o.setAttribute("data-color",i),o.title=s,o.setAttribute("data-l10n-id",zs.#h[s]);const c=document.createElement("span");o.append(c),c.className="swatch",c.style.backgroundColor=i,o.ariaSelected=i===this.#n,o.addEventListener("click",this.#f.bind(this,i),{signal:t}),e.append(o)}return e.addEventListener("keydown",this.#g.bind(this),{signal:t}),e}#f(e,t){t.stopPropagation(),this.#o.dispatch("switchannotationeditorparams",{source:this,type:Ue.HIGHLIGHT_COLOR,value:e}),this.updateColor(e)}_colorSelectFromKeyboard(e){if(e.target===this.#e){this.#m(e);return}const t=e.target.getAttribute("data-color");t&&this.#f(t,e)}_moveToNext(e){if(!this.#p){this.#m(e);return}if(e.target===this.#e){this.#s.firstChild?.focus();return}e.target.nextSibling?.focus()}_moveToPrevious(e){if(e.target===this.#s?.firstChild||e.target===this.#e){this.#p&&this._hideDropdownFromKeyboard();return}this.#p||this.#m(e),e.target.previousSibling?.focus()}_moveToBeginning(e){if(!this.#p){this.#m(e);return}this.#s.firstChild?.focus()}_moveToEnd(e){if(!this.#p){this.#m(e);return}this.#s.lastChild?.focus()}#g(e){zs._keyboardManager.exec(this,e)}#m(e){if(this.#p){this.hideDropdown();return}if(this.#r=e.detail===0,this.#c||(this.#c=new AbortController,window.addEventListener("pointerdown",this.#d.bind(this),{signal:this.#l.combinedSignal(this.#c)})),this.#e.ariaExpanded="true",this.#s){this.#s.classList.remove("hidden");return}const t=this.#s=this.#u();this.#e.append(t)}#d(e){this.#s?.contains(e.target)||this.hideDropdown()}hideDropdown(){this.#s?.classList.add("hidden"),this.#e.ariaExpanded="false",this.#c?.abort(),this.#c=null}get#p(){return this.#s&&!this.#s.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#i){if(!this.#p){this.#a?.unselect();return}this.hideDropdown(),this.#e.focus({preventScroll:!0,focusVisible:this.#r})}}updateColor(e){if(this.#t&&(this.#t.style.backgroundColor=e),!this.#s)return;const t=this.#l.highlightColors.values();for(const s of this.#s.children)s.ariaSelected=t.next().value===e.toUpperCase()}destroy(){this.#e?.remove(),this.#e=null,this.#t=null,this.#s?.remove(),this.#s=null}}class il{#e=null;#t=null;#n=null;static#s=null;constructor(e){this.#t=e,this.#n=e._uiManager,il.#s||=Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"})}renderButton(){if(this.#e)return this.#e;const{editorType:e,colorType:t,colorValue:s}=this.#t,i=this.#e=document.createElement("input");return i.type="color",i.value=s||"#000000",i.className="basicColorPicker",i.tabIndex=0,i.setAttribute("data-l10n-id",il.#s[e]),i.addEventListener("input",()=>{this.#n.updateParams(t,i.value)},{signal:this.#n._signal}),i}update(e){this.#e&&(this.#e.value=e)}destroy(){this.#e?.remove(),this.#e=null}hideDropdown(){}}function yb(r){return Math.floor(Math.max(0,Math.min(1,r))*255).toString(16).padStart(2,"0")}function zo(r){return Math.max(0,Math.min(255,255*r))}class bb{static CMYK_G([e,t,s,i]){return["G",1-Math.min(1,.3*e+.59*s+.11*t+i)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=zo(e),[e,e,e]}static G_HTML([e]){const t=yb(e);return`#${t}${t}${t}`}static RGB_G([e,t,s]){return["G",.3*e+.59*t+.11*s]}static RGB_rgb(e){return e.map(zo)}static RGB_HTML(e){return`#${e.map(yb).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,s,i]){return["RGB",1-Math.min(1,e+i),1-Math.min(1,s+i),1-Math.min(1,t+i)]}static CMYK_rgb([e,t,s,i]){return[zo(1-Math.min(1,e+i)),zo(1-Math.min(1,s+i)),zo(1-Math.min(1,t+i))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,s]){const i=1-e,o=1-t,c=1-s,u=Math.min(i,o,c);return["CMYK",i,o,c,u]}}class nT{create(e,t,s=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const i=this._createSVG("svg:svg");return i.setAttribute("version","1.1"),s||(i.setAttribute("width",`${e}px`),i.setAttribute("height",`${t}px`)),i.setAttribute("preserveAspectRatio","none"),i.setAttribute("viewBox",`0 0 ${e} ${t}`),i}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){dt("Abstract method `_createSVG` called.")}}class al extends nT{_createSVG(e){return document.createElementNS(li,e)}}const iT=9,_a=new WeakSet,aT=new Date().getTimezoneOffset()*60*1e3;class vb{static create(e){switch(e.data.annotationType){case kt.LINK:return new tp(e);case kt.TEXT:return new oT(e);case kt.WIDGET:switch(e.data.fieldType){case"Tx":return new lT(e);case"Btn":return e.data.radioButton?new Mw(e):e.data.checkBox?new dT(e):new uT(e);case"Ch":return new hT(e);case"Sig":return new cT(e)}return new Na(e);case kt.POPUP:return new hm(e);case kt.FREETEXT:return new Lw(e);case kt.LINE:return new mT(e);case kt.SQUARE:return new pT(e);case kt.CIRCLE:return new gT(e);case kt.POLYLINE:return new Ow(e);case kt.CARET:return new yT(e);case kt.INK:return new sp(e);case kt.POLYGON:return new xT(e);case kt.HIGHLIGHT:return new Bw(e);case kt.UNDERLINE:return new bT(e);case kt.SQUIGGLY:return new vT(e);case kt.STRIKEOUT:return new wT(e);case kt.STAMP:return new Pw(e);case kt.FILEATTACHMENT:return new _T(e);default:return new Nt(e)}}}class Nt{#e=null;#t=!1;#n=null;constructor(e,{isRenderable:t=!1,ignoreBorder:s=!1,createQuadrilaterals:i=!1}={}){this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableComment=e.enableComment,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(s)),i&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:e,richText:t}){return!!(e?.str||t?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return Nt._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){const{data:e}=this,t=this.annotationStorage?.getEditor(e.id);return t?t.getData():e}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){const e=this.annotationStorage?.getEditor(this.data.id);if(e)return e.commentButtonPositionInPage;const{quadPoints:t,inkLists:s,rect:i}=this.data;let o=-1/0,c=-1/0;if(t?.length>=8){for(let u=0;u<t.length;u+=8)t[u+1]>c?(c=t[u+1],o=t[u+2]):t[u+1]===c&&(o=Math.max(o,t[u+2]));return[o,c]}if(s?.length>=1){for(const u of s)for(let h=0,p=u.length;h<p;h+=2)u[h+1]>c?(c=u[h+1],o=u[h]):u[h+1]===c&&(o=Math.max(o,u[h]));if(o!==1/0)return[o,c]}return i?[i[2],i[3]]:null}_normalizePoint(e){const{page:{view:t},viewport:{rawDims:{pageWidth:s,pageHeight:i,pageX:o,pageY:c}}}=this.parent;return e[1]=t[3]-e[1]+t[1],e[0]=100*(e[0]-o)/s,e[1]=100*(e[1]-c)/i,e}get commentText(){const{data:e}=this;return this.annotationStorage.getRawValue(`${el}${e.id}`)?.popup?.contents||e.contentsObj?.str||""}set commentText(e){const{data:t}=this,s={deleted:!e,contents:e||""};this.annotationStorage.updateEditor(t.id,{popup:s})||this.annotationStorage.setValue(`${el}${t.id}`,{id:t.id,annotationType:t.annotationType,pageIndex:this.parent.page._pageIndex,popup:s,popupRef:t.popupRef,modificationDate:new Date}),e||this.removePopup()}removePopup(){(this.#n?.popup||this.popup)?.remove(),this.#n=this.popup=null}updateEdited(e){if(!this.container)return;e.rect&&(this.#e||={rect:this.data.rect.slice(0)});const{rect:t,popup:s}=e;t&&this.#s(t);let i=this.#n?.popup||this.popup;!i&&s?.text&&(this._createPopup(s),i=this.#n.popup),i&&(i.updateEdited(e),s?.deleted&&(i.remove(),this.#n=null,this.popup=null))}resetEdited(){this.#e&&(this.#s(this.#e.rect),this.#n?.popup.resetEdited(),this.#e=null)}#s(e){const{container:{style:t},data:{rect:s,rotation:i},parent:{viewport:{rawDims:{pageWidth:o,pageHeight:c,pageX:u,pageY:h}}}}=this;s?.splice(0,4,...e),t.left=`${100*(e[0]-u)/o}%`,t.top=`${100*(c-e[3]+h)/c}%`,i===0?(t.width=`${100*(e[2]-e[0])/o}%`,t.height=`${100*(e[3]-e[1])/c}%`):this.setRotation(i)}_createContainer(e){const{data:t,parent:{page:s,viewport:i}}=this,o=document.createElement("section");o.setAttribute("data-annotation-id",t.id),!(this instanceof Na)&&!(this instanceof tp)&&(o.tabIndex=0);const{style:c}=o;if(c.zIndex=this.parent.zIndex,this.parent.zIndex+=2,t.alternativeText&&(o.title=t.alternativeText),t.noRotate&&o.classList.add("norotate"),!t.rect||this instanceof hm){const{rotation:_}=t;return!t.hasOwnCanvas&&_!==0&&this.setRotation(_,o),o}const{width:u,height:h}=this;if(!e&&t.borderStyle.width>0){c.borderWidth=`${t.borderStyle.width}px`;const _=t.borderStyle.horizontalCornerRadius,S=t.borderStyle.verticalCornerRadius;if(_>0||S>0){const L=`calc(${_}px * var(--total-scale-factor)) / calc(${S}px * var(--total-scale-factor))`;c.borderRadius=L}else if(this instanceof Mw){const L=`calc(${u}px * var(--total-scale-factor)) / calc(${h}px * var(--total-scale-factor))`;c.borderRadius=L}switch(t.borderStyle.style){case pr.SOLID:c.borderStyle="solid";break;case pr.DASHED:c.borderStyle="dashed";break;case pr.BEVELED:Ce("Unimplemented border style: beveled");break;case pr.INSET:Ce("Unimplemented border style: inset");break;case pr.UNDERLINE:c.borderBottomStyle="solid";break}const A=t.borderColor||null;A?(this.#t=!0,c.borderColor=fe.makeHexColor(A[0]|0,A[1]|0,A[2]|0)):c.borderWidth=0}const p=fe.normalizeRect([t.rect[0],s.view[3]-t.rect[1]+s.view[1],t.rect[2],s.view[3]-t.rect[3]+s.view[1]]),{pageWidth:f,pageHeight:g,pageX:x,pageY:b}=i.rawDims;c.left=`${100*(p[0]-x)/f}%`,c.top=`${100*(p[1]-b)/g}%`;const{rotation:w}=t;return t.hasOwnCanvas||w===0?(c.width=`${100*u/f}%`,c.height=`${100*h/g}%`):this.setRotation(w,o),o}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:s,pageHeight:i}=this.parent.viewport.rawDims;let{width:o,height:c}=this;e%180!==0&&([o,c]=[c,o]),t.style.width=`${100*o/s}%`,t.style.height=`${100*c/i}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,s,i)=>{const o=i.detail[t],c=o[0],u=o.slice(1);i.target.style[s]=bb[`${c}_HTML`](u),this.annotationStorage.setValue(this.data.id,{[s]:bb[`${c}_rgb`](u)})};return Le(this,"_commonActions",{display:t=>{const{display:s}=t.detail,i=s%2===1;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:i,noPrint:s===1||s===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:s}=t.detail;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:s,noView:s})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const s=t.detail.rotation;this.setRotation(s),this.annotationStorage.setValue(this.data.id,{rotation:s})}})}_dispatchEventFromSandbox(e,t){const s=this._commonActions;for(const i of Object.keys(t.detail))(e[i]||s[i])?.(t)}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const s=this._commonActions;for(const[i,o]of Object.entries(t)){const c=s[i];if(c){const u={detail:{[i]:o},target:e};c(u),delete t[i]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,s,i,o]=this.data.rect.map(_=>Math.fround(_));if(e.length===8){const[_,S,A,L]=e.subarray(2,6);if(i===_&&o===S&&t===A&&s===L)return}const{style:c}=this.container;let u;if(this.#t){const{borderColor:_,borderWidth:S}=c;c.borderWidth=0,u=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${_}" stroke-width="${S}">`],this.container.classList.add("hasBorder")}const h=i-t,p=o-s,{svgFactory:f}=this,g=f.createElement("svg");g.classList.add("quadrilateralsContainer"),g.setAttribute("width",0),g.setAttribute("height",0),g.role="none";const x=f.createElement("defs");g.append(x);const b=f.createElement("clipPath"),w=`clippath_${this.data.id}`;b.setAttribute("id",w),b.setAttribute("clipPathUnits","objectBoundingBox"),x.append(b);for(let _=2,S=e.length;_<S;_+=8){const A=e[_],L=e[_+1],O=e[_+2],D=e[_+3],I=f.createElement("rect"),C=(O-t)/h,P=(o-L)/p,k=(A-O)/h,N=(L-D)/p;I.setAttribute("x",C),I.setAttribute("y",P),I.setAttribute("width",k),I.setAttribute("height",N),b.append(I),u?.push(`<rect vector-effect="non-scaling-stroke" x="${C}" y="${P}" width="${k}" height="${N}"/>`)}this.#t&&(u.push("</g></svg>')"),c.backgroundImage=u.join("")),this.container.append(g),this.container.style.clipPath=`url(#${w})`}_createPopup(e=null){const{data:t}=this;let s,i;e?(s={str:e.text},i=e.date):(s=t.contentsObj,i=t.modificationDate);const o=this.#n=new hm({data:{color:t.color,titleObj:t.titleObj,modificationDate:i,contentsObj:s,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]});this.parent._commentManager||this.parent.div.append(o.render())}get hasPopupElement(){return!!(this.#n||this.popup||this.data.popupRef)}get extraPopupElement(){return this.#n}render(){dt("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const s=[];if(this._fieldObjects){const i=this._fieldObjects[e];if(i)for(const{page:o,id:c,exportValues:u}of i){if(o===-1||c===t)continue;const h=typeof u=="string"?u:null,p=document.querySelector(`[data-element-id="${c}"]`);if(p&&!_a.has(p)){Ce(`_getElementsByName - element not allowed: ${c}`);continue}s.push({id:c,exportValue:h,domElement:p})}return s}for(const i of document.getElementsByName(e)){const{exportValue:o}=i,c=i.getAttribute("data-element-id");c!==t&&_a.has(i)&&s.push({id:c,exportValue:o,domElement:i})}return s}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}}class rT extends Nt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.editor=e.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:e}=this;e.hasComment&&(this._createPopup(e.comment),this.extraPopupElement.popup.renderCommentButton())}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(e){this.editor.comment=e,e||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.container.remove(),this.container=null,this.removePopup()}}class tp extends Nt{constructor(e,t=null){super(e,{isRenderable:!0,ignoreBorder:!!t?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:t}=this,s=document.createElement("a");s.setAttribute("data-element-id",e.id);let i=!1;return e.url?(t.addLinkAttributes(s,e.url,e.newWindow),i=!0):e.action?(this._bindNamedAction(s,e.action,e.overlaidText),i=!0):e.attachment?(this.#t(s,e.attachment,e.overlaidText,e.attachmentDest),i=!0):e.setOCGState?(this.#n(s,e.setOCGState,e.overlaidText),i=!0):e.dest?(this._bindLink(s,e.dest,e.overlaidText),i=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(s,e),i=!0),e.resetForm?(this._bindResetFormAction(s,e.resetForm),i=!0):this.isTooltipOnly&&!i&&(this._bindLink(s,""),i=!0)),this.container.classList.add("linkAnnotation"),i&&this.container.append(s),this.container}#e(){this.container.setAttribute("data-internal-link","")}_bindLink(e,t,s=""){e.href=this.linkService.getDestinationHash(t),e.onclick=()=>(t&&this.linkService.goToDestination(t),!1),(t||t==="")&&this.#e(),s&&(e.title=s)}_bindNamedAction(e,t,s=""){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(t),!1),s&&(e.title=s),this.#e()}#t(e,t,s="",i=null){e.href=this.linkService.getAnchorUrl(""),t.description?e.title=t.description:s&&(e.title=s),e.onclick=()=>(this.downloadManager?.openOrDownloadData(t.content,t.filename,i),!1),this.#e()}#n(e,t,s=""){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(t),!1),s&&(e.title=s),this.#e()}_bindJSAction(e,t){e.href=this.linkService.getAnchorUrl("");const s=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const i of Object.keys(t.actions)){const o=s.get(i);o&&(e[o]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t.id,name:i}}),!1))}t.overlaidText&&(e.title=t.overlaidText),e.onclick||(e.onclick=()=>!1),this.#e()}_bindResetFormAction(e,t){const s=e.onclick;if(s||(e.href=this.linkService.getAnchorUrl("")),this.#e(),!this._fieldObjects){Ce('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),s||(e.onclick=()=>!1);return}e.onclick=()=>{s?.();const{fields:i,refs:o,include:c}=t,u=[];if(i.length!==0||o.length!==0){const f=new Set(o);for(const g of i){const x=this._fieldObjects[g]||[];for(const{id:b}of x)f.add(b)}for(const g of Object.values(this._fieldObjects))for(const x of g)f.has(x.id)===c&&u.push(x)}else for(const f of Object.values(this._fieldObjects))u.push(...f);const h=this.annotationStorage,p=[];for(const f of u){const{id:g}=f;switch(p.push(g),f.type){case"text":{const b=f.defaultValue||"";h.setValue(g,{value:b});break}case"checkbox":case"radiobutton":{const b=f.defaultValue===f.exportValues;h.setValue(g,{value:b});break}case"combobox":case"listbox":{const b=f.defaultValue||"";h.setValue(g,{value:b});break}default:continue}const x=document.querySelector(`[data-element-id="${g}"]`);if(x){if(!_a.has(x)){Ce(`_bindResetFormAction - element not allowed: ${g}`);continue}}else continue;x.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:p,name:"ResetForm"}}),!1}}}class oT extends Nt{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class Na extends Nt{render(){return this.container}showElementAndHideCanvas(e){this.data.hasOwnCanvas&&(e.previousSibling?.nodeName==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return Yt.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,s,i,o){s.includes("mouse")?e.addEventListener(s,c=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:o(c),shift:c.shiftKey,modifier:this._getKeyModifier(c)}})}):e.addEventListener(s,c=>{if(s==="blur"){if(!t.focused||!c.relatedTarget)return;t.focused=!1}else if(s==="focus"){if(t.focused)return;t.focused=!0}o&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:o(c)}})})}_setEventListeners(e,t,s,i){for(const[o,c]of s)(c==="Action"||this.data.actions?.[c])&&((c==="Focus"||c==="Blur")&&(t||={focused:!1}),this._setEventListener(e,t,o,c,i),c==="Focus"&&!this.data.actions?.Blur?this._setEventListener(e,t,"blur","Blur",null):c==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":fe.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:s}=this.data.defaultAppearanceData,i=this.data.defaultAppearanceData.fontSize||iT,o=e.style;let c;const u=2,h=p=>Math.round(10*p)/10;if(this.data.multiLine){const p=Math.abs(this.data.rect[3]-this.data.rect[1]-u),f=Math.round(p/(Ff*i))||1,g=p/f;c=Math.min(i,h(g/Ff))}else{const p=Math.abs(this.data.rect[3]-this.data.rect[1]-u);c=Math.min(i,h(p/Ff))}o.fontSize=`calc(${c}px * var(--total-scale-factor))`,o.color=fe.makeHexColor(s[0],s[1],s[2]),this.data.textAlignment!==null&&(o.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class lT extends Na{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,s,i){const o=this.annotationStorage;for(const c of this._getElementsByName(e.name,e.id))c.domElement&&(c.domElement[t]=s),o.setValue(c.id,{[i]:s})}render(){const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let s=null;if(this.renderForms){const i=e.getValue(t,{value:this.data.fieldValue});let o=i.value||"";const c=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;c&&o.length>c&&(o=o.slice(0,c));let u=i.formattedValue||this.data.textContent?.join(`
`)||null;u&&this.data.comb&&(u=u.replaceAll(/\s+/g,""));const h={userValue:o,formattedValue:u,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(s=document.createElement("textarea"),s.textContent=u??o,this.data.doNotScroll&&(s.style.overflowY="hidden")):(s=document.createElement("input"),s.type=this.data.password?"password":"text",s.setAttribute("value",u??o),this.data.doNotScroll&&(s.style.overflowX="hidden")),this.data.hasOwnCanvas&&(s.hidden=!0),_a.add(s),s.setAttribute("data-element-id",t),s.disabled=this.data.readOnly,s.name=this.data.fieldName,s.tabIndex=0;const{datetimeFormat:p,datetimeType:f,timeStep:g}=this.data,x=!!f&&this.enableScripting;p&&(s.title=p),this._setRequired(s,this.data.required),c&&(s.maxLength=c),s.addEventListener("input",w=>{e.setValue(t,{value:w.target.value}),this.setPropertyOnSiblings(s,"value",w.target.value,"value"),h.formattedValue=null}),s.addEventListener("resetform",w=>{const _=this.data.defaultFieldValue??"";s.value=h.userValue=_,h.formattedValue=null});let b=w=>{const{formattedValue:_}=h;_!=null&&(w.target.value=_),w.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){s.addEventListener("focus",_=>{if(h.focused)return;const{target:S}=_;if(x&&(S.type=f,g&&(S.step=g)),h.userValue){const A=h.userValue;if(x)if(f==="time"){const L=new Date(A),O=[L.getHours(),L.getMinutes(),L.getSeconds()];S.value=O.map(D=>D.toString().padStart(2,"0")).join(":")}else S.value=new Date(A-aT).toISOString().split(f==="date"?"T":".",1)[0];else S.value=A}h.lastCommittedValue=S.value,h.commitKey=1,this.data.actions?.Focus||(h.focused=!0)}),s.addEventListener("updatefromsandbox",_=>{this.showElementAndHideCanvas(_.target);const S={value(A){h.userValue=A.detail.value??"",x||e.setValue(t,{value:h.userValue.toString()}),A.target.value=h.userValue},formattedValue(A){const{formattedValue:L}=A.detail;h.formattedValue=L,L!=null&&A.target!==document.activeElement&&(A.target.value=L);const O={formattedValue:L};x&&(O.value=L),e.setValue(t,O)},selRange(A){A.target.setSelectionRange(...A.detail.selRange)},charLimit:A=>{const{charLimit:L}=A.detail,{target:O}=A;if(L===0){O.removeAttribute("maxLength");return}O.setAttribute("maxLength",L);let D=h.userValue;!D||D.length<=L||(D=D.slice(0,L),O.value=h.userValue=D,e.setValue(t,{value:D}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:D,willCommit:!0,commitKey:1,selStart:O.selectionStart,selEnd:O.selectionEnd}}))}};this._dispatchEventFromSandbox(S,_)}),s.addEventListener("keydown",_=>{h.commitKey=1;let S=-1;if(_.key==="Escape"?S=0:_.key==="Enter"&&!this.data.multiLine?S=2:_.key==="Tab"&&(h.commitKey=3),S===-1)return;const{value:A}=_.target;h.lastCommittedValue!==A&&(h.lastCommittedValue=A,h.userValue=A,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:A,willCommit:!0,commitKey:S,selStart:_.target.selectionStart,selEnd:_.target.selectionEnd}}))});const w=b;b=null,s.addEventListener("blur",_=>{if(!h.focused||!_.relatedTarget)return;this.data.actions?.Blur||(h.focused=!1);const{target:S}=_;let{value:A}=S;if(x){if(A&&f==="time"){const L=A.split(":").map(O=>parseInt(O,10));A=new Date(2e3,0,1,L[0],L[1],L[2]||0).valueOf(),S.step=""}else A.includes("T")||(A=`${A}T00:00`),A=new Date(A).valueOf();S.type="text"}h.userValue=A,h.lastCommittedValue!==A&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:A,willCommit:!0,commitKey:h.commitKey,selStart:_.target.selectionStart,selEnd:_.target.selectionEnd}}),w(_)}),this.data.actions?.Keystroke&&s.addEventListener("beforeinput",_=>{h.lastCommittedValue=null;const{data:S,target:A}=_,{value:L,selectionStart:O,selectionEnd:D}=A;let I=O,C=D;switch(_.inputType){case"deleteWordBackward":{const P=L.substring(0,O).match(/\w*[^\w]*$/);P&&(I-=P[0].length);break}case"deleteWordForward":{const P=L.substring(O).match(/^[^\w]*\w*/);P&&(C+=P[0].length);break}case"deleteContentBackward":O===D&&(I-=1);break;case"deleteContentForward":O===D&&(C+=1);break}_.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:L,change:S||"",willCommit:!1,selStart:I,selEnd:C}})}),this._setEventListeners(s,h,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],_=>_.target.value)}if(b&&s.addEventListener("blur",b),this.data.comb){const _=(this.data.rect[2]-this.data.rect[0])/c;s.classList.add("comb"),s.style.letterSpacing=`calc(${_}px * var(--total-scale-factor) - 1ch)`}}else s=document.createElement("div"),s.textContent=this.data.fieldValue,s.style.verticalAlign="middle",s.style.display="table-cell",this.data.hasOwnCanvas&&(s.hidden=!0);return this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class cT extends Na{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class dT extends Na{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,s=t.id;let i=e.getValue(s,{value:t.exportValue===t.fieldValue}).value;typeof i=="string"&&(i=i!=="Off",e.setValue(s,{value:i})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const o=document.createElement("input");return _a.add(o),o.setAttribute("data-element-id",s),o.disabled=t.readOnly,this._setRequired(o,this.data.required),o.type="checkbox",o.name=t.fieldName,i&&o.setAttribute("checked",!0),o.setAttribute("exportValue",t.exportValue),o.tabIndex=0,o.addEventListener("change",c=>{const{name:u,checked:h}=c.target;for(const p of this._getElementsByName(u,s)){const f=h&&p.exportValue===t.exportValue;p.domElement&&(p.domElement.checked=f),e.setValue(p.id,{value:f})}e.setValue(s,{value:h})}),o.addEventListener("resetform",c=>{const u=t.defaultFieldValue||"Off";c.target.checked=u===t.exportValue}),this.enableScripting&&this.hasJSActions&&(o.addEventListener("updatefromsandbox",c=>{const u={value(h){h.target.checked=h.detail.value!=="Off",e.setValue(s,{value:h.target.checked})}};this._dispatchEventFromSandbox(u,c)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],c=>c.target.checked)),this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class Mw extends Na{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,s=t.id;let i=e.getValue(s,{value:t.fieldValue===t.buttonValue}).value;if(typeof i=="string"&&(i=i!==t.buttonValue,e.setValue(s,{value:i})),i)for(const c of this._getElementsByName(t.fieldName,s))e.setValue(c.id,{value:!1});const o=document.createElement("input");if(_a.add(o),o.setAttribute("data-element-id",s),o.disabled=t.readOnly,this._setRequired(o,this.data.required),o.type="radio",o.name=t.fieldName,i&&o.setAttribute("checked",!0),o.tabIndex=0,o.addEventListener("change",c=>{const{name:u,checked:h}=c.target;for(const p of this._getElementsByName(u,s))e.setValue(p.id,{value:!1});e.setValue(s,{value:h})}),o.addEventListener("resetform",c=>{const u=t.defaultFieldValue;c.target.checked=u!=null&&u===t.buttonValue}),this.enableScripting&&this.hasJSActions){const c=t.buttonValue;o.addEventListener("updatefromsandbox",u=>{const h={value:p=>{const f=c===p.detail.value;for(const g of this._getElementsByName(p.target.name)){const x=f&&g.id===s;g.domElement&&(g.domElement.checked=x),e.setValue(g.id,{value:x})}}};this._dispatchEventFromSandbox(h,u)}),this._setEventListeners(o,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],u=>u.target.checked)}return this._setBackgroundColor(o),this._setDefaultPropertiesFromJS(o),this.container.append(o),this.container}}class uT extends tp{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",s=>{this._dispatchEventFromSandbox({},s)})),e}}class hT extends Na{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,s=e.getValue(t,{value:this.data.fieldValue}),i=document.createElement("select");_a.add(i),i.setAttribute("data-element-id",t),i.disabled=this.data.readOnly,this._setRequired(i,this.data.required),i.name=this.data.fieldName,i.tabIndex=0;let o=this.data.combo&&this.data.options.length>0;this.data.combo||(i.size=this.data.options.length,this.data.multiSelect&&(i.multiple=!0)),i.addEventListener("resetform",f=>{const g=this.data.defaultFieldValue;for(const x of i.options)x.selected=x.value===g});for(const f of this.data.options){const g=document.createElement("option");g.textContent=f.displayValue,g.value=f.exportValue,s.value.includes(f.exportValue)&&(g.setAttribute("selected",!0),o=!1),i.append(g)}let c=null;if(o){const f=document.createElement("option");f.value=" ",f.setAttribute("hidden",!0),f.setAttribute("selected",!0),i.prepend(f),c=()=>{f.remove(),i.removeEventListener("input",c),c=null},i.addEventListener("input",c)}const u=f=>{const g=f?"value":"textContent",{options:x,multiple:b}=i;return b?Array.prototype.filter.call(x,w=>w.selected).map(w=>w[g]):x.selectedIndex===-1?null:x[x.selectedIndex][g]};let h=u(!1);const p=f=>{const g=f.target.options;return Array.prototype.map.call(g,x=>({displayValue:x.textContent,exportValue:x.value}))};return this.enableScripting&&this.hasJSActions?(i.addEventListener("updatefromsandbox",f=>{const g={value(x){c?.();const b=x.detail.value,w=new Set(Array.isArray(b)?b:[b]);for(const _ of i.options)_.selected=w.has(_.value);e.setValue(t,{value:u(!0)}),h=u(!1)},multipleSelection(x){i.multiple=!0},remove(x){const b=i.options,w=x.detail.remove;b[w].selected=!1,i.remove(w),b.length>0&&Array.prototype.findIndex.call(b,S=>S.selected)===-1&&(b[0].selected=!0),e.setValue(t,{value:u(!0),items:p(x)}),h=u(!1)},clear(x){for(;i.length!==0;)i.remove(0);e.setValue(t,{value:null,items:[]}),h=u(!1)},insert(x){const{index:b,displayValue:w,exportValue:_}=x.detail.insert,S=i.children[b],A=document.createElement("option");A.textContent=w,A.value=_,S?S.before(A):i.append(A),e.setValue(t,{value:u(!0),items:p(x)}),h=u(!1)},items(x){const{items:b}=x.detail;for(;i.length!==0;)i.remove(0);for(const w of b){const{displayValue:_,exportValue:S}=w,A=document.createElement("option");A.textContent=_,A.value=S,i.append(A)}i.options.length>0&&(i.options[0].selected=!0),e.setValue(t,{value:u(!0),items:p(x)}),h=u(!1)},indices(x){const b=new Set(x.detail.indices);for(const w of x.target.options)w.selected=b.has(w.index);e.setValue(t,{value:u(!0)}),h=u(!1)},editable(x){x.target.disabled=!x.detail.editable}};this._dispatchEventFromSandbox(g,f)}),i.addEventListener("input",f=>{const g=u(!0),x=u(!1);e.setValue(t,{value:g}),f.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:h,change:x,changeEx:g,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(i,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],f=>f.target.value)):i.addEventListener("input",function(f){e.setValue(t,{value:u(!0)})}),this.data.combo&&this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class hm extends Nt{constructor(e){const{data:t,elements:s,parent:i}=e,o=!!i._commentManager;if(super(e,{isRenderable:!o&&Nt._hasPopupData(t)}),this.elements=s,o&&Nt._hasPopupData(t)){const c=this.popup=this.#e();for(const u of s)u.popup=c}else this.popup=null}#e(){return new fT({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})}render(){const{container:e}=this;e.classList.add("popupAnnotation"),e.role="comment";const t=this.popup=this.#e(),s=[];for(const i of this.elements)i.popup=t,i.container.ariaHasPopup="dialog",s.push(i.data.id),i.addHighlightArea();return this.container.setAttribute("aria-controls",s.map(i=>`${qm}${i}`).join(",")),this.container}}class fT{#e=null;#t=this.#V.bind(this);#n=this.#U.bind(this);#s=this.#M.bind(this);#r=this.#w.bind(this);#i=null;#a=null;#o=null;#c=null;#l=null;#h=null;#u=null;#f=!1;#g=null;#m=null;#d=null;#p=null;#x=null;#b=null;#y=null;#N=null;#A=null;#v=null;#j=!1;#_=null;#S=null;constructor({container:e,color:t,elements:s,titleObj:i,modificationDate:o,contentsObj:c,richText:u,parent:h,rect:p,parentRect:f,open:g,commentManager:x=null}){this.#a=e,this.#A=i,this.#o=c,this.#N=u,this.#h=h,this.#i=t,this.#y=p,this.#u=f,this.#l=s,this.#e=x,this.#_=s[0],this.#c=Dd.toDateObject(o),this.trigger=s.flatMap(b=>b.getElementsToTriggerPopup()),x?this.renderCommentButton():(this.#k(),this.#a.hidden=!0,g&&this.#w())}#k(){if(this.#m)return;this.#m=new AbortController;const{signal:e}=this.#m;for(const t of this.trigger)t.addEventListener("click",this.#r,{signal:e}),t.addEventListener("pointerenter",this.#s,{signal:e}),t.addEventListener("pointerleave",this.#n,{signal:e}),t.classList.add("popupTriggerArea");for(const t of this.#l)t.container?.addEventListener("keydown",this.#t,{signal:e})}#C(){const e=this.#l.find(t=>t.hasCommentButton);e&&(this.#x=e._normalizePoint(e.commentButtonPosition))}renderCommentButton(){if(this.#p||(this.#x||this.#C(),!this.#x))return;const{signal:e}=this.#m=new AbortController,t=!!this.#_.extraPopupElement,s=()=>{this.#e.toggleCommentPopup(this,!0,void 0,!t)},i=()=>{this.#e.toggleCommentPopup(this,!1,!0,!t)},o=()=>{this.#e.toggleCommentPopup(this,!1,!1)};if(t){this.#p=this.#_.container;for(const c of this.trigger)c.ariaHasPopup="dialog",c.ariaControls="commentPopup",c.addEventListener("keydown",this.#t,{signal:e}),c.addEventListener("click",s,{signal:e}),c.addEventListener("pointerenter",i,{signal:e}),c.addEventListener("pointerleave",o,{signal:e}),c.classList.add("popupTriggerArea")}else{const c=this.#p=document.createElement("button");c.className="annotationCommentButton";const u=this.#_.container;c.style.zIndex=u.style.zIndex+1,c.tabIndex=0,c.ariaHasPopup="dialog",c.ariaControls="commentPopup",c.setAttribute("data-l10n-id","pdfjs-show-comment-button"),this.#P(),this.#T(),c.addEventListener("keydown",this.#t,{signal:e}),c.addEventListener("click",s,{signal:e}),c.addEventListener("pointerenter",i,{signal:e}),c.addEventListener("pointerleave",o,{signal:e}),u.after(c)}}#T(){if(this.#_.extraPopupElement&&!this.#_.editor)return;this.renderCommentButton();const[e,t]=this.#x,{style:s}=this.#p;s.left=`calc(${e}%)`,s.top=`calc(${t}% - var(--comment-button-dim))`}#P(){this.#_.extraPopupElement||(this.renderCommentButton(),this.#p.style.backgroundColor=this.commentButtonColor||"")}get commentButtonColor(){const{color:e,opacity:t}=this.#_.commentData;return e?this.#h._commentManager.makeCommentColor(e,t):null}focusCommentButton(){setTimeout(()=>{this.#p?.focus()},0)}getData(){const{richText:e,color:t,opacity:s,creationDate:i,modificationDate:o}=this.#_.commentData;return{contentsObj:{str:this.comment},richText:e,color:t,opacity:s,creationDate:i,modificationDate:o}}get elementBeforePopup(){return this.#p}get comment(){return this.#S||=this.#_.commentText,this.#S}set comment(e){e!==this.comment&&(this.#_.commentText=this.#S=e)}get parentBoundingClientRect(){return this.#_.layer.getBoundingClientRect()}setCommentButtonStates({selected:e,hasPopup:t}){this.#p&&(this.#p.classList.toggle("selected",e),this.#p.ariaExpanded=t)}setSelectedCommentButton(e){this.#p.classList.toggle("selected",e)}get commentPopupPosition(){if(this.#b)return this.#b;const{x:e,y:t,height:s}=this.#p.getBoundingClientRect(),{x:i,y:o,width:c,height:u}=this.#_.layer.getBoundingClientRect();return[(e-i)/c,(t+s-o)/u]}set commentPopupPosition(e){this.#b=e}hasDefaultPopupPosition(){return this.#b===null}get commentButtonPosition(){return this.#x}get commentButtonWidth(){return this.#p.getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(e){const[t,s]=this.#b||this.commentButtonPosition.map(p=>p/100),i=this.parentBoundingClientRect,{x:o,y:c,width:u,height:h}=i;this.#e.showDialog(null,this,o+t*u,c+s*h,{...e,parentDimensions:i})}render(){if(this.#g)return;const e=this.#g=document.createElement("div");if(e.className="popup",this.#i){const s=e.style.outlineColor=fe.makeHexColor(...this.#i);e.style.backgroundColor=`color-mix(in srgb, ${s} 30%, white)`}const t=document.createElement("span");if(t.className="header",this.#A?.str){const s=document.createElement("span");s.className="title",t.append(s),{dir:s.dir,str:s.textContent}=this.#A}if(e.append(t),this.#c){const s=document.createElement("time");s.className="popupDate",s.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),s.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#c.valueOf()})),s.dateTime=this.#c.toISOString(),t.append(s)}Gm({html:this.#D||this.#o.str,dir:this.#o?.dir,className:"popupContent"},e),this.#a.append(e)}get#D(){const e=this.#N,t=this.#o;return e?.str&&(!t?.str||t.str===e.str)&&this.#N.html||null}get#L(){return this.#D?.attributes?.style?.fontSize||0}get#F(){return this.#D?.attributes?.style?.color||null}#O(e){const t=[],s={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},i={style:{color:this.#F,fontSize:this.#L?`calc(${this.#L}px * var(--total-scale-factor))`:""}};for(const o of e.split(`
`))t.push({name:"span",value:o,attributes:i});return s}#V(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&this.#f)&&this.#w()}updateEdited({rect:e,popup:t,deleted:s}){if(this.#e){s?(this.remove(),this.#S=null):t&&(t.deleted?this.remove():(this.#P(),this.#S=t.text)),e&&(this.#x=null,this.#C(),this.#T());return}if(s||t?.deleted){this.remove();return}this.#k(),this.#v||={contentsObj:this.#o,richText:this.#N},e&&(this.#d=null),t&&t.text&&(this.#N=this.#O(t.text),this.#c=Dd.toDateObject(t.date),this.#o=null),this.#g?.remove(),this.#g=null}resetEdited(){this.#v&&({contentsObj:this.#o,richText:this.#N}=this.#v,this.#v=null,this.#g?.remove(),this.#g=null,this.#d=null)}remove(){if(this.#m?.abort(),this.#m=null,this.#g?.remove(),this.#g=null,this.#j=!1,this.#f=!1,this.#p?.remove(),this.#p=null,this.trigger)for(const e of this.trigger)e.classList.remove("popupTriggerArea")}#E(){if(this.#d!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:s,pageX:i,pageY:o}}}=this.#h;let c=!!this.#u,u=c?this.#u:this.#y;for(const w of this.#l)if(!u||fe.intersect(w.data.rect,u)!==null){u=w.data.rect,c=!0;break}const h=fe.normalizeRect([u[0],e[3]-u[1]+e[1],u[2],e[3]-u[3]+e[1]]),f=c?u[2]-u[0]+5:0,g=h[0]+f,x=h[1];this.#d=[100*(g-i)/t,100*(x-o)/s];const{style:b}=this.#a;b.left=`${this.#d[0]}%`,b.top=`${this.#d[1]}%`}#w(){if(this.#e){this.#e.toggleCommentPopup(this,!1);return}this.#f=!this.#f,this.#f?(this.#M(),this.#a.addEventListener("click",this.#r),this.#a.addEventListener("keydown",this.#t)):(this.#U(),this.#a.removeEventListener("click",this.#r),this.#a.removeEventListener("keydown",this.#t))}#M(){this.#g||this.render(),this.isVisible?this.#f&&this.#a.classList.add("focused"):(this.#E(),this.#a.hidden=!1,this.#a.style.zIndex=parseInt(this.#a.style.zIndex)+1e3)}#U(){this.#a.classList.remove("focused"),!(this.#f||!this.isVisible)&&(this.#a.hidden=!0,this.#a.style.zIndex=parseInt(this.#a.style.zIndex)-1e3)}forceHide(){this.#j=this.isVisible,this.#j&&(this.#a.hidden=!0)}maybeShow(){this.#e||(this.#k(),this.#j&&(this.#g||this.#M(),this.#j=!1,this.#a.hidden=!1))}get isVisible(){return this.#e?!1:this.#a.hidden===!1}}class Lw extends Nt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=je.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const s=document.createElement("span");s.textContent=t,e.append(s)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class mT extends Nt{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const{data:e,width:t,height:s}=this,i=this.svgFactory.create(t,s,!0),o=this.#e=this.svgFactory.createElement("svg:line");return o.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),o.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),o.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),o.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),o.setAttribute("stroke-width",e.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),i.append(o),this.container.append(i),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class pT extends Nt{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const{data:e,width:t,height:s}=this,i=this.svgFactory.create(t,s,!0),o=e.borderStyle.width,c=this.#e=this.svgFactory.createElement("svg:rect");return c.setAttribute("x",o/2),c.setAttribute("y",o/2),c.setAttribute("width",t-o),c.setAttribute("height",s-o),c.setAttribute("stroke-width",o||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),i.append(c),this.container.append(i),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class gT extends Nt{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const{data:e,width:t,height:s}=this,i=this.svgFactory.create(t,s,!0),o=e.borderStyle.width,c=this.#e=this.svgFactory.createElement("svg:ellipse");return c.setAttribute("cx",t/2),c.setAttribute("cy",s/2),c.setAttribute("rx",t/2-o/2),c.setAttribute("ry",s/2-o/2),c.setAttribute("stroke-width",o||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),i.append(c),this.container.append(i),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class Ow extends Nt{#e=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:t,borderStyle:s,popupRef:i},width:o,height:c}=this;if(!t)return this.container;const u=this.svgFactory.create(o,c,!0);let h=[];for(let f=0,g=t.length;f<g;f+=2){const x=t[f]-e[0],b=e[3]-t[f+1];h.push(`${x},${b}`)}h=h.join(" ");const p=this.#e=this.svgFactory.createElement(this.svgElementName);return p.setAttribute("points",h),p.setAttribute("stroke-width",s.width||1),p.setAttribute("stroke","transparent"),p.setAttribute("fill","transparent"),u.append(p),this.container.append(u),!i&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class xT extends Ow{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class yT extends Nt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class sp extends Nt{#e=null;#t=[];constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?je.HIGHLIGHT:je.INK}#n(e,t){switch(e){case 90:return{transform:`rotate(90) translate(${-t[0]},${t[1]}) scale(1,-1)`,width:t[3]-t[1],height:t[2]-t[0]};case 180:return{transform:`rotate(180) translate(${-t[2]},${t[1]}) scale(1,-1)`,width:t[2]-t[0],height:t[3]-t[1]};case 270:return{transform:`rotate(270) translate(${-t[2]},${t[3]}) scale(1,-1)`,width:t[3]-t[1],height:t[2]-t[0]};default:return{transform:`translate(${-t[0]},${t[3]}) scale(1,-1)`,width:t[2]-t[0],height:t[3]-t[1]}}}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,rotation:t,inkLists:s,borderStyle:i,popupRef:o}}=this,{transform:c,width:u,height:h}=this.#n(t,e),p=this.svgFactory.create(u,h,!0),f=this.#e=this.svgFactory.createElement("svg:g");p.append(f),f.setAttribute("stroke-width",i.width||1),f.setAttribute("stroke-linecap","round"),f.setAttribute("stroke-linejoin","round"),f.setAttribute("stroke-miterlimit",10),f.setAttribute("stroke","transparent"),f.setAttribute("fill","transparent"),f.setAttribute("transform",c);for(let g=0,x=s.length;g<x;g++){const b=this.svgFactory.createElement(this.svgElementName);this.#t.push(b),b.setAttribute("points",s[g].join(",")),f.append(b)}return!o&&this.hasPopupData&&this._createPopup(),this.container.append(p),this._editOnDoubleClick(),this.container}updateEdited(e){super.updateEdited(e);const{thickness:t,points:s,rect:i}=e,o=this.#e;if(t>=0&&o.setAttribute("stroke-width",t||1),s)for(let c=0,u=this.#t.length;c<u;c++)this.#t[c].setAttribute("points",s[c].join(","));if(i){const{transform:c,width:u,height:h}=this.#n(this.data.rotation,i);o.parentElement.setAttribute("viewBox",`0 0 ${u} ${h}`),o.setAttribute("transform",c)}}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class Bw extends Nt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=je.HIGHLIGHT}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),e){const s=document.createElement("mark");s.classList.add("overlaidText"),s.textContent=e,this.container.append(s)}return this.container}}class bT extends Nt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),e){const s=document.createElement("u");s.classList.add("overlaidText"),s.textContent=e,this.container.append(s)}return this.container}}class vT extends Nt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),e){const s=document.createElement("u");s.classList.add("overlaidText"),s.textContent=e,this.container.append(s)}return this.container}}class wT extends Nt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),e){const s=document.createElement("s");s.classList.add("overlaidText"),s.textContent=e,this.container.append(s)}return this.container}}class Pw extends Nt{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=je.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class _T extends Nt{#e=null;constructor(e){super(e,{isRenderable:!0});const{file:t}=this.data;this.filename=t.filename,this.content=t.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...t})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:t}=this;let s;t.hasAppearance||t.fillAlpha===0?s=document.createElement("div"):(s=document.createElement("img"),s.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(t.name)?"paperclip":"pushpin"}.svg`,t.fillAlpha&&t.fillAlpha<1&&(s.style=`filter: opacity(${Math.round(t.fillAlpha*100)}%);`)),s.addEventListener("dblclick",this.#t.bind(this)),this.#e=s;const{isMac:i}=Yt.platform;return e.addEventListener("keydown",o=>{o.key==="Enter"&&(i?o.metaKey:o.ctrlKey)&&this.#t()}),!t.popupRef&&this.hasPopupData?this._createPopup():s.classList.add("popupTriggerArea"),e.append(s),e}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}#t(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}let np=class Fw{#e=null;#t=null;#n=null;#s=new Map;#r=null;#i=null;constructor({div:e,accessibilityManager:t,annotationCanvasMap:s,annotationEditorUIManager:i,page:o,viewport:c,structTreeLayer:u,commentManager:h,linkService:p,annotationStorage:f}){this.div=e,this.#e=t,this.#t=s,this.#r=u||null,this.#i=p||null,this.#n=f||new Xm,this.page=o,this.viewport=c,this.zIndex=0,this._annotationEditorUIManager=i,this._commentManager=h||null}hasEditableAnnotations(){return this.#s.size>0}async#a(e,t,s){const i=e.firstChild||e,o=i.id=`${qm}${t}`,c=await this.#r?.getAriaAttributes(o);if(c)for(const[u,h]of c)i.setAttribute(u,h);s?s.at(-1).container.after(e):(this.div.append(e),this.#e?.moveElementInDOM(this.div,e,i,!1))}async render(e){const{annotations:t}=e,s=this.div;Gi(s,this.viewport);const i=new Map,o={data:null,layer:s,linkService:this.#i,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new al,annotationStorage:this.#n,enableComment:e.enableComment===!0,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const c of t){if(c.noHTML)continue;const u=c.annotationType===kt.POPUP;if(u){const f=i.get(c.id);if(!f)continue;o.elements=f}else if(c.rect[2]===c.rect[0]||c.rect[3]===c.rect[1])continue;o.data=c;const h=vb.create(o);if(!h.isRenderable)continue;if(!u&&c.popupRef){const f=i.get(c.popupRef);f?f.push(h):i.set(c.popupRef,[h])}const p=h.render();c.hidden&&(p.style.visibility="hidden"),await this.#a(p,c.id,o.elements),h.extraPopupElement?.popup?.renderCommentButton(),h._isEditable&&(this.#s.set(h.data.id,h),this._annotationEditorUIManager?.renderAnnotationElement(h))}this.#o()}async addLinkAnnotations(e){const t={data:null,layer:this.div,linkService:this.#i,svgFactory:new al,parent:this};for(const s of e){s.borderStyle||=Fw._defaultBorderStyle,t.data=s;const i=vb.create(t);if(!i.isRenderable)continue;const o=i.render();await this.#a(o,s.id,null)}}update({viewport:e}){const t=this.div;this.viewport=e,Gi(t,{rotation:e.rotation}),this.#o(),t.hidden=!1}#o(){if(!this.#t)return;const e=this.div;for(const[t,s]of this.#t){const i=e.querySelector(`[data-annotation-id="${t}"]`);if(!i)continue;s.className="annotationContent";const{firstChild:o}=i;o?o.nodeName==="CANVAS"?o.replaceWith(s):o.classList.contains("annotationContent")?o.after(s):o.before(s):i.append(s);const c=this.#s.get(t);c&&(c._hasNoCanvas?(this._annotationEditorUIManager?.setMissingCanvas(t,i.id,s),c._hasNoCanvas=!1):c.canvas=s)}this.#t.clear()}getEditableAnnotations(){return Array.from(this.#s.values())}getEditableAnnotation(e){return this.#s.get(e)}addFakeAnnotation(e){const{div:t}=this,{id:s,rotation:i}=e,o=new rT({data:{id:s,rect:e.getPDFRect(),rotation:i},editor:e,layer:t,parent:this,enableComment:!!this._commentManager,linkService:this.#i,annotationStorage:this.#n}),c=o.render();return t.append(c),this.#e?.moveElementInDOM(t,c,c,!1),o.createOrUpdatePopup(),o}static get _defaultBorderStyle(){return Le(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:pr.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}};const id=/\r\n?|\n/g;class Gt extends be{#e="";#t=`${this.id}-editor`;#n=null;#s;_colorPicker=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const e=Gt.prototype,t=o=>o.isEmpty(),s=mi.TRANSLATE_SMALL,i=mi.TRANSLATE_BIG;return Le(this,"_keyboardManager",new vl([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-s,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-i,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[s,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[i,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-s],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-i],checker:t}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,s],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,i],checker:t}]]))}static _type="freetext";static _editorType=je.FREETEXT;constructor(e){super({...e,name:"freeTextEditor"}),this.color=e.color||Gt._defaultColor||be._defaultLineColor,this.#s=e.fontSize||Gt._defaultFontSize,this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static initialize(e,t){be.initialize(e,t);const s=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(s.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,t){switch(e){case Ue.FREETEXT_SIZE:Gt._defaultFontSize=t;break;case Ue.FREETEXT_COLOR:Gt._defaultColor=t;break}}updateParams(e,t){switch(e){case Ue.FREETEXT_SIZE:this.#r(t);break;case Ue.FREETEXT_COLOR:this.#i(t);break}}static get defaultPropertiesToUpdate(){return[[Ue.FREETEXT_SIZE,Gt._defaultFontSize],[Ue.FREETEXT_COLOR,Gt._defaultColor||be._defaultLineColor]]}get propertiesToUpdate(){return[[Ue.FREETEXT_SIZE,this.#s],[Ue.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||=new il(this),[["colorPicker",this._colorPicker]]}get colorType(){return Ue.FREETEXT_COLOR}#r(e){const t=i=>{this.editorDiv.style.fontSize=`calc(${i}px * var(--total-scale-factor))`,this.translate(0,-(i-this.#s)*this.parentScale),this.#s=i,this.#o()},s=this.#s;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ue.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}onUpdatedColor(){this.editorDiv.style.color=this.color,this._colorPicker?.update(this.color),super.onUpdatedColor()}#i(e){const t=i=>{this.color=i,this.onUpdatedColor()},s=this.color;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ue.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(e,t){this._uiManager.translateSelectedEditors(e,t,!0)}getInitialTranslation(){const e=this.parentScale;return[-Gt._internalPadding*e,-(Gt._internalPadding+this.#s)*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#n=new AbortController;const e=this._uiManager.combinedSignal(this.#n);return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e}),!0}disableEditMode(){return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#t),this._isDraggable=!0,this.#n?.abort(),this.#n=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(e){this.width||(this.enableEditMode(),e&&this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#a(){const e=[];this.editorDiv.normalize();let t=null;for(const s of this.editorDiv.childNodes)t?.nodeType===Node.TEXT_NODE&&s.nodeName==="BR"||(e.push(Gt.#c(s)),t=s);return e.join(`
`)}#o(){const[e,t]=this.parentDimensions;let s;if(this.isAttachedToDOM)s=this.div.getBoundingClientRect();else{const{currentLayer:i,div:o}=this,c=o.style.display,u=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",i.div.append(this.div),s=o.getBoundingClientRect(),o.remove(),o.style.display=c,o.classList.toggle("hidden",u)}this.rotation%180===this.parentRotation%180?(this.width=s.width/e,this.height=s.height/t):(this.width=s.height/e,this.height=s.width/t),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=this.#e,t=this.#e=this.#a().trimEnd();if(e===t)return;const s=i=>{if(this.#e=i,!i){this.remove();return}this.#l(),this._uiManager.rebuild(this),this.#o()};this.addCommands({cmd:()=>{s(t)},undo:()=>{s(e)},mustExec:!1}),this.#o()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){Gt._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let e,t;(this._isCopy||this.annotationElementId)&&(e=this.x,t=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#t),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:s}=this.editorDiv;if(s.fontSize=`calc(${this.#s}px * var(--total-scale-factor))`,s.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[i,o]=this.parentDimensions;if(this.annotationElementId){const{position:c}=this._initialData;let[u,h]=this.getInitialTranslation();[u,h]=this.pageTranslationToScreen(u,h);const[p,f]=this.pageDimensions,[g,x]=this.pageTranslation;let b,w;switch(this.rotation){case 0:b=e+(c[0]-g)/p,w=t+this.height-(c[1]-x)/f;break;case 90:b=e+(c[0]-g)/p,w=t-(c[1]-x)/f,[u,h]=[h,-u];break;case 180:b=e-this.width+(c[0]-g)/p,w=t-(c[1]-x)/f,[u,h]=[-u,-h];break;case 270:b=e+(c[0]-g-this.height*f)/p,w=t+(c[1]-x-this.width*p)/f,[u,h]=[-h,u];break}this.setAt(b*i,w*o,u,h)}else this._moveAfterPaste(e,t);this.#l(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#c(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(id,"")}editorDivPaste(e){const t=e.clipboardData||window.clipboardData,{types:s}=t;if(s.length===1&&s[0]==="text/plain")return;e.preventDefault();const i=Gt.#u(t.getData("text")||"").replaceAll(id,`
`);if(!i)return;const o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();const c=o.getRangeAt(0);if(!i.includes(`
`)){c.insertNode(document.createTextNode(i)),this.editorDiv.normalize(),o.collapseToStart();return}const{startContainer:u,startOffset:h}=c,p=[],f=[];if(u.nodeType===Node.TEXT_NODE){const b=u.parentElement;if(f.push(u.nodeValue.slice(h).replaceAll(id,"")),b!==this.editorDiv){let w=p;for(const _ of this.editorDiv.childNodes){if(_===b){w=f;continue}w.push(Gt.#c(_))}}p.push(u.nodeValue.slice(0,h).replaceAll(id,""))}else if(u===this.editorDiv){let b=p,w=0;for(const _ of this.editorDiv.childNodes)w++===h&&(b=f),b.push(Gt.#c(_))}this.#e=`${p.join(`
`)}${i}${f.join(`
`)}`,this.#l();const g=new Range;let x=Math.sumPrecise(p.map(b=>b.length));for(const{firstChild:b}of this.editorDiv.childNodes)if(b.nodeType===Node.TEXT_NODE){const w=b.nodeValue.length;if(x<=w){g.setStart(b,x),g.setEnd(b,x);break}x-=w}o.removeAllRanges(),o.addRange(g)}#l(){if(this.editorDiv.replaceChildren(),!!this.#e)for(const e of this.#e.split(`
`)){const t=document.createElement("div");t.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(t)}}#h(){return this.#e.replaceAll(""," ")}static#u(e){return e.replaceAll(" ","")}get contentDiv(){return this.editorDiv}getPDFRect(){const e=Gt._internalPadding*this.parentScale;return this.getRect(e,e)}static async deserialize(e,t,s){let i=null;if(e instanceof Lw){const{data:{defaultAppearanceData:{fontSize:c,fontColor:u},rect:h,rotation:p,id:f,popupRef:g,richText:x,contentsObj:b,creationDate:w,modificationDate:_},textContent:S,textPosition:A,parent:{page:{pageNumber:L}}}=e;if(!S||S.length===0)return null;i=e={annotationType:je.FREETEXT,color:Array.from(u),fontSize:c,value:S.join(`
`),position:A,pageIndex:L-1,rect:h.slice(0),rotation:p,annotationElementId:f,id:f,deleted:!1,popupRef:g,comment:b?.str||null,richText:x,creationDate:w,modificationDate:_}}const o=await super.deserialize(e,t,s);return o.#s=e.fontSize,o.color=fe.makeHexColor(...e.color),o.#e=Gt.#u(e.value),o._initialData=i,e.comment&&o.setCommentData(e),o}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const t=be._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),s=Object.assign(super.serialize(e),{color:t,fontSize:this.#s,value:this.#h()});return this.addComment(s),e?(s.isCopy=!0,s):this.annotationElementId&&!this.#f(s)?null:(s.id=this.annotationElementId,s)}#f(e){const{value:t,fontSize:s,color:i,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||e.value!==t||e.fontSize!==s||e.color.some((c,u)=>c!==i[u])||e.pageIndex!==o}renderAnnotationElement(e){const t=super.renderAnnotationElement(e);if(!t)return null;const{style:s}=t;s.fontSize=`calc(${this.#s}px * var(--total-scale-factor))`,s.color=this.color,t.replaceChildren();for(const i of this.#e.split(`
`)){const o=document.createElement("div");o.append(i?document.createTextNode(i):document.createElement("br")),t.append(o)}return e.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:this.#e}}),t}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}}class he{static PRECISION=1e-4;toSVGPath(){dt("Abstract method `toSVGPath` must be implemented.")}get box(){dt("Abstract getter `box` must be implemented.")}serialize(e,t){dt("Abstract method `serialize` must be implemented.")}static _rescale(e,t,s,i,o,c){c||=new Float32Array(e.length);for(let u=0,h=e.length;u<h;u+=2)c[u]=t+e[u]*i,c[u+1]=s+e[u+1]*o;return c}static _rescaleAndSwap(e,t,s,i,o,c){c||=new Float32Array(e.length);for(let u=0,h=e.length;u<h;u+=2)c[u]=t+e[u+1]*i,c[u+1]=s+e[u]*o;return c}static _translate(e,t,s,i){i||=new Float32Array(e.length);for(let o=0,c=e.length;o<c;o+=2)i[o]=t+e[o],i[o+1]=s+e[o+1];return i}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,t,s,i,o){switch(o){case 90:return[1-t/s,e/i];case 180:return[1-e/s,1-t/i];case 270:return[t/s,1-e/i];default:return[e/s,t/i]}}static _normalizePagePoint(e,t,s){switch(s){case 90:return[1-t,e];case 180:return[1-e,1-t];case 270:return[t,1-e];default:return[e,t]}}static createBezierPoints(e,t,s,i,o,c){return[(e+5*s)/6,(t+5*i)/6,(5*s+o)/6,(5*i+c)/6,(s+o)/2,(i+c)/2]}}class pa{#e;#t=[];#n;#s;#r=[];#i=new Float32Array(18);#a;#o;#c;#l;#h;#u;#f=[];static#g=8;static#m=2;static#d=pa.#g+pa.#m;constructor({x:e,y:t},s,i,o,c,u=0){this.#e=s,this.#u=o*i,this.#s=c,this.#i.set([NaN,NaN,NaN,NaN,e,t],6),this.#n=u,this.#l=pa.#g*i,this.#c=pa.#d*i,this.#h=i,this.#f.push(e,t)}isEmpty(){return isNaN(this.#i[8])}#p(){const e=this.#i.subarray(4,6),t=this.#i.subarray(16,18),[s,i,o,c]=this.#e;return[(this.#a+(e[0]-t[0])/2-s)/o,(this.#o+(e[1]-t[1])/2-i)/c,(this.#a+(t[0]-e[0])/2-s)/o,(this.#o+(t[1]-e[1])/2-i)/c]}add({x:e,y:t}){this.#a=e,this.#o=t;const[s,i,o,c]=this.#e;let[u,h,p,f]=this.#i.subarray(8,12);const g=e-p,x=t-f,b=Math.hypot(g,x);if(b<this.#c)return!1;const w=b-this.#l,_=w/b,S=_*g,A=_*x;let L=u,O=h;u=p,h=f,p+=S,f+=A,this.#f?.push(e,t);const D=-A/w,I=S/w,C=D*this.#u,P=I*this.#u;return this.#i.set(this.#i.subarray(2,8),0),this.#i.set([p+C,f+P],4),this.#i.set(this.#i.subarray(14,18),12),this.#i.set([p-C,f-P],16),isNaN(this.#i[6])?(this.#r.length===0&&(this.#i.set([u+C,h+P],2),this.#r.push(NaN,NaN,NaN,NaN,(u+C-s)/o,(h+P-i)/c),this.#i.set([u-C,h-P],14),this.#t.push(NaN,NaN,NaN,NaN,(u-C-s)/o,(h-P-i)/c)),this.#i.set([L,O,u,h,p,f],6),!this.isEmpty()):(this.#i.set([L,O,u,h,p,f],6),Math.abs(Math.atan2(O-h,L-u)-Math.atan2(A,S))<Math.PI/2?([u,h,p,f]=this.#i.subarray(2,6),this.#r.push(NaN,NaN,NaN,NaN,((u+p)/2-s)/o,((h+f)/2-i)/c),[u,h,L,O]=this.#i.subarray(14,18),this.#t.push(NaN,NaN,NaN,NaN,((L+u)/2-s)/o,((O+h)/2-i)/c),!0):([L,O,u,h,p,f]=this.#i.subarray(0,6),this.#r.push(((L+5*u)/6-s)/o,((O+5*h)/6-i)/c,((5*u+p)/6-s)/o,((5*h+f)/6-i)/c,((u+p)/2-s)/o,((h+f)/2-i)/c),[p,f,u,h,L,O]=this.#i.subarray(12,18),this.#t.push(((L+5*u)/6-s)/o,((O+5*h)/6-i)/c,((5*u+p)/6-s)/o,((5*h+f)/6-i)/c,((u+p)/2-s)/o,((h+f)/2-i)/c),!0))}toSVGPath(){if(this.isEmpty())return"";const e=this.#r,t=this.#t;if(isNaN(this.#i[6])&&!this.isEmpty())return this.#x();const s=[];s.push(`M${e[4]} ${e[5]}`);for(let i=6;i<e.length;i+=6)isNaN(e[i])?s.push(`L${e[i+4]} ${e[i+5]}`):s.push(`C${e[i]} ${e[i+1]} ${e[i+2]} ${e[i+3]} ${e[i+4]} ${e[i+5]}`);this.#y(s);for(let i=t.length-6;i>=6;i-=6)isNaN(t[i])?s.push(`L${t[i+4]} ${t[i+5]}`):s.push(`C${t[i]} ${t[i+1]} ${t[i+2]} ${t[i+3]} ${t[i+4]} ${t[i+5]}`);return this.#b(s),s.join(" ")}#x(){const[e,t,s,i]=this.#e,[o,c,u,h]=this.#p();return`M${(this.#i[2]-e)/s} ${(this.#i[3]-t)/i} L${(this.#i[4]-e)/s} ${(this.#i[5]-t)/i} L${o} ${c} L${u} ${h} L${(this.#i[16]-e)/s} ${(this.#i[17]-t)/i} L${(this.#i[14]-e)/s} ${(this.#i[15]-t)/i} Z`}#b(e){const t=this.#t;e.push(`L${t[4]} ${t[5]} Z`)}#y(e){const[t,s,i,o]=this.#e,c=this.#i.subarray(4,6),u=this.#i.subarray(16,18),[h,p,f,g]=this.#p();e.push(`L${(c[0]-t)/i} ${(c[1]-s)/o} L${h} ${p} L${f} ${g} L${(u[0]-t)/i} ${(u[1]-s)/o}`)}newFreeDrawOutline(e,t,s,i,o,c){return new Uw(e,t,s,i,o,c)}getOutlines(){const e=this.#r,t=this.#t,s=this.#i,[i,o,c,u]=this.#e,h=new Float32Array((this.#f?.length??0)+2);for(let g=0,x=h.length-2;g<x;g+=2)h[g]=(this.#f[g]-i)/c,h[g+1]=(this.#f[g+1]-o)/u;if(h[h.length-2]=(this.#a-i)/c,h[h.length-1]=(this.#o-o)/u,isNaN(s[6])&&!this.isEmpty())return this.#N(h);const p=new Float32Array(this.#r.length+24+this.#t.length);let f=e.length;for(let g=0;g<f;g+=2){if(isNaN(e[g])){p[g]=p[g+1]=NaN;continue}p[g]=e[g],p[g+1]=e[g+1]}f=this.#v(p,f);for(let g=t.length-6;g>=6;g-=6)for(let x=0;x<6;x+=2){if(isNaN(t[g+x])){p[f]=p[f+1]=NaN,f+=2;continue}p[f]=t[g+x],p[f+1]=t[g+x+1],f+=2}return this.#A(p,f),this.newFreeDrawOutline(p,h,this.#e,this.#h,this.#n,this.#s)}#N(e){const t=this.#i,[s,i,o,c]=this.#e,[u,h,p,f]=this.#p(),g=new Float32Array(36);return g.set([NaN,NaN,NaN,NaN,(t[2]-s)/o,(t[3]-i)/c,NaN,NaN,NaN,NaN,(t[4]-s)/o,(t[5]-i)/c,NaN,NaN,NaN,NaN,u,h,NaN,NaN,NaN,NaN,p,f,NaN,NaN,NaN,NaN,(t[16]-s)/o,(t[17]-i)/c,NaN,NaN,NaN,NaN,(t[14]-s)/o,(t[15]-i)/c],0),this.newFreeDrawOutline(g,e,this.#e,this.#h,this.#n,this.#s)}#A(e,t){const s=this.#t;return e.set([NaN,NaN,NaN,NaN,s[4],s[5]],t),t+=6}#v(e,t){const s=this.#i.subarray(4,6),i=this.#i.subarray(16,18),[o,c,u,h]=this.#e,[p,f,g,x]=this.#p();return e.set([NaN,NaN,NaN,NaN,(s[0]-o)/u,(s[1]-c)/h,NaN,NaN,NaN,NaN,p,f,NaN,NaN,NaN,NaN,g,x,NaN,NaN,NaN,NaN,(i[0]-o)/u,(i[1]-c)/h],t),t+=24}}class Uw extends he{#e;#t=new Float32Array(4);#n;#s;#r;#i;#a;constructor(e,t,s,i,o,c){super(),this.#a=e,this.#r=t,this.#e=s,this.#i=i,this.#n=o,this.#s=c,this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],this.#o(c);const[u,h,p,f]=this.#t;for(let g=0,x=e.length;g<x;g+=2)e[g]=(e[g]-u)/p,e[g+1]=(e[g+1]-h)/f;for(let g=0,x=t.length;g<x;g+=2)t[g]=(t[g]-u)/p,t[g+1]=(t[g+1]-h)/f}toSVGPath(){const e=[`M${this.#a[4]} ${this.#a[5]}`];for(let t=6,s=this.#a.length;t<s;t+=6){if(isNaN(this.#a[t])){e.push(`L${this.#a[t+4]} ${this.#a[t+5]}`);continue}e.push(`C${this.#a[t]} ${this.#a[t+1]} ${this.#a[t+2]} ${this.#a[t+3]} ${this.#a[t+4]} ${this.#a[t+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,t,s,i],o){const c=s-e,u=i-t;let h,p;switch(o){case 0:h=he._rescale(this.#a,e,i,c,-u),p=he._rescale(this.#r,e,i,c,-u);break;case 90:h=he._rescaleAndSwap(this.#a,e,t,c,u),p=he._rescaleAndSwap(this.#r,e,t,c,u);break;case 180:h=he._rescale(this.#a,s,t,-c,u),p=he._rescale(this.#r,s,t,-c,u);break;case 270:h=he._rescaleAndSwap(this.#a,s,i,-c,-u),p=he._rescaleAndSwap(this.#r,s,i,-c,-u);break}return{outline:Array.from(h),points:[Array.from(p)]}}#o(e){const t=this.#a;let s=t[4],i=t[5];const o=[s,i,s,i];let c=s,u=i,h=s,p=i;const f=e?Math.max:Math.min,g=new Float32Array(4);for(let b=6,w=t.length;b<w;b+=6){const _=t[b+4],S=t[b+5];isNaN(t[b])?(fe.pointBoundingBox(_,S,o),u>S?(c=_,u=S):u===S&&(c=f(c,_)),p<S?(h=_,p=S):p===S&&(h=f(h,_))):(g[0]=g[1]=1/0,g[2]=g[3]=-1/0,fe.bezierBoundingBox(s,i,...t.slice(b,b+6),g),fe.rectBoundingBox(g[0],g[1],g[2],g[3],o),u>g[1]?(c=g[0],u=g[1]):u===g[1]&&(c=f(c,g[0])),p<g[3]?(h=g[2],p=g[3]):p===g[3]&&(h=f(h,g[2]))),s=_,i=S}const x=this.#t;x[0]=o[0]-this.#n,x[1]=o[1]-this.#n,x[2]=o[2]-o[0]+2*this.#n,x[3]=o[3]-o[1]+2*this.#n,this.firstPoint=[c,u],this.lastPoint=[h,p]}get box(){return this.#t}newOutliner(e,t,s,i,o,c=0){return new pa(e,t,s,i,o,c)}getNewOutline(e,t){const[s,i,o,c]=this.#t,[u,h,p,f]=this.#e,g=o*p,x=c*f,b=s*p+u,w=i*f+h,_=this.newOutliner({x:this.#r[0]*g+b,y:this.#r[1]*x+w},this.#e,this.#i,e,this.#s,t??this.#n);for(let S=2;S<this.#r.length;S+=2)_.add({x:this.#r[S]*g+b,y:this.#r[S+1]*x+w});return _.getOutlines()}}class fm{#e;#t;#n;#s=[];#r=[];constructor(e,t=0,s=0,i=!0){const o=[1/0,1/0,-1/0,-1/0],c=10**-4;for(const{x:_,y:S,width:A,height:L}of e){const O=Math.floor((_-t)/c)*c,D=Math.ceil((_+A+t)/c)*c,I=Math.floor((S-t)/c)*c,C=Math.ceil((S+L+t)/c)*c,P=[O,I,C,!0],k=[D,I,C,!1];this.#s.push(P,k),fe.rectBoundingBox(O,I,D,C,o)}const u=o[2]-o[0]+2*s,h=o[3]-o[1]+2*s,p=o[0]-s,f=o[1]-s;let g=i?-1/0:1/0,x=1/0;const b=this.#s.at(i?-1:-2),w=[b[0],b[2]];for(const _ of this.#s){const[S,A,L,O]=_;!O&&i?A<x?(x=A,g=S):A===x&&(g=Math.max(g,S)):O&&!i&&(A<x?(x=A,g=S):A===x&&(g=Math.min(g,S))),_[0]=(S-p)/u,_[1]=(A-f)/h,_[2]=(L-f)/h}this.#e=new Float32Array([p,f,u,h]),this.#t=[g,x],this.#n=w}getOutlines(){this.#s.sort((t,s)=>t[0]-s[0]||t[1]-s[1]||t[2]-s[2]);const e=[];for(const t of this.#s)t[3]?(e.push(...this.#l(t)),this.#o(t)):(this.#c(t),e.push(...this.#l(t)));return this.#i(e)}#i(e){const t=[],s=new Set;for(const c of e){const[u,h,p]=c;t.push([u,h,c],[u,p,c])}t.sort((c,u)=>c[1]-u[1]||c[0]-u[0]);for(let c=0,u=t.length;c<u;c+=2){const h=t[c][2],p=t[c+1][2];h.push(p),p.push(h),s.add(h),s.add(p)}const i=[];let o;for(;s.size>0;){const c=s.values().next().value;let[u,h,p,f,g]=c;s.delete(c);let x=u,b=h;for(o=[u,p],i.push(o);;){let w;if(s.has(f))w=f;else if(s.has(g))w=g;else break;s.delete(w),[u,h,p,f,g]=w,x!==u&&(o.push(x,b,u,b===h?h:p),x=u),b=b===h?p:h}o.push(x,b)}return new AT(i,this.#e,this.#t,this.#n)}#a(e){const t=this.#r;let s=0,i=t.length-1;for(;s<=i;){const o=s+i>>1,c=t[o][0];if(c===e)return o;c<e?s=o+1:i=o-1}return i+1}#o([,e,t]){const s=this.#a(e);this.#r.splice(s,0,[e,t])}#c([,e,t]){const s=this.#a(e);for(let i=s;i<this.#r.length;i++){const[o,c]=this.#r[i];if(o!==e)break;if(o===e&&c===t){this.#r.splice(i,1);return}}for(let i=s-1;i>=0;i--){const[o,c]=this.#r[i];if(o!==e)break;if(o===e&&c===t){this.#r.splice(i,1);return}}}#l(e){const[t,s,i]=e,o=[[t,s,i]],c=this.#a(i);for(let u=0;u<c;u++){const[h,p]=this.#r[u];for(let f=0,g=o.length;f<g;f++){const[,x,b]=o[f];if(!(p<=x||b<=h)){if(x>=h){if(b>p)o[f][1]=p;else{if(g===1)return[];o.splice(f,1),f--,g--}continue}o[f][2]=h,b>p&&o.push([t,p,b])}}}return o}}class AT extends he{#e;#t;constructor(e,t,s,i){super(),this.#t=e,this.#e=t,this.firstPoint=s,this.lastPoint=i}toSVGPath(){const e=[];for(const t of this.#t){let[s,i]=t;e.push(`M${s} ${i}`);for(let o=2;o<t.length;o+=2){const c=t[o],u=t[o+1];c===s?(e.push(`V${u}`),i=u):u===i&&(e.push(`H${c}`),s=c)}e.push("Z")}return e.join(" ")}serialize([e,t,s,i],o){const c=[],u=s-e,h=i-t;for(const p of this.#t){const f=new Array(p.length);for(let g=0;g<p.length;g+=2)f[g]=e+p[g]*u,f[g+1]=i-p[g+1]*h;c.push(f)}return c}get box(){return this.#e}get classNamesForOutlining(){return["highlightOutline"]}}class mm extends pa{newFreeDrawOutline(e,t,s,i,o,c){return new ST(e,t,s,i,o,c)}}class ST extends Uw{newOutliner(e,t,s,i,o,c=0){return new mm(e,t,s,i,o,c)}}class Rt extends be{#e=null;#t=0;#n;#s=null;#r=null;#i=null;#a=null;#o=0;#c=null;#l=null;#h=null;#u=!1;#f=null;#g=null;#m=null;#d="";#p;#x="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=je.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const e=Rt.prototype;return Le(this,"_keyboardManager",new vl([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}constructor(e){super({...e,name:"highlightEditor"}),this.color=e.color||Rt._defaultColor,this.#p=e.thickness||Rt._defaultThickness,this.opacity=e.opacity||Rt._defaultOpacity,this.#n=e.boxes||null,this.#x=e.methodOfCreation||"",this.#d=e.text||"",this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",e.highlightId>-1?(this.#u=!0,this.#y(e),this.#_()):this.#n&&(this.#e=e.anchorNode,this.#t=e.anchorOffset,this.#a=e.focusNode,this.#o=e.focusOffset,this.#b(),this.#_(),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}get telemetryInitialData(){return{action:"added",type:this.#u?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:this.#p,methodOfCreation:this.#x}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}#b(){const e=new fm(this.#n,.001);this.#l=e.getOutlines(),[this.x,this.y,this.width,this.height]=this.#l.box;const t=new fm(this.#n,.0025,.001,this._uiManager.direction==="ltr");this.#i=t.getOutlines();const{firstPoint:s}=this.#l;this.#f=[(s[0]-this.x)/this.width,(s[1]-this.y)/this.height];const{lastPoint:i}=this.#i;this.#g=[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height]}#y({highlightOutlines:e,highlightId:t,clipPathId:s}){this.#l=e;const i=1.5;if(this.#i=e.getNewOutline(this.#p/2+i,.0025),t>=0)this.#h=t,this.#s=s,this.parent.drawLayer.finalizeDraw(t,{bbox:e.box,path:{d:e.toSVGPath()}}),this.#m=this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:this.#i.box,path:{d:this.#i.toSVGPath()}},!0);else if(this.parent){const g=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(this.#h,{bbox:Rt.#S(this.#l.box,(g-this.rotation+360)%360),path:{d:e.toSVGPath()}}),this.parent.drawLayer.updateProperties(this.#m,{bbox:Rt.#S(this.#i.box,g),path:{d:this.#i.toSVGPath()}})}const[o,c,u,h]=e.box;switch(this.rotation){case 0:this.x=o,this.y=c,this.width=u,this.height=h;break;case 90:{const[g,x]=this.parentDimensions;this.x=c,this.y=1-o,this.width=u*x/g,this.height=h*g/x;break}case 180:this.x=1-o,this.y=1-c,this.width=u,this.height=h;break;case 270:{const[g,x]=this.parentDimensions;this.x=1-c,this.y=o,this.width=u*x/g,this.height=h*g/x;break}}const{firstPoint:p}=e;this.#f=[(p[0]-o)/u,(p[1]-c)/h];const{lastPoint:f}=this.#i;this.#g=[(f[0]-o)/u,(f[1]-c)/h]}static initialize(e,t){be.initialize(e,t),Rt._defaultColor||=t.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(e,t){switch(e){case Ue.HIGHLIGHT_COLOR:Rt._defaultColor=t;break;case Ue.HIGHLIGHT_THICKNESS:Rt._defaultThickness=t;break}}translateInPage(e,t){}get toolbarPosition(){return this.#g}get commentButtonPosition(){return this.#f}updateParams(e,t){switch(e){case Ue.HIGHLIGHT_COLOR:this.#N(t);break;case Ue.HIGHLIGHT_THICKNESS:this.#A(t);break}}static get defaultPropertiesToUpdate(){return[[Ue.HIGHLIGHT_COLOR,Rt._defaultColor],[Ue.HIGHLIGHT_THICKNESS,Rt._defaultThickness]]}get propertiesToUpdate(){return[[Ue.HIGHLIGHT_COLOR,this.color||Rt._defaultColor],[Ue.HIGHLIGHT_THICKNESS,this.#p||Rt._defaultThickness],[Ue.HIGHLIGHT_FREE,this.#u]]}onUpdatedColor(){this.parent?.drawLayer.updateProperties(this.#h,{root:{fill:this.color,"fill-opacity":this.opacity}}),this.#r?.updateColor(this.color),super.onUpdatedColor()}#N(e){const t=(o,c)=>{this.color=o,this.opacity=c,this.onUpdatedColor()},s=this.color,i=this.opacity;this.addCommands({cmd:t.bind(this,e,Rt._defaultOpacity),undo:t.bind(this,s,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ue.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(e)},!0)}#A(e){const t=this.#p,s=i=>{this.#p=i,this.#v(i)};this.addCommands({cmd:s.bind(this,e),undo:s.bind(this,t),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Ue.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",this.#r=new zs({editor:this})]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#T())}getBaseTranslation(){return[0,0]}getRect(e,t){return super.getRect(e,t,this.#T())}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),e&&this.div.focus()}remove(){this.#j(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#_(),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let t=!1;this.parent&&!e?this.#j():e&&(this.#_(e),t=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(e),this.show(this._isVisible),t&&this.select()}#v(e){this.#u&&(this.#y({highlightOutlines:this.#l.getNewOutline(e/2)}),this.fixAndSetPosition(),this.setDims(this.width,this.height))}#j(){this.#h===null||!this.parent||(this.parent.drawLayer.remove(this.#h),this.#h=null,this.parent.drawLayer.remove(this.#m),this.#m=null)}#_(e=this.parent){this.#h===null&&({id:this.#h,clipPathId:this.#s}=e.drawLayer.draw({bbox:this.#l.box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:this.#u},path:{d:this.#l.toSVGPath()}},!1,!0),this.#m=e.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:this.#u},bbox:this.#i.box,path:{d:this.#i.toSVGPath()}},this.#u),this.#c&&(this.#c.style.clipPath=this.#s))}static#S([e,t,s,i],o){switch(o){case 90:return[1-t-i,e,i,s];case 180:return[1-e-s,1-t-i,s,i];case 270:return[t,1-e-s,i,s]}return[e,t,s,i]}rotate(e){const{drawLayer:t}=this.parent;let s;this.#u?(e=(e-this.rotation+360)%360,s=Rt.#S(this.#l.box,e)):s=Rt.#S([this.x,this.y,this.width,this.height],e),t.updateProperties(this.#h,{bbox:s,root:{"data-main-rotation":e}}),t.updateProperties(this.#m,{bbox:Rt.#S(this.#i.box,e),root:{"data-main-rotation":e}})}render(){if(this.div)return this.div;const e=super.render();this.#d&&(e.setAttribute("aria-label",this.#d),e.setAttribute("role","mark")),this.#u?e.classList.add("free"):this.div.addEventListener("keydown",this.#k.bind(this),{signal:this._uiManager._signal});const t=this.#c=document.createElement("div");return e.append(t),t.setAttribute("aria-hidden","true"),t.className="internal",t.style.clipPath=this.#s,this.setDims(this.width,this.height),fw(this,this.#c,["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#m,{rootClass:{hovered:!0}})}pointerleave(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#m,{rootClass:{hovered:!1}})}#k(e){Rt._keyboardManager.exec(this,e)}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:this.#C(!0);break;case 1:case 3:this.#C(!1);break}}#C(e){if(!this.#e)return;const t=window.getSelection();e?t.setPosition(this.#e,this.#t):t.setPosition(this.#a,this.#o)}select(){super.select(),this.#m&&this.parent?.drawLayer.updateProperties(this.#m,{rootClass:{hovered:!1,selected:!0}})}unselect(){super.unselect(),this.#m&&(this.parent?.drawLayer.updateProperties(this.#m,{rootClass:{selected:!1}}),this.#u||this.#C(!1))}get _mustFixPosition(){return!this.#u}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.updateProperties(this.#h,{rootClass:{hidden:!e}}),this.parent.drawLayer.updateProperties(this.#m,{rootClass:{hidden:!e}}))}#T(){return this.#u?this.rotation:0}#P(){if(this.#u)return null;const[e,t]=this.pageDimensions,[s,i]=this.pageTranslation,o=this.#n,c=new Float32Array(o.length*8);let u=0;for(const{x:h,y:p,width:f,height:g}of o){const x=h*e+s,b=(1-p)*t+i;c[u]=c[u+4]=x,c[u+1]=c[u+3]=b,c[u+2]=c[u+6]=x+f*e,c[u+5]=c[u+7]=b-g*t,u+=8}return c}#D(e){return this.#l.serialize(e,this.#T())}static startHighlighting(e,t,{target:s,x:i,y:o}){const{x:c,y:u,width:h,height:p}=s.getBoundingClientRect(),f=new AbortController,g=e.combinedSignal(f),x=b=>{f.abort(),this.#F(e,b)};window.addEventListener("blur",x,{signal:g}),window.addEventListener("pointerup",x,{signal:g}),window.addEventListener("pointerdown",St,{capture:!0,passive:!1,signal:g}),window.addEventListener("contextmenu",qs,{signal:g}),s.addEventListener("pointermove",this.#L.bind(this,e),{signal:g}),this._freeHighlight=new mm({x:i,y:o},[c,u,h,p],e.scale,this._defaultThickness/2,t,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static#L(e,t){this._freeHighlight.add(t)&&e.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}static#F(e,t){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(t,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static async deserialize(e,t,s){let i=null;if(e instanceof Bw){const{data:{quadPoints:w,rect:_,rotation:S,id:A,color:L,opacity:O,popupRef:D,richText:I,contentsObj:C,creationDate:P,modificationDate:k},parent:{page:{pageNumber:N}}}=e;i=e={annotationType:je.HIGHLIGHT,color:Array.from(L),opacity:O,quadPoints:w,boxes:null,pageIndex:N-1,rect:_.slice(0),rotation:S,annotationElementId:A,id:A,deleted:!1,popupRef:D,richText:I,comment:C?.str||null,creationDate:P,modificationDate:k}}else if(e instanceof sp){const{data:{inkLists:w,rect:_,rotation:S,id:A,color:L,borderStyle:{rawWidth:O},popupRef:D,richText:I,contentsObj:C,creationDate:P,modificationDate:k},parent:{page:{pageNumber:N}}}=e;i=e={annotationType:je.HIGHLIGHT,color:Array.from(L),thickness:O,inkLists:w,boxes:null,pageIndex:N-1,rect:_.slice(0),rotation:S,annotationElementId:A,id:A,deleted:!1,popupRef:D,richText:I,comment:C?.str||null,creationDate:P,modificationDate:k}}const{color:o,quadPoints:c,inkLists:u,opacity:h}=e,p=await super.deserialize(e,t,s);p.color=fe.makeHexColor(...o),p.opacity=h||1,u&&(p.#p=e.thickness),p._initialData=i,e.comment&&p.setCommentData(e);const[f,g]=p.pageDimensions,[x,b]=p.pageTranslation;if(c){const w=p.#n=[];for(let _=0;_<c.length;_+=8)w.push({x:(c[_]-x)/f,y:1-(c[_+1]-b)/g,width:(c[_+2]-c[_])/f,height:(c[_+1]-c[_+5])/g});p.#b(),p.#_(),p.rotate(p.rotation)}else if(u){p.#u=!0;const w=u[0],_={x:w[0]-x,y:g-(w[1]-b)},S=new mm(_,[0,0,f,g],1,p.#p/2,!0,.001);for(let O=0,D=w.length;O<D;O+=2)_.x=w[O]-x,_.y=g-(w[O+1]-b),S.add(_);const{id:A,clipPathId:L}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:p.color,"fill-opacity":p._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:S.toSVGPath()}},!0,!0);p.#y({highlightOutlines:S.getOutlines(),highlightId:A,clipPathId:L}),p.#_(),p.rotate(p.parentRotation)}return p}serialize(e=!1){if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();const t=be._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),s=super.serialize(e);return Object.assign(s,{color:t,opacity:this.opacity,thickness:this.#p,quadPoints:this.#P(),outlines:this.#D(s.rect)}),this.addComment(s),this.annotationElementId&&!this.#O(s)?null:(s.id=this.annotationElementId,s)}#O(e){const{color:t}=this._initialData;return this.hasEditedComment||e.color.some((s,i)=>s!==t[i])}renderAnnotationElement(e){return this.deleted?(e.hide(),null):(e.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}}class Iw{#e=Object.create(null);updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(const[t,s]of Object.entries(e))t.startsWith("_")||this.updateProperty(t,s)}updateSVGProperty(e,t){this.#e[e]=t}toSVGProperties(){const e=this.#e;return this.#e=Object.create(null),{root:e}}reset(){this.#e=Object.create(null)}updateAll(e=this){this.updateProperties(e)}clone(){dt("Not implemented")}}class _e extends be{#e=null;#t;_colorPicker=null;_drawId=null;static _currentDrawId=-1;static _currentParent=null;static#n=null;static#s=null;static#r=null;static#i=NaN;static#a=null;static#o=null;static#c=NaN;static _INNER_MARGIN=3;constructor(e){super(e),this.#t=e.mustBeCommitted||!1,this._addOutlines(e)}onUpdatedColor(){this._colorPicker?.update(this.color),super.onUpdatedColor()}_addOutlines(e){e.drawOutlines&&(this.#l(e),this.#f())}#l({drawOutlines:e,drawId:t,drawingOptions:s}){this.#e=e,this._drawingOptions||=s,this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),t>=0?(this._drawId=t,this.parent.drawLayer.finalizeDraw(t,e.defaultProperties)):this._drawId=this.#h(e,this.parent),this.#d(e.box)}#h(e,t){const{id:s}=t.drawLayer.draw(_e._mergeSVGProperties(this._drawingOptions.toSVGProperties(),e.defaultSVGProperties),!1,!1);return s}static _mergeSVGProperties(e,t){const s=new Set(Object.keys(e));for(const[i,o]of Object.entries(t))s.has(i)?Object.assign(e[i],o):e[i]=o;return e}static getDefaultDrawingOptions(e){dt("Not implemented")}static get typesMap(){dt("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(e,t){const s=this.typesMap.get(e);s&&this._defaultDrawingOptions.updateProperty(s,t),this._currentParent&&(_e.#n.updateProperty(s,t),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(e,t){const s=this.constructor.typesMap.get(e);s&&this._updateProperty(e,s,t)}static get defaultPropertiesToUpdate(){const e=[],t=this._defaultDrawingOptions;for(const[s,i]of this.typesMap)e.push([s,t[i]]);return e}get propertiesToUpdate(){const e=[],{_drawingOptions:t}=this;for(const[s,i]of this.constructor.typesMap)e.push([s,t[i]]);return e}_updateProperty(e,t,s){const i=this._drawingOptions,o=i[t],c=u=>{i.updateProperty(t,u);const h=this.#e.updateProperty(t,u);h&&this.#d(h),this.parent?.drawLayer.updateProperties(this._drawId,i.toSVGProperties()),e===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:c.bind(this,s),undo:c.bind(this,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:e,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){this.parent?.drawLayer.updateProperties(this._drawId,_e._mergeSVGProperties(this.#e.getPathResizingSVGProperties(this.#m()),{bbox:this.#p()}))}_onResized(){this.parent?.drawLayer.updateProperties(this._drawId,_e._mergeSVGProperties(this.#e.getPathResizedSVGProperties(this.#m()),{bbox:this.#p()}))}_onTranslating(e,t){this.parent?.drawLayer.updateProperties(this._drawId,{bbox:this.#p()})}_onTranslated(){this.parent?.drawLayer.updateProperties(this._drawId,_e._mergeSVGProperties(this.#e.getPathTranslatedSVGProperties(this.#m(),this.parentDimensions),{bbox:this.#p()}))}_onStartDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,this.#t&&(this.#t=!1,this.commit(),this.parent.setSelected(this),e&&this.isOnScreen&&this.div.focus())}remove(){this.#u(),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#f(),this.#d(this.#e.box),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let t=!1;this.parent&&!e?(this._uiManager.removeShouldRescale(this),this.#u()):e&&(this._uiManager.addShouldRescale(this),this.#f(e),t=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(e),t&&this.select()}#u(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}#f(e=this.parent){if(!(this._drawId!==null&&this.parent===e)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,e.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=this.#h(this.#e,e)}}#g([e,t,s,i]){const{parentDimensions:[o,c],rotation:u}=this;switch(u){case 90:return[t,1-e,s*(c/o),i*(o/c)];case 180:return[1-e,1-t,s,i];case 270:return[1-t,e,s*(c/o),i*(o/c)];default:return[e,t,s,i]}}#m(){const{x:e,y:t,width:s,height:i,parentDimensions:[o,c],rotation:u}=this;switch(u){case 90:return[1-t,e,s*(o/c),i*(c/o)];case 180:return[1-e,1-t,s,i];case 270:return[t,1-e,s*(o/c),i*(c/o)];default:return[e,t,s,i]}}#d(e){[this.x,this.y,this.width,this.height]=this.#g(e),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()}#p(){const{x:e,y:t,width:s,height:i,rotation:o,parentRotation:c,parentDimensions:[u,h]}=this;switch((o*4+c)/90){case 1:return[1-t-i,e,i,s];case 2:return[1-e-s,1-t-i,s,i];case 3:return[t,1-e-s,i,s];case 4:return[e,t-s*(u/h),i*(h/u),s*(u/h)];case 5:return[1-t,e,s*(u/h),i*(h/u)];case 6:return[1-e-i*(h/u),1-t,i*(h/u),s*(u/h)];case 7:return[t-s*(u/h),1-e-i*(h/u),s*(u/h),i*(h/u)];case 8:return[e-s,t-i,s,i];case 9:return[1-t,e-s,i,s];case 10:return[1-e,1-t,s,i];case 11:return[t-i,1-e,i,s];case 12:return[e-i*(h/u),t,i*(h/u),s*(u/h)];case 13:return[1-t-s*(u/h),e-i*(h/u),s*(u/h),i*(h/u)];case 14:return[1-e,1-t-s*(u/h),i*(h/u),s*(u/h)];case 15:return[t,1-e,s*(u/h),i*(h/u)];default:return[e,t,s,i]}}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,_e._mergeSVGProperties({bbox:this.#p()},this.#e.updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&this.#d(this.#e.updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let e,t;this._isCopy&&(e=this.x,t=this.y);const s=super.render();s.classList.add("draw");const i=document.createElement("div");return s.append(i),i.setAttribute("aria-hidden","true"),i.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(e,t),s}static createDrawerInstance(e,t,s,i,o){dt("Not implemented")}static startDrawing(e,t,s,i){const{target:o,offsetX:c,offsetY:u,pointerId:h,pointerType:p}=i;if(_e.#a&&_e.#a!==p)return;const{viewport:{rotation:f}}=e,{width:g,height:x}=o.getBoundingClientRect(),b=_e.#s=new AbortController,w=e.combinedSignal(b);if(_e.#i||=h,_e.#a??=p,window.addEventListener("pointerup",_=>{_e.#i===_.pointerId?this._endDraw(_):_e.#o?.delete(_.pointerId)},{signal:w}),window.addEventListener("pointercancel",_=>{_e.#i===_.pointerId?this._currentParent.endDrawingSession():_e.#o?.delete(_.pointerId)},{signal:w}),window.addEventListener("pointerdown",_=>{_e.#a===_.pointerType&&((_e.#o||=new Set).add(_.pointerId),_e.#n.isCancellable()&&(_e.#n.removeLastElement(),_e.#n.isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:w}),window.addEventListener("contextmenu",qs,{signal:w}),o.addEventListener("pointermove",this._drawMove.bind(this),{signal:w}),o.addEventListener("touchmove",_=>{_.timeStamp===_e.#c&&St(_)},{signal:w}),e.toggleDrawing(),t._editorUndoBar?.hide(),_e.#n){e.drawLayer.updateProperties(this._currentDrawId,_e.#n.startNew(c,u,g,x,f));return}t.updateUIForDefaultProperties(this),_e.#n=this.createDrawerInstance(c,u,g,x,f),_e.#r=this.getDefaultDrawingOptions(),this._currentParent=e,{id:this._currentDrawId}=e.drawLayer.draw(this._mergeSVGProperties(_e.#r.toSVGProperties(),_e.#n.defaultSVGProperties),!0,!1)}static _drawMove(e){if(_e.#c=-1,!_e.#n)return;const{offsetX:t,offsetY:s,pointerId:i}=e;if(_e.#i===i){if(_e.#o?.size>=1){this._endDraw(e);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,_e.#n.add(t,s)),_e.#c=e.timeStamp,St(e)}}static _cleanup(e){e&&(this._currentDrawId=-1,this._currentParent=null,_e.#n=null,_e.#r=null,_e.#a=null,_e.#c=NaN),_e.#s&&(_e.#s.abort(),_e.#s=null,_e.#i=NaN,_e.#o=null)}static _endDraw(e){const t=this._currentParent;if(t){if(t.toggleDrawing(!0),this._cleanup(!1),e?.target===t.div&&t.drawLayer.updateProperties(this._currentDrawId,_e.#n.end(e.offsetX,e.offsetY)),this.supportMultipleDrawings){const s=_e.#n,i=this._currentDrawId,o=s.getLastElement();t.addCommands({cmd:()=>{t.drawLayer.updateProperties(i,s.setLastElement(o))},undo:()=>{t.drawLayer.updateProperties(i,s.removeLastElement())},mustExec:!1,type:Ue.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(e){const t=this._currentParent;if(!t)return null;if(t.toggleDrawing(!0),t.cleanUndoStack(Ue.DRAW_STEP),!_e.#n.isEmpty()){const{pageDimensions:[s,i],scale:o}=t,c=t.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:_e.#n.getOutlines(s*o,i*o,o,this._INNER_MARGIN),drawingOptions:_e.#r,mustBeCommitted:!e});return this._cleanup(!0),c}return t.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(e){}static deserializeDraw(e,t,s,i,o,c){dt("Not implemented")}static async deserialize(e,t,s){const{rawDims:{pageWidth:i,pageHeight:o,pageX:c,pageY:u}}=t.viewport,h=this.deserializeDraw(c,u,i,o,this._INNER_MARGIN,e),p=await super.deserialize(e,t,s);return p.createDrawingOptions(e),p.#l({drawOutlines:h}),p.#f(),p.onScaleChanging(),p.rotate(),p}serializeDraw(e){const[t,s]=this.pageTranslation,[i,o]=this.pageDimensions;return this.#e.serialize([t,s,i,o],e)}renderAnnotationElement(e){return e.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}}class NT{#e=new Float64Array(6);#t;#n;#s;#r;#i;#a="";#o=0;#c=new Al;#l;#h;constructor(e,t,s,i,o,c){this.#l=s,this.#h=i,this.#s=o,this.#r=c,[e,t]=this.#u(e,t);const u=this.#t=[NaN,NaN,NaN,NaN,e,t];this.#i=[e,t],this.#n=[{line:u,points:this.#i}],this.#e.set(u,0)}updateProperty(e,t){e==="stroke-width"&&(this.#r=t)}#u(e,t){return he._normalizePoint(e,t,this.#l,this.#h,this.#s)}isEmpty(){return!this.#n||this.#n.length===0}isCancellable(){return this.#i.length<=10}add(e,t){[e,t]=this.#u(e,t);const[s,i,o,c]=this.#e.subarray(2,6),u=e-o,h=t-c;return Math.hypot(this.#l*u,this.#h*h)<=2?null:(this.#i.push(e,t),isNaN(s)?(this.#e.set([o,c,e,t],2),this.#t.push(NaN,NaN,NaN,NaN,e,t),{path:{d:this.toSVGPath()}}):(isNaN(this.#e[0])&&this.#t.splice(6,6),this.#e.set([s,i,o,c,e,t],0),this.#t.push(...he.createBezierPoints(s,i,o,c,e,t)),{path:{d:this.toSVGPath()}}))}end(e,t){const s=this.add(e,t);return s||(this.#i.length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,s,i,o){this.#l=s,this.#h=i,this.#s=o,[e,t]=this.#u(e,t);const c=this.#t=[NaN,NaN,NaN,NaN,e,t];this.#i=[e,t];const u=this.#n.at(-1);return u&&(u.line=new Float32Array(u.line),u.points=new Float32Array(u.points)),this.#n.push({line:c,points:this.#i}),this.#e.set(c,0),this.#o=0,this.toSVGPath(),null}getLastElement(){return this.#n.at(-1)}setLastElement(e){return this.#n?(this.#n.push(e),this.#t=e.line,this.#i=e.points,this.#o=0,{path:{d:this.toSVGPath()}}):this.#c.setLastElement(e)}removeLastElement(){if(!this.#n)return this.#c.removeLastElement();this.#n.pop(),this.#a="";for(let e=0,t=this.#n.length;e<t;e++){const{line:s,points:i}=this.#n[e];this.#t=s,this.#i=i,this.#o=0,this.toSVGPath()}return{path:{d:this.#a}}}toSVGPath(){const e=he.svgRound(this.#t[4]),t=he.svgRound(this.#t[5]);if(this.#i.length===2)return this.#a=`${this.#a} M ${e} ${t} Z`,this.#a;if(this.#i.length<=6){const i=this.#a.lastIndexOf("M");this.#a=`${this.#a.slice(0,i)} M ${e} ${t}`,this.#o=6}if(this.#i.length===4){const i=he.svgRound(this.#t[10]),o=he.svgRound(this.#t[11]);return this.#a=`${this.#a} L ${i} ${o}`,this.#o=12,this.#a}const s=[];this.#o===0&&(s.push(`M ${e} ${t}`),this.#o=6);for(let i=this.#o,o=this.#t.length;i<o;i+=6){const[c,u,h,p,f,g]=this.#t.slice(i,i+6).map(he.svgRound);s.push(`C${c} ${u} ${h} ${p} ${f} ${g}`)}return this.#a+=s.join(" "),this.#o=this.#t.length,this.#a}getOutlines(e,t,s,i){const o=this.#n.at(-1);return o.line=new Float32Array(o.line),o.points=new Float32Array(o.points),this.#c.build(this.#n,e,t,s,this.#s,this.#r,i),this.#e=null,this.#t=null,this.#n=null,this.#a=null,this.#c}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}class Al extends he{#e;#t=0;#n;#s;#r;#i;#a;#o;#c;build(e,t,s,i,o,c,u){this.#r=t,this.#i=s,this.#a=i,this.#o=o,this.#c=c,this.#n=u??0,this.#s=e,this.#u()}get thickness(){return this.#c}setLastElement(e){return this.#s.push(e),{path:{d:this.toSVGPath()}}}removeLastElement(){return this.#s.pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const e=[];for(const{line:t}of this.#s){if(e.push(`M${he.svgRound(t[4])} ${he.svgRound(t[5])}`),t.length===6){e.push("Z");continue}if(t.length===12&&isNaN(t[6])){e.push(`L${he.svgRound(t[10])} ${he.svgRound(t[11])}`);continue}for(let s=6,i=t.length;s<i;s+=6){const[o,c,u,h,p,f]=t.subarray(s,s+6).map(he.svgRound);e.push(`C${o} ${c} ${u} ${h} ${p} ${f}`)}}return e.join("")}serialize([e,t,s,i],o){const c=[],u=[],[h,p,f,g]=this.#h();let x,b,w,_,S,A,L,O,D;switch(this.#o){case 0:D=he._rescale,x=e,b=t+i,w=s,_=-i,S=e+h*s,A=t+(1-p-g)*i,L=e+(h+f)*s,O=t+(1-p)*i;break;case 90:D=he._rescaleAndSwap,x=e,b=t,w=s,_=i,S=e+p*s,A=t+h*i,L=e+(p+g)*s,O=t+(h+f)*i;break;case 180:D=he._rescale,x=e+s,b=t,w=-s,_=i,S=e+(1-h-f)*s,A=t+p*i,L=e+(1-h)*s,O=t+(p+g)*i;break;case 270:D=he._rescaleAndSwap,x=e+s,b=t+i,w=-s,_=-i,S=e+(1-p-g)*s,A=t+(1-h-f)*i,L=e+(1-p)*s,O=t+(1-h)*i;break}for(const{line:I,points:C}of this.#s)c.push(D(I,x,b,w,_,o?new Array(I.length):null)),u.push(D(C,x,b,w,_,o?new Array(C.length):null));return{lines:c,points:u,rect:[S,A,L,O]}}static deserialize(e,t,s,i,o,{paths:{lines:c,points:u},rotation:h,thickness:p}){const f=[];let g,x,b,w,_;switch(h){case 0:_=he._rescale,g=-e/s,x=t/i+1,b=1/s,w=-1/i;break;case 90:_=he._rescaleAndSwap,g=-t/i,x=-e/s,b=1/i,w=1/s;break;case 180:_=he._rescale,g=e/s+1,x=-t/i,b=-1/s,w=1/i;break;case 270:_=he._rescaleAndSwap,g=t/i+1,x=e/s+1,b=-1/i,w=-1/s;break}if(!c){c=[];for(const A of u){const L=A.length;if(L===2){c.push(new Float32Array([NaN,NaN,NaN,NaN,A[0],A[1]]));continue}if(L===4){c.push(new Float32Array([NaN,NaN,NaN,NaN,A[0],A[1],NaN,NaN,NaN,NaN,A[2],A[3]]));continue}const O=new Float32Array(3*(L-2));c.push(O);let[D,I,C,P]=A.subarray(0,4);O.set([NaN,NaN,NaN,NaN,D,I],0);for(let k=4;k<L;k+=2){const N=A[k],M=A[k+1];O.set(he.createBezierPoints(D,I,C,P,N,M),(k-2)*3),[D,I,C,P]=[C,P,N,M]}}}for(let A=0,L=c.length;A<L;A++)f.push({line:_(c[A].map(O=>O??NaN),g,x,b,w),points:_(u[A].map(O=>O??NaN),g,x,b,w)});const S=new this.prototype.constructor;return S.build(f,s,i,1,h,p,o),S}#l(e=this.#c){const t=this.#n+e/2*this.#a;return this.#o%180===0?[t/this.#r,t/this.#i]:[t/this.#i,t/this.#r]}#h(){const[e,t,s,i]=this.#e,[o,c]=this.#l(0);return[e+o,t+c,s-2*o,i-2*c]}#u(){const e=this.#e=new Float32Array([1/0,1/0,-1/0,-1/0]);for(const{line:i}of this.#s){if(i.length<=12){for(let u=4,h=i.length;u<h;u+=6)fe.pointBoundingBox(i[u],i[u+1],e);continue}let o=i[4],c=i[5];for(let u=6,h=i.length;u<h;u+=6){const[p,f,g,x,b,w]=i.subarray(u,u+6);fe.bezierBoundingBox(o,c,p,f,g,x,b,w,e),o=b,c=w}}const[t,s]=this.#l();e[0]=cs(e[0]-t,0,1),e[1]=cs(e[1]-s,0,1),e[2]=cs(e[2]+t,0,1),e[3]=cs(e[3]+s,0,1),e[2]-=e[0],e[3]-=e[1]}get box(){return this.#e}updateProperty(e,t){return e==="stroke-width"?this.#f(t):null}#f(e){const[t,s]=this.#l();this.#c=e;const[i,o]=this.#l(),[c,u]=[i-t,o-s],h=this.#e;return h[0]-=c,h[1]-=u,h[2]+=2*c,h[3]+=2*u,h}updateParentDimensions([e,t],s){const[i,o]=this.#l();this.#r=e,this.#i=t,this.#a=s;const[c,u]=this.#l(),h=c-i,p=u-o,f=this.#e;return f[0]-=h,f[1]-=p,f[2]+=2*h,f[3]+=2*p,f}updateRotation(e){return this.#t=e,{path:{transform:this.rotationTransform}}}get viewBox(){return this.#e.map(he.svgRound).join(" ")}get defaultProperties(){const[e,t]=this.#e;return{root:{viewBox:this.viewBox},path:{"transform-origin":`${he.svgRound(e)} ${he.svgRound(t)}`}}}get rotationTransform(){const[,,e,t]=this.#e;let s=0,i=0,o=0,c=0,u=0,h=0;switch(this.#t){case 90:i=t/e,o=-e/t,u=e;break;case 180:s=-1,c=-1,u=e,h=t;break;case 270:i=-t/e,o=e/t,h=t;break;default:return""}return`matrix(${s} ${i} ${o} ${c} ${he.svgRound(u)} ${he.svgRound(h)})`}getPathResizingSVGProperties([e,t,s,i]){const[o,c]=this.#l(),[u,h,p,f]=this.#e;if(Math.abs(p-o)<=he.PRECISION||Math.abs(f-c)<=he.PRECISION){const _=e+s/2-(u+p/2),S=t+i/2-(h+f/2);return{path:{"transform-origin":`${he.svgRound(e)} ${he.svgRound(t)}`,transform:`${this.rotationTransform} translate(${_} ${S})`}}}const g=(s-2*o)/(p-2*o),x=(i-2*c)/(f-2*c),b=p/s,w=f/i;return{path:{"transform-origin":`${he.svgRound(u)} ${he.svgRound(h)}`,transform:`${this.rotationTransform} scale(${b} ${w}) translate(${he.svgRound(o)} ${he.svgRound(c)}) scale(${g} ${x}) translate(${he.svgRound(-o)} ${he.svgRound(-c)})`}}}getPathResizedSVGProperties([e,t,s,i]){const[o,c]=this.#l(),u=this.#e,[h,p,f,g]=u;if(u[0]=e,u[1]=t,u[2]=s,u[3]=i,Math.abs(f-o)<=he.PRECISION||Math.abs(g-c)<=he.PRECISION){const S=e+s/2-(h+f/2),A=t+i/2-(p+g/2);for(const{line:L,points:O}of this.#s)he._translate(L,S,A,L),he._translate(O,S,A,O);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${he.svgRound(e)} ${he.svgRound(t)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const x=(s-2*o)/(f-2*o),b=(i-2*c)/(g-2*c),w=-x*(h+o)+e+o,_=-b*(p+c)+t+c;if(x!==1||b!==1||w!==0||_!==0)for(const{line:S,points:A}of this.#s)he._rescale(S,w,_,x,b,S),he._rescale(A,w,_,x,b,A);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${he.svgRound(e)} ${he.svgRound(t)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([e,t],s){const[i,o]=s,c=this.#e,u=e-c[0],h=t-c[1];if(this.#r===i&&this.#i===o)for(const{line:p,points:f}of this.#s)he._translate(p,u,h,p),he._translate(f,u,h,f);else{const p=this.#r/i,f=this.#i/o;this.#r=i,this.#i=o;for(const{line:g,points:x}of this.#s)he._rescale(g,u,h,p,f,g),he._rescale(x,u,h,p,f,x);c[2]*=p,c[3]*=f}return c[0]=e,c[1]=t,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${he.svgRound(e)} ${he.svgRound(t)}`}}}get defaultSVGProperties(){const e=this.#e;return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${he.svgRound(e[0])} ${he.svgRound(e[1])}`,transform:this.rotationTransform||null},bbox:e}}}class nu extends Iw{constructor(e){super(),this._viewParameters=e,super.updateProperties({fill:"none",stroke:be._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,t){e==="stroke-width"&&(t??=this["stroke-width"],t*=this._viewParameters.realScale),super.updateSVGProperty(e,t)}clone(){const e=new nu(this._viewParameters);return e.updateAll(this),e}}class ip extends _e{static _type="ink";static _editorType=je.INK;static _defaultDrawingOptions=null;constructor(e){super({...e,name:"inkEditor"}),this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(e,t){be.initialize(e,t),this._defaultDrawingOptions=new nu(t.viewParameters)}static getDefaultDrawingOptions(e){const t=this._defaultDrawingOptions.clone();return t.updateProperties(e),t}static get supportMultipleDrawings(){return!0}static get typesMap(){return Le(this,"typesMap",new Map([[Ue.INK_THICKNESS,"stroke-width"],[Ue.INK_COLOR,"stroke"],[Ue.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(e,t,s,i,o){return new NT(e,t,s,i,o,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(e,t,s,i,o,c){return Al.deserialize(e,t,s,i,o,c)}static async deserialize(e,t,s){let i=null;if(e instanceof sp){const{data:{inkLists:c,rect:u,rotation:h,id:p,color:f,opacity:g,borderStyle:{rawWidth:x},popupRef:b,richText:w,contentsObj:_,creationDate:S,modificationDate:A},parent:{page:{pageNumber:L}}}=e;i=e={annotationType:je.INK,color:Array.from(f),thickness:x,opacity:g,paths:{points:c},boxes:null,pageIndex:L-1,rect:u.slice(0),rotation:h,annotationElementId:p,id:p,deleted:!1,popupRef:b,richText:w,comment:_?.str||null,creationDate:S,modificationDate:A}}const o=await super.deserialize(e,t,s);return o._initialData=i,e.comment&&o.setCommentData(e),o}get toolbarButtons(){return this._colorPicker||=new il(this),[["colorPicker",this._colorPicker]]}get colorType(){return Ue.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:e,_drawingOptions:t,parent:s}=this;t.updateSVGProperty("stroke-width"),s.drawLayer.updateProperties(e,t.toSVGProperties())}static onScaleChangingWhenDrawing(){const e=this._currentParent;e&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),e.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:e,thickness:t,opacity:s}){this._drawingOptions=ip.getDefaultDrawingOptions({stroke:fe.makeHexColor(...e),"stroke-width":t,"stroke-opacity":s})}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:t,points:s}=this.serializeDraw(e),{_drawingOptions:{stroke:i,"stroke-opacity":o,"stroke-width":c}}=this,u=Object.assign(super.serialize(e),{color:be._colorManager.convert(i),opacity:o,thickness:c,paths:{lines:t,points:s}});return this.addComment(u),e?(u.isCopy=!0,u):this.annotationElementId&&!this.#e(u)?null:(u.id=this.annotationElementId,u)}#e(e){const{color:t,thickness:s,opacity:i,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||e.color.some((c,u)=>c!==t[u])||e.thickness!==s||e.opacity!==i||e.pageIndex!==o}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;const{points:t,rect:s}=this.serializeDraw(!1);return e.updateEdited({rect:s,thickness:this._drawingOptions["stroke-width"],points:t,popup:this.comment}),null}}class pm extends Al{toSVGPath(){let e=super.toSVGPath();return e.endsWith("Z")||(e+="Z"),e}}const ad=8,Ho=3;class ha{static#e={maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16};static#t(e,t,s,i){return s-=e,i-=t,s===0?i>0?0:4:s===1?i+6:2-i}static#n=new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]);static#s(e,t,s,i,o,c,u){const h=this.#t(s,i,o,c);for(let p=0;p<8;p++){const f=(-p+h-u+16)%8,g=this.#n[2*f],x=this.#n[2*f+1];if(e[(s+g)*t+(i+x)]!==0)return f}return-1}static#r(e,t,s,i,o,c,u){const h=this.#t(s,i,o,c);for(let p=0;p<8;p++){const f=(p+h+u+16)%8,g=this.#n[2*f],x=this.#n[2*f+1];if(e[(s+g)*t+(i+x)]!==0)return f}return-1}static#i(e,t,s,i){const o=e.length,c=new Int32Array(o);for(let f=0;f<o;f++)c[f]=e[f]<=i?1:0;for(let f=1;f<s-1;f++)c[f*t]=c[f*t+t-1]=0;for(let f=0;f<t;f++)c[f]=c[t*s-1-f]=0;let u=1,h;const p=[];for(let f=1;f<s-1;f++){h=1;for(let g=1;g<t-1;g++){const x=f*t+g,b=c[x];if(b===0)continue;let w=f,_=g;if(b===1&&c[x-1]===0)u+=1,_-=1;else if(b>=1&&c[x+1]===0)u+=1,_+=1,b>1&&(h=b);else{b!==1&&(h=Math.abs(b));continue}const S=[g,f],A=_===g+1,L={isHole:A,points:S,id:u,parent:0};p.push(L);let O;for(const H of p)if(H.id===h){O=H;break}O?O.isHole?L.parent=A?O.parent:h:L.parent=A?h:O.parent:L.parent=A?h:0;const D=this.#s(c,t,f,g,w,_,0);if(D===-1){c[x]=-u,c[x]!==1&&(h=Math.abs(c[x]));continue}let I=this.#n[2*D],C=this.#n[2*D+1];const P=f+I,k=g+C;w=P,_=k;let N=f,M=g;for(;;){const H=this.#r(c,t,N,M,w,_,1);I=this.#n[2*H],C=this.#n[2*H+1];const F=N+I,V=M+C;S.push(V,F);const q=N*t+M;if(c[q+1]===0?c[q]=-u:c[q]===1&&(c[q]=u),F===f&&V===g&&N===P&&M===k){c[x]!==1&&(h=Math.abs(c[x]));break}else w=N,_=M,N=F,M=V}}}return p}static#a(e,t,s,i){if(s-t<=4){for(let P=t;P<s-2;P+=2)i.push(e[P],e[P+1]);return}const o=e[t],c=e[t+1],u=e[s-4]-o,h=e[s-3]-c,p=Math.hypot(u,h),f=u/p,g=h/p,x=f*c-g*o,b=h/u,w=1/p,_=Math.atan(b),S=Math.cos(_),A=Math.sin(_),L=w*(Math.abs(S)+Math.abs(A)),O=w*(1-L+L**2),D=Math.max(Math.atan(Math.abs(A+S)*O),Math.atan(Math.abs(A-S)*O));let I=0,C=t;for(let P=t+2;P<s-2;P+=2){const k=Math.abs(x-f*e[P+1]+g*e[P]);k>I&&(C=P,I=k)}I>(p*D)**2?(this.#a(e,t,C+2,i),this.#a(e,C,s,i)):i.push(o,c)}static#o(e){const t=[],s=e.length;return this.#a(e,0,s,t),t.push(e[s-2],e[s-1]),t.length<=4?null:t}static#c(e,t,s,i,o,c){const u=new Float32Array(c**2),h=-2*i**2,p=c>>1;for(let _=0;_<c;_++){const S=(_-p)**2;for(let A=0;A<c;A++)u[_*c+A]=Math.exp((S+(A-p)**2)/h)}const f=new Float32Array(256),g=-2*o**2;for(let _=0;_<256;_++)f[_]=Math.exp(_**2/g);const x=e.length,b=new Uint8Array(x),w=new Uint32Array(256);for(let _=0;_<s;_++)for(let S=0;S<t;S++){const A=_*t+S,L=e[A];let O=0,D=0;for(let C=0;C<c;C++){const P=_+C-p;if(!(P<0||P>=s))for(let k=0;k<c;k++){const N=S+k-p;if(N<0||N>=t)continue;const M=e[P*t+N],H=u[C*c+k]*f[Math.abs(M-L)];O+=M*H,D+=H}}const I=b[A]=Math.round(O/D);w[I]++}return[b,w]}static#l(e){const t=new Uint32Array(256);for(const s of e)t[s]++;return t}static#h(e){const t=e.length,s=new Uint8ClampedArray(t>>2);let i=-1/0,o=1/0;for(let u=0,h=s.length;u<h;u++){const p=s[u]=e[u<<2];i=Math.max(i,p),o=Math.min(o,p)}const c=255/(i-o);for(let u=0,h=s.length;u<h;u++)s[u]=(s[u]-o)*c;return s}static#u(e){let t,s=-1/0,i=-1/0;const o=e.findIndex(h=>h!==0);let c=o,u=o;for(t=o;t<256;t++){const h=e[t];h>s&&(t-c>i&&(i=t-c,u=t-1),s=h,c=t)}for(t=u-1;t>=0&&!(e[t]>e[t+1]);t--);return t}static#f(e){const t=e,{width:s,height:i}=e,{maxDim:o}=this.#e;let c=s,u=i;if(s>o||i>o){let x=s,b=i,w=Math.log2(Math.max(s,i)/o);const _=Math.floor(w);w=w===_?_-1:_;for(let A=0;A<w;A++){c=Math.ceil(x/2),u=Math.ceil(b/2);const L=new OffscreenCanvas(c,u);L.getContext("2d").drawImage(e,0,0,x,b,0,0,c,u),x=c,b=u,e!==t&&e.close(),e=L.transferToImageBitmap()}const S=Math.min(o/c,o/u);c=Math.round(c*S),u=Math.round(u*S)}const p=new OffscreenCanvas(c,u).getContext("2d",{willReadFrequently:!0});p.fillStyle="white",p.fillRect(0,0,c,u),p.filter="grayscale(1)",p.drawImage(e,0,0,e.width,e.height,0,0,c,u);const f=p.getImageData(0,0,c,u).data;return[this.#h(f),c,u]}static extractContoursFromText(e,{fontFamily:t,fontStyle:s,fontWeight:i},o,c,u,h){let p=new OffscreenCanvas(1,1),f=p.getContext("2d",{alpha:!1});const g=200,x=f.font=`${s} ${i} ${g}px ${t}`,{actualBoundingBoxLeft:b,actualBoundingBoxRight:w,actualBoundingBoxAscent:_,actualBoundingBoxDescent:S,fontBoundingBoxAscent:A,fontBoundingBoxDescent:L,width:O}=f.measureText(e),D=1.5,I=Math.ceil(Math.max(Math.abs(b)+Math.abs(w)||0,O)*D),C=Math.ceil(Math.max(Math.abs(_)+Math.abs(S)||g,Math.abs(A)+Math.abs(L)||g)*D);p=new OffscreenCanvas(I,C),f=p.getContext("2d",{alpha:!0,willReadFrequently:!0}),f.font=x,f.filter="grayscale(1)",f.fillStyle="white",f.fillRect(0,0,I,C),f.fillStyle="black",f.fillText(e,I*(D-1)/2,C*(3-D)/2);const P=this.#h(f.getImageData(0,0,I,C).data),k=this.#l(P),N=this.#u(k),M=this.#i(P,I,C,N);return this.processDrawnLines({lines:{curves:M,width:I,height:C},pageWidth:o,pageHeight:c,rotation:u,innerMargin:h,mustSmooth:!0,areContours:!0})}static process(e,t,s,i,o){const[c,u,h]=this.#f(e),[p,f]=this.#c(c,u,h,Math.hypot(u,h)*this.#e.sigmaSFactor,this.#e.sigmaR,this.#e.kernelSize),g=this.#u(f),x=this.#i(p,u,h,g);return this.processDrawnLines({lines:{curves:x,width:u,height:h},pageWidth:t,pageHeight:s,rotation:i,innerMargin:o,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:e,pageWidth:t,pageHeight:s,rotation:i,innerMargin:o,mustSmooth:c,areContours:u}){i%180!==0&&([t,s]=[s,t]);const{curves:h,width:p,height:f}=e,g=e.thickness??0,x=[],b=Math.min(t/p,s/f),w=b/t,_=b/s,S=[];for(const{points:L}of h){const O=c?this.#o(L):L;if(!O)continue;S.push(O);const D=O.length,I=new Float32Array(D),C=new Float32Array(3*(D===2?2:D-2));if(x.push({line:C,points:I}),D===2){I[0]=O[0]*w,I[1]=O[1]*_,C.set([NaN,NaN,NaN,NaN,I[0],I[1]],0);continue}let[P,k,N,M]=O;P*=w,k*=_,N*=w,M*=_,I.set([P,k,N,M],0),C.set([NaN,NaN,NaN,NaN,P,k],0);for(let H=4;H<D;H+=2){const F=I[H]=O[H]*w,V=I[H+1]=O[H+1]*_;C.set(he.createBezierPoints(P,k,N,M,F,V),(H-2)*3),[P,k,N,M]=[N,M,F,V]}}if(x.length===0)return null;const A=u?new pm:new Al;return A.build(x,t,s,1,i,u?0:g,o),{outline:A,newCurves:S,areContours:u,thickness:g,width:p,height:f}}static async compressSignature({outlines:e,areContours:t,thickness:s,width:i,height:o}){let c=1/0,u=-1/0,h=0;for(const O of e){h+=O.length;for(let D=2,I=O.length;D<I;D++){const C=O[D]-O[D-2];c=Math.min(c,C),u=Math.max(u,C)}}let p;c>=-128&&u<=127?p=Int8Array:c>=-32768&&u<=32767?p=Int16Array:p=Int32Array;const f=e.length,g=ad+Ho*f,x=new Uint32Array(g);let b=0;x[b++]=g*Uint32Array.BYTES_PER_ELEMENT+(h-2*f)*p.BYTES_PER_ELEMENT,x[b++]=0,x[b++]=i,x[b++]=o,x[b++]=t?0:1,x[b++]=Math.max(0,Math.floor(s??0)),x[b++]=f,x[b++]=p.BYTES_PER_ELEMENT;for(const O of e)x[b++]=O.length-2,x[b++]=O[0],x[b++]=O[1];const w=new CompressionStream("deflate-raw"),_=w.writable.getWriter();await _.ready,_.write(x);const S=p.prototype.constructor;for(const O of e){const D=new S(O.length-2);for(let I=2,C=O.length;I<C;I++)D[I-2]=O[I]-O[I-2];_.write(D)}_.close();const A=await new Response(w.readable).arrayBuffer(),L=new Uint8Array(A);return rw(L)}static async decompressSignature(e){try{const t=Kj(e),{readable:s,writable:i}=new DecompressionStream("deflate-raw"),o=i.getWriter();await o.ready,o.write(t).then(async()=>{await o.ready,await o.close()}).catch(()=>{});let c=null,u=0;for await(const O of s)c||=new Uint8Array(new Uint32Array(O.buffer,0,4)[0]),c.set(O,u),u+=O.length;const h=new Uint32Array(c.buffer,0,c.length>>2),p=h[1];if(p!==0)throw new Error(`Invalid version: ${p}`);const f=h[2],g=h[3],x=h[4]===0,b=h[5],w=h[6],_=h[7],S=[],A=(ad+Ho*w)*Uint32Array.BYTES_PER_ELEMENT;let L;switch(_){case Int8Array.BYTES_PER_ELEMENT:L=new Int8Array(c.buffer,A);break;case Int16Array.BYTES_PER_ELEMENT:L=new Int16Array(c.buffer,A);break;case Int32Array.BYTES_PER_ELEMENT:L=new Int32Array(c.buffer,A);break}u=0;for(let O=0;O<w;O++){const D=h[Ho*O+ad],I=new Float32Array(D+2);S.push(I);for(let C=0;C<Ho-1;C++)I[C]=h[Ho*O+ad+C+1];for(let C=0;C<D;C++)I[C+2]=I[C]+L[u++]}return{areContours:x,thickness:b,outlines:S,width:f,height:g}}catch(t){return Ce(`decompressSignature: ${t}`),null}}}class ap extends Iw{constructor(){super(),super.updateProperties({fill:be._defaultLineColor,"stroke-width":0})}clone(){const e=new ap;return e.updateAll(this),e}}class rp extends nu{constructor(e){super(e),super.updateProperties({stroke:be._defaultLineColor,"stroke-width":1})}clone(){const e=new rp(this._viewParameters);return e.updateAll(this),e}}class On extends _e{#e=!1;#t=null;#n=null;#s=null;static _type="signature";static _editorType=je.SIGNATURE;static _defaultDrawingOptions=null;constructor(e){super({...e,mustBeCommitted:!0,name:"signatureEditor"}),this._willKeepAspectRatio=!0,this.#n=e.signatureData||null,this.#t=null,this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(e,t){be.initialize(e,t),this._defaultDrawingOptions=new ap,this._defaultDrawnSignatureOptions=new rp(t.viewParameters)}static getDefaultDrawingOptions(e){const t=this._defaultDrawingOptions.clone();return t.updateProperties(e),t}static get supportMultipleDrawings(){return!1}static get typesMap(){return Le(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!this.#t}}static computeTelemetryFinalData(e){const t=e.get("hasDescription");return{hasAltText:t.get(!0)??0,hasNoAltText:t.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let e,t;const{_isCopy:s}=this;if(s&&(this._isCopy=!1,e=this.x,t=this.y),super.render(),this._drawId===null)if(this.#n){const{lines:i,mustSmooth:o,areContours:c,description:u,uuid:h,heightInPage:p}=this.#n,{rawDims:{pageWidth:f,pageHeight:g},rotation:x}=this.parent.viewport,b=ha.processDrawnLines({lines:i,pageWidth:f,pageHeight:g,rotation:x,innerMargin:On._INNER_MARGIN,mustSmooth:o,areContours:c});this.addSignature(b,p,u,h)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:this.#t||""}));return s&&(this._isCopy=!0,this._moveAfterPaste(e,t)),this.div}setUuid(e){this.#s=e,this.addEditToolbar()}getUuid(){return this.#s}get description(){return this.#t}set description(e){this.#t=e,this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:e})),super.addEditToolbar().then(t=>{t?.updateEditSignatureButton(e)}))}getSignaturePreview(){const{newCurves:e,areContours:t,thickness:s,width:i,height:o}=this.#n,c=Math.max(i,o),u=ha.processDrawnLines({lines:{curves:e.map(h=>({points:h})),thickness:s,width:i,height:o},pageWidth:c,pageHeight:c,rotation:0,innerMargin:0,mustSmooth:!1,areContours:t});return{areContours:t,outline:u.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(e,t,s,i){const{x:o,y:c}=this,{outline:u}=this.#n=e;this.#e=u instanceof pm,this.description=s;let h;this.#e?h=On.getDefaultDrawingOptions():(h=On._defaultDrawnSignatureOptions.clone(),h.updateProperties({"stroke-width":u.thickness})),this._addOutlines({drawOutlines:u,drawingOptions:h});const[,p]=this.pageDimensions;let f=t/p;f=f>=1?.5:f,this.width*=f/this.height,this.width>=1&&(f*=.9/this.width,this.width=.9),this.height=f,this.setDims(),this.x=o,this.y=c,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(i),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!i,hasDescription:!!s}}),this.div.hidden=!1}getFromImage(e){const{rawDims:{pageWidth:t,pageHeight:s},rotation:i}=this.parent.viewport;return ha.process(e,t,s,i,On._INNER_MARGIN)}getFromText(e,t){const{rawDims:{pageWidth:s,pageHeight:i},rotation:o}=this.parent.viewport;return ha.extractContoursFromText(e,t,s,i,o,On._INNER_MARGIN)}getDrawnSignature(e){const{rawDims:{pageWidth:t,pageHeight:s},rotation:i}=this.parent.viewport;return ha.processDrawnLines({lines:e,pageWidth:t,pageHeight:s,rotation:i,innerMargin:On._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:e,thickness:t}){e?this._drawingOptions=On.getDefaultDrawingOptions():(this._drawingOptions=On._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":t}))}serialize(e=!1){if(this.isEmpty())return null;const{lines:t,points:s}=this.serializeDraw(e),{_drawingOptions:{"stroke-width":i}}=this,o=Object.assign(super.serialize(e),{isSignature:!0,areContours:this.#e,color:[0,0,0],thickness:this.#e?0:i});return this.addComment(o),e?(o.paths={lines:t,points:s},o.uuid=this.#s,o.isCopy=!0):o.lines=t,this.#t&&(o.accessibilityData={type:"Figure",alt:this.#t}),o}static deserializeDraw(e,t,s,i,o,c){return c.areContours?pm.deserialize(e,t,s,i,o,c):Al.deserialize(e,t,s,i,o,c)}static async deserialize(e,t,s){const i=await super.deserialize(e,t,s);return i.#e=e.areContours,i.description=e.accessibilityData?.alt||"",i.#s=e.uuid,i}}class ET extends be{#e=null;#t=null;#n=null;#s=null;#r=null;#i="";#a=null;#o=!1;#c=null;#l=!1;#h=!1;static _type="stamp";static _editorType=je.STAMP;constructor(e){super({...e,name:"stampEditor"}),this.#s=e.bitmapUrl,this.#r=e.bitmapFile,this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(e,t){be.initialize(e,t)}static isHandlingMimeForPasting(e){return Md.includes(e)}static paste(e,t){t.pasteEditor({mode:je.STAMP},{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(e){const t=e.get("hasAltText");return{hasAltText:t.get(!0)??0,hasNoAltText:t.get(!1)??0}}#u(e,t=!1){if(!e){this.remove();return}this.#e=e.bitmap,t||(this.#t=e.id,this.#l=e.isSvg),e.file&&(this.#i=e.file.name),this.#m()}#f(){if(this.#n=null,this._uiManager.enableWaiting(!1),!!this.#a){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#e){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#e){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}async mlGuessAltText(e=null,t=!0){if(this.hasAltTextData())return null;const{mlManager:s}=this._uiManager;if(!s)throw new Error("No ML.");if(!await s.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:i,width:o,height:c}=e||this.copyCanvas(null,null,!0).imageData,u=await s.guess({name:"altText",request:{data:i,width:o,height:c,channels:i.length/(o*c)}});if(!u)throw new Error("No response from the AI service.");if(u.error)throw new Error("Error from the AI service.");if(u.cancel)return null;if(!u.output)throw new Error("No valid response from the AI service.");const h=u.output;return await this.setGuessedAltText(h),t&&!this.hasAltTextData()&&(this.altTextData={alt:h,decorative:!1}),h}#g(){if(this.#t){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#t).then(s=>this.#u(s,!0)).finally(()=>this.#f());return}if(this.#s){const s=this.#s;this.#s=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromUrl(s).then(i=>this.#u(i)).finally(()=>this.#f());return}if(this.#r){const s=this.#r;this.#r=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromFile(s).then(i=>this.#u(i)).finally(()=>this.#f());return}const e=document.createElement("input");e.type="file",e.accept=Md.join(",");const t=this._uiManager._signal;this.#n=new Promise(s=>{e.addEventListener("change",async()=>{if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const i=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#u(i)}s()},{signal:t}),e.addEventListener("cancel",()=>{this.remove(),s()},{signal:t})}).finally(()=>this.#f()),e.click()}remove(){this.#t&&(this.#e=null,this._uiManager.imageManager.deleteId(this.#t),this.#a?.remove(),this.#a=null,this.#c&&(clearTimeout(this.#c),this.#c=null)),super.remove()}rebuild(){if(!this.parent){this.#t&&this.#g();return}super.rebuild(),this.div!==null&&(this.#t&&this.#a===null&&this.#g(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(e){this._isDraggable=!0,e&&this.div.focus()}isEmpty(){return!(this.#n||this.#e||this.#s||this.#r||this.#t||this.#o)}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let e,t;return this._isCopy&&(e=this.x,t=this.y),super.render(),this.div.hidden=!0,this.createAltText(),this.#o||(this.#e?this.#m():this.#g()),this._isCopy&&this._moveAfterPaste(e,t),this._uiManager.addShouldRescale(this),this.div}setCanvas(e,t){const{id:s,bitmap:i}=this._uiManager.imageManager.getFromCanvas(e,t);t.remove(),s&&this._uiManager.imageManager.isValidId(s)&&(this.#t=s,i&&(this.#e=i),this.#o=!1,this.#m())}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;this.#c!==null&&clearTimeout(this.#c);const e=200;this.#c=setTimeout(()=>{this.#c=null,this.#p()},e)}#m(){const{div:e}=this;let{width:t,height:s}=this.#e;const[i,o]=this.pageDimensions,c=.75;if(this.width)t=this.width*i,s=this.height*o;else if(t>c*i||s>c*o){const h=Math.min(c*i/t,c*o/s);t*=h,s*=h}this._uiManager.enableWaiting(!1);const u=this.#a=document.createElement("canvas");u.setAttribute("role","img"),this.addContainer(u),this.width=t/i,this.height=s/o,this.setDims(),this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(e.hidden=!1),this.#p(),this.#h||(this.parent.addUndoableEditor(this),this.#h=!0),this._reportTelemetry({action:"inserted_image"}),this.#i&&this.div.setAttribute("aria-description",this.#i),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")}copyCanvas(e,t,s=!1){e||(e=224);const{width:i,height:o}=this.#e,c=new yn;let u=this.#e,h=i,p=o,f=null;if(t){if(i>t||o>t){const C=Math.min(t/i,t/o);h=Math.floor(i*C),p=Math.floor(o*C)}f=document.createElement("canvas");const x=f.width=Math.ceil(h*c.sx),b=f.height=Math.ceil(p*c.sy);this.#l||(u=this.#d(x,b));const w=f.getContext("2d");w.filter=this._uiManager.hcmFilter;let _="white",S="#cfcfd8";this._uiManager.hcmFilter!=="none"?S="black":Jj.isDarkMode&&(_="#8f8f9d",S="#42414d");const A=15,L=A*c.sx,O=A*c.sy,D=new OffscreenCanvas(L*2,O*2),I=D.getContext("2d");I.fillStyle=_,I.fillRect(0,0,L*2,O*2),I.fillStyle=S,I.fillRect(0,0,L,O),I.fillRect(L,O,L,O),w.fillStyle=w.createPattern(D,"repeat"),w.fillRect(0,0,x,b),w.drawImage(u,0,0,u.width,u.height,0,0,x,b)}let g=null;if(s){let x,b;if(c.symmetric&&u.width<e&&u.height<e)x=u.width,b=u.height;else if(u=this.#e,i>e||o>e){const S=Math.min(e/i,e/o);x=Math.floor(i*S),b=Math.floor(o*S),this.#l||(u=this.#d(x,b))}const _=new OffscreenCanvas(x,b).getContext("2d",{willReadFrequently:!0});_.drawImage(u,0,0,u.width,u.height,0,0,x,b),g={width:x,height:b,data:_.getImageData(0,0,x,b).data}}return{canvas:f,width:h,height:p,imageData:g}}#d(e,t){const{width:s,height:i}=this.#e;let o=s,c=i,u=this.#e;for(;o>2*e||c>2*t;){const h=o,p=c;o>2*e&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),c>2*t&&(c=c>=16384?Math.floor(c/2)-1:Math.ceil(c/2));const f=new OffscreenCanvas(o,c);f.getContext("2d").drawImage(u,0,0,h,p,0,0,o,c),u=f.transferToImageBitmap()}return u}#p(){const[e,t]=this.parentDimensions,{width:s,height:i}=this,o=new yn,c=Math.ceil(s*e*o.sx),u=Math.ceil(i*t*o.sy),h=this.#a;if(!h||h.width===c&&h.height===u)return;h.width=c,h.height=u;const p=this.#l?this.#e:this.#d(c,u),f=h.getContext("2d");f.filter=this._uiManager.hcmFilter,f.drawImage(p,0,0,p.width,p.height,0,0,c,u)}#x(e){if(e){if(this.#l){const i=this._uiManager.imageManager.getSvgUrl(this.#t);if(i)return i}const t=document.createElement("canvas");return{width:t.width,height:t.height}=this.#e,t.getContext("2d").drawImage(this.#e,0,0),t.toDataURL()}if(this.#l){const[t,s]=this.pageDimensions,i=Math.round(this.width*t*wa.PDF_TO_CSS_UNITS),o=Math.round(this.height*s*wa.PDF_TO_CSS_UNITS),c=new OffscreenCanvas(i,o);return c.getContext("2d").drawImage(this.#e,0,0,this.#e.width,this.#e.height,0,0,i,o),c.transferToImageBitmap()}return structuredClone(this.#e)}static async deserialize(e,t,s){let i=null,o=!1;if(e instanceof Pw){const{data:{rect:_,rotation:S,id:A,structParent:L,popupRef:O,richText:D,contentsObj:I,creationDate:C,modificationDate:P},container:k,parent:{page:{pageNumber:N}},canvas:M}=e;let H,F;M?(delete e.canvas,{id:H,bitmap:F}=s.imageManager.getFromCanvas(k.id,M),M.remove()):(o=!0,e._hasNoCanvas=!0);const V=(await t._structTree.getAriaAttributes(`${qm}${A}`))?.get("aria-label")||"";i=e={annotationType:je.STAMP,bitmapId:H,bitmap:F,pageIndex:N-1,rect:_.slice(0),rotation:S,annotationElementId:A,id:A,deleted:!1,accessibilityData:{decorative:!1,altText:V},isSvg:!1,structParent:L,popupRef:O,richText:D,comment:I?.str||null,creationDate:C,modificationDate:P}}const c=await super.deserialize(e,t,s),{rect:u,bitmap:h,bitmapUrl:p,bitmapId:f,isSvg:g,accessibilityData:x}=e;o?(s.addMissingCanvas(e.id,c),c.#o=!0):f&&s.imageManager.isValidId(f)?(c.#t=f,h&&(c.#e=h)):c.#s=p,c.#l=g;const[b,w]=c.pageDimensions;return c.width=(u[2]-u[0])/b,c.height=(u[3]-u[1])/w,x&&(c.altTextData=x),c._initialData=i,e.comment&&c.setCommentData(e),c.#h=!!i,c}serialize(e=!1,t=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s=Object.assign(super.serialize(e),{bitmapId:this.#t,isSvg:this.#l});if(this.addComment(s),e)return s.bitmapUrl=this.#x(!0),s.accessibilityData=this.serializeAltText(!0),s.isCopy=!0,s;const{decorative:i,altText:o}=this.serializeAltText(!1);if(!i&&o&&(s.accessibilityData={type:"Figure",alt:o}),this.annotationElementId){const u=this.#b(s);return u.isSame?null:(u.isSameAltText?delete s.accessibilityData:s.accessibilityData.structParent=this._initialData.structParent??-1,s.id=this.annotationElementId,delete s.bitmapId,s)}if(t===null)return s;t.stamps||=new Map;const c=this.#l?(s.rect[2]-s.rect[0])*(s.rect[3]-s.rect[1]):null;if(!t.stamps.has(this.#t))t.stamps.set(this.#t,{area:c,serialized:s}),s.bitmap=this.#x(!1);else if(this.#l){const u=t.stamps.get(this.#t);c>u.area&&(u.area=c,u.serialized.bitmap.close(),u.serialized.bitmap=this.#x(!1))}return s}#b(e){const{pageIndex:t,accessibilityData:{altText:s}}=this._initialData,i=e.pageIndex===t,o=(e.accessibilityData?.alt||"")===s;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&i&&o,isSameAltText:o}}renderAnnotationElement(e){return this.deleted?(e.hide(),null):(e.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}class Pn{#e;#t=!1;#n=null;#s=null;#r=null;#i=new Map;#a=!1;#o=!1;#c=!1;#l=null;#h=null;#u=null;#f=null;#g=null;#m=-1;#d;static _initialized=!1;static#p=new Map([Gt,ip,ET,Rt,On].map(e=>[e._editorType,e]));constructor({uiManager:e,pageIndex:t,div:s,structTreeLayer:i,accessibilityManager:o,annotationLayer:c,drawLayer:u,textLayer:h,viewport:p,l10n:f}){const g=[...Pn.#p.values()];if(!Pn._initialized){Pn._initialized=!0;for(const x of g)x.initialize(f,e)}e.registerEditorTypes(g),this.#d=e,this.pageIndex=t,this.div=s,this.#e=o,this.#n=c,this.viewport=p,this.#u=h,this.drawLayer=u,this._structTree=i,this.#d.addLayer(this)}get isEmpty(){return this.#i.size===0}get isInvisible(){return this.isEmpty&&this.#d.getMode()===je.NONE}updateToolbar(e){this.#d.updateToolbar(e)}updateMode(e=this.#d.getMode()){switch(this.#v(),e){case je.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case je.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case je.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;if(t.toggle("nonEditing",!1),e===je.POPUP)t.toggle("commentEditing",!0);else{t.toggle("commentEditing",!1);for(const s of Pn.#p.values())t.toggle(`${s._type}Editing`,e===s._editorType)}this.div.hidden=!1}hasTextLayer(e){return e===this.#u?.div}setEditingState(e){this.#d.setEditingState(e)}addCommands(e){this.#d.addCommands(e)}cleanUndoStack(e){this.#d.cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){this.#n?.div.classList.toggle("disabled",!e)}get#x(){return this.#i.size!==0?this.#i.values():this.#d.getEditors(this.pageIndex)}async enable(){this.#c=!0,this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),this.#g?.abort(),this.#g=null;const e=new Set;for(const s of this.#x)s.enableEditing(),s.show(!0),s.annotationElementId&&(this.#d.removeChangedExistingAnnotation(s),e.add(s.annotationElementId));const t=this.#n;if(t)for(const s of t.getEditableAnnotations()){if(s.hide(),this.#d.isDeletedAnnotationElement(s.data.id)||e.has(s.data.id))continue;const i=await this.deserialize(s);i&&(this.addOrRebuild(i),i.enableEditing())}this.#c=!1,this.#d._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){if(this.#o=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),this.#u&&!this.#g){this.#g=new AbortController;const s=this.#d.combinedSignal(this.#g);this.#u.div.addEventListener("pointerdown",i=>{const{clientX:c,clientY:u,timeStamp:h}=i,p=this.#m;if(h-p>500){this.#m=h;return}this.#m=-1;const{classList:f}=this.div;f.toggle("getElements",!0);const g=document.elementsFromPoint(c,u);if(f.toggle("getElements",!1),!this.div.contains(g[0]))return;let x;const b=new RegExp(`^${el}[0-9]+$`);for(const _ of g)if(b.test(_.id)){x=_.id;break}if(!x)return;const w=this.#i.get(x);w?.annotationElementId===null&&(i.stopPropagation(),i.preventDefault(),w.dblclick(i))},{signal:s,capture:!0})}const e=this.#n;if(e){const s=new Map,i=new Map;for(const c of this.#x){if(c.disableEditing(),!c.annotationElementId){c.updateFakeAnnotationElement(e);continue}if(c.serialize()!==null){s.set(c.annotationElementId,c);continue}else i.set(c.annotationElementId,c);this.getEditableAnnotation(c.annotationElementId)?.show(),c.remove()}const o=e.getEditableAnnotations();for(const c of o){const{id:u}=c.data;if(this.#d.isDeletedAnnotationElement(u)){c.updateEdited({deleted:!0});continue}let h=i.get(u);if(h){h.resetAnnotationElement(c),h.show(!1),c.show();continue}h=s.get(u),h&&(this.#d.addChangedExistingAnnotation(h),h.renderAnnotationElement(c)&&h.show(!1)),c.show()}}this.#v(),this.isEmpty&&(this.div.hidden=!0);const{classList:t}=this.div;for(const s of Pn.#p.values())t.remove(`${s._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),this.#o=!1}getEditableAnnotation(e){return this.#n?.getEditableAnnotation(e)||null}setActiveEditor(e){this.#d.getActive()!==e&&this.#d.setActiveEditor(e)}enableTextSelection(){if(this.div.tabIndex=-1,this.#u?.div&&!this.#f){this.#f=new AbortController;const e=this.#d.combinedSignal(this.#f);this.#u.div.addEventListener("pointerdown",this.#b.bind(this),{signal:e}),this.#u.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#u?.div&&this.#f&&(this.#f.abort(),this.#f=null,this.#u.div.classList.remove("highlighting"))}#b(e){this.#d.unselectAll();const{target:t}=e;if(t===this.#u.div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&this.#u.div.contains(t)){const{isMac:s}=Yt.platform;if(e.button!==0||e.ctrlKey&&s)return;this.#d.showAllEditors("highlight",!0,!0),this.#u.div.classList.add("free"),this.toggleDrawing(),Rt.startHighlighting(this,this.#d.direction==="ltr",{target:this.#u.div,x:e.x,y:e.y}),this.#u.div.addEventListener("pointerup",()=>{this.#u.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#d._signal}),e.preventDefault()}}enableClick(){if(this.#s)return;this.#s=new AbortController;const e=this.#d.combinedSignal(this.#s);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const t=this.pointerup.bind(this);this.div.addEventListener("pointerup",t,{signal:e}),this.div.addEventListener("pointercancel",t,{signal:e})}disableClick(){this.#s?.abort(),this.#s=null}attach(e){this.#i.set(e.id,e);const{annotationElementId:t}=e;t&&this.#d.isDeletedAnnotationElement(t)&&this.#d.removeDeletedAnnotationElement(e)}detach(e){this.#i.delete(e.id),this.#e?.removePointerInTextLayer(e.contentDiv),!this.#o&&e.annotationElementId&&this.#d.addDeletedAnnotationElement(e)}remove(e){this.detach(e),this.#d.removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){e.parent!==this&&(e.parent&&e.annotationElementId&&(this.#d.addDeletedAnnotationElement(e.annotationElementId),be.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),e.parent?.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),this.#d.addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!this.#c),this.#d.addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!this.#r&&(e._focusEventsAllowed=!1,this.#r=setTimeout(()=>{this.#r=null,e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this.#d._signal}),t.focus())},0)),e._structTreeParentId=this.#e?.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||=this,e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),s=()=>{e.remove()};this.addCommands({cmd:t,undo:s,mustExec:!1})}getEditorByUID(e){for(const t of this.#i.values())if(t.uid===e)return t;return null}getNextId(){return this.#d.getId()}get#y(){return Pn.#p.get(this.#d.getMode())}combinedSignal(e){return this.#d.combinedSignal(e)}#N(e){const t=this.#y;return t?new t.prototype.constructor(e):null}canCreateNewEmptyEditor(){return this.#y?.canCreateNewEmptyEditor()}async pasteEditor(e,t){this.updateToolbar(e),await this.#d.updateMode(e.mode);const{offsetX:s,offsetY:i}=this.#A(),o=this.getNextId(),c=this.#N({parent:this,id:o,x:s,y:i,uiManager:this.#d,isCentered:!0,...t});c&&this.add(c)}async deserialize(e){return await Pn.#p.get(e.annotationType??e.annotationEditorType)?.deserialize(e,this,this.#d)||null}createAndAddNewEditor(e,t,s={}){const i=this.getNextId(),o=this.#N({parent:this,id:i,x:e.offsetX,y:e.offsetY,uiManager:this.#d,isCentered:t,...s});return o&&this.add(o),o}get boundingClientRect(){return this.div.getBoundingClientRect()}#A(){const{x:e,y:t,width:s,height:i}=this.boundingClientRect,o=Math.max(0,e),c=Math.max(0,t),u=Math.min(window.innerWidth,e+s),h=Math.min(window.innerHeight,t+i),p=(o+u)/2-e,f=(c+h)/2-t,[g,x]=this.viewport.rotation%180===0?[p,f]:[f,p];return{offsetX:g,offsetY:x}}addNewEditor(e={}){this.createAndAddNewEditor(this.#A(),!0,e)}setSelected(e){this.#d.setSelected(e)}toggleSelected(e){this.#d.toggleSelected(e)}unselect(e){this.#d.unselect(e)}pointerup(e){const{isMac:t}=Yt.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div||!this.#a||(this.#a=!1,this.#y?.isDrawer&&this.#y.supportMultipleDrawings))return;if(!this.#t){this.#t=!0;return}const s=this.#d.getMode();if(s===je.STAMP||s===je.SIGNATURE){this.#d.unselectAll();return}this.createAndAddNewEditor(e,!1)}pointerdown(e){if(this.#d.getMode()===je.HIGHLIGHT&&this.enableTextSelection(),this.#a){this.#a=!1;return}const{isMac:t}=Yt.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;if(this.#a=!0,this.#y?.isDrawer){this.startDrawingSession(e);return}const s=this.#d.getActive();this.#t=!s||s.isEmpty()}startDrawingSession(e){if(this.div.focus({preventScroll:!0}),this.#l){this.#y.startDrawing(this,this.#d,!1,e);return}this.#d.setCurrentDrawingSession(this),this.#l=new AbortController;const t=this.#d.combinedSignal(this.#l);this.div.addEventListener("blur",({relatedTarget:s})=>{s&&!this.div.contains(s)&&(this.#h=null,this.commitOrRemove())},{signal:t}),this.#y.startDrawing(this,this.#d,!1,e)}pause(e){if(e){const{activeElement:t}=document;this.div.contains(t)&&(this.#h=t);return}this.#h&&setTimeout(()=>{this.#h?.focus(),this.#h=null},0)}endDrawingSession(e=!1){return this.#l?(this.#d.setCurrentDrawingSession(null),this.#l.abort(),this.#l=null,this.#h=null,this.#y.endDrawing(e)):null}findNewParent(e,t,s){const i=this.#d.findParent(t,s);return i===null||i===this?!1:(i.changeParent(e),!0)}commitOrRemove(){return this.#l?(this.endDrawingSession(),!0):!1}onScaleChanging(){this.#l&&this.#y.onScaleChangingWhenDrawing(this)}destroy(){this.commitOrRemove(),this.#d.getActive()?.parent===this&&(this.#d.commitOrRemove(),this.#d.setActiveEditor(null)),this.#r&&(clearTimeout(this.#r),this.#r=null);for(const e of this.#i.values())this.#e?.removePointerInTextLayer(e.contentDiv),e.setParent(null),e.isAttachedToDOM=!1,e.div.remove();this.div=null,this.#i.clear(),this.#d.removeLayer(this)}#v(){for(const e of this.#i.values())e.isEmpty()&&e.remove()}render({viewport:e}){this.viewport=e,Gi(this.div,e);for(const t of this.#d.getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){this.#d.commitOrRemove(),this.#v();const t=this.viewport.rotation,s=e.rotation;if(this.viewport=e,Gi(this.div,{rotation:s}),t!==s)for(const i of this.#i.values())i.rotate(s)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return this.#d.viewParameters.realScale}}class $t{#e=null;#t=new Map;#n=new Map;static#s=0;constructor({pageIndex:e}){this.pageIndex=e}setParent(e){if(!this.#e){this.#e=e;return}if(this.#e!==e){if(this.#t.size>0)for(const t of this.#t.values())t.remove(),e.append(t);this.#e=e}}static get _svgFactory(){return Le(this,"_svgFactory",new al)}static#r(e,[t,s,i,o]){const{style:c}=e;c.top=`${100*s}%`,c.left=`${100*t}%`,c.width=`${100*i}%`,c.height=`${100*o}%`}#i(){const e=$t._svgFactory.create(1,1,!0);return this.#e.append(e),e.setAttribute("aria-hidden",!0),e}#a(e,t){const s=$t._svgFactory.createElement("clipPath");e.append(s);const i=`clip_${t}`;s.setAttribute("id",i),s.setAttribute("clipPathUnits","objectBoundingBox");const o=$t._svgFactory.createElement("use");return s.append(o),o.setAttribute("href",`#${t}`),o.classList.add("clip"),i}#o(e,t){for(const[s,i]of Object.entries(t))i===null?e.removeAttribute(s):e.setAttribute(s,i)}draw(e,t=!1,s=!1){const i=$t.#s++,o=this.#i(),c=$t._svgFactory.createElement("defs");o.append(c);const u=$t._svgFactory.createElement("path");c.append(u);const h=`path_p${this.pageIndex}_${i}`;u.setAttribute("id",h),u.setAttribute("vector-effect","non-scaling-stroke"),t&&this.#n.set(i,u);const p=s?this.#a(c,h):null,f=$t._svgFactory.createElement("use");return o.append(f),f.setAttribute("href",`#${h}`),this.updateProperties(o,e),this.#t.set(i,o),{id:i,clipPathId:`url(#${p})`}}drawOutline(e,t){const s=$t.#s++,i=this.#i(),o=$t._svgFactory.createElement("defs");i.append(o);const c=$t._svgFactory.createElement("path");o.append(c);const u=`path_p${this.pageIndex}_${s}`;c.setAttribute("id",u),c.setAttribute("vector-effect","non-scaling-stroke");let h;if(t){const g=$t._svgFactory.createElement("mask");o.append(g),h=`mask_p${this.pageIndex}_${s}`,g.setAttribute("id",h),g.setAttribute("maskUnits","objectBoundingBox");const x=$t._svgFactory.createElement("rect");g.append(x),x.setAttribute("width","1"),x.setAttribute("height","1"),x.setAttribute("fill","white");const b=$t._svgFactory.createElement("use");g.append(b),b.setAttribute("href",`#${u}`),b.setAttribute("stroke","none"),b.setAttribute("fill","black"),b.setAttribute("fill-rule","nonzero"),b.classList.add("mask")}const p=$t._svgFactory.createElement("use");i.append(p),p.setAttribute("href",`#${u}`),h&&p.setAttribute("mask",`url(#${h})`);const f=p.cloneNode();return i.append(f),p.classList.add("mainOutline"),f.classList.add("secondaryOutline"),this.updateProperties(i,e),this.#t.set(s,i),s}finalizeDraw(e,t){this.#n.delete(e),this.updateProperties(e,t)}updateProperties(e,t){if(!t)return;const{root:s,bbox:i,rootClass:o,path:c}=t,u=typeof e=="number"?this.#t.get(e):e;if(u){if(s&&this.#o(u,s),i&&$t.#r(u,i),o){const{classList:h}=u;for(const[p,f]of Object.entries(o))h.toggle(p,f)}if(c){const p=u.firstChild.firstChild;this.#o(p,c)}}}updateParent(e,t){if(t===this)return;const s=this.#t.get(e);s&&(t.#e.append(s),this.#t.delete(e),t.#t.set(e,s))}remove(e){this.#n.delete(e),this.#e!==null&&(this.#t.get(e).remove(),this.#t.delete(e))}destroy(){this.#e=null;for(const e of this.#t.values())e.remove();this.#t.clear(),this.#n.clear()}}globalThis._pdfjsTestingUtils={HighlightOutliner:fm};globalThis.pdfjsLib={AbortException:fi,AnnotationEditorLayer:Pn,AnnotationEditorParamsType:Ue,AnnotationEditorType:je,AnnotationEditorUIManager:mi,AnnotationLayer:np,AnnotationMode:Un,AnnotationType:kt,applyOpacity:uw,build:Dw,ColorPicker:zs,createValidAbsoluteUrl:Im,CSSConstants:dw,DOMSVGFactory:al,DrawLayer:$t,FeatureTest:Yt,fetchData:Ir,findContrastColor:hw,getDocument:Zm,getFilenameFromUrl:ow,getPdfFilenameFromUrl:lw,getRGB:zr,getUuid:Hm,getXfaPageViewport:cw,GlobalWorkerOptions:Vi,ImageKind:Ko,InvalidPDFException:Rd,isDataScheme:bl,isPdfFile:tu,isValidExplicitDest:gw,MathClamp:cs,noContextMenu:qs,normalizeUnicode:aw,OPS:Rr,OutputScale:yn,PasswordResponses:nw,PDFDataRangeTransport:ep,PDFDateString:Dd,PDFWorker:Dr,PermissionFlag:sw,PixelsPerInch:wa,RenderingCancelledException:eu,renderRichText:Gm,ResponseException:tl,setLayerDimensions:Gi,shadow:Le,SignatureExtractor:ha,stopEvent:St,SupportedImageMimeTypes:Md,TextLayer:nl,TouchManager:wl,updateUrlHash:zm,Util:fe,VerbosityLevel:gl,version:Rw,XfaLayer:Vm};const jT=Object.freeze(Object.defineProperty({__proto__:null,AbortException:fi,AnnotationEditorLayer:Pn,AnnotationEditorParamsType:Ue,AnnotationEditorType:je,AnnotationEditorUIManager:mi,AnnotationLayer:np,AnnotationMode:Un,AnnotationType:kt,CSSConstants:dw,ColorPicker:zs,DOMSVGFactory:al,DrawLayer:$t,FeatureTest:Yt,GlobalWorkerOptions:Vi,ImageKind:Ko,InvalidPDFException:Rd,MathClamp:cs,OPS:Rr,OutputScale:yn,PDFDataRangeTransport:ep,PDFDateString:Dd,PDFWorker:Dr,PasswordResponses:nw,PermissionFlag:sw,PixelsPerInch:wa,RenderingCancelledException:eu,ResponseException:tl,SignatureExtractor:ha,SupportedImageMimeTypes:Md,TextLayer:nl,TouchManager:wl,Util:fe,VerbosityLevel:gl,XfaLayer:Vm,applyOpacity:uw,build:Dw,createValidAbsoluteUrl:Im,fetchData:Ir,findContrastColor:hw,getDocument:Zm,getFilenameFromUrl:ow,getPdfFilenameFromUrl:lw,getRGB:zr,getUuid:Hm,getXfaPageViewport:cw,isDataScheme:bl,isPdfFile:tu,isValidExplicitDest:gw,noContextMenu:qs,normalizeUnicode:aw,renderRichText:Gm,setLayerDimensions:Gi,shadow:Le,stopEvent:St,updateUrlHash:zm,version:Rw},Symbol.toStringTag,{value:"Module"}));var wb=Object.prototype.hasOwnProperty;function _b(r,e,t){for(t of r.keys())if(jr(t,e))return t}function jr(r,e){var t,s,i;if(r===e)return!0;if(r&&e&&(t=r.constructor)===e.constructor){if(t===Date)return r.getTime()===e.getTime();if(t===RegExp)return r.toString()===e.toString();if(t===Array){if((s=r.length)===e.length)for(;s--&&jr(r[s],e[s]););return s===-1}if(t===Set){if(r.size!==e.size)return!1;for(s of r)if(i=s,i&&typeof i=="object"&&(i=_b(e,i),!i)||!e.has(i))return!1;return!0}if(t===Map){if(r.size!==e.size)return!1;for(s of r)if(i=s[0],i&&typeof i=="object"&&(i=_b(e,i),!i)||!jr(s[1],e.get(i)))return!1;return!0}if(t===ArrayBuffer)r=new Uint8Array(r),e=new Uint8Array(e);else if(t===DataView){if((s=r.byteLength)===e.byteLength)for(;s--&&r.getInt8(s)===e.getInt8(s););return s===-1}if(ArrayBuffer.isView(r)){if((s=r.byteLength)===e.byteLength)for(;s--&&r[s]===e[s];);return s===-1}if(!t||typeof r=="object"){s=0;for(t in r)if(wb.call(r,t)&&++s&&!wb.call(e,t)||!(t in e)||!jr(r[t],e[t]))return!1;return Object.keys(e).length===s}}return r!==r&&e!==e}function Sl(r){let e=!1;return{promise:new Promise((s,i)=>{r.then(o=>!e&&s(o)).catch(o=>!e&&i(o))}),cancel(){e=!0}}}const CT=["onCopy","onCut","onPaste"],TT=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],kT=["onFocus","onBlur"],RT=["onInput","onInvalid","onReset","onSubmit"],DT=["onLoad","onError"],MT=["onKeyDown","onKeyPress","onKeyUp"],LT=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],OT=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],BT=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],PT=["onSelect"],FT=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],UT=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],IT=["onScroll"],zT=["onWheel"],HT=["onAnimationStart","onAnimationEnd","onAnimationIteration"],qT=["onTransitionEnd"],VT=["onToggle"],GT=["onChange"],$T=[...CT,...TT,...kT,...RT,...DT,...MT,...LT,...OT,...BT,...PT,...FT,...UT,...IT,...zT,...HT,...qT,...GT,...VT];function zw(r,e){const t={};for(const s of $T){const i=r[s];i&&(e?t[s]=(o=>i(o,e(s))):t[s]=i)}return t}var YT="Invariant failed";function lt(r,e){if(!r)throw new Error(YT)}var $f,Ab;function XT(){if(Ab)return $f;Ab=1;var r=function(){};return $f=r,$f}var WT=XT();const us=kb(WT),Hw=R.createContext(null),KT="noopener noreferrer nofollow";class QT{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(e){this.pdfDocument=e}setViewer(e){this.pdfViewer=e}setExternalLinkRel(e){this.externalLinkRel=e}setExternalLinkTarget(e){this.externalLinkTarget=e}setHash(){}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return lt(this.pdfViewer),this.pdfViewer.currentPageNumber||0}set page(e){lt(this.pdfViewer),this.pdfViewer.currentPageNumber=e}get rotation(){return 0}set rotation(e){}addLinkAttributes(e,t,s){e.href=t,e.rel=this.externalLinkRel||KT,e.target=s?"_blank":this.externalLinkTarget||""}goToDestination(e){return new Promise(t=>{lt(this.pdfDocument),lt(e),typeof e=="string"?this.pdfDocument.getDestination(e).then(t):Array.isArray(e)?t(e):e.then(t)}).then(t=>{lt(Array.isArray(t));const s=t[0];new Promise(i=>{lt(this.pdfDocument),s instanceof Object?this.pdfDocument.getPageIndex(s).then(o=>{i(o)}).catch(()=>{lt(!1)}):typeof s=="number"?i(s):lt(!1)}).then(i=>{const o=i+1;lt(this.pdfViewer),lt(o>=1&&o<=this.pagesCount),this.pdfViewer.scrollPageIntoView({dest:t,pageIndex:i,pageNumber:o})})})}goToPage(e){const t=e-1;lt(this.pdfViewer),lt(e>=1&&e<=this.pagesCount),this.pdfViewer.scrollPageIntoView({pageIndex:t,pageNumber:e})}goToXY(){}cachePageRef(){}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}executeNamedAction(){}executeSetOCGState(){}isPageVisible(){return!0}isPageCached(){return!0}navigateTo(e){this.goToDestination(e)}}function Cr({children:r,type:e}){return l.jsx("div",{className:`react-pdf__message react-pdf__message--${e}`,children:r})}const Sb={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};function ZT(r,e){switch(e.type){case"RESOLVE":return{value:e.value,error:void 0};case"REJECT":return{value:!1,error:e.error};case"RESET":return{value:void 0,error:void 0};default:return r}}function Mr(){return R.useReducer(ZT,{value:void 0,error:void 0})}const iu=typeof window<"u",qw=iu&&window.location.protocol==="file:";function JT(r){return typeof r<"u"}function ca(r){return JT(r)&&r!==null}function ek(r){return typeof r=="string"}function tk(r){return r instanceof ArrayBuffer}function sk(r){return lt(iu),r instanceof Blob}function gm(r){return ek(r)&&/^data:/.test(r)}function Nb(r){lt(gm(r));const[e="",t=""]=r.split(",");return e.split(";").indexOf("base64")!==-1?atob(t):unescape(t)}function nk(){return iu&&window.devicePixelRatio||1}const Vw="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function Eb(){us(!qw,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${Vw}`)}function ik(){us(!qw,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${Vw}`)}function Aa(r){r?.cancel&&r.cancel()}function xm(r,e){return Object.defineProperty(r,"width",{get(){return this.getViewport({scale:e}).width},configurable:!0}),Object.defineProperty(r,"height",{get(){return this.getViewport({scale:e}).height},configurable:!0}),Object.defineProperty(r,"originalWidth",{get(){return this.getViewport({scale:1}).width},configurable:!0}),Object.defineProperty(r,"originalHeight",{get(){return this.getViewport({scale:1}).height},configurable:!0}),r}function Gw(r){return r.name==="AbortException"||r.name==="RenderingCancelledException"}function ak(r){return new Promise((e,t)=>{const s=new FileReader;s.onload=()=>{if(!s.result)return t(new Error("Error while reading a file."));e(s.result)},s.onerror=i=>{if(!i.target)return t(new Error("Error while reading a file."));const{error:o}=i.target;if(!o)return t(new Error("Error while reading a file."));switch(o.code){case o.NOT_FOUND_ERR:return t(new Error("Error while reading a file: File not found."));case o.SECURITY_ERR:return t(new Error("Error while reading a file: Security error."));case o.ABORT_ERR:return t(new Error("Error while reading a file: Aborted."));default:return t(new Error("Error while reading a file."))}},s.readAsArrayBuffer(r)})}const{PDFDataRangeTransport:rk}=jT,ok=(r,e)=>{switch(e){case Sb.NEED_PASSWORD:{const t=prompt("Enter the password to open this PDF file.");r(t);break}case Sb.INCORRECT_PASSWORD:{const t=prompt("Invalid password. Please try again.");r(t);break}}};function jb(r){return typeof r=="object"&&r!==null&&("data"in r||"range"in r||"url"in r)}const lk=R.forwardRef(function({children:e,className:t,error:s="Failed to load PDF file.",externalLinkRel:i,externalLinkTarget:o,file:c,inputRef:u,imageResourcesPath:h,loading:p="Loading PDF",noData:f="No PDF file specified.",onItemClick:g,onLoadError:x,onLoadProgress:b,onLoadSuccess:w,onPassword:_=ok,onSourceError:S,onSourceSuccess:A,options:L,renderMode:O,rotate:D,scale:I,...C},P){const[k,N]=Mr(),{value:M,error:H}=k,[F,V]=Mr(),{value:q,error:z}=F,E=R.useRef(new QT),j=R.useRef([]),G=R.useRef(void 0),Y=R.useRef(void 0);c&&c!==G.current&&jb(c)&&(us(!jr(c,G.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),G.current=c),L&&L!==Y.current&&(us(!jr(L,Y.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),Y.current=L);const ee=R.useRef({scrollPageIntoView:Ie=>{const{dest:Se,pageNumber:Ae,pageIndex:ze=Ae-1}=Ie;if(g){g({dest:Se,pageIndex:ze,pageNumber:Ae});return}const Ne=j.current[ze];if(Ne){Ne.scrollIntoView();return}us(!1,`An internal link leading to page ${Ae} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});R.useImperativeHandle(P,()=>({linkService:E,pages:j,viewer:ee}),[]);function B(){A&&A()}function $(){H&&(us(!1,H.toString()),S&&S(H))}function K(){N({type:"RESET"})}R.useEffect(K,[c,N]);const Q=R.useCallback(async()=>{if(!c)return null;if(typeof c=="string")return gm(c)?{data:Nb(c)}:(Eb(),{url:c});if(c instanceof rk)return{range:c};if(tk(c))return{data:c};if(iu&&sk(c))return{data:await ak(c)};if(lt(typeof c=="object"),lt(jb(c)),"url"in c&&typeof c.url=="string"){if(gm(c.url)){const{url:Ie,...Se}=c;return{data:Nb(Ie),...Se}}Eb()}return c},[c]);R.useEffect(()=>{const Ie=Sl(Q());return Ie.promise.then(Se=>{N({type:"RESOLVE",value:Se})}).catch(Se=>{N({type:"REJECT",error:Se})}),()=>{Aa(Ie)}},[Q,N]),R.useEffect(()=>{if(!(typeof M>"u")){if(M===!1){$();return}B()}},[M]);function Z(){q&&(w&&w(q),j.current=new Array(q.numPages),E.current.setDocument(q))}function de(){z&&(us(!1,z.toString()),x&&x(z))}R.useEffect(function(){V({type:"RESET"})},[V,M]),R.useEffect(function(){if(!M)return;const Se=L?{...M,...L}:M,Ae=Zm(Se);b&&(Ae.onProgress=b),_&&(Ae.onPassword=_);const ze=Ae;return ze.promise.then(Ne=>{ze.destroyed||V({type:"RESOLVE",value:Ne})}).catch(Ne=>{ze.destroyed||V({type:"REJECT",error:Ne})}),()=>{ze.destroy()}},[L,V,M]),R.useEffect(()=>{if(!(typeof q>"u")){if(q===!1){de();return}Z()}},[q]),R.useEffect(function(){E.current.setViewer(ee.current),E.current.setExternalLinkRel(i),E.current.setExternalLinkTarget(o)},[i,o]);const ue=R.useCallback((Ie,Se)=>{j.current[Ie]=Se},[]),xe=R.useCallback(Ie=>{delete j.current[Ie]},[]),pe=R.useMemo(()=>({imageResourcesPath:h,linkService:E.current,onItemClick:g,pdf:q,registerPage:ue,renderMode:O,rotate:D,scale:I,unregisterPage:xe}),[h,g,q,ue,O,D,I,xe]),Re=R.useMemo(()=>zw(C,()=>q),[C,q]);function ve(){function Ie(Ae){return!!Ae?.pdf}if(!Ie(pe))throw new Error("pdf is undefined");const Se=typeof e=="function"?e(pe):e;return l.jsx(Hw.Provider,{value:pe,children:Se})}function Xe(){return c?q==null?l.jsx(Cr,{type:"loading",children:typeof p=="function"?p():p}):q===!1?l.jsx(Cr,{type:"error",children:typeof s=="function"?s():s}):ve():l.jsx(Cr,{type:"no-data",children:typeof f=="function"?f():f})}return l.jsx("div",{className:Yd("react-pdf__Document",t),ref:u,...Re,children:Xe()})});function $w(){return R.useContext(Hw)}function Yw(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var t=r.filter(Boolean);if(t.length<=1){var s=t[0];return s||null}return function(o){for(var c=0,u=t;c<u.length;c++){var h=u[c];typeof h=="function"?h(o):h&&(h.current=o)}}}const Xw=R.createContext(null);function au(){return R.useContext(Xw)}function ck(){const r=$w(),e=au();lt(e);const t={...r,...e},{filterAnnotations:s,imageResourcesPath:i,linkService:o,onGetAnnotationsError:c,onGetAnnotationsSuccess:u,onRenderAnnotationLayerError:h,onRenderAnnotationLayerSuccess:p,page:f,pdf:g,renderForms:x,rotate:b,scale:w=1}=t;lt(g),lt(f),lt(o);const[_,S]=Mr(),{value:A,error:L}=_,O=R.useRef(null);us(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function D(){A&&u&&u(A)}function I(){L&&(us(!1,L.toString()),c&&c(L))}R.useEffect(function(){S({type:"RESET"})},[S,f]),R.useEffect(function(){if(!f)return;const M=Sl(f.getAnnotations()),H=M;return M.promise.then(F=>{S({type:"RESOLVE",value:F})}).catch(F=>{S({type:"REJECT",error:F})}),()=>{Aa(H)}},[S,f]),R.useEffect(()=>{if(A!==void 0){if(A===!1){I();return}D()}},[A]);function C(){p&&p()}function P(N){us(!1,`${N}`),h&&h(N)}const k=R.useMemo(()=>f.getViewport({scale:w,rotation:b}),[f,b,w]);return R.useEffect(function(){if(!g||!f||!o||!A)return;const{current:M}=O;if(!M)return;const H=k.clone({dontFlip:!0}),F={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,annotationStorage:g.annotationStorage,commentManager:null,div:M,l10n:null,linkService:o,page:f,structTreeLayer:null,viewport:H},V={annotations:s?s({annotations:A}):A,annotationStorage:g.annotationStorage,div:M,imageResourcesPath:i,linkService:o,page:f,renderForms:x,viewport:H};M.innerHTML="";try{new np(F).render(V),C()}catch(q){P(q)}return()=>{}},[A,s,i,o,f,g,x,k]),l.jsx("div",{className:Yd("react-pdf__Page__annotations","annotationLayer"),ref:O})}const Ww={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},dk=/^H(\d+)$/;function uk(r){return r in Ww}function ru(r){return"children"in r}function Kw(r){return ru(r)?r.children.length===1&&0 in r.children&&"id"in r.children[0]:!1}function hk(r){const e={};if(ru(r)){const{role:t}=r,s=t.match(dk);if(s)e.role="heading",e["aria-level"]=Number(s[1]);else if(uk(t)){const i=Ww[t];i&&(e.role=i)}}return e}function Qw(r){const e={};if(ru(r)){if(r.alt!==void 0&&(e["aria-label"]=r.alt),r.lang!==void 0&&(e.lang=r.lang),Kw(r)){const[t]=r.children;if(t){const s=Qw(t);return{...e,...s}}}}else"id"in r&&(e["aria-owns"]=r.id);return e}function fk(r){return r?{...hk(r),...Qw(r)}:null}function Zw({className:r,node:e}){const t=R.useMemo(()=>fk(e),[e]),s=R.useMemo(()=>!ru(e)||Kw(e)?null:e.children.map((i,o)=>l.jsx(Zw,{node:i},o)),[e]);return l.jsx("span",{className:r,...t,children:s})}function mk(){const r=au();lt(r);const{onGetStructTreeError:e,onGetStructTreeSuccess:t}=r,[s,i]=Mr(),{value:o,error:c}=s,{customTextRenderer:u,page:h}=r;function p(){o&&t&&t(o)}function f(){c&&(us(!1,c.toString()),e&&e(c))}return R.useEffect(function(){i({type:"RESET"})},[i,h]),R.useEffect(function(){if(u||!h)return;const x=Sl(h.getStructTree()),b=x;return x.promise.then(w=>{i({type:"RESOLVE",value:w})}).catch(w=>{i({type:"REJECT",error:w})}),()=>Aa(b)},[u,h,i]),R.useEffect(()=>{if(o!==void 0){if(o===!1){f();return}p()}},[o]),o?l.jsx(Zw,{className:"react-pdf__Page__structTree structTree",node:o}):null}const Cb=Un;function pk(r){const e=au();lt(e);const t={...e,...r},{_className:s,canvasBackground:i,devicePixelRatio:o=nk(),onRenderError:c,onRenderSuccess:u,page:h,renderForms:p,renderTextLayer:f,rotate:g,scale:x}=t,{canvasRef:b}=r;lt(h);const w=R.useRef(null);function _(){h&&u&&u(xm(h,x))}function S(D){Gw(D)||(us(!1,D.toString()),c&&c(D))}const A=R.useMemo(()=>h.getViewport({scale:x*o,rotation:g}),[o,h,g,x]),L=R.useMemo(()=>h.getViewport({scale:x,rotation:g}),[h,g,x]);R.useEffect(function(){if(!h)return;h.cleanup();const{current:I}=w;if(!I)return;I.width=A.width,I.height=A.height,I.style.width=`${Math.floor(L.width)}px`,I.style.height=`${Math.floor(L.height)}px`,I.style.visibility="hidden";const C={annotationMode:p?Cb.ENABLE_FORMS:Cb.ENABLE,canvas:I,canvasContext:I.getContext("2d",{alpha:!1}),viewport:A};i&&(C.background=i);const P=h.render(C),k=P;return P.promise.then(()=>{I.style.visibility="",_()}).catch(S),()=>Aa(k)},[i,h,p,A,L]);const O=R.useCallback(()=>{const{current:D}=w;D&&(D.width=0,D.height=0)},[]);return R.useEffect(()=>O,[O]),l.jsx("canvas",{className:`${s}__canvas`,dir:"ltr",ref:Yw(b,w),style:{display:"block",userSelect:"none"},children:f?l.jsx(mk,{}):null})}function gk(r){return"str"in r}function xk(){const r=au();lt(r);const{customTextRenderer:e,onGetTextError:t,onGetTextSuccess:s,onRenderTextLayerError:i,onRenderTextLayerSuccess:o,page:c,pageIndex:u,pageNumber:h,rotate:p,scale:f}=r;lt(c);const[g,x]=Mr(),{value:b,error:w}=g,_=R.useRef(null);us(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function S(){b&&s&&s(b)}function A(){w&&(us(!1,w.toString()),t&&t(w))}R.useEffect(function(){x({type:"RESET"})},[c,x]),R.useEffect(function(){if(!c)return;const k=Sl(c.getTextContent()),N=k;return k.promise.then(M=>{x({type:"RESOLVE",value:M})}).catch(M=>{x({type:"REJECT",error:M})}),()=>Aa(N)},[c,x]),R.useEffect(()=>{if(b!==void 0){if(b===!1){A();return}S()}},[b]);const L=R.useCallback(()=>{o&&o()},[o]),O=R.useCallback(P=>{Gw(P)||(us(!1,P.toString()),i&&i(P))},[i]);function D(){const P=_.current;P&&P.classList.add("selecting")}function I(){const P=_.current;P&&P.classList.remove("selecting")}const C=R.useMemo(()=>c.getViewport({scale:f,rotation:p}),[c,p,f]);return R.useLayoutEffect(function(){if(!c||!b)return;const{current:k}=_;if(!k)return;k.innerHTML="";const N=c.streamTextContent({includeMarkedContent:!0}),M={container:k,textContentSource:N,viewport:C},H=new nl(M),F=H;return H.render().then(()=>{const V=document.createElement("div");V.className="endOfContent",k.append(V);const q=k.querySelectorAll('[role="presentation"]');if(e){let z=0;b.items.forEach((E,j)=>{if(!gk(E))return;const G=q[z];if(!G)return;const Y=e({pageIndex:u,pageNumber:h,itemIndex:j,...E});G.innerHTML=Y,z+=E.str&&E.hasEOL?2:1})}L()}).catch(O),()=>Aa(F)},[e,O,L,c,u,h,b,C]),l.jsx("div",{className:Yd("react-pdf__Page__textContent","textLayer"),onMouseUp:I,onMouseDown:D,ref:_})}const Tb=1;function yk(r){const t={...$w(),...r},{_className:s="react-pdf__Page",_enableRegisterUnregisterPage:i=!0,canvasBackground:o,canvasRef:c,children:u,className:h,customRenderer:p,customTextRenderer:f,devicePixelRatio:g,error:x="Failed to load the page.",filterAnnotations:b,height:w,inputRef:_,loading:S="Loading page",noData:A="No page specified.",onGetAnnotationsError:L,onGetAnnotationsSuccess:O,onGetStructTreeError:D,onGetStructTreeSuccess:I,onGetTextError:C,onGetTextSuccess:P,onLoadError:k,onLoadSuccess:N,onRenderAnnotationLayerError:M,onRenderAnnotationLayerSuccess:H,onRenderError:F,onRenderSuccess:V,onRenderTextLayerError:q,onRenderTextLayerSuccess:z,pageIndex:E,pageNumber:j,pdf:G,registerPage:Y,renderAnnotationLayer:ee=!0,renderForms:B=!1,renderMode:$="canvas",renderTextLayer:K=!0,rotate:Q,scale:Z=Tb,unregisterPage:de,width:ue,...xe}=t,[pe,Re]=Mr(),{value:ve,error:Xe}=pe,Ie=R.useRef(null);lt(G);const Se=ca(j)?j-1:E??null,Ae=j??(ca(E)?E+1:null),ze=Q??(ve?ve.rotate:null),Ne=R.useMemo(()=>{if(!ve)return null;let Je=1;const is=Z??Tb;if(ue||w){const rt=ve.getViewport({scale:1,rotation:ze});ue?Je=ue/rt.width:w&&(Je=w/rt.height)}return is*Je},[w,ve,ze,Z,ue]);R.useEffect(function(){return()=>{ca(Se)&&i&&de&&de(Se)}},[i,G,Se,de]);function Ze(){if(N){if(!ve||!Ne)return;N(xm(ve,Ne))}if(i&&Y){if(!ca(Se)||!Ie.current)return;Y(Se,Ie.current)}}function wt(){Xe&&(us(!1,Xe.toString()),k&&k(Xe))}R.useEffect(function(){Re({type:"RESET"})},[Re,G,Se]),R.useEffect(function(){if(!G||!Ae)return;const is=Sl(G.getPage(Ae)),rt=is;return is.promise.then(Wt=>{Re({type:"RESOLVE",value:Wt})}).catch(Wt=>{Re({type:"REJECT",error:Wt})}),()=>Aa(rt)},[Re,G,Ae]),R.useEffect(()=>{if(ve!==void 0){if(ve===!1){wt();return}Ze()}},[ve,Ne]);const _t=R.useMemo(()=>ca(Se)&&Ae&&ca(ze)&&ca(Ne)?{_className:s,canvasBackground:o,customTextRenderer:f,devicePixelRatio:g,filterAnnotations:b,onGetAnnotationsError:L,onGetAnnotationsSuccess:O,onGetStructTreeError:D,onGetStructTreeSuccess:I,onGetTextError:C,onGetTextSuccess:P,onRenderAnnotationLayerError:M,onRenderAnnotationLayerSuccess:H,onRenderError:F,onRenderSuccess:V,onRenderTextLayerError:q,onRenderTextLayerSuccess:z,page:ve,pageIndex:Se,pageNumber:Ae,renderForms:B,renderTextLayer:K,rotate:ze,scale:Ne}:null,[s,o,f,g,b,L,O,D,I,C,P,M,H,F,V,q,z,ve,Se,Ae,B,K,ze,Ne]),ut=R.useMemo(()=>zw(xe,()=>ve&&(Ne?xm(ve,Ne):void 0)),[xe,ve,Ne]),Mt=`${Se}@${Ne}/${ze}`;function mt(){switch($){case"custom":return lt(p),l.jsx(p,{},`${Mt}_custom`);case"none":return null;default:return l.jsx(pk,{canvasRef:c},`${Mt}_canvas`)}}function De(){return K?l.jsx(xk,{},`${Mt}_text`):null}function Xt(){return ee?l.jsx(ck,{},`${Mt}_annotations`):null}function Rs(){function Je(rt){return!!rt?.page}if(!Je(_t))throw new Error("page is undefined");const is=typeof u=="function"?u(_t):u;return l.jsxs(Xw.Provider,{value:_t,children:[mt(),De(),Xt(),is]})}function qn(){return Ae?G===null||ve===void 0||ve===null?l.jsx(Cr,{type:"loading",children:typeof S=="function"?S():S}):G===!1||ve===!1?l.jsx(Cr,{type:"error",children:typeof x=="function"?x():x}):Rs():l.jsx(Cr,{type:"no-data",children:typeof A=="function"?A():A})}return l.jsx("div",{className:Yd(s,h),"data-page-number":Ae,ref:Yw(_,Ie),style:{"--scale-round-x":"1px","--scale-round-y":"1px","--scale-factor":"1","--user-unit":`${Ne}`,"--total-scale-factor":"calc(var(--scale-factor) * var(--user-unit))",backgroundColor:o||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"},...ut,children:qn()})}ik();Vi.workerSrc="pdf.worker.mjs";Vi.workerSrc=new URL("/assets/pdf.worker.min-qwK7q_zL.mjs",import.meta.url).toString();const bk=()=>{const[r,e]=R.useState([]),[t,s]=R.useState(!0),[i,o]=R.useState(null),[c,u]=R.useState(null),[h,p]=R.useState(null),[f,g]=R.useState(!1),[x,b]=R.useState(null),[w,_]=R.useState(null),[S,A]=R.useState(1),[L,O]=R.useState(1),[D,I]=R.useState(!1),C=typeof import.meta<"u"&&"https://school.superwingrouplivestock.farm/api"||"",P=C?`${C.replace(/\/$/,"")}/public/pdf-proxy?url=`:"",k=R.useMemo(()=>h?{data:h}:null,[h]);R.useEffect(()=>{(async()=>{try{const H=await hs.getTextBooks({page:L}),F=Array.isArray(H?.data?.data)&&H.data.data||Array.isArray(H?.data)&&H.data||[];e(q=>L===1?F:[...q,...F]);const V=H.data?.pagination;I(V?.has_more_pages||!1)}catch{o("Failed to load text books")}finally{s(!1)}})()},[L]),R.useEffect(()=>{(async()=>{if(!c)return;g(!0),b(null),p(null),_(null),A(1);const H=P?`${P}${encodeURIComponent(c)}`:c;try{const F=await fetch(H);if(!F.ok)throw new Error("Failed to load PDF");const V=await F.arrayBuffer();p(new Uint8Array(V))}catch{b("Failed to load PDF. Please download instead.")}finally{g(!1)}})()},[c,P]);const N=()=>{u(null),p(null),b(null),_(null),A(1)};return l.jsxs("div",{className:"min-h-screen bg-[#FFF8E1]",children:[l.jsx(Gs,{}),l.jsxs("div",{className:"flex",children:[l.jsx(An,{}),l.jsx("main",{className:"flex-1 px-4 md:px-8 py-6",children:l.jsxs("div",{className:"max-w-5xl mx-auto",children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-6",children:"Text Books"}),t&&l.jsx("div",{className:"text-center text-gray-600",children:"Loading..."}),i&&l.jsx("div",{className:"text-center text-red-600",children:i}),!t&&!i&&r.length===0&&l.jsx("div",{className:"text-center text-gray-600",children:"No text books available."}),l.jsx("div",{className:"grid gap-4",children:(Array.isArray(r)?r:[]).map(M=>l.jsxs("div",{className:"bg-white shadow-md rounded-lg p-4 flex flex-col md:flex-row gap-4",children:[M.image_url&&l.jsx("img",{src:M.image_url,alt:M.title,className:"w-32 h-32 object-cover rounded-md"}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:M.title}),l.jsx("p",{className:"text-sm text-gray-600 mt-1",children:M.description||"No description"}),l.jsxs("div",{className:"text-sm text-gray-500 mt-2 space-y-1",children:[l.jsxs("div",{children:["Class: ",M.class?.name||"-"]}),l.jsxs("div",{children:["Subject: ",M.subject?.name||"-"]}),l.jsxs("div",{children:["Teacher: ",M.teacher?.name||"-"]})]}),M.pdf_url&&l.jsx("button",{onClick:()=>u(M.pdf_url),className:"inline-flex items-center px-4 py-2 bg-amber-600 text-white rounded-md mt-3 hover:bg-amber-700 transition",children:" View PDF"})]})]},M.id))}),D&&l.jsx("div",{className:"mt-6 flex justify-center",children:l.jsx("button",{onClick:()=>O(M=>M+1),className:"px-6 py-3 bg-amber-600 text-white rounded-lg hover:bg-amber-700 transition",children:"Load More"})})]})})]}),l.jsx(_n,{}),c&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 p-0",children:l.jsxs("div",{className:"bg-white w-full h-full flex flex-col overflow-hidden",children:[l.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-gray-200",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Text Book PDF"}),l.jsx("button",{onClick:N,className:"text-gray-500 hover:text-gray-700",children:""})]}),l.jsxs("div",{className:"flex-1 bg-gray-900 flex flex-col",children:[l.jsxs("div",{className:"flex items-center justify-between px-4 py-2 bg-gray-800 text-gray-100 text-sm",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("span",{children:"Page"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{disabled:!w||S<=1,onClick:()=>A(M=>Math.max(1,M-1)),className:"px-2 py-1 bg-gray-700 rounded disabled:opacity-50",children:"Prev"}),l.jsx("span",{children:w?`${S} / ${w}`:"-- / --"}),l.jsx("button",{disabled:!w||S>=w,onClick:()=>A(M=>Math.min(w,M+1)),className:"px-2 py-1 bg-gray-700 rounded disabled:opacity-50",children:"Next"})]})]}),l.jsx("a",{href:c,download:!0,className:"px-3 py-1 bg-amber-600 text-white rounded hover:bg-amber-700 transition",children:"Download"})]}),l.jsxs("div",{className:"flex-1 overflow-auto flex items-center justify-center bg-gray-900",children:[f&&l.jsx("div",{className:"text-gray-200",children:"Loading PDF..."}),x&&l.jsxs("div",{className:"text-center text-gray-200 space-y-2",children:[l.jsx("div",{children:x}),l.jsx("a",{href:c,className:"px-3 py-2 bg-amber-600 text-white rounded hover:bg-amber-700 transition inline-block",download:!0,children:"Download PDF"})]}),!f&&!x&&h&&l.jsx(lk,{file:k,onLoadSuccess:({numPages:M})=>{_(M),A(1)},onLoadError:()=>b("Failed to render PDF"),children:l.jsx(yk,{pageNumber:S,width:Math.min(900,window.innerWidth-40)})})]})]})]})})]})},Wo={getPublic:r=>oe.get("/public/dictionary-entries",{params:r}),getPublicById:r=>oe.get(`/public/dictionary-entries/${r}`),getAll:r=>oe.get("/admin/dictionary-entries",{params:r}),getById:r=>oe.get(`/admin/dictionary-entries/${r}`),create:r=>oe.post("/admin/dictionary-entries",r),update:(r,e)=>oe.put(`/admin/dictionary-entries/${r}`,e),delete:r=>oe.delete(`/admin/dictionary-entries/${r}`)},vk=()=>{const[r,e]=R.useState([]),[t,s]=R.useState(!0),[i,o]=R.useState(!1),[c,u]=R.useState(null),[h,p]=R.useState(!1),[f,g]=R.useState(null),[x,b]=R.useState({english_word:"",myanmar_meaning:"",example:""}),[w,_]=R.useState("");R.useEffect(()=>{S()},[]);const S=async(C={})=>{s(!0);try{const P=await Wo.getAll(C);e(P.data?.data||P.data||[])}catch{u("Failed to load dictionary entries")}finally{s(!1)}},A=()=>{b({english_word:"",myanmar_meaning:"",example:""}),g(null)},L=async C=>{C.preventDefault(),o(!0);try{f?await Wo.update(f.id,x):await Wo.create(x),p(!1),A(),S({search:w})}catch{alert("Failed to save entry")}finally{o(!1)}},O=C=>{g(C),b({english_word:C.english_word||"",myanmar_meaning:C.myanmar_meaning||"",example:C.example||""}),p(!0)},D=async C=>{if(confirm("Delete this entry?"))try{await Wo.delete(C),S({search:w})}catch{alert("Failed to delete entry")}},I=async C=>{C.preventDefault(),await S({search:w})};return t?l.jsx("div",{children:"Loading..."}):l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Dictionary Entries"}),l.jsx("button",{onClick:()=>{A(),p(!0)},className:"bg-amber-600 text-white px-4 py-2 rounded-lg hover:bg-amber-700 transition",children:"+ Add Entry"})]}),l.jsxs("form",{onSubmit:I,className:"flex gap-2",children:[l.jsx("input",{value:w,onChange:C=>_(C.target.value),placeholder:"Search English or Myanmar...",className:"flex-1 px-4 py-2 border rounded-lg"}),l.jsx("button",{type:"submit",className:"px-4 py-2 bg-gray-100 rounded-lg hover:bg-gray-200",children:"Search"})]}),c&&l.jsx("div",{className:"text-red-600",children:c}),l.jsx("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"English"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Myanmar"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Example"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.map(C=>l.jsxs("tr",{className:"hover:bg-gray-50",children:[l.jsx("td",{className:"px-6 py-4 text-sm font-semibold text-gray-800",children:C.english_word}),l.jsx("td",{className:"px-6 py-4 text-sm text-gray-700",children:C.myanmar_meaning}),l.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:C.example||"-"}),l.jsxs("td",{className:"px-6 py-4 text-sm font-medium space-x-3",children:[l.jsx("button",{onClick:()=>O(C),className:"text-amber-600 hover:text-amber-800",children:"Edit"}),l.jsx("button",{onClick:()=>D(C.id),className:"text-red-600 hover:text-red-800",children:"Delete"})]})]},C.id))})]})}),h&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-2xl max-h-[90vh] overflow-auto p-6 space-y-4",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("div",{children:l.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:f?"Edit Entry":"Create Entry"})}),l.jsx("button",{onClick:()=>p(!1),className:"text-gray-500 hover:text-gray-700",children:""})]}),l.jsxs("form",{onSubmit:L,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"English Word *"}),l.jsx("input",{required:!0,value:x.english_word,onChange:C=>b({...x,english_word:C.target.value}),className:"w-full px-4 py-2 border rounded-lg"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Myanmar Meaning *"}),l.jsx("input",{required:!0,value:x.myanmar_meaning,onChange:C=>b({...x,myanmar_meaning:C.target.value}),className:"w-full px-4 py-2 border rounded-lg"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Example"}),l.jsx("textarea",{rows:3,value:x.example,onChange:C=>b({...x,example:C.target.value}),className:"w-full px-4 py-2 border rounded-lg"})]}),l.jsxs("div",{className:"flex justify-end space-x-3 pt-2",children:[l.jsx("button",{type:"button",onClick:()=>p(!1),className:"px-4 py-2 rounded-lg border border-gray-300 text-gray-700",children:"Cancel"}),l.jsx("button",{type:"submit",disabled:i,className:"px-4 py-2 rounded-lg bg-amber-600 text-white hover:bg-amber-700 transition disabled:opacity-60",children:i?"Saving...":f?"Update":"Create"})]})]})]})})]})},wk=()=>{const[r,e]=R.useState([]),[t,s]=R.useState(!0),[i,o]=R.useState(null),[c,u]=R.useState("");R.useEffect(()=>{h()},[]);const h=async(f={})=>{s(!0);try{const g=await Wo.getPublic(f);e(g.data?.data||g.data||[])}catch{o("Failed to load dictionary entries")}finally{s(!1)}},p=async f=>{f.preventDefault(),await h({search:c})};return l.jsxs("div",{className:"min-h-screen bg-[#FFF8E1]",children:[l.jsx(Gs,{}),l.jsxs("div",{className:"flex",children:[l.jsx(An,{}),l.jsx("main",{className:"flex-1 px-4 md:px-8 py-6",children:l.jsxs("div",{className:"max-w-5xl mx-auto",children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-4",children:"Dictionary"}),l.jsxs("form",{onSubmit:p,className:"flex gap-2 mb-6",children:[l.jsx("input",{value:c,onChange:f=>u(f.target.value),placeholder:"Search English or Myanmar...",className:"flex-1 px-4 py-2 border rounded-lg"}),l.jsx("button",{type:"submit",className:"px-4 py-2 bg-amber-600 text-white rounded-lg hover:bg-amber-700",children:"Search"})]}),t&&l.jsx("div",{children:"Loading..."}),i&&l.jsx("div",{className:"text-red-600",children:i}),!t&&!i&&r.length===0&&l.jsx("div",{className:"text-gray-600",children:"No entries found."}),l.jsx("div",{className:"space-y-3",children:r.map(f=>l.jsxs("div",{className:"bg-white shadow rounded-lg p-4",children:[l.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:f.english_word}),l.jsx("p",{className:"text-gray-700 mt-1",children:f.myanmar_meaning}),f.example&&l.jsxs("p",{className:"text-gray-500 mt-1 text-sm",children:["Example: ",f.example]})]},f.id))})]})})]}),l.jsx(_n,{})]})},rd={getAll:r=>oe.get("/admin/text-books",{params:r}),getById:r=>oe.get(`/admin/text-books/${r}`),create:r=>oe.post("/admin/text-books",r),update:(r,e)=>e instanceof FormData?(e.append("_method","PUT"),oe.post(`/admin/text-books/${r}`,e)):oe.put(`/admin/text-books/${r}`,e),delete:r=>oe.delete(`/admin/text-books/${r}`)},_k=()=>{const[r,e]=R.useState([]),[t,s]=R.useState([]),[i,o]=R.useState([]),[c,u]=R.useState([]),[h,p]=R.useState(!0),[f,g]=R.useState(!1),[x,b]=R.useState(null),[w,_]=R.useState(!1),[S,A]=R.useState(null),[L,O]=R.useState(null),[D,I]=R.useState(1),[C,P]=R.useState(null),[k,N]=R.useState({title:"",description:"",class_id:"",subject_id:"",teacher_id:"",pdf_file:null,image_file:null});R.useEffect(()=>{M(D)},[D]);const M=async(z=1)=>{p(!0);try{const[E,j,G,Y]=await Promise.all([rd.getAll({page:z}),wr.getAll({all:!0}),vr.getAll({all:!0}),Fm.getAll()]),ee=Array.isArray(E?.data?.data)&&E.data.data||Array.isArray(E?.data)&&E.data||[];e(ee),P(E.data?.pagination||null),s(j.data?.data||j.data||[]),o(G.data?.data||G.data||[]),u(Y.data?.data||[])}catch{b("Failed to load data")}finally{p(!1)}},H=()=>{N({title:"",description:"",class_id:"",subject_id:"",teacher_id:"",pdf_file:null,image_file:null}),A(null)},F=async z=>{z.preventDefault(),g(!0);try{const E=new FormData;E.append("title",k.title.trim()),E.append("description",k.description||""),E.append("class_id",String(k.class_id||"")),E.append("subject_id",String(k.subject_id||"")),E.append("teacher_id",String(k.teacher_id||"")),k.pdf_file&&E.append("pdf_file",k.pdf_file),k.image_file&&E.append("image_file",k.image_file),S?await rd.update(S.id,E):await rd.create(E),_(!1),H(),M(D)}catch(E){alert(E?.response?.data?.message||"Failed to save text book. Please check required fields (PDF is required on create).")}finally{g(!1)}},V=z=>{A(z),N({title:z.title||"",description:z.description||"",class_id:z.class_id||"",subject_id:z.subject_id||"",teacher_id:z.teacher_id||"",pdf_file:null,image_file:null}),_(!0)},q=async z=>{if(confirm("Delete this text book?"))try{await rd.delete(z),M(D)}catch{alert("Failed to delete text book")}};return h?l.jsx("div",{children:"Loading..."}):l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Text Books"}),l.jsx("button",{onClick:()=>{H(),_(!0)},className:"bg-amber-600 text-white px-4 py-2 rounded-lg hover:bg-amber-700 transition",children:"+ Add Text Book"})]}),x&&l.jsx("div",{className:"text-red-600",children:x}),l.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:[l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Title"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Class"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Subject"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Teacher"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"PDF"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.map(z=>l.jsxs("tr",{className:"hover:bg-gray-50",children:[l.jsx("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:z.title}),l.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:z.class?.name||"-"}),l.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:z.subject?.name||"-"}),l.jsx("td",{className:"px-6 py-4 text-sm text-gray-500",children:z.teacher?.name||"-"}),l.jsx("td",{className:"px-6 py-4 text-sm text-blue-600",children:z.pdf_url?l.jsx("button",{onClick:()=>O(z.pdf_url),className:"text-blue-600 hover:text-blue-800 underline",children:"View"}):"-"}),l.jsxs("td",{className:"px-6 py-4 text-sm font-medium space-x-3",children:[l.jsx("button",{onClick:()=>V(z),className:"text-amber-600 hover:text-amber-800",children:"Edit"}),l.jsx("button",{onClick:()=>q(z.id),className:"text-red-600 hover:text-red-800",children:"Delete"})]})]},z.id))})]}),C&&l.jsxs("div",{className:"flex items-center justify-between px-6 py-3 border-t border-gray-200",children:[l.jsx("button",{disabled:D<=1,onClick:()=>I(z=>Math.max(1,z-1)),className:"px-4 py-2 rounded-lg bg-gray-100 text-gray-700 disabled:opacity-50 hover:bg-gray-200 transition",children:"Previous"}),l.jsxs("span",{className:"text-sm text-gray-600",children:["Page ",C.current_page," of ",C.last_page]}),l.jsx("button",{disabled:!C.has_more_pages,onClick:()=>I(z=>z+1),className:"px-4 py-2 rounded-lg bg-amber-600 text-white disabled:opacity-50 hover:bg-amber-700 transition",children:"Next"})]})]}),w&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-3xl max-h-[90vh] overflow-auto p-6 space-y-4",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:S?"Edit Text Book":"Create Text Book"}),l.jsx("p",{className:"text-sm text-gray-600",children:"PDF file is required on create."})]}),l.jsx("button",{onClick:()=>_(!1),className:"text-gray-500 hover:text-gray-700",children:""})]}),l.jsxs("form",{onSubmit:F,className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title *"}),l.jsx("input",{required:!0,value:k.title,onChange:z=>N({...k,title:z.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-amber-500"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Class *"}),l.jsxs("select",{required:!0,value:k.class_id,onChange:z=>N({...k,class_id:z.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-amber-500",children:[l.jsx("option",{value:"",children:"Select class"}),t.map(z=>l.jsx("option",{value:z.id,children:z.name},z.id))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Subject *"}),l.jsxs("select",{required:!0,value:k.subject_id,onChange:z=>N({...k,subject_id:z.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-amber-500",children:[l.jsx("option",{value:"",children:"Select subject"}),i.map(z=>l.jsx("option",{value:z.id,children:z.name},z.id))]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Teacher *"}),l.jsxs("select",{required:!0,value:k.teacher_id,onChange:z=>N({...k,teacher_id:z.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-amber-500",children:[l.jsx("option",{value:"",children:"Select teacher"}),c.map(z=>l.jsx("option",{value:z.id,children:z.name},z.id))]})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),l.jsx("textarea",{rows:3,value:k.description,onChange:z=>N({...k,description:z.target.value}),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-amber-500",placeholder:"Optional description"})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["PDF File ",S?"(leave empty to keep current)":"*"]}),l.jsx("input",{type:"file",accept:"application/pdf",onChange:z=>N({...k,pdf_file:z.target.files?.[0]||null}),className:"w-full",required:!S})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cover Image (optional)"}),l.jsx("input",{type:"file",accept:"image/*",onChange:z=>N({...k,image_file:z.target.files?.[0]||null}),className:"w-full"})]})]}),l.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[l.jsx("button",{type:"button",onClick:()=>_(!1),className:"px-4 py-2 rounded-lg border border-gray-300 text-gray-700",children:"Cancel"}),l.jsx("button",{type:"submit",disabled:f,className:"px-4 py-2 rounded-lg bg-amber-600 text-white hover:bg-amber-700 transition disabled:opacity-60",children:f?"Saving...":S?"Update":"Create"})]})]})]})}),L&&l.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 p-0",children:l.jsxs("div",{className:"bg-white w-full h-full flex flex-col overflow-hidden",children:[l.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-gray-200",children:[l.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Text Book PDF"}),l.jsx("button",{onClick:()=>O(null),className:"text-gray-500 hover:text-gray-700",children:""})]}),l.jsx("div",{className:"flex-1 bg-gray-50",children:l.jsx("iframe",{src:`${L}#toolbar=1&navpanes=0`,title:"PDF Preview",className:"w-full h-full",frameBorder:"0"})})]})})]})};function Ak(){return l.jsx(EN,{children:l.jsx(zS,{children:l.jsx(_E,{children:l.jsxs(xS,{children:[l.jsx(qe,{path:"/admin/login",element:l.jsx(AE,{})}),l.jsx(qe,{path:"/admin/dashboard",element:l.jsx(zt,{children:l.jsx(Ht,{children:l.jsx(SE,{})})})}),l.jsx(qe,{path:"/admin/posts",element:l.jsx(zt,{children:l.jsx(Ht,{children:l.jsx(IE,{})})})}),l.jsx(qe,{path:"/admin/text-books",element:l.jsx(zt,{children:l.jsx(Ht,{children:l.jsx(_k,{})})})}),l.jsx(qe,{path:"/admin/categories",element:l.jsx(zt,{children:l.jsx(Ht,{children:l.jsx(zE,{})})})}),l.jsx(qe,{path:"/admin/dhammas",element:l.jsx(zt,{children:l.jsx(Ht,{children:l.jsx(HE,{})})})}),l.jsx(qe,{path:"/admin/donations",element:l.jsx(zt,{children:l.jsx(Ht,{children:l.jsx(qE,{})})})}),l.jsx(qe,{path:"/admin/biographies",element:l.jsx(zt,{children:l.jsx(Ht,{children:l.jsx(VE,{})})})}),l.jsx(qe,{path:"/admin/monasteries",element:l.jsx(zt,{children:l.jsx(Ht,{children:l.jsx(GE,{})})})}),l.jsx(qe,{path:"/admin/monastery-building-donations",element:l.jsx(zt,{children:l.jsx(Ht,{children:l.jsx($E,{})})})}),l.jsx(qe,{path:"/admin/contacts",element:l.jsx(zt,{children:l.jsx(Ht,{children:l.jsx(YE,{})})})}),l.jsx(qe,{path:"/admin/banners",element:l.jsx(zt,{children:l.jsx(Ht,{children:l.jsx(XE,{})})})}),l.jsx(qe,{path:"/admin/banner-texts",element:l.jsx(zt,{children:l.jsx(Ht,{children:l.jsx(WE,{})})})}),l.jsx(qe,{path:"/admin/academic-years",element:l.jsx(zt,{children:l.jsx(Ht,{children:l.jsx(KE,{})})})}),l.jsx(qe,{path:"/admin/subjects",element:l.jsx(zt,{children:l.jsx(Ht,{children:l.jsx(QE,{})})})}),l.jsx(qe,{path:"/admin/classes",element:l.jsx(zt,{children:l.jsx(Ht,{children:l.jsx(ZE,{})})})}),l.jsx(qe,{path:"/admin/lessons",element:l.jsx(zt,{children:l.jsx(Ht,{children:l.jsx(JE,{})})})}),l.jsx(qe,{path:"/admin/dictionary",element:l.jsx(zt,{children:l.jsx(Ht,{children:l.jsx(vk,{})})})}),l.jsx(qe,{path:"/admin/profile",element:l.jsx(zt,{children:l.jsx(Ht,{children:l.jsx(ej,{})})})}),l.jsx(qe,{path:"/admin/chat",element:l.jsx(zt,{children:l.jsx(Ht,{children:l.jsx(Sj,{})})})}),l.jsx(qe,{path:"/",element:l.jsx(kj,{})}),l.jsx(qe,{path:"/register",element:l.jsx(Uj,{})}),l.jsx(qe,{path:"/login",element:l.jsx(Ij,{})}),l.jsx(qe,{path:"/posts/:id",element:l.jsx(Rj,{})}),l.jsx(qe,{path:"/dhammas/:id",element:l.jsx(Dj,{})}),l.jsx(qe,{path:"/biographies",element:l.jsx(Mj,{})}),l.jsx(qe,{path:"/biographies/:id",element:l.jsx(Lj,{})}),l.jsx(qe,{path:"/donations",element:l.jsx(Oj,{})}),l.jsx(qe,{path:"/monasteries",element:l.jsx(Bj,{})}),l.jsx(qe,{path:"/lessons",element:l.jsx(Pj,{})}),l.jsx(qe,{path:"/lessons/:id",element:l.jsx(Fj,{})}),l.jsx(qe,{path:"/text-books",element:l.jsx(bk,{})}),l.jsx(qe,{path:"/dictionary",element:l.jsx(wk,{})}),l.jsx(qe,{path:"*",element:l.jsx(od,{to:"/",replace:!0})})]})})})})}vA.createRoot(document.getElementById("root")).render(l.jsx(R.StrictMode,{children:l.jsx(Ak,{})}));
